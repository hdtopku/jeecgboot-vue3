var h=(y,f,r)=>new Promise((o,n)=>{var u=t=>{try{p(r.next(t))}catch(l){n(l)}},c=t=>{try{p(r.throw(t))}catch(l){n(l)}},p=t=>t.done?o(t.value):Promise.resolve(t.value).then(u,c);p((r=r.apply(y,f)).next())});import{u as b,C as A}from"./jeecg-online-vendor-e26fc0e5.js";import{_ as B}from"./index-b7f613fe.js";import{n as N,s as P}from"./depart.user.api-98b5d533.js";import{d as M,c as V,k as i,U as g,a5 as d,a6 as x,f as F,a7 as I,u as s,F as L,a9 as k,V as R,n as w}from"./vue-705b7309.js";import"./antd-vue-vendor-cce59da1.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./index-ea73cedc.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-cc7eb3b4.js";import"./bem-f204c89d.js";import"./props-dec3c169.js";import"./useContextMenu-cafc8f96.js";const j={class:"bg-white m-4 mr-0 overflow-hidden"},q=M({__name:"DepartTree",emits:["select"],setup(y,{emit:f}){V("prefixCls");const{createMessage:r}=b();let o=i(!1),n=i([]),u=i([]),c=i([]),p=i(!0),t=i("2"),l=i(!1);function v(){o.value=!0,n.value=[],N().then(e=>{e.success?Array.isArray(e.result)&&(n.value=e.result,t.value=e.message,D()):r.warning(e.message)}).finally(()=>o.value=!1)}v();function D(){let e=[];n.value.forEach((a,_)=>{a.children&&a.children.length>0&&e.push(a.key),_===0&&m(a.id,a)}),e.length>0&&(E(),u.value=e)}function E(){return h(this,null,function*(){yield w(),l.value=!0,yield w(),l.value=!1})}function m(e,a){c.value=[e],a&&f("select",a)}function T(e){e?(o.value=!0,P({keyWord:e,myDeptSearch:"1"}).then(a=>{Array.isArray(a)?n.value=a:(r.warning("未查询到部门信息"),n.value=[])}).finally(()=>o.value=!1)):v()}function C(e,a){e.length>0&&c.value[0]!==e[0]?m(e[0],a.selectedNodes[0]):m(c.value[0])}function K(e){u.value=e,p.value=!1}return(e,a)=>{const _=g("a-empty"),S=g("a-spin");return d(),x("div",j,[F(S,{spinning:s(o)},{default:I(()=>[s(t)==="2"?(d(),x(L,{key:0},[s(l)?R("",!0):(d(),k(s(B),{key:0,title:"部门列表",toolbar:"",search:"",showLine:"",checkStrictly:!0,clickRowToExpand:!1,treeData:s(n),selectedKeys:s(c),expandedKeys:s(u),autoExpandParent:s(p),onSelect:C,onExpand:K,onSearch:T},null,8,["treeData","selectedKeys","expandedKeys","autoExpandParent"]))],64)):(d(),k(_,{key:1,description:"普通员工无此权限"}))]),_:1},8,["spinning"])])}}});const ne=A(q,[["__scopeId","data-v-892b3d18"]]);export{ne as default};
