var se=Object.defineProperty;var A=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var $=(d,i,t)=>i in d?se(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t,K=(d,i)=>{for(var t in i||(i={}))re.call(i,t)&&$(d,t,i[t]);if(A)for(var t of A(i))ce.call(i,t)&&$(d,t,i[t]);return d};var Q=(d,i,t)=>new Promise((c,m)=>{var x=a=>{try{g(t.next(a))}catch(u){m(u)}},y=a=>{try{g(t.throw(a))}catch(u){m(u)}},g=a=>a.done?c(a.value):Promise.resolve(a.value).then(x,y);g((t=t.apply(d,i)).next())});import{C as ue,f as C,b as j,a6 as z,u as de}from"./jeecg-online-vendor-a84f26e2.js";import{_ as me}from"./OneNativeModal.vue_vue_type_script_setup_true_lang-6e0cc290.js";import{t as N,g as pe,a4 as fe,n as ve}from"./index-797f995b.js";import{downloadFile as _e}from"./renderUtils-a2454e91.js";import{bv as ge,M as he}from"./antd-vue-vendor-04f0af1d.js";import{d as ye,k as l,r as ke,o as xe,V as v,a5 as f,a9 as O,a7 as n,aa as p,f as o,E as _,u as k,W as U,ab as we,a6 as h,F as R}from"./vue-5a09445c.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-70833b4a.js";import"./OneNativeForm-5b0373db.js";import"./JAddInput-7275d351.js";import"./areaDataUtil-994dc62e.js";import"./useFormItem-51923232.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./index-5e1edea3.js";import"./BasicModal-02606f87.js";import"./useWindowSizeFn-76d4329b.js";import"./JSelectUser-c48969f7.js";import"./props-6ce5d664.js";import"./JSelectBiz-9c436f80.js";import"./index-86570f8b.js";import"./index-8f3c0498.js";import"./bem-05093d2d.js";import"./props-17f0c5eb.js";import"./useContextMenu-3014907a.js";import"./depart.api-71c168b0.js";import"./JUpload.vue_vue_type_style_index_0_lang-b42545d1.js";/* empty css              */import"./JPopup-5cac5270.js";import"./JSelectDept-f9e74791.js";const be={class:"table-operator"},Ce={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},Ie=p("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),Se={style:{"font-weight":"600"}},De={key:0,style:{"font-size":"12px","font-style":"italic"}},Te=["src","preview"],je={key:0,style:{"font-size":"12px","font-style":"italic"}},ze=["onClick"],Ne={class:"ant-dropdown-link"},Oe=["onClick"],Re=p("a",null,"删除",-1),mt=ye({__name:"OneNativeList",setup(d){l(!1);const i=l({}),t=l(!1),c=l([]),m=l();ue();const x=l([{title:"文本",align:"center",dataIndex:"name"},{title:"字典下拉",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?C(c.value.xiala,e):""},{title:"字典单选",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?C(c.value.danxuan,e):""},{title:"字典多选",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?C(c.value.duoxuan,e):""},{title:"开关",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?C(c.value.kaiguan,e):""},{title:"日期",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"年月日时分秒",align:"center",dataIndex:"nyrsfm"},{title:"时间",align:"center",dataIndex:"shijian"},{title:"文件",align:"center",dataIndex:"wenjian"},{title:"图片",align:"center",dataIndex:"tupian"},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147}]),y=ke({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),g=l([]);l(!1);const a=l({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,s)=>s[0]+"-"+s[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0,total:0}),u=l([]),I=l([]),M=l({column:"createTime",order:"desc"}),E=l({}),{createMessage:X}=de();function q(e,s){u.value=e,I.value=s}function H({pagination:e,filters:s,sorter:r}){a.value=e,M.value=r,E.value=K({},s)}function J(){m.value.disableSubmit=!1,m.value.add()}function L(){u.value=[],I.value=[]}function W(){he.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>{j.delete({url:y.delete,data:{ids:u.value}},{joinParamsToUrl:!0}).then(()=>{S()})}})}function G(){let e=Object.assign(i.value,M.value,E.value);return e.field=Y(),e.pageNo=a.value.current,e.pageSize=a.value.pageSize,ve(e)}function Y(){let e="id,";return x.value.forEach(function(s){e+=","+s.dataIndex}),e}function P(e){e===1&&(a.value.current=1),t.value=!0;let s=G();j.get({url:y.list,params:s},{isTransformResponse:!1}).then(r=>{r.success?(g.value=r.result.records,r.result&&r.result.total?a.value.total=r.result.total:a.value.total=0):X.warning(r.message)}).finally(()=>{t.value=!1})}function Z(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),pe(e)}function ee(e){m.value.disableSubmit=!1,m.value.edit(e)}function te(e){m.value.disableSubmit=!0,m.value.edit(e)}function ae(e){j.delete({url:y.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(s=>{S()})}function ne(){return Q(this,null,function*(){c.value.flzds=yield fe({code:"B01"}),c.value.xiala=yield z("sex"),c.value.danxuan=yield z("sex"),c.value.duoxuan=yield z("urgent_level")})}function S(){u.value=[],I.value=[],P(1)}return xe(()=>{c.value.kaiguan=[{text:"是",value:"1"},{text:"否",value:"2"}],P(),ne()}),(e,s)=>{const r=v("a-button"),D=v("a-menu-item"),F=v("a-menu"),V=v("a-dropdown"),oe=v("a-divider"),ie=v("a-table"),le=v("a-card");return f(),O(le,{bordered:!1},{default:n(()=>[p("div",be,[o(r,{onClick:J,type:"primary",preIcon:"ant-design:plus"},{default:n(()=>[_("新增")]),_:1}),u.value.length>0?(f(),O(V,{key:0},{overlay:n(()=>[o(F,null,{default:n(()=>[o(D,{key:"1",onClick:W},{default:n(()=>[o(k(N),{icon:"ant-design:delete-outlined"}),_(" 删除 ")]),_:1})]),_:1})]),default:n(()=>[o(r,null,{default:n(()=>[_("批量操作 "),o(k(N),{icon:"mdi:chevron-down"})]),_:1})]),_:1})):U("",!0)]),p("div",null,[p("div",Ce,[Ie,_(" 已选择 "),p("a",Se,we(u.value.length),1),_("项 "),p("a",{style:{"margin-left":"24px"},onClick:L},"清空")]),o(ie,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:x.value,dataSource:g.value,pagination:a.value,loading:t.value,rowSelection:{selectedRowKeys:u.value,onChange:q},onChange:H},{bodyCell:n(({column:T,text:w,record:b})=>[T.dataIndex==="tupian"?(f(),h(R,{key:0},[w?(f(),h("img",{key:1,src:Z(w),preview:b.id,alt:"",class:"anty-img-wrap"},null,8,Te)):(f(),h("span",De,"无图片"))],64)):T.dataIndex==="wenjian"?(f(),h(R,{key:1},[w?(f(),O(r,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:B=>k(_e)(w)},{default:n(()=>[_(" 下载 ")]),_:2},1032,["onClick"])):(f(),h("span",je,"无文件"))],64)):T.dataIndex==="action"?(f(),h(R,{key:2},[p("a",{onClick:B=>ee(b)},"编辑",8,ze),o(oe,{type:"vertical"}),o(V,null,{overlay:n(()=>[o(F,{class:"antd-more"},{default:n(()=>[o(D,null,{default:n(()=>[p("a",{onClick:B=>te(b)},"详情",8,Oe)]),_:2},1024),o(D,null,{default:n(()=>[o(k(ge),{title:"确定删除吗?",onConfirm:()=>ae(b.id)},{default:n(()=>[Re]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[p("a",Ne,[_("更多 "),o(k(N),{icon:"mdi-light:chevron-down"})])]),_:2},1024)],64)):U("",!0)]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(me,{ref_key:"oneProtogenesisModal",ref:m,onOk:S},null,512)]),_:1})}}});export{mt as default};
