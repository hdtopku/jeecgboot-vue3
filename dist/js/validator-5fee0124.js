var f=(r,e,t)=>new Promise((s,n)=>{var a=i=>{try{m(t.next(i))}catch(o){n(o)}},c=i=>{try{m(t.throw(i))}catch(o){n(o)}},m=i=>i.done?s(i.value):Promise.resolve(i.value).then(a,c);m((t=t.apply(r,e)).next())});import{d as l}from"./jeecg-online-vendor-658239c9.js";import{d as u}from"./user.api-32d45f59.js";import"./vue-bcbaddf9.js";import"./antd-vue-vendor-a78909e6.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-9edfd3ae.js";import"./lodash-es-vendor-9b741fb8.js";const v={rule(r,e){if(r==="email")return this.email(e);if(r==="phone")return this.phone(e)},email(r){return[{required:r||!1,validator:(e,t)=>f(this,null,function*(){return r==!0&&!t?Promise.reject("请输入邮箱!"):t&&!new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)?Promise.reject("请输入正确邮箱格式!"):Promise.resolve()}),trigger:"change"}]},phone(r){return[{required:r,validator:(e,t)=>f(this,null,function*(){return r&&!t?Promise.reject("请输入手机号码1!"):/^1[3456789]\d{9}$/.test(t)?Promise.resolve():Promise.reject("手机号码格式有误")}),trigger:"change"}]},startTime(r,e){return[{required:e||!1,validator:(t,s)=>e&&!s?Promise.reject("请选择开始时间"):r&&s&&l(r).isBefore(s)?Promise.reject("开始时间需小于结束时间"):Promise.resolve(),trigger:"change"}]},endTime(r,e){return[{required:e||!1,validator:(t,s)=>e&&!s?Promise.reject("请选择结束时间"):r&&s&&l(s).isBefore(r)?Promise.reject("结束时间需大于开始时间"):Promise.resolve(),trigger:"change"}]},confirmPassword(r,e){return[{required:e||!1,validator:(t,s)=>s?s!==r.password?Promise.reject("两次输入的密码不一致!"):Promise.resolve():Promise.reject("密码不能为空")}]},duplicateCheckRule(r,e,t,s,n){return[{validator:(a,c)=>!c&&n?Promise.reject(`请输入${s.label}`):new Promise((m,i)=>{u({tableName:r,fieldName:e,fieldVal:c,dataId:t.id}).then(o=>{o.success?m():i(o.message||"校验失败")}).catch(o=>{i(o.message||"验证失败")})})}]}};function y(r,e,t,s){return f(this,null,function*(){try{const a=yield u({tableName:r,fieldName:e,fieldVal:t,dataId:s});return a.success?Promise.resolve():Promise.reject(a.message||"校验失败")}catch(n){return Promise.reject("校验失败,可能是断网等问题导致的校验失败")}})}export{y as duplicateValidate,v as rules};
