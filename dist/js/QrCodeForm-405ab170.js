import{d as b,l as f,e as p,u as t,w as I,a7 as Q,a8 as w,f as a,ad as y,aa as g,E as v,ae as _,F as L,W as T}from"./vue-50733b77.js";import B from"./LoginFormTitle-f1a9bc23.js";import{bU as q,bz as E}from"./antd-vue-vendor-c5335947.js";import{u as N,bl as V,br as D,o as F,bu as U,bv as j}from"./jeecg-online-vendor-d3e1865b.js";import"./index-b34ff7bc.js";import{Q as z}from"./index-ed856713.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-058e2396.js";import"./vxe-table-vendor-838914b0.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./download-49b89a1a.js";import"./base64Conver-fa2fe1af.js";const O={class:"enter-x min-w-64 min-h-64"},te=b({__name:"QrCodeForm",setup(R){const c=f("");let o;const{t:n}=F(),k=N(),{handleBackLogin:C,getLoginState:h}=V(),s=f("0"),i=p(()=>t(h)===D.QR_CODE),x=p(()=>t(s)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){s.value="0",U().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){j({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(o)),r.success&&(s.value="2",clearInterval(o),setTimeout(()=>{k.qrCodeLogin(d)},500))})}function S(e){u(e),m(),o=setInterval(()=>{u(e)},1500)}function m(){o&&clearInterval(o)}return I(i,e=>{e?l():m()}),(e,r)=>i.value?(Q(),w(L,{key:0},[a(B,{class:"enter-x"}),y("div",O,[a(t(z),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),a(t(q),{class:"enter-x"},{default:g(()=>[v(_(x.value),1)]),_:1}),a(t(E),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:g(()=>[v(_(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):T("",!0)}});export{te as default};
