import{k as Mo,w as Do,U as s,aV as t,as as b,f as d,ar as u,bi as i,E as f,V as m,F as Q,a_ as Fo,ag as B,v as Ro,A as Oo,at as O,ad as Lo,a$ as Po,ae as Ao,aI as Qo,aQ as _o,b7 as Jo}from"./vue-c7e3516e.js";import Ho from"./BasicTable-29c6504d.js";import{T as $o}from"./componentMap-a6d21ad6.js";import"./BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js";import"./useTable-7e303edd.js";import{bW as qo,l as Vo}from"./jeecg-online-vendor-bf2efbcb.js";import No from"./OnlineAutoModal-126fbdbf.js";import zo from"./OnlineCustomModal-812299bf.js";import jo from"./OnlineDetailModal-b93b5862.js";import{J as Uo}from"./JImportModal-2f2bcc94.js";import{u as Ko,a as Wo}from"./useListButton-daa9a0dd.js";import{a as Go,d as Xo,p as Yo,g as Zo}from"./useExtendComponent-f3ffbcdf.js";import xo from"./OnlineQueryForm-8c723df8.js";import oe from"./SuperQuery-9bf31a64.js";import{aQ as ee,c as ne}from"./index-fde9c72f.js";import"./index-8cf3aabb.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./antd-vue-vendor-1561c1ba.js";import"./JAddInput-2cbbbde9.js";import"./pick-51214243.js";import"./omit-13df237f.js";import"./_flatRest-34ab130c.js";import"./isArray-b183d537.js";import"./toString-8deea73b.js";import"./_arrayPush-ae8b790e.js";import"./_baseClone-632ebf1c.js";import"./CommentPanel-55ef76b0.js";import"./DetailForm-da227b43.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-0a69d004.js";import"./LinkTableListPiece-50f8f8cc.js";import"./OnlineSelectCascade-dee0bae8.js";import"./SuperQueryValComponent.vue_vue_type_script_lang-cc4352f4.js";import"./lodash-es-vendor-42c8d3d4.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm-83ba9c88.js";import"./useFormItem-4a12ff45.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";import"./index-ed4be6fa.js";import"./useForm-fa63344e.js";import"./injectionKey-5da932b3.js";import"./OnlineForm-3b49fa3a.js";import"./user.api-dd1b3184.js";import"./_commonjsHelpers-938fab4e.js";import"./customExpression-e22f3cce.js";import"./useListPage-5049b37a.js";import"./JModalTip-b651c0e6.js";import"./_baseSlice-834c0c3e.js";import"./OnlineFormDetail-2104bd28.js";import"./OnlineSubFormDetail-7b3cba51.js";var L=(o,p,r)=>new Promise((h,c)=>{var S=a=>{try{l(r.next(a))}catch(g){c(g)}},E=a=>{try{l(r.throw(a))}catch(g){c(g)}},l=a=>a.done?h(a.value):Promise.resolve(a.value).then(S,E);l((r=r.apply(o,p)).next())});const te=Symbol(),ie="openpopmodal";function re(o){const p=ee();function r(h){o(h)}p.on(ie,r),le({onlineEmitter:p})}function le(o){return ne(o,te,{readonly:!1,native:!0})}const ae={name:"DefaultOnlineList",components:{BasicTable:Ho,TableAction:$o,OnlineAutoModal:No,JImportModal:Uo,OnlineQueryForm:xo,OnlineSuperQuery:oe,OnlineCustomModal:zo,OnlineDetailModal:jo,OnlinePopModal:Go},setup(){const{createMessage:o}=Vo(),{ID:p,onlineTableContext:r,onlineQueryFormOuter:h,loading:c,reload:S,dataSource:E,pagination:l,handleSpecialConfig:a,getColumnList:g,handleChangeInTable:T,loadData:I,superQueryButtonRef:y,superQueryStatus:v,handleSuperQuery:M,onlineExtConfigJson:k,handleFormConfig:D,registerCustomModal:e,tableReloading:C}=Ko();if(!p.value){o.warning("\u5730\u5740\u9519\u8BEF, \u914D\u7F6EID\u4E0D\u5B58\u5728!");return}let{initCgEnhanceJs:F}=Xo(r);const{buttonSwitch:_,cgLinkButtonList:J,cgTopButtonList:H,importUrl:$,registerModal:q,handleAdd:V,handleEdit:N,handleBatchDelete:z,registerImportModal:j,onImportExcel:U,onExportExcel:P,cgButtonJsHandler:K,cgButtonActionHandler:W,cgButtonLinkHandler:G,handleSubmitFlow:X,getDropDownActions:Y,getActions:Z,initButtonList:x,initButtonSwitch:oo,registerDetailModal:eo,registerBpmModal:no}=Wo(r,k),R=Mo(!1);function to(){return L(this,null,function*(){try{R.value=!0,yield P()}finally{setTimeout(()=>R.value=!1,1500)}})}const{columns:io,actionColumn:ro,selectedKeys:lo,rowSelection:ao,enableScrollBar:so,tableScroll:uo,downloadRowFile:po,getImgView:mo,getPcaText:co,getFormatDate:go,handleColumnResult:fo,hrefComponent:ho,viewOnlineCellImage:yo,hrefMainTableId:Co,registerOnlineHrefModal:bo,registerPopModal:So,openPopModal:Eo,onlinePopModalRef:ko,popTableId:A}=Yo(r,k);Do(p,()=>{wo()},{immediate:!0});function wo(){return L(this,null,function*(){c.value=!0;let n=yield g();Bo(n),yield I(),c.value=!1,r.execButtonEnhance("setup")})}function Bo(n){let w=F(n.enhanceJs);r.EnhanceJS=w,x(n.cgButtonList),oo(n.hideColumns),fo(n),a(n)}function To(n){r.queryParam=n,S()}function Io(n){return L(this,null,function*(){yield Zo(y),y.value.init(n)})}function vo(n){A.value=n.id;let w={title:n.describe};n.record&&n.record.id&&(w.record=n.record,w.isUpdate=!0),Eo(!0,w)}return re(vo),{ID:p,onlineQueryFormOuter:h,queryWithCondition:To,onQueryFormLoaded:Io,reload:S,superQueryButtonRef:y,superQueryStatus:v,handleSuperQuery:M,loading:c,columns:io,dataSource:E,pagination:l,actionColumn:ro,rowSelection:ao,selectedKeys:lo,tableScroll:uo,enableScrollBar:so,handleChangeInTable:T,buttonSwitch:_,handleAdd:V,handleEdit:N,onImportExcel:U,onExportExcel:P,exportLoading:R,onExportExcelOverride:to,cgTopButtonList:H,cgLinkButtonList:J,cgButtonJsHandler:K,cgButtonActionHandler:W,cgButtonLinkHandler:G,handleBatchDelete:z,downloadRowFile:po,getImgView:mo,getPcaText:co,getFormatDate:go,getActions:Z,getDropDownActions:Y,registerModal:q,registerCustomModal:e,registerImportModal:j,registerDetailModal:eo,importUrl:$,handleFormConfig:D,onlinePopModalRef:ko,tableReloading:C,handleSubmitFlow:X,hrefComponent:ho,viewOnlineCellImage:yo,hrefMainTableId:Co,onlineExtConfigJson:k,registerOnlineHrefModal:bo,registerPopModal:So,popTableId:A,registerBpmModal:no}}},se={class:"p-2"},ue={key:0,style:{"font-size":"12px","font-style":"italic"}},pe={key:0,style:{"font-size":"12px","font-style":"italic"}},de=["src","onClick"],me=["innerHTML"],ce=["title"];function ge(o,p,r,h,c,S){const E=s("online-query-form"),l=s("a-button"),a=s("online-super-query"),g=s("TableAction"),T=s("BasicTable"),I=s("OnlineAutoModal"),y=s("online-detail-modal"),v=s("JImportModal"),M=s("a-modal"),k=s("online-custom-modal"),D=s("online-pop-modal");return t(),b("div",se,[d(E,{ref:"onlineQueryFormOuter",id:o.ID,onSearch:o.queryWithCondition,onLoaded:o.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),o.tableReloading?m("",!0):(t(),u(T,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:o.loading,columns:o.columns,dataSource:o.dataSource,pagination:o.pagination,rowSelection:o.rowSelection,actionColumn:o.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:o.tableScroll,onTableRedo:o.reload,class:Lo({"j-table-force-nowrap":o.enableScrollBar}),onChange:o.handleChangeInTable},{tableTitle:i(()=>[o.buttonSwitch.add?(t(),u(l,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:o.handleAdd},{default:i(()=>[f("\u65B0\u589E")]),_:1},8,["onClick"])):m("",!0),o.buttonSwitch.import?(t(),u(l,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:o.onImportExcel},{default:i(()=>[f("\u5BFC\u5165")]),_:1},8,["onClick"])):m("",!0),o.buttonSwitch.export?(t(),u(l,{key:2,preIcon:"ant-design:export-outlined",type:"primary",loading:o.exportLoading,onClick:o.onExportExcelOverride},{default:i(()=>[f(" \u5BFC\u51FA")]),_:1},8,["loading","onClick"])):m("",!0),o.cgTopButtonList&&o.cgTopButtonList.length>0?(t(!0),b(Q,{key:3},Fo(o.cgTopButtonList,(e,C)=>(t(),b(Q,null,[e.optType=="js"?(t(),u(l,{key:"cgbtn"+C,onClick:F=>o.cgButtonJsHandler(e.buttonCode),type:"primary",preIcon:e.buttonIcon?"ant-design:"+e.buttonIcon:""},{default:i(()=>[f(B(e.buttonName),1)]),_:2},1032,["onClick","preIcon"])):e.optType=="action"?(t(),u(l,{key:"cgbtn"+C,onClick:F=>o.cgButtonActionHandler(e.buttonCode),type:"primary",preIcon:e.buttonIcon?"ant-design:"+e.buttonIcon:""},{default:i(()=>[f(B(e.buttonName),1)]),_:2},1032,["onClick","preIcon"])):m("",!0)],64))),256)):m("",!0),o.buttonSwitch.batch_delete?Ro((t(),u(l,{key:4,preIcon:"ant-design:delete-outlined",onClick:o.handleBatchDelete},{default:i(()=>[f(" \u6279\u91CF\u5220\u9664")]),_:1},8,["onClick"])),[[Oo,o.selectedKeys.length>0]]):m("",!0),o.buttonSwitch.super_query?(t(),u(a,{key:5,ref:"superQueryButtonRef",online:"",status:o.superQueryStatus,onSearch:o.handleSuperQuery},null,8,["status","onSearch"])):m("",!0)]),fileSlot:i(({text:e})=>[e?(t(),u(l,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:C=>o.downloadRowFile(e)},{default:i(()=>[f(" \u4E0B\u8F7D ")]),_:2},1032,["onClick"])):(t(),b("span",ue,"\u65E0\u6587\u4EF6"))]),imgSlot:i(({text:e})=>[e?(t(),b("img",{key:1,src:o.getImgView(e),alt:"\u56FE\u7247\u4E0D\u5B58\u5728",class:"online-cell-image",onClick:C=>o.viewOnlineCellImage(e)},null,8,de)):(t(),b("span",pe,"\u65E0\u56FE\u7247"))]),htmlSlot:i(({text:e})=>[O("div",{innerHTML:e},null,8,me)]),pcaSlot:i(({text:e})=>[O("div",{title:o.getPcaText(e)},B(o.getPcaText(e)),9,ce)]),dateSlot:i(({text:e})=>[O("span",null,B(o.getFormatDate(e)),1)]),action:i(({record:e})=>[d(g,{actions:o.getActions(e),dropDownActions:o.getDropDownActions(e)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),d(I,{id:o.ID,onRegister:o.registerModal,onSuccess:o.reload,onFormConfig:o.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),d(y,{id:o.ID,onRegister:o.registerDetailModal},null,8,["id","onRegister"]),d(v,{onRegister:o.registerImportModal,url:o.importUrl(),onOk:o.reload,online:""},null,8,["onRegister","url","onOk"]),d(M,_o(o.hrefComponent.model,Jo(o.hrefComponent.on)),{default:i(()=>[(t(),u(Po(o.hrefComponent.is),Ao(Qo(o.hrefComponent.params)),null,16))]),_:1},16),d(k,{onRegister:o.registerCustomModal,onSuccess:o.reload},null,8,["onRegister","onSuccess"]),d(y,{id:o.hrefMainTableId,onRegister:o.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),d(D,{ref:"onlinePopModalRef",id:o.popTableId,onRegister:o.registerPopModal,onSuccess:o.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}var Ln=qo(ae,[["render",ge]]);export{Ln as default};
