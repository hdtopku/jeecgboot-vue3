var se=Object.defineProperty;var P=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var V=(d,l,t)=>l in d?se(d,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[l]=t,U=(d,l)=>{for(var t in l||(l={}))re.call(l,t)&&V(d,t,l[t]);if(P)for(var t of P(l))ce.call(l,t)&&V(d,t,l[t]);return d};var $=(d,l,t)=>new Promise((r,m)=>{var k=a=>{try{v(t.next(a))}catch(c){m(c)}},y=a=>{try{v(t.throw(a))}catch(c){m(c)}},v=a=>a.done?r(a.value):Promise.resolve(a.value).then(k,y);v((t=t.apply(d,l)).next())});import{ac as de,aF as w,ad as I,aq as S,l as me}from"./jeecg-online-vendor-bf2efbcb.js";import{_ as pe}from"./OneNativeModal.vue_vue_type_script_setup_true_lang-7ff7919d.js";import{g as fe,an as _e,m as ge}from"./index-fde9c72f.js";import{downloadFile as ve}from"./renderUtils-76d1e990.js";import{d as he,k as i,r as ye,o as ke,U as f,aV as _,ar as B,bi as n,at as p,f as o,E as g,V as q,ag as xe,as as h,F as T,u as K}from"./vue-c7e3516e.js";import{ck as Ce,a9 as we}from"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./OneNativeForm-c2cc9d15.js";import"./JAddInput-2cbbbde9.js";import"./areaDataUtil-b2642a1f.js";import"./useFormItem-4a12ff45.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./index-8cf3aabb.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";const Ee={class:"table-operator"},Fe={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},be=p("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),De={style:{"font-weight":"600"}},Ie={key:0,style:{"font-size":"12px","font-style":"italic"}},Se=["src","preview"],Be={key:0,style:{"font-size":"12px","font-style":"italic"}},Te=["onClick"],je={class:"ant-dropdown-link"},Ae=["onClick"],ze=p("a",null,"\u5220\u9664",-1),dt=he({__name:"OneNativeList",setup(d){i(!1);const l=i({}),t=i(!1),r=i([]),m=i();de();const k=i([{title:"\u6587\u672C",align:"center",dataIndex:"name"},{title:"\u5B57\u5178\u4E0B\u62C9",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?w(r.value.xiala,e):""},{title:"\u5B57\u5178\u5355\u9009",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?w(r.value.danxuan,e):""},{title:"\u5B57\u5178\u591A\u9009",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?w(r.value.duoxuan,e):""},{title:"\u5F00\u5173",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?w(r.value.kaiguan,e):""},{title:"\u65E5\u671F",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"\u5E74\u6708\u65E5\u65F6\u5206\u79D2",align:"center",dataIndex:"nyrsfm"},{title:"\u65F6\u95F4",align:"center",dataIndex:"shijian"},{title:"\u6587\u4EF6",align:"center",dataIndex:"wenjian"},{title:"\u56FE\u7247",align:"center",dataIndex:"tupian"},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",fixed:"right",width:147}]),y=ye({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),v=i([]);i(!1);const a=i({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,u)=>u[0]+"-"+u[1]+" \u5171"+e+"\u6761",showQuickJumper:!0,showSizeChanger:!0,total:0}),c=i([]),E=i([]),j=i({column:"createTime",order:"desc"}),A=i({}),{createMessage:Q}=me();function X(e,u){c.value=e,E.value=u}function H({pagination:e,filters:u,sorter:s}){a.value=e,j.value=s,A.value=U({},u)}function J(){m.value.disableSubmit=!1,m.value.add()}function L(){c.value=[],E.value=[]}function G(){we.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>{I.delete({url:y.delete,data:{ids:c.value}},{joinParamsToUrl:!0}).then(()=>{F()})}})}function W(){let e=Object.assign(l.value,j.value,A.value);return e.field=Y(),e.pageNo=a.value.current,e.pageSize=a.value.pageSize,ge(e)}function Y(){let e="id,";return k.value.forEach(function(u){e+=","+u.dataIndex}),e}function z(e){e===1&&(a.value.current=1),t.value=!0;let u=W();I.get({url:y.list,params:u},{isTransformResponse:!1}).then(s=>{s.success?(v.value=s.result.records,s.result&&s.result.total?a.value.total=s.result.total:a.value.total=0):Q.warning(s.message)}).finally(()=>{t.value=!1})}function Z(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),fe(e)}function ee(e){m.value.disableSubmit=!1,m.value.edit(e)}function te(e){m.value.disableSubmit=!0,m.value.edit(e)}function ae(e){I.delete({url:y.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(u=>{F()})}function ne(){return $(this,null,function*(){r.value.flzds=yield _e({code:"B01"}),r.value.xiala=yield S("sex"),r.value.danxuan=yield S("sex"),r.value.duoxuan=yield S("urgent_level")})}function F(){c.value=[],E.value=[],z(1)}return ke(()=>{r.value.kaiguan=[{text:"\u662F",value:"1"},{text:"\u5426",value:"2"}],z(),ne()}),(e,u)=>{const s=f("a-button"),N=f("Icon"),b=f("a-menu-item"),O=f("a-menu"),R=f("a-dropdown"),oe=f("a-divider"),le=f("a-icon"),ie=f("a-table"),ue=f("a-card");return _(),B(ue,{bordered:!1},{default:n(()=>[p("div",Ee,[o(s,{onClick:J,type:"primary",preIcon:"ant-design:plus"},{default:n(()=>[g("\u65B0\u589E")]),_:1}),c.value.length>0?(_(),B(R,{key:0},{overlay:n(()=>[o(O,null,{default:n(()=>[o(b,{key:"1",onClick:G},{default:n(()=>[o(N,{icon:"ant-design:delete-outlined"}),g(" \u5220\u9664 ")]),_:1})]),_:1})]),default:n(()=>[o(s,null,{default:n(()=>[g("\u6279\u91CF\u64CD\u4F5C "),o(N,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):q("",!0)]),p("div",null,[p("div",Fe,[be,g(" \u5DF2\u9009\u62E9 "),p("a",De,xe(c.value.length),1),g("\u9879 "),p("a",{style:{"margin-left":"24px"},onClick:L},"\u6E05\u7A7A")]),o(ie,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:k.value,dataSource:v.value,pagination:a.value,loading:t.value,rowSelection:{selectedRowKeys:c.value,onChange:X},onChange:H},{bodyCell:n(({column:D,text:x,record:C})=>[D.dataIndex==="tupian"?(_(),h(T,{key:0},[x?(_(),h("img",{key:1,src:Z(x),preview:C.id,alt:"",class:"anty-img-wrap"},null,8,Se)):(_(),h("span",Ie,"\u65E0\u56FE\u7247"))],64)):D.dataIndex==="wenjian"?(_(),h(T,{key:1},[x?(_(),B(s,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:M=>K(ve)(x)},{default:n(()=>[g(" \u4E0B\u8F7D ")]),_:2},1032,["onClick"])):(_(),h("span",Be,"\u65E0\u6587\u4EF6"))],64)):D.dataIndex==="action"?(_(),h(T,{key:2},[p("a",{onClick:M=>ee(C)},"\u7F16\u8F91",8,Te),o(oe,{type:"vertical"}),o(R,null,{overlay:n(()=>[o(O,{class:"antd-more"},{default:n(()=>[o(b,null,{default:n(()=>[p("a",{onClick:M=>te(C)},"\u8BE6\u60C5",8,Ae)]),_:2},1024),o(b,null,{default:n(()=>[o(K(Ce),{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:()=>ae(C.id)},{default:n(()=>[ze]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[p("a",je,[g("\u66F4\u591A "),o(le,{type:"down"})])]),_:2},1024)],64)):q("",!0)]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(pe,{ref_key:"oneProtogenesisModal",ref:m,onOk:F},null,512)]),_:1})}}});export{dt as default};
