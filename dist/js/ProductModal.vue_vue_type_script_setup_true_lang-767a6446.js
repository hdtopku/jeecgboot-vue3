var w=Object.defineProperty;var d=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var b=(n,o,e)=>o in n?w(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,h=(n,o)=>{for(var e in o||(o={}))B.call(o,e)&&b(n,e,o[e]);if(d)for(var e of d(o))_.call(o,e)&&b(n,e,o[e]);return n};var f=(n,o,e)=>new Promise((c,l)=>{var m=s=>{try{i(e.next(s))}catch(a){l(a)}},p=s=>{try{i(e.throw(s))}catch(a){l(a)}},i=s=>s.done?c(s.value):Promise.resolve(s.value).then(m,p);i((e=e.apply(n,o)).next())});import{B as v}from"./index-378f1f74.js";import{B as F}from"./BasicForm-b17dbcb2.js";import"./componentMap-ac4d3a60.js";import{u as k}from"./useForm-ec2789c8.js";import"./JAddInput-079a6c33.js";import"./JSelectUser-b7290477.js";import"./JSelectDept-52bb52e5.js";import"./JPopup-4aed0a12.js";import{B as x}from"./index-b6e19f4a.js";import{s as M}from"./Product.api-37005cfa.js";import{d as y,k as N,u as r,e as R,a5 as U,a9 as C,a7 as L,f as O,ag as P}from"./vue-705b7309.js";const K=[{title:"\b商品名称",dataIndex:"name"},{title:"\b商品价格",dataIndex:"price"},{title:"\b商品进价",dataIndex:"cost"},{title:"备注",dataIndex:"remark"},{title:"\b商品图片",dataIndex:"pic"}],Q=[{label:"\b商品名称",field:"name",component:"Input"},{label:"\b商品价格",field:"price",component:"InputNumber"}],S=[{label:"",field:"id",component:"Input",show:!1},{label:"\b商品名称",field:"name",component:"Input"},{label:"\b商品价格",field:"price",component:"InputNumber"},{label:"\b商品进价",field:"cost",component:"InputNumber"},{label:"备注",field:"remark",component:"Input"},{label:"\b商品图片",field:"pic",component:"Input"}],T=y({__name:"ProductModal",emits:["register","success"],setup(n,{emit:o}){const e=N(!0),[c,{resetFields:l,setFieldsValue:m,validate:p}]=k({labelWidth:150,schemas:S,showActionButtonGroup:!1}),[i,{setModalProps:s,closeModal:a}]=x(t=>f(this,null,function*(){yield l(),s({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),r(e)&&(yield m(h({},t.record)))})),I=R(()=>r(e)?"编辑":"新增");function g(t){return f(this,null,function*(){try{let u=yield p();s({confirmLoading:!0}),yield M(u,e.value),a(),o("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(t,u)=>(U(),C(r(v),P(t.$attrs,{onRegister:r(i),title:I.value,onOk:g,width:"80%"}),{default:L(()=>[O(r(F),{onRegister:r(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{T as _,K as c,Q as s};
