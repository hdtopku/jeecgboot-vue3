var pe=Object.defineProperty,fe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var K=(r,_,c)=>_ in r?pe(r,_,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[_]=c,Q=(r,_)=>{for(var c in _||(_={}))ge.call(_,c)&&K(r,c,_[c]);if(H)for(var c of H(_))he.call(_,c)&&K(r,c,_[c]);return r},X=(r,_)=>fe(r,ve(_));var E=(r,_,c)=>new Promise((b,f)=>{var $=h=>{try{p(c.next(h))}catch(z){f(z)}},P=h=>{try{p(c.throw(h))}catch(z){f(z)}},p=h=>h.done?b(h.value):Promise.resolve(h.value).then($,P);p((c=c.apply(r,_)).next())});import{d as te,k as v,o as me,V as k,a5 as i,a6 as d,aa as e,E as w,ab as g,W as q,F as J,a8 as Y,B as S,f as s,a9 as R,v as xe,A as ke,am as we,u as y,a7 as a,ap as ye,aq as Ce}from"./vue-5a09445c.js";import{f as Te,h as be,i as Se,j as Ie,k as ze}from"./UserSetting.api-12a988ce.js";import{t as Ue,a8 as Z,u as Ne,D as $e}from"./jeecg-online-vendor-a80da268.js";import{U as Pe}from"./index-42cdfb26.js";import{m as Oe}from"./index-0f5326ee.js";import{M as ee}from"./antd-vue-vendor-04f0af1d.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-70833b4a.js";import"./index-5effa088.js";import"./BasicModal-588c46fe.js";import"./useWindowSizeFn-31e0259d.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";const l=r=>(ye("data-v-72209c3d"),r=r(),Ce(),r),Ve={class:"my-tenant"},Be=l(()=>e("span",{style:{flex:"1"}},"我的租户",-1)),De={key:0,class:"approved-count"},Me={key:0,class:"tenant-list"},Ae=["onClick"],Ee={class:"tenant-title"},Re={class:"item-left"},je={class:"item-name"},Le=["onClick"],Fe={class:"item-right"},qe={key:0},Je=l(()=>e("span",{class:"pointer examine"},"待审核",-1)),We=["onClick"],Ge={key:1},He=["onClick"],Ke=["onClick"],Qe={key:2,style:{width:"75px"}},Xe={style:{"margin-left":"24px"}},Ye={class:"item-content"},Ze={class:"content-box"},et=l(()=>e("div",{class:"content-name"}," 组织名片 ",-1)),tt={class:"content-desc"},nt={class:"flex-flow"},st=l(()=>e("div",{class:"content-des-text"},"姓名",-1)),ot={style:{"font-size":"13px",color:"#000000"}},at={class:"flex-flow"},lt=l(()=>e("div",{class:"content-des-text"},"部门",-1)),it={style:{"font-size":"13px"}},ct={class:"flex-flow"},dt=l(()=>e("div",{class:"content-des-text"},"职业",-1)),ut={style:{"font-size":"13px"}},rt={class:"footer-box"},_t=["onClick"],pt=l(()=>e("span",null,"查看租户名片",-1)),ft={key:1,class:"font-color9e flex-flow margin-right40 font-size13"},vt=l(()=>e("span",null,"查看租户名片",-1)),gt=["onClick"],ht=l(()=>e("span",null,"租户管理？",-1)),mt={key:3,class:"font-color9e flex-flow margin-right40 font-size13"},xt=l(()=>e("span",null,"租户管理？",-1)),kt=["onClick"],wt=l(()=>e("span",null,"申请角色权限？",-1)),yt={key:5,class:"font-color9e flex-flow margin-right40 font-size13"},Ct=l(()=>e("span",null,"申请角色权限？",-1)),Tt=["onClick"],bt=l(()=>e("span",null,"我的汇报关系？",-1)),St={key:7,class:"font-color9e flex-flow margin-right40 font-size13"},It=l(()=>e("span",null,"我的汇报关系？",-1)),zt=["onClick"],Ut=l(()=>e("span",null,"退出租户",-1)),Nt={key:9,class:"font-color9e flex-flow margin-right40 font-size13"},$t=l(()=>e("span",null,"退出租户",-1)),Pt=l(()=>e("div",{style:{"font-size":"17px","font-weight":"700"}},"查看名片",-1)),Ot=l(()=>e("div",{style:{color:"#9e9e9e","margin-top":"10px","font-size":"13px"}}," 名片是您在该组织下的个人信息，只在本组织中展示。 ",-1)),Vt={style:{"margin-top":"24px","font-size":"13px",padding:"0 24px"}},Bt=l(()=>e("div",{class:"font-color75"},"姓名",-1)),Dt={class:"margin-top6 margin-bottom-16"},Mt=l(()=>e("div",null,"部门",-1)),At={class:"margin-top6 margin-bottom-16"},Et=l(()=>e("div",null,"职位",-1)),Rt={class:"margin-top6 margin-bottom-16"},jt=l(()=>e("div",null,"工作地点",-1)),Lt={class:"margin-top6 margin-bottom-16"},Ft=l(()=>e("div",null,"工号",-1)),qt={class:"margin-top6 margin-bottom-16"},Jt={class:"cancellation"},Wt={style:{padding:"20px"}},Gt=l(()=>e("div",{class:"change-owen"}," 只有变更拥有着之后,才能退出 ",-1)),Ht=["onClick"],Kt=["onClick"],Qt=l(()=>e("div",{style:{height:"20px"}},null,-1)),Xt=te({name:"tenant-setting"}),Yt=te(X(Q({},Xt),{setup(r){const{prefixCls:_}=Oe("j-user-tenant-setting-container"),c=v([]),b=Ue(),{createMessage:f}=Ne();v([]);const $=v(!1),P=v([]),p=v({realname:b.getUserInfo.realname,workNo:b.getUserInfo.workNo,orgCodeTxt:b.getUserInfo.orgCodeTxt,postText:b.getUserInfo.postText});function h(){return E(this,null,function*(){Te({userTenantStatus:"1,3,5"}).then(o=>{if(o.success)if(o.result&&o.result.length>0){let n=o.result,u=[],B=[];for(let x=0;x<n.length;x++)n[x].userTenantStatus==="5"&&B.push(n[x]),u.push(n[x]);c.value=u,L.value=B,M.value=B.length}else z();else z()})})}function z(){c.value=[],L.value=[],M.value=0}function ne(o){const n=document.createElement("input");n.setAttribute("value",o),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),f.success("复制成功")}function se(o){ee.confirm({title:"取消申请",content:"是否取消申请",okText:"确认",cancelText:"取消",onOk:()=>{be({tenantId:o}).then(n=>{n.success?(f.success("取消申请成功"),h()):f.warning(n.message)}).catch(n=>{f.warning(n.message)})}})}function oe(o){o.show?o.show=!1:o.show=!0}function O(o,n){P.value=n,o==="editTenant"?$.value=!0:o==="exitTenant"&&(C.value={loginPassword:"",tenantName:""},V.value=!0,I.value=!0,U.value=n)}const I=v(!1),C=v({}),U=v({}),V=v(!0),D=v(""),j=v(!1);function ae(){let o=y(U).name,n=y(C).tenantName;o===n?V.value=!1:V.value=!0}function le(){return E(this,null,function*(){if(!y(C).loginPassword){f.warning("请输入登录密码");return}yield Se({id:y(U).tenantUserId,loginPassword:y(C).loginPassword}).then(o=>{if(o.success)f.success(o.message),I.value=!1,b.setTenant(null),window.location.reload();else if(o.message==="assignedOwen")j.value=!0,I.value=!1;else if(o.message==="cancelTenant"){I.value=!1;let n=Z.currentRoute.value.fullPath;ee.confirm({title:"您是该组织的拥有者",content:"该组织下没有其他成员，需要您前往注销",okText:"前往注销",okType:"danger",cancelText:"取消",onOk:()=>{n!=="/system/usersetting"&&Z.push("/myapps/settings/organization/organMessage/"+y(U).tenantUserId)}})}else f.warning(o.message)}).catch(o=>{f.warning(o.message)})})}function ie(){I.value=!1,V.value=!0}function ce(){if(!y(D)){f.warning("请选择变更拥有者");return}Ie({userId:y(D),tenantId:y(U).tenantUserId}).then(o=>{o.success?(f.success(o.message),b.setTenant(null),window.location.reload()):f.warning(o.message)})}const M=v(0),L=v([]),F=v(!1);function de(){F.value=!0}function A(o,n){return E(this,null,function*(){yield ze({tenantId:Number.parseInt(o),status:n}),h()})}return me(()=>{h()}),(o,n)=>{const u=k("Icon"),B=k("a-empty"),x=k("a-modal"),T=k("a-col"),ue=k("a-input"),N=k("a-row"),W=k("a-form-item"),re=k("a-input-password"),_e=k("a-form"),G=k("a-button");return i(),d(J,null,[e("div",{class:we(["tenant-padding",[`${y(_)}`]])},[e("div",Ve,[Be,e("span",{class:"invited",onClick:de},[w("我的受邀信息"),M.value>0?(i(),d("span",De,g(M.value),1)):q("",!0)])]),c.value.length>0?(i(),d("div",Me,[(i(!0),d(J,null,Y(c.value,t=>(i(),d("div",{class:"tenant-list-item",onClick:m=>oe(t)},[e("div",Ee,[e("div",Re,[e("div",je,g(t.name),1),e("div",{class:"item-house",onClick:S(m=>ne(t.houseNumber),["stop"])},[e("span",null,[w(" 组织门牌号："+g(t.houseNumber)+" ",1),s(u,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])],8,Le)]),e("div",Fe,[t.userTenantStatus==="3"?(i(),d("span",qe,[Je,e("span",{class:"pointer cancel-apply",onClick:S(m=>se(t.tenantUserId),["stop"])},"取消申请",8,We)])):t.userTenantStatus==="5"?(i(),d("span",Ge,[e("span",{class:"pointer examine",onClick:m=>A(t.tenantUserId,"1")},"加入",8,He),e("span",{class:"pointer cancel-apply",onClick:S(m=>A(t.tenantUserId,"4"),["stop"])},"拒绝",8,Ke)])):(i(),d("div",Qe)),e("span",Xe,[t.show?(i(),R(u,{key:0,icon:"ant-design:down-outlined",style:{"font-size":"13px",color:"#707070"}})):(i(),R(u,{key:1,icon:"ant-design:right-outlined",style:{"font-size":"13px",color:"#707070"}}))])])]),xe(e("div",Ye,[e("div",Ze,[et,e("div",tt,[e("div",nt,[st,e("div",ot,g(p.value.realname),1)]),e("div",at,[lt,e("div",it,g(p.value.orgCodeTxt?p.value.orgCodeTxt:"未填写"),1)]),e("div",ct,[dt,e("div",ut,g(p.value.postText?p.value.postText:"未填写"),1)])])]),e("div",rt,[t.userTenantStatus!=="3"?(i(),d("span",{key:0,onClick:S(m=>O("editTenant",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[s(u,{icon:"ant-design:edit-outlined",class:"footer-icon"}),pt],8,_t)):(i(),d("span",ft,[s(u,{icon:"ant-design:edit-outlined",class:"footer-icon"}),vt])),t.userTenantStatus!=="3"&&t.auth?(i(),d("span",{key:2,onClick:S(m=>O("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[s(u,{icon:"ant-design:tool-outlined",class:"footer-icon"}),ht],8,gt)):t.userTenantStatus==="3"&&t.auth?(i(),d("span",mt,[s(u,{icon:"ant-design:tool-outlined",class:"footer-icon"}),xt])):q("",!0),t.userTenantStatus!=="3"&&!t.auth?(i(),d("span",{key:4,onClick:S(m=>O("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[s(u,{icon:"ant-design:tool-outlined",class:"footer-icon"}),wt],8,kt)):t.userTenantStatus==="3"&&!t.auth?(i(),d("span",yt,[s(u,{icon:"ant-design:tool-outlined",class:"footer-icon"}),Ct])):q("",!0),t.userTenantStatus!=="3"?(i(),d("span",{key:6,onClick:S(m=>O("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[s(u,{icon:"ant-design:gold-outlined",class:"footer-icon"}),bt],8,Tt)):(i(),d("span",St,[s(u,{icon:"ant-design:gold-outlined",class:"footer-icon"}),It])),t.userTenantStatus!=="3"?(i(),d("span",{key:8,onClick:S(m=>O("exitTenant",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[s(u,{icon:"ant-design:export-outlined",class:"footer-icon"}),Ut],8,zt)):(i(),d("span",Nt,[s(u,{icon:"ant-design:export-outlined",class:"footer-icon"}),$t]))])],512),[[ke,t.show]])],8,Ae))),256))])):(i(),R(B,{key:1,description:"暂无数据",style:{position:"relative",top:"50px"}}))],2),s(x,{visible:$.value,"onUpdate:visible":n[0]||(n[0]=t=>$.value=t),width:"400px",wrapClassName:"edit-tenant-setting"},{title:a(()=>[Pt,Ot]),default:a(()=>[e("div",Vt,[Bt,e("div",Dt,g(p.value.realname),1),Mt,e("div",At,g(p.value.orgCodeTxt?p.value.orgCodeTxt:"未填写"),1),Et,e("div",Rt,g(p.value.postText?p.value.postText:"未填写"),1),jt,e("div",Lt,g(P.value.workPlace?P.value.workPlace:"未填写"),1),Ft,e("div",qt,g(p.value.workNo?p.value.workNo:"未填写"),1)])]),_:1},8,["visible"]),s(x,{visible:I.value,"onUpdate:visible":n[3]||(n[3]=t=>I.value=t),width:"800","destroy-on-close":""},{title:a(()=>[e("div",Jt,[s(u,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),w(" 退出租户 "+g(U.value.name),1)])]),footer:a(()=>[s(G,{type:"primary",onClick:le,disabled:V.value},{default:a(()=>[w("确定")]),_:1},8,["disabled"]),s(G,{onClick:ie},{default:a(()=>[w("取消")]),_:1})]),default:a(()=>[s(_e,{model:C.value,ref:"cancelTenantRef"},{default:a(()=>[s(W,{name:"tenantName"},{default:a(()=>[s(N,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:a(()=>[s(T,{span:24},{default:a(()=>[w(" 请输入租户名称 ")]),_:1}),s(T,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[s(ue,{value:C.value.tenantName,"onUpdate:value":n[1]||(n[1]=t=>C.value.tenantName=t),onChange:ae},null,8,["value"])]),_:1})]),_:1})]),_:1}),s(W,{name:"loginPassword"},{default:a(()=>[s(N,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:a(()=>[s(T,{span:24},{default:a(()=>[w(" 请输入您的登录密码 ")]),_:1}),s(T,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[s(re,{value:C.value.loginPassword,"onUpdate:value":n[2]||(n[2]=t=>C.value.loginPassword=t)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),s(x,{title:"变更拥有者",visible:j.value,"onUpdate:visible":n[5]||(n[5]=t=>j.value=t),width:"800","destroy-on-close":"",cancelButtonProps:{display:"none"},onOk:ce},{default:a(()=>[e("div",Wt,[s(N,{span:24},{default:a(()=>[Gt]),_:1}),s(N,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[s(Pe,{value:D.value,"onUpdate:value":n[4]||(n[4]=t=>D.value=t),izExcludeMy:""},null,8,["value"])]),_:1})])]),_:1},8,["visible"]),s(x,{title:"我的受邀信息",visible:F.value,"onUpdate:visible":n[6]||(n[6]=t=>F.value=t),footer:null},{default:a(()=>[s(N,{span:24,class:"invited-row"},{default:a(()=>[s(T,{span:16},{default:a(()=>[w(" 组织 ")]),_:1}),s(T,{span:8},{default:a(()=>[w(" 操作 ")]),_:1})]),_:1}),(i(!0),d(J,null,Y(L.value,t=>(i(),R(N,{span:24,class:"invited-row-list"},{default:a(()=>[s(T,{span:16},{default:a(()=>[w(g(t.name),1)]),_:2},1024),s(T,{span:8},{default:a(()=>[e("span",{class:"common",onClick:m=>A(t.tenantUserId,"1")},"加入",8,Ht),e("span",{class:"common refuse",onClick:m=>A(t.tenantUserId,"4")},"拒绝",8,Kt)]),_:2},1024)]),_:2},1024))),256)),Qt]),_:1},8,["visible"])],64)}}}));const vn=$e(Yt,[["__scopeId","data-v-72209c3d"]]);export{vn as default};
