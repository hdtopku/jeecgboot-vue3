var d=(t,o,e)=>new Promise((c,r)=>{var i=n=>{try{u(e.next(n))}catch(s){r(s)}},a=n=>{try{u(e.throw(n))}catch(s){r(s)}},u=n=>n.done?c(n.value):Promise.resolve(n.value).then(i,a);u((e=e.apply(t,o)).next())});import{o as $,j as b,_ as m,w as C}from"./jeecg-online-vendor-bc5d810e.js";import{d as S,l as w,e as B,u as f,s as z,V as l,a7 as _,ac as g,af as v,aa as p,E as h,ae as F,as as I,f as A,ab as k,R as N,ai as T,aj as j}from"./vue-86253b15.js";import{bz as D}from"./antd-vue-vendor-371529c2.js";import{u as P}from"./useCountdown-7a164eb2.js";import{m as R}from"./index-4de4eaa0.js";import{useRuleFormItem as V}from"./useFormItemSingle-1ae794f9.js";const E={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},O=S({name:"CountButton",components:{Button:D},props:E,setup(t){const o=w(!1),{currentCount:e,isStart:c,start:r,reset:i}=P(t.count),{t:a}=$(),u=B(()=>f(c)?a("component.countdown.sendText",[f(e)]):a("component.countdown.normalText"));z(()=>{t.value===void 0&&i()});function n(){return d(this,null,function*(){const{beforeStartFunc:s}=t;if(s&&b(s)){o.value=!0;try{(yield s())&&r()}finally{o.value=!1}}else r()})}return{handleStart:n,currentCount:e,loading:o,getButtonText:u,isStart:c}}});function L(t,o,e,c,r,i){const a=l("Button");return _(),g(a,v(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:p(()=>[h(F(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}const y=m(O,[["render",L]]),q={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},G=S({name:"CountDownInput",components:{CountButton:y},inheritAttrs:!1,props:q,setup(t){const{prefixCls:o}=R("countdown-input"),[e]=V(t);return{prefixCls:o,state:e}}});function H(t,o,e,c,r,i){const a=l("CountButton"),u=l("a-input");return _(),g(u,v(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),I({addonAfter:p(()=>[A(a,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[k(Object.keys(t.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(s=>[N(t.$slots,n,T(j(s||{})))])}))]),1040,["class","size","value"])}const J=m(G,[["render",H]]),x=C(J),tt=C(y);export{x as C};
