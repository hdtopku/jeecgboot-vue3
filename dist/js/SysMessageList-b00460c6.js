import{d0 as H,co as B,d1 as E,d2 as I,d3 as O,d4 as R,d5 as V}from"./antd-vue-vendor-371529c2.js";import{a as w,u as N}from"./useSysMessage-45021c69.js";import{a5 as Z,a6 as $,V as l,a7 as o,ac as i,aa as e,a8 as c,f as s,E as F,W as z,ad as m,ae as D,F as f}from"./vue-86253b15.js";import{_ as A}from"./jeecg-online-vendor-bc5d810e.js";import"./tinymce-vendor-7c917b36.js";import"./index-4de4eaa0.js";import"./lodash-es-vendor-04a44d0a.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-6a8d95c4.js";const K={name:"SysMessageList",components:{FilterOutlined:H,CloseOutlined:B,BellFilled:E,ExclamationOutlined:I,MailOutlined:O,InteractionOutlined:R,AlertOutlined:V},props:{star:{type:Boolean,default:!1}},emits:["close","detail"],setup(S,{emit:k}){const{messageList:L,loadEndStatus:t,loadingMoreStatus:C,onLoadMore:T,noRead:b,getMsgCategory:x,searchParams:r,reset:g,loadData:d,updateStarMessage:_}=w();function p(n){let{fromUser:M,rangeDateKey:a,rangeDate:v}=n;r.fromUser=M||"",r.rangeDateKey=a||"",r.rangeDate=v||[],S.star===!0?r.starFlag="1":r.starFlag="",g(),d()}function u(n){_(n),n.starFlag=="1"?n.starFlag="0":n.starFlag="1"}const{goPage:y}=N(k);function h(n){n.readFlag="1",y(n),k("close",n.id)}return{messageList:L,loadEndStatus:t,loadingMoreStatus:C,onLoadMore:T,noRead:b,getMsgCategory:x,reload:p,clickStar:u,showMessageDetail:h}}};const P={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},U={key:1,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},W={style:{position:"relative"}},j=["innerHTML"],q=["innerHTML"],G=["onClick"];function J(S,k,L,t,C,T){const b=l("a-button"),x=l("a-rate"),r=l("a-tooltip"),g=l("mail-outlined"),d=l("a-avatar"),_=l("a-badge"),p=l("interaction-outlined"),u=l("alert-outlined"),y=l("bell-filled"),h=l("a-list-item-meta"),n=l("a-list-item"),M=l("a-list");return o(),i(M,{"item-layout":"horizontal","data-source":t.messageList},{loadMore:e(()=>[t.messageList&&t.messageList.length>0&&!t.loadEndStatus&&!t.loadingMoreStatus?(o(),c("div",P,[s(b,{onClick:t.onLoadMore},{default:e(()=>[F("加载更多")]),_:1},8,["onClick"])])):z("",!0),t.messageList&&t.messageList.length>0&&t.loadEndStatus?(o(),c("div",U," 没有更多了 ")):z("",!0)]),renderItem:e(({item:a})=>[s(n,null,{actions:e(()=>[s(x,{value:a.starFlag=="1"?1:0,count:1,onClick:v=>t.clickStar(a),style:{cursor:"pointer"},disabled:""},null,8,["value","onClick"])]),default:e(()=>[s(h,{description:a.createTime},{title:e(()=>[m("div",W,[m("span",null,D(t.getMsgCategory(a)),1),a.busType=="bpm"?(o(),c("span",{key:0,class:"bpm-cuiban-content",innerHTML:a.msgContent},null,8,j)):(o(),i(r,{key:1},{title:e(()=>[m("div",{innerHTML:a.msgContent},null,8,q)]),default:e(()=>[F(" "+D(a.titile),1)]),_:2},1024)),m("a",{onClick:v=>t.showMessageDetail(a),style:{"margin-left":"16px"}},"查看详情",8,G)])]),avatar:e(()=>[a.busType=="email"?(o(),c(f,{key:0},[t.noRead(a)?(o(),i(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(d,{style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),i(d,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm_task"?(o(),c(f,{key:1},[t.noRead(a)?(o(),i(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(d,{style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),i(d,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm"?(o(),c(f,{key:2},[t.noRead(a)?(o(),i(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(d,{style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),i(d,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"}})]),_:1}))],64)):(o(),c(f,{key:3},[t.noRead(a)?(o(),i(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(d,{style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),i(d,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"}})]),_:1}))],64))]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])}const de=A(K,[["render",J],["__scopeId","data-v-4aeeddc2"]]);export{de as default};
