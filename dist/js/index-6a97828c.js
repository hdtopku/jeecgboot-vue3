var I=(e,u,s)=>new Promise((d,r)=>{var p=o=>{try{c(s.next(o))}catch(i){r(i)}},t=o=>{try{c(s.throw(o))}catch(i){r(i)}},c=o=>o.done?d(o.value):Promise.resolve(o.value).then(p,t);c((s=s.apply(e,u)).next())});import{aK as f,z as _,s as B,q as N,o as q,av as z,ax as F,aw as A,u as H,C as K}from"./jeecg-online-vendor-88d7be55.js";import{p as G,m as W,ag as Y,g as j,z as J}from"./index-b6e19f4a.js";import{S as Q}from"./siteSetting-e5494f49.js";import{useHeaderSetting as X}from"./useHeaderSetting-f33d8fe8.js";import"./index-378f1f74.js";import{h as S}from"./header-55b09394.js";import{r as Z,q as ee}from"./dict.api-b85b31e3.js";import{cq as te,cy as M}from"./antd-vue-vendor-cce59da1.js";import{d as oe,e as U,k as L,U as l,a5 as D,a6 as ae,f as a,a7 as C,a9 as P,V as R,aa as g,am as h,ab as ne,F as se}from"./vue-705b7309.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-60c6a8c7.js";import"./BasicModal-93f24ffc.js";import"./useWindowSizeFn-b9945b41.js";const{createMessage:E}=H(),re=oe({name:"UserDropdown",components:{Dropdown:te,Menu:M,MenuItem:f(()=>_(()=>import("./DropMenuItem-ee12847f.js"),["js/DropMenuItem-ee12847f.js","js/jeecg-online-vendor-88d7be55.js","js/antd-vue-vendor-cce59da1.js","js/vue-705b7309.js","js/tinymce-vendor-6e169cb2.js","js/lodash-es-vendor-5fc8fca4.js","assets/jeecg-online-vendor-0a2b6c82.css","js/index-b6e19f4a.js","js/codemirror-vendor-3f45d0f3.js","js/echarts-vendor-6c8e2159.js","js/vxe-table-vendor-60c6a8c7.js","assets/index-5575dab6.css"])),MenuDivider:M.Divider,LockAction:f(()=>_(()=>import("./LockModal-95afccb9.js"),["js/LockModal-95afccb9.js","js/jeecg-online-vendor-88d7be55.js","js/antd-vue-vendor-cce59da1.js","js/vue-705b7309.js","js/tinymce-vendor-6e169cb2.js","js/lodash-es-vendor-5fc8fca4.js","assets/jeecg-online-vendor-0a2b6c82.css","js/index-b6e19f4a.js","js/codemirror-vendor-3f45d0f3.js","js/echarts-vendor-6c8e2159.js","js/vxe-table-vendor-60c6a8c7.js","assets/index-5575dab6.css","js/index-378f1f74.js","js/BasicModal-93f24ffc.js","js/useWindowSizeFn-b9945b41.js","assets/BasicModal-1e1b2ed9.css","assets/index-361bf2db.css","js/BasicForm-b17dbcb2.js","js/componentMap-ac4d3a60.js","js/useFormItem-faf326fe.js","js/JUpload.vue_vue_type_style_index_0_lang-72743f30.js","assets/JUpload-ffbeea34.css","js/download-827e9970.js","js/base64Conver-fa2fe1af.js","js/index-99de6536.js","assets/index-399aa0e3.css","js/index-a24a9872.js","js/useCountdown-5da1361d.js","assets/index-15cc10f8.css","js/JAddInput-079a6c33.js","js/areaDataUtil-6588b720.js","js/JSelectUser-b7290477.js","js/props-4069293e.js","js/JSelectBiz-53a9985e.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-59100f73.css","js/index-2ccd691b.js","js/index-4eb07c8e.js","js/bem-eb26b268.js","js/props-dec3c169.js","js/useContextMenu-430f82bc.js","assets/useContextMenu-6fcaad79.css","assets/index-a95e0833.css","js/depart.api-880d8784.js","assets/JAddInput-5a2bb084.css","js/JSelectDept-52bb52e5.js","assets/JSelectDept-c7c08f5d.css","js/JPopup-4aed0a12.js","assets/JPopup-8672837c.css","js/index-4802827d.js","assets/index-600d2c21.css","assets/componentMap-524c5264.css","js/BasicForm.vue_vue_type_style_index_0_lang-ad90633d.js","assets/BasicForm-384f4697.css","js/useForm-ec2789c8.js","js/lock-db7267a5.js","js/header-55b09394.js","assets/LockModal-aba0abca.css"])),DepartSelect:f(()=>_(()=>import("./DepartSelect-d994fe27.js"),["js/DepartSelect-d994fe27.js","js/index-378f1f74.js","js/jeecg-online-vendor-88d7be55.js","js/antd-vue-vendor-cce59da1.js","js/vue-705b7309.js","js/tinymce-vendor-6e169cb2.js","js/lodash-es-vendor-5fc8fca4.js","assets/jeecg-online-vendor-0a2b6c82.css","js/BasicModal-93f24ffc.js","js/index-b6e19f4a.js","js/codemirror-vendor-3f45d0f3.js","js/echarts-vendor-6c8e2159.js","js/vxe-table-vendor-60c6a8c7.js","assets/index-5575dab6.css","js/useWindowSizeFn-b9945b41.js","assets/BasicModal-1e1b2ed9.css","assets/index-361bf2db.css","js/depart.api-880d8784.js","js/tenant.api-c037c202.js","assets/DepartSelect-335dfc8f.css"])),UpdatePassword:f(()=>_(()=>import("./UpdatePassword-31d81b44.js"),["js/UpdatePassword-31d81b44.js","js/validator-12afe052.js","js/jeecg-online-vendor-88d7be55.js","js/antd-vue-vendor-cce59da1.js","js/vue-705b7309.js","js/tinymce-vendor-6e169cb2.js","js/lodash-es-vendor-5fc8fca4.js","assets/jeecg-online-vendor-0a2b6c82.css","js/user.api-41a142ff.js","js/index-378f1f74.js","js/BasicModal-93f24ffc.js","js/index-b6e19f4a.js","js/codemirror-vendor-3f45d0f3.js","js/echarts-vendor-6c8e2159.js","js/vxe-table-vendor-60c6a8c7.js","assets/index-5575dab6.css","js/useWindowSizeFn-b9945b41.js","assets/BasicModal-1e1b2ed9.css","assets/index-361bf2db.css","js/BasicForm-b17dbcb2.js","js/componentMap-ac4d3a60.js","js/useFormItem-faf326fe.js","js/JUpload.vue_vue_type_style_index_0_lang-72743f30.js","assets/JUpload-ffbeea34.css","js/download-827e9970.js","js/base64Conver-fa2fe1af.js","js/index-99de6536.js","assets/index-399aa0e3.css","js/index-a24a9872.js","js/useCountdown-5da1361d.js","assets/index-15cc10f8.css","js/JAddInput-079a6c33.js","js/areaDataUtil-6588b720.js","js/JSelectUser-b7290477.js","js/props-4069293e.js","js/JSelectBiz-53a9985e.js","assets/JSelectBiz-ba37f0a8.css","assets/JSelectUser-59100f73.css","js/index-2ccd691b.js","js/index-4eb07c8e.js","js/bem-eb26b268.js","js/props-dec3c169.js","js/useContextMenu-430f82bc.js","assets/useContextMenu-6fcaad79.css","assets/index-a95e0833.css","js/depart.api-880d8784.js","assets/JAddInput-5a2bb084.css","js/JSelectDept-52bb52e5.js","assets/JSelectDept-c7c08f5d.css","js/JPopup-4aed0a12.js","assets/JPopup-8672837c.css","js/index-4802827d.js","assets/index-600d2c21.css","assets/componentMap-524c5264.css","js/BasicForm.vue_vue_type_style_index_0_lang-ad90633d.js","assets/BasicForm-384f4697.css","js/useForm-ec2789c8.js"]))},props:{theme:G.oneOf(["dark","light"])},setup(){const{prefixCls:e}=W("header-user-dropdown"),{t:u}=N(),{getShowDoc:s,getUseLockPage:d}=X(),r=B(),p=Y(),t=U(()=>{const{realname:n="",avatar:y,desc:V}=r.getUserInfo||{};return{realname:n,avatar:y||S,desc:V}}),c=U(()=>{let{avatar:n}=t.value;return n==S?n:j(n)}),[o,{openModal:i}]=J(),m=L();function w(){i(!0)}function k(){r.confirmLoginOut()}function b(){q(Q)}function x(){return I(this,null,function*(){if((yield Z()).success){const y=yield ee();z(A),F(A,y.result),E.success("刷新缓存完成！")}else E.error("刷新缓存失败！")})}function $(){m.value.show()}const v=L();function O(){v.value.show(r.getUserInfo.username)}function T(n){switch(n.key){case"logout":k();break;case"doc":b();break;case"lock":w();break;case"cache":x();break;case"depart":$();break;case"password":O();break;case"account":p("/system/usersetting");break}}return{prefixCls:e,t:u,getUserInfo:t,getAvatarUrl:c,handleMenuClick:T,getShowDoc:s,register:o,getUseLockPage:d,loginSelectRef:m,updatePasswordRef:v}}});const ce=["src"];function ie(e,u,s,d,r,p){const t=l("MenuItem"),c=l("MenuDivider"),o=l("Menu"),i=l("Dropdown"),m=l("LockAction"),w=l("DepartSelect"),k=l("UpdatePassword");return D(),ae(se,null,[a(i,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:C(()=>[a(o,{onClick:e.handleMenuClick},{default:C(()=>[e.getShowDoc?(D(),P(t,{key:"doc",text:e.t("layout.header.dropdownItemDoc"),icon:"ion:document-text-outline"},null,8,["text"])):R("",!0),e.getShowDoc?(D(),P(c,{key:1})):R("",!0),a(t,{key:"account",text:e.t("layout.header.dropdownItemSwitchAccount"),icon:"ant-design:setting-outlined"},null,8,["text"]),a(t,{key:"password",text:e.t("layout.header.dropdownItemSwitchPassword"),icon:"ant-design:edit-outlined"},null,8,["text"]),a(t,{key:"depart",text:e.t("layout.header.dropdownItemSwitchDepart"),icon:"ant-design:cluster-outlined"},null,8,["text"]),a(t,{key:"cache",text:e.t("layout.header.dropdownItemRefreshCache"),icon:"ion:sync-outline"},null,8,["text"]),a(t,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:C(()=>[g("span",{class:h([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[g("img",{class:h(`${e.prefixCls}__header`),src:e.getAvatarUrl},null,10,ce),g("span",{class:h(`${e.prefixCls}__info hidden md:block`)},[g("span",{class:h([`${e.prefixCls}__name  `,"truncate"])},ne(e.getUserInfo.realname),3)],2)],2)]),_:1},8,["overlayClassName"]),a(m,{onRegister:e.register},null,8,["onRegister"]),a(w,{ref:"loginSelectRef"},null,512),a(k,{ref:"updatePasswordRef"},null,512)],64)}const Se=K(re,[["render",ie]]);export{Se as default};
