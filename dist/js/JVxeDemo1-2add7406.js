var T=(V,s,n)=>new Promise((f,_)=>{var C=u=>{try{h(n.next(u))}catch(b){_(b)}},k=u=>{try{h(n.throw(u))}catch(b){_(b)}},h=u=>u.done?f(u.value):Promise.resolve(u.value).then(C,k);h((n=n.apply(V,s)).next())});import{d as O,l as w,V as y,a7 as U,a8 as X,f as o,aa as l,E as c,ad as x,ae as Z,u as W,F as z}from"./vue-86253b15.js";import{bv as K,e as Q}from"./antd-vue-vendor-371529c2.js";import{ak as i,s as ee,am as te}from"./index-4de4eaa0.js";import{q as le}from"./jeecg-online-vendor-bc5d810e.js";import{r as d}from"./lodash-es-vendor-04a44d0a.js";import"./tinymce-vendor-7c917b36.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-6a8d95c4.js";const ae={style:{padding:"20px"}},oe=["onClick"],ne=x("a",null,"删除",-1),_e=O({__name:"JVxeDemo1",setup(V){const{createMessage:s}=le(),n=w(),f=w(!1),_=w(!1),C=w([{title:"ID",key:"id",type:i.hidden},{title:"不可编辑",key:"noEdit",type:i.normal,width:180,defaultValue:"noEdit-new"},{title:"单行文本",key:"input",type:i.input,width:180,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"请输入${title}"},{pattern:/^[a-z|A-Z][a-z|A-Z\d_-]*$/,message:"必须以字母开头，可包含数字、下划线、横杠"},{unique:!0,message:"${title}不能重复"},{handler({cellValue:e,row:a,column:t},r,m){e==="abc"?r(!1,"${title}不能是abc"):r(!0)},message:"${title}默认提示"}]},{title:"多行文本",key:"textarea",type:i.textarea,width:200},{title:"数字",key:"number",type:i.inputNumber,width:80,defaultValue:32,statistics:["sum","average"]},{title:"下拉框",key:"select",type:i.select,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],allowSearch:!0,placeholder:"请选择"},{title:"下拉框_字典",key:"select_dict",type:i.select,width:180,options:[],dictCode:"sex",placeholder:"请选择"},{title:"下拉框_多选",key:"select_multiple",type:i.selectMultiple,width:205,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],defaultValue:["int","boolean"],placeholder:"多选"},{title:"下拉框_搜索",key:"select_search",type:i.selectSearch,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}]},{title:"日期时间",key:"datetime",type:i.datetime,width:200,defaultValue:"2019-04-30 14:52:22",placeholder:"请选择"},{title:"时间",key:"time",type:i.time,width:200,defaultValue:"14:52:22",placeholder:"请选择"},{title:"复选框",key:"checkbox",type:i.checkbox,width:100,customValue:["Y","N"],defaultChecked:!1},{title:"操作",key:"action",type:i.slot,fixed:"right",minWidth:100,align:"center",slotName:"myAction"}]),k=w([]);function h(e,a,t=!1){t&&(f.value=!0);let r=()=>{let v=d(1e3,9999999999999);return Q(new Date(v)).format("YYYY-MM-DD HH:mm:ss")},m=(e-1)*a,g=["string","int","double","boolean"],D=Date.now(),p=[];for(let v=0;v<a;v++)p.push({id:ee(),noEdit:`noEdit-${m+v+1}`,input:`text-${m+v+1}`,textarea:`textarea-${m+v+1}`,number:d(0,233),select:g[d(0,3)],select_dict:d(1,2).toString(),select_multiple:(()=>{let L=d(1,4),$=[];for(let N=0;N<L;N++)te($,g[d(0,3)]);return $.join(",")})(),select_search:g[d(0,3)],datetime:r(),checkbox:["Y","N"][d(0,1)]});k.value=p;let S=Date.now()-D;t&&S<a&&setTimeout(()=>f.value=!1,a-S)}h(0,20,!0);function u(e){s.success("请在控制台查看输出")}function b(e){return T(this,null,function*(){var t;const a=yield(t=n.value)==null?void 0:t.removeRows(e.row);a&&a.rows.length>0&&s.success("删除成功")})}function B(e){}function E(e){}function I(){n.value.validateTable().then(e=>{e?s.error("验证未通过，请在控制台查看详细"):s.success("验证通过")})}function A(){const e=n.value.getTableData();s.success("获取值成功，请看控制台输出")}function M(){h(1,1e3,!0)}function Y(){const a=n.value.getXTable().getTableData().fullData[0];n.value.removeRows(a)}function j(){n.value.getXTable().removeCheckboxRow()}function J(){s.info("请看控制台")}function q(){n.value.clearSelection()}function F(){f.value=!f.value}function H(){_.value=!_.value}function P(e){return new Promise(a=>{let t=e.filter(r=>r.id);setTimeout(()=>a(!0),1500)})}function G(e){return T(this,null,function*(){const a=s.loading("删除中…",0);try{(yield P(e.deleteRows))?(yield e.confirmRemove(),s.success("删除成功！")):s.warn("删除失败！")}finally{a()}})}return(e,a)=>{const t=y("a-button"),r=y("a-space"),m=y("a-tooltip"),g=y("a-divider"),D=y("JVxeTable");return U(),X(z,null,[o(r,null,{default:l(()=>[o(t,{onClick:F},{default:l(()=>[c("切换加载")]),_:1}),o(t,{onClick:H},{default:l(()=>[c("切换禁用")]),_:1})]),_:1}),o(D,{ref_key:"tableRef",ref:n,stripe:"",toolbar:"",rowNumber:"",rowSelection:"",rowExpand:"",resizable:"",asyncRemove:"",clickSelectRow:"",height:480,checkboxConfig:{range:!0},disabledRows:{input:["text--16","text--18"]},loading:f.value,disabled:_.value,columns:C.value,dataSource:k.value,onRemoved:G,onValueChange:B,onBlur:E},{toolbarSuffix:l(()=>[o(t,{onClick:I},{default:l(()=>[c("表单验证")]),_:1}),o(m,{placement:"top",title:"获取值，忽略表单验证",autoAdjustOverflow:!0},{default:l(()=>[o(t,{onClick:A},{default:l(()=>[c("获取数据")]),_:1})]),_:1}),o(m,{placement:"top",title:"模拟加载1000条数据",autoAdjustOverflow:!0},{default:l(()=>[o(t,{onClick:M},{default:l(()=>[c("设置值")]),_:1})]),_:1}),o(t,{onClick:J},{default:l(()=>[c("获取选中数据")]),_:1}),o(t,{onClick:q},{default:l(()=>[c("清空选中")]),_:1}),o(t,{onClick:Y},{default:l(()=>[c("删除第一行数据")]),_:1}),o(t,{onClick:j},{default:l(()=>[c("删除选中数据")]),_:1})]),expandContent:l(p=>[x("div",ae,[x("span",null,"Hello! My name is: "+Z(p.row.input)+"!",1)])]),myAction:l(p=>[x("a",{onClick:R=>u(p)},"查看",8,oe),o(g,{type:"vertical"}),o(W(K),{title:"确定删除吗？",onConfirm:R=>b(p)},{default:l(()=>[ne]),_:2},1032,["onConfirm"])]),_:1},8,["loading","disabled","columns","dataSource"])],64)}}});export{_e as default};
