var u=(e,r,o)=>new Promise((c,i)=>{var s=t=>{try{n(o.next(t))}catch(l){i(l)}},p=t=>{try{n(o.throw(t))}catch(l){i(l)}},n=t=>t.done?c(t.value):Promise.resolve(t.value).then(s,p);n((o=o.apply(e,r)).next())});import{B as g}from"./index-9ca8f863.js";import{B as T}from"./BasicForm-e7d3537f.js";import"./componentMap-42aebfee.js";import{u as y}from"./useForm-b8bb8b05.js";import"./JAddInput-6e8b52df.js";import"./JSelectUser-9d666511.js";import"./JSelectDept-113b0470.js";import"./JPopup-746d3c0b.js";import{B as A}from"./index-26fb0584.js";import"./cron-parser-vendor-b0ab0fe2.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-8153fc9b.js";import{b as m,D as C}from"./jeecg-online-vendor-9cc54e36.js";import{d as w,k as b,V as f,a5 as I,a9 as B,a7 as _,f as M}from"./vue-5a09445c.js";const k=(e,r)=>{let o=r?"/sys/thirdApp/editThirdAppConfig":"/sys/thirdApp/addThirdAppConfig";return m.post({url:o,params:e},{joinParamsToUrl:!0})},S=e=>m.get({url:"/sys/thirdApp/getThirdConfigByTenantId",params:e}),E=()=>m.get({url:"/sys/thirdApp/sync/dingtalk/departAndUser/toLocal"},{isTransformResponse:!1}),F=[{label:"id",field:"id",component:"Input",show:!1},{label:"thirdType",field:"thirdType",component:"Input",show:!1},{label:"Agentld",field:"agentId",component:"Input",required:!0},{label:"AppKey",field:"clientId",component:"Input",required:!0},{label:"AppSecret",field:"clientSecret",component:"Input",required:!0},{label:"agentAppSecret",field:"agentAppSecret",component:"Input",ifShow:({values:e})=>e.thirdType=="wechat_enterprise"},{label:"启用",field:"status",component:"Switch",componentProps:{checkedChildren:"关闭",checkedValue:1,unCheckedChildren:"开启",unCheckedValue:0},defaultValue:1},{label:"租户id",field:"tenantId",component:"Input",show:!1}],v=w({name:"ThirdAppConfigModal",components:{BasicModal:g,BasicForm:T},setup(e,{emit:r}){const o=b("钉钉配置"),[c,{resetFields:i,setFieldsValue:s,validate:p}]=y({schemas:F,showActionButtonGroup:!1,labelCol:{span:24},wrapperCol:{span:24}}),[n,{setModalProps:t,closeModal:l}]=A(a=>u(this,null,function*(){t({confirmLoading:!0}),yield i();let d=yield S({tenantId:a.tenantId,thirdType:a.thirdType});t({confirmLoading:!1}),d?yield s(d):yield s(a)}));function h(){return u(this,null,function*(){let a=yield p(),d=!1;a.id&&(d=!0),yield k(a,d),r("success"),l()})}return{title:o,registerForm:c,registerModal:n,handleSubmit:h}}});function V(e,r,o,c,i,s){const p=f("BasicForm"),n=f("BasicModal");return I(),B(n,{onRegister:e.registerModal,width:800,title:e.title,onOk:e.handleSubmit},{default:_(()=>[M(p,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},8,["onRegister","title","onOk"])}const O=C(v,[["render",V]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{O as T,J as a,S as g,E as s};
