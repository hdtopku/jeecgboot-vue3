var de=Object.defineProperty,ue=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var j=(a,t,s)=>t in a?de(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,F=(a,t)=>{for(var s in t||(t={}))fe.call(t,s)&&j(a,s,t[s]);if(R)for(var s of R(t))ge.call(t,s)&&j(a,s,t[s]);return a},B=(a,t)=>ue(a,me(t));var c=(a,t,s)=>new Promise((h,d)=>{var x=p=>{try{y(s.next(p))}catch(u){d(u)}},z=p=>{try{y(s.throw(p))}catch(u){d(u)}},y=p=>p.done?h(p.value):Promise.resolve(p.value).then(x,z);y((s=s.apply(a,t)).next())});import{l as v,d as ve,aw as he,e as M,o as _e,V as N,a7 as S,a8 as $,ad as r,f as i,u as l,aa as o,R as E,af as ye,E as U,W as Ce,ae as xe,ac as W,a5 as be,a6 as ke}from"./vue-50733b77.js";import{bO as q,bk as V,c8 as we,cU as Se,ct as ze,bN as Te,cV as Ie,cq as Fe}from"./antd-vue-vendor-c5335947.js";import{p as A,r as Me,as as Ne,D as Ve,g as Ae}from"./index-b34ff7bc.js";import"./index-7e7a94e9.js";import{j as De,q as Le,_ as Oe}from"./jeecg-online-vendor-d3e1865b.js";import{u as Pe,B as Re}from"./useForm-14ceb529.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-058e2396.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-838914b0.js";import"./componentMap-5c02cfaf.js";import"./useFormItem-915d7f1b.js";import"./index-f7d688aa.js";import"./BasicModal-064024e0.js";import"./useWindowSizeFn-34cbae37.js";import"./index-fa22fec6.js";import"./download-49b89a1a.js";import"./base64Conver-fa2fe1af.js";import"./index-54db12ae.js";import"./index-f3acc26c.js";import"./useCountdown-9338ec9a.js";import"./useFormItemSingle-37938520.js";import"./JAddInput-9c2385b5.js";import"./areaDataUtil-5dfcdadb.js";import"./JSelectUser-99e618da.js";import"./props-2079d80b.js";import"./JSelectBiz-f98b6288.js";import"./index-95220aa0.js";import"./index-7963a080.js";import"./bem-e62027cc.js";import"./props-12d3a914.js";import"./useContextMenu-e6153f12.js";import"./depart.api-1967d2cb.js";import"./JSelectDept-0fd43050.js";import"./JPopup-8bd4163b.js";import"./cron-parser-vendor-19ac00ef.js";import"./JEllipsis-66e02300.js";import"./JUpload-c8630cc9.js";import"./index-665aeeac.js";import"./index-1ac4dcff.js";const Ut=v(12),je=(a=6,t=12)=>({min:a,max:t,marks:(()=>{const h={};for(let d=a;d<t+1;d++)h[d]={style:{color:"#fff"},label:d};return h})(),step:1}),H=a=>(be("data-v-87eac9cf"),a=a(),ke(),a),Be={class:"p-2"},$e={class:"bg-white mb-2 p-4"},Ee={class:"bg-white p-2"},Ue={class:"flex justify-start space-x-2"},We=H(()=>r("div",{class:"w-50"},"每行显示数量",-1)),qe=H(()=>r("em",{class:"aui-tag"},[r("div",{class:"aui-tag-re"}),r("div",{class:"aui-tag-ye"}),r("div",{class:"aui-tag-bl"})],-1)),He={key:0,class:"lock-to-right"},Je={class:"title-div ellipsis"},Qe=["onClick"],Ge=["src"],Ke={class:"image-mask"},Xe="https://jeecgdev.oss-cn-beijing.aliyuncs.com/temp/designCover_1655434422024.png",Ye=ve({__name:"CardList",props:{params:A.object.def({}),api:A.func,searchFormSchema:A.object.def([])},emits:["getMethod","delete","edit","view","design","add","copy"],setup(a,{emit:t}){const s=a;he(e=>({"1d04bc9c":G.value,"69c3dd11":Q.value}));const{hasPermission:h}=Me(),d=q.Item,{createMessage:x}=Le(),{clipboardRef:z,copiedRef:y}=Ne(),p=v(!1),u=v(5),J=M(()=>je(4,7)),D=v([]),Q=M(()=>`${200-u.value*8}px`),G=M(()=>{let e=u.value;return e==4?"360px":e==6?"230px":e==7?"190px":"280px"}),[K,{validate:b}]=Pe({schemas:s.searchFormSchema,labelWidth:80,baseColProps:{span:6},actionColOptions:{xs:24,sm:12,md:12,lg:8,xl:8,xxl:6,style:{textAlign:"left"}},autoSubmitOnEnter:!0,submitFunc:X,resetFunc:Y});function X(){return c(this,null,function*(){const e=yield b();k.value=1,yield m(e)})}function Y(){return c(this,null,function*(){yield m()})}function Z(e){return c(this,null,function*(){C.value=e*3;const n=yield b();m(n)})}_e(()=>{m(),t("getMethod",m)});function m(){return c(this,arguments,function*(e={}){p.value=!0;const{api:n,params:f}=s;if(n&&De(n)){const _=yield n(F(B(F({},f),{pageNo:k.value,pageSize:C.value}),e));D.value=_.records,L.value=_.total}p.value=!1})}const k=v(1),C=v(15),L=v(0),ee=v({showSizeChanger:!1,showQuickJumper:!0,pageSize:C,pageNo:k,total:L,showTotal:e=>`总 ${e} 条`,onChange:te,onShowSizeChange:ne});function te(e,n){return c(this,null,function*(){k.value=e,C.value=n;const f=yield b();m(f)})}function ne(e,n){return c(this,null,function*(){C.value=n;const f=yield b();m(f)})}function ae(e){return e?Ae(e):Xe}function se(e){if(s.params.izTemplate==="1"){let n=[];return w()?n=[{text:"编辑",event:"1",onClick:O.bind(null,e)},{text:"复制面板",event:"2",onClick:T.bind(null,e.id)},{text:"取消模板",event:"6",onClick:I.bind(null,e,"0")}]:n=[{text:"复制面板",event:"2",onClick:T.bind(null,e.id)}],n}else{let n=[{text:"编辑",event:"1",onClick:O.bind(null,e)},{text:"复制面板",event:"2",onClick:T.bind(null,e.id)},{text:"复制路由",event:"3",onClick:oe.bind(null,e.path)}];return w()&&(e.izTemplate=="1"?n.push({text:"取消模板",event:"6",onClick:I.bind(null,e,"0")}):n.push({text:"收藏模板",event:"5",onClick:I.bind(null,e,"1")})),ie(e)?n.push({text:"删除",event:"4",onClick:P.bind(null,e)}):n.push({text:"删除",event:"4",popConfirm:{title:"是否确认删除",confirm:P.bind(null,e)}}),n}}function w(){return h("drag:template:edit")}function ie(e){return e.protectionCode&&e.protectionCode.length>0}function T(e){t("copy",e)}function oe(e){return c(this,null,function*(){e?(z.value=e,l(y)&&x.success("复制成功！")):x.warning("复制失败，请检查路径！")})}function Ze(){return c(this,null,function*(){t("add")})}function O(e){return c(this,null,function*(){t("edit",e)})}function P(e){return c(this,null,function*(){t("delete",e)})}function le(e){return c(this,null,function*(){t("view",e)})}function ce(e){return c(this,null,function*(){s.params.izTemplate==="1"&&!w()?t("view",e.id):t("design",e)})}function I(e,n){return c(this,null,function*(){t("template",e.id,n)})}return(e,n)=>{const f=N("a-button"),_=N("Icon"),re=N("a-spin");return S(),$("div",Be,[r("div",$e,[i(l(Re),{onRegister:l(K)},null,8,["onRegister"])]),i(re,{spinning:p.value},{default:o(()=>[r("div",Ee,[E(e.$slots,"cardTitle",{},void 0,!0),i(l(q),{grid:{gutter:5,xs:1,sm:2,md:3,lg:3,xl:4,xxl:u.value},size:"small","data-source":D.value,pagination:ee.value},{header:o(()=>[r("div",Ue,[E(e.$slots,"header",{},void 0,!0),i(l(V),null,{title:o(()=>[We,i(l(we),ye({id:"slider"},J.value,{value:u.value,"onUpdate:value":n[0]||(n[0]=g=>u.value=g),onChange:Z}),null,16,["value"])]),default:o(()=>[i(f,{type:"primary",style:{"min-width":"80px"}},{default:o(()=>[i(l(Se))]),_:1})]),_:1}),i(l(V),null,{title:o(()=>[U("刷新")]),default:o(()=>[i(f,{onClick:m},{default:o(()=>[i(l(ze))]),_:1})]),_:1})])]),renderItem:o(({item:g,index:et})=>[i(l(d),{style:{"margin-top":"10px"}},{default:o(()=>[i(l(Te),{class:"cardItem",size:"small",headStyle:{textAlign:"left",fontWeight:"500",background:"#efefef",minHeight:"20px"},bodyStyle:{display:"none"}},{title:o(()=>[qe,g.protectionCode?(S(),$("span",He,[i(_,{icon:"ant-design:lock-filled",size:15,style:{margin:"5px"}})])):Ce("",!0)]),cover:o(()=>[r("div",Je,xe(g.name),1),r("div",{class:"image-div",onClick:pe=>ce(g)},[r("img",{src:ae(g.coverUrl)},null,8,Ge),r("div",Ke,[a.params.izTemplate==="1"&&!w()?(S(),W(_,{key:0,icon:"ant-design:eye-outlined",size:60})):(S(),W(_,{key:1,icon:"ri:drag-drop-fill",size:60}))])],8,Qe)]),actions:o(()=>[i(l(V),null,{title:o(()=>[U("预览")]),default:o(()=>[i(l(Ie),{key:"view",style:{"font-size":"20px"},onClick:pe=>le(g.id)},null,8,["onClick"])]),_:2},1024),i(l(Ve),{trigger:["hover"],dropMenuList:se(g),popconfirm:""},{default:o(()=>[i(l(Fe),{key:"set",style:{"font-size":"20px"}})]),_:2},1032,["dropMenuList"])]),_:2},1024)]),_:2},1024)]),_:3},8,["grid","data-source","pagination"])])]),_:3},8,["spinning"])])}}});const Wt=Oe(Ye,[["__scopeId","data-v-87eac9cf"]]);export{Wt as default};
