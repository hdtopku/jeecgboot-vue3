import{_ as I}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-48b40782.js";import{t as Q,q as w,K as y,N as L}from"./jeecg-online-vendor-658239c9.js";import{G as T,L as q}from"./index-0d179770.js";import{Q as B}from"./index-a03fd1c3.js";import{ac as N,ab as b}from"./antd-vue-vendor-a78909e6.js";import{d as E,k as f,e as g,u as t,w as V,a5 as D,a6 as F,f as o,aa as j,a7 as _,E as p,ab as v,F as U,W as z}from"./vue-bcbaddf9.js";const G={class:"enter-x min-w-64 min-h-64"},J=E({__name:"QrCodeForm",setup(K){const c=f("");let a;const{t:s}=w(),k=Q(),{handleBackLogin:C,getLoginState:h}=T(),n=f("0"),i=g(()=>t(h)===q.QR_CODE),x=g(()=>t(n)==="0"?s("sys.login.scanSign"):s("sys.login.scanSuccess"));function l(){n.value="0",y().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){L({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(a)),r.success&&(n.value="2",clearInterval(a),setTimeout(()=>{k.qrCodeLogin(d)},500))})}function S(e){u(e),m(),a=setInterval(()=>{u(e)},1500)}function m(){a&&clearInterval(a)}return V(i,e=>{e?l():m()}),(e,r)=>i.value?(D(),F(U,{key:0},[o(I,{class:"enter-x"}),j("div",G,[o(t(B),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),o(t(N),{class:"enter-x"},{default:_(()=>[p(v(x.value),1)]),_:1}),o(t(b),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:_(()=>[p(v(t(s)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):z("",!0)}});export{J as _};
