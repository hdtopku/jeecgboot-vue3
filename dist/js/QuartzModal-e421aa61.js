var q=Object.defineProperty;var f=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&y(e,r,t[r]);if(f)for(var r of f(t))w.call(t,r)&&y(e,r,t[r]);return e};var b=(e,t,r)=>new Promise((d,c)=>{var m=s=>{try{l(r.next(s))}catch(u){c(u)}},p=s=>{try{l(r.throw(s))}catch(u){c(u)}},l=s=>s.done?d(s.value):Promise.resolve(s.value).then(m,p);l((r=r.apply(e,t)).next())});import{d as I,l as T,e as _,u as n,a7 as v,ac as B,aa as C,f as S,af as j}from"./vue-86253b15.js";import{B as M}from"./index-5f3b36bb.js";import"./index-2b71c6a1.js";import{render as z}from"./renderUtils-3d92a36f.js";import{J as P}from"./componentMap-804f169d.js";import{ap as o,b4 as U}from"./jeecg-online-vendor-bc5d810e.js";import{M as E}from"./antd-vue-vendor-371529c2.js";import{u as Q,B as N}from"./useForm-61401b42.js";import{E as O}from"./index-4de4eaa0.js";const A=[{title:"任务类名",dataIndex:"jobClassName",width:200,align:"left"},{title:"Cron表达式",dataIndex:"cronExpression",width:200},{title:"参数",dataIndex:"parameter",width:200},{title:"描述",dataIndex:"description",width:200},{title:"状态",dataIndex:"status",width:100,customRender:({text:e})=>{const t=e=="0"?"green":e=="-1"?"red":"gray";return z.renderTag(z.renderDict(e,"quartz_status"),t)}}],ee=[{field:"jobClassName",label:"任务类名",component:"Input",colProps:{span:8}},{field:"status",label:"任务状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",stringToNumber:!0},colProps:{span:8}}],F=[{field:"id",label:"id",component:"Input",show:!1},{field:"jobClassName",label:"任务类名",component:"Input",required:!0},{field:"cronExpression",label:"Cron表达式",component:"JEasyCron",defaultValue:"* * * * * ? *",rules:[{required:!0,message:"请输入Cron表达式"},{validator:P}]},{field:"paramterType",label:"参数类型",component:"Select",defaultValue:"string",componentProps:{options:[{label:"字符串",value:"string"},{label:"JSON对象",value:"json"}]}},{field:"parameter",label:"参数",component:"InputTextArea",ifShow:({values:e})=>e.paramterType=="string"},{field:"parameter",label:"参数",component:"JAddInput",helpMessage:"键值对形式填写",ifShow:({values:e})=>e.paramterType=="json"},{field:"status",label:"状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",type:"radioButton",stringToNumber:!0,dropdownStyle:{maxHeight:"6vh"}}},{field:"description",label:"描述",component:"InputTextArea"}];const te="/sys/quartzJob/exportXls",re="/sys/quartzJob/importExcel",se=e=>o.get({url:"/sys/quartzJob/list",params:e}),k=(e,t)=>{let r=t?"/sys/quartzJob/edit":"/sys/quartzJob/add";return o.post({url:r,params:e})};const ae=(e,t)=>o.delete({url:"/sys/quartzJob/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),oe=(e,t)=>o.get({url:"/sys/quartzJob/resume",params:e}).then(()=>{t()}),ne=(e,t)=>o.get({url:"/sys/quartzJob/pause",params:e}).then(()=>{t()}),le=(e,t)=>o.get({url:"/sys/quartzJob/execute",params:e}).then(()=>{t()}),ue=(e,t)=>{E.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>o.delete({url:"/sys/quartzJob/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},R=I({__name:"QuartzModal",emits:["register","success"],setup(e,{emit:t}){const r=T(!0),[d,{resetFields:c,setFieldsValue:m,validate:p}]=Q({schemas:F,showActionButtonGroup:!1,labelWidth:100,labelCol:null,wrapperCol:null}),[l,{setModalProps:s,closeModal:u}]=O(a=>b(this,null,function*(){var i;if(yield c(),s({confirmLoading:!1}),r.value=!!(a!=null&&a.isUpdate),n(r)){try{a.record.paramterType=U((i=a==null?void 0:a.record)==null?void 0:i.parameter)?"json":"string"}catch(V){}yield m(g({},a.record))}})),J=_(()=>n(r)?"编辑任务":"新增任务");function h(a){return b(this,null,function*(){try{let i=yield p();s({confirmLoading:!0}),yield k(i,r.value),u(),t("success")}finally{s({confirmLoading:!1})}})}return(a,i)=>(v(),B(n(M),j(a.$attrs,{onRegister:n(l),title:J.value,onOk:h,width:"40%"}),{default:C(()=>[S(n(N),{onRegister:n(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{ie as Q,R as _,te as a,re as b,A as c,ae as d,le as e,ue as f,se as g,ne as p,oe as r,ee as s};
