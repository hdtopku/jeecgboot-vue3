var p=(f,s,o)=>new Promise((d,r)=>{var u=e=>{try{n(o.next(e))}catch(i){r(i)}},c=e=>{try{n(o.throw(e))}catch(i){r(i)}},n=e=>e.done?d(e.value):Promise.resolve(e.value).then(u,c);n((o=o.apply(f,s)).next())});import{u as R,B as w}from"./index-e95eba3a.js";import I from"./BasicTable-11e9afcb.js";import{Q as v}from"./componentMap-bab84cb7.js";import{u as S}from"./useTable-992ea772.js";import"./index-cd2db611.js";import{_ as D}from"./DataRuleModal.vue_vue_type_script_setup_true_lang-1c6d0b3a.js";import{d as T,a as k,b as y,c as B}from"./menu.data-9778a9c8.js";import{useDrawerAdaptiveWidth as E}from"./useAdaptiveWidth-8d86514b.js";import{z as F}from"./index-b03d7914.js";import{d as P,k as z,V as A,a5 as M,a6 as V,f as l,a7 as m,u as a,E as L,ag as N,F as U}from"./vue-bcbaddf9.js";const Z=P({__name:"DataRuleList",setup(f){const s=z(""),{adaptiveWidth:o}=E(),[d,{openModal:r}]=F(),[u]=R(t=>p(this,null,function*(){s.value=t.id,i({searchInfo:{permissionId:a(s)}}),e()})),c={xs:24,sm:24,md:24,lg:12,xl:8,xxl:8},[n,{reload:e,setProps:i}]=S({api:T,columns:k,size:"small",formConfig:{baseColProps:c,labelAlign:"right",labelCol:{offset:1,xs:24,sm:24,md:24,lg:8,xl:8,xxl:8},wrapperCol:{},schemas:y,autoSubmitOnEnter:!0},striped:!0,useSearchForm:!0,bordered:!0,showIndexColumn:!1,showTableSetting:!1,canResize:!1,immediate:!1,actionColumn:{width:100,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function g(){r(!0,{isUpdate:!1})}function h(t){r(!0,{record:t,isUpdate:!0})}function b(t){return p(this,null,function*(){yield B({id:t.id},e)})}function _(t){return[{label:"编辑",onClick:h.bind(null,t)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:b.bind(null,t)}}]}return(t,W)=>{const C=A("a-button");return M(),V(U,null,[l(a(w),N(t.$attrs,{onRegister:a(u),title:"数据权限规则",width:a(o)}),{default:m(()=>[l(a(I),{onRegister:a(n)},{tableTitle:m(()=>[l(C,{type:"primary",onClick:g},{default:m(()=>[L(" 新增")]),_:1})]),action:m(({record:x})=>[l(a(v),{actions:_(x)},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","width"]),l(D,{onRegister:a(d),onSuccess:a(e),permissionId:s.value},null,8,["onRegister","onSuccess","permissionId"])],64)}}});export{Z as _};
