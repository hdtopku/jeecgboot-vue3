var ge=Object.defineProperty,pe=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Z=(c,r,n)=>r in c?ge(c,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[r]=n,Q=(c,r)=>{for(var n in r||(r={}))fe.call(r,n)&&Z(c,n,r[n]);if(Y)for(var n of Y(r))ve.call(r,n)&&Z(c,n,r[n]);return c},ee=(c,r)=>pe(c,_e(r));var L=(c,r,n)=>new Promise((b,v)=>{var M=h=>{try{R(n.next(h))}catch(g){v(g)}},s=h=>{try{R(n.throw(h))}catch(g){v(g)}},R=h=>h.done?b(h.value):Promise.resolve(h.value).then(M,s);R((n=n.apply(c,r)).next())});import{d as ie,r as O,l as m,o as he,V as K,a7 as f,a8 as x,f as t,u as o,ad as e,v as D,B as U,ak as k,ae as p,ac as oe,aa as C,a9 as G,E as ye,a5 as xe,a6 as ke,J as Ce}from"./vue-86253b15.js";import{u as be,V as we,q as Ie,o as Se,bs as Te,b9 as Le,bp as Me,_ as Re}from"./jeecg-online-vendor-bc5d810e.js";import{c as Be}from"./checkcode-5ec5fe8f.js";import Fe from"./ThirdModal-42c14f0f.js";import $e from"./MiniForgotpad-adefccf1.js";import Ke from"./MiniRegister-5528877c.js";import De from"./MiniCodelogin-487166db.js";import{a as Ue}from"./jeecg_ad_text-1683a714.js";import{m as Ee,K as Ne,av as Pe,aw as je}from"./index-4de4eaa0.js";import{cX as qe,cY as Oe,cZ as Ge,c_ as Ve}from"./antd-vue-vendor-371529c2.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";import"./index-f5da07b2.js";import"./useCountdown-7a164eb2.js";import"./useFormItemSingle-1ae794f9.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./useThirdLogin-0d9bb353.js";import"./index-f8bb3218.js";import"./download-dda5b956.js";import"./base64Conver-fa2fe1af.js";const se="/assets/jeecg_logo-f622e7d4.png",V=c=>(xe("data-v-9a3c7ccc"),c=c(),ke(),c),Ae={key:0,class:"aui-logo"},He=["src"],We={key:1,class:"aui-phone-logo"},ze=["src"],Je={class:"aui-content"},Xe={class:"aui-container"},Ye={class:"aui-form"},Ze={class:"aui-image"},Qe={class:"aui-image-text"},eo=["src"],oo={class:"aui-formBox"},so={class:"aui-formWell"},io={class:"aui-flex aui-form-nav investment_title"},no={class:"aui-form-box",style:{height:"180px"}},to={class:"aui-account"},ao={class:"aui-inputClear"},lo=V(()=>e("i",{class:"icon icon-code"},null,-1)),co={class:"aui-inputClear"},ro=V(()=>e("i",{class:"icon icon-password"},null,-1)),uo={class:"aui-inputClear"},mo=V(()=>e("i",{class:"icon icon-code"},null,-1)),go={class:"aui-code"},po=["src"],_o=["src"],fo={class:"aui-flex"},vo={class:"aui-flex-box"},ho={class:"aui-choice"},yo={style:{"margin-left":"5px"}},xo={class:"aui-forget"},ko={class:"aui-account phone"},Co={class:"aui-inputClear phoneClear"},bo={class:"aui-inputClear"},wo={key:1,class:"aui-code"},Io={class:"aui-get-code code-shape"},So={class:"aui-formButton"},To={class:"aui-flex"},Lo={class:"aui-flex"},Mo={class:"aui-flex"},Ro={class:"aui-flex aui-third-text"},Bo={class:"aui-flex-box aui-third-border"},Fo={class:"aui-flex-box"},$o={class:"aui-third-login"},Ko={class:"aui-flex-box"},Do={class:"aui-third-login"},Uo={class:"aui-flex-box"},Eo={class:"aui-third-login"},No={class:"aui-flex-box"},Po={class:"aui-third-login"},jo=ie({name:"login-mini"}),qo=ie(ee(Q({},jo),{props:{sessionTimeout:{type:Boolean}},setup(c){const r=qe({scriptUrl:"//at.alicdn.com/t/font_2316098_umqusozousr.js"}),{prefixCls:n}=Ee("mini-login"),{notification:b,createMessage:v}=Ie(),M=be(),{t:s}=Se(),h=we().getShowPicker,g=O({randCodeImage:"",requestCodeSuccess:!1,checkKey:null}),A=m("0"),y=m("accountLogin"),_=m("login"),u=O({inputCode:"",username:"admin",password:"123456"}),d=O({mobile:"",smscode:""}),ne=m(),H=m(),W=m(),E=m(!0),w=m(60),B=m(null),z=m(),J=m(),S=m(!1),{getIsMobile:te}=Ne();function T(){u.inputCode="",g.checkKey=1629428467008,Te(g.checkKey).then(a=>{g.randCodeImage=a,g.requestCodeSuccess=!0})}function X(a){y.value=a}function F(){return L(this,null,function*(){o(y)==="accountLogin"?ae():le()})}function ae(){return L(this,null,function*(){if(!u.username){v.warn(s("sys.login.accountPlaceholder"));return}if(!u.password){v.warn(s("sys.login.passwordPlaceholder"));return}try{S.value=!0;const{userInfo:a}=yield M.login(Ce({password:u.password,username:u.username,captcha:u.inputCode,checkKey:g.checkKey,mode:"none"}));a&&b.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){b.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3}),T()}finally{S.value=!1}})}function le(){return L(this,null,function*(){if(!d.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}if(!d.smscode){v.warn(s("sys.login.smsPlaceholder"));return}try{S.value=!0;const{userInfo:a}=yield M.phoneLogin({mobile:d.mobile,captcha:d.smscode,mode:"none"});a&&b.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){b.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3})}finally{S.value=!1}})}function ce(){return L(this,null,function*(){if(!d.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}(yield Le({mobile:d.mobile,smsmode:Me.FORGET_PASSWORD}))&&(o(B)||(w.value=60,E.value=!1,B.value=setInterval(()=>{o(w)>0&&o(w)<=60?w.value=w.value-1:(E.value=!0,clearInterval(o(B)),B.value=null)},1e3)))})}function $(a){H.value.onThirdLogin(a)}function re(){_.value="forgot",setTimeout(()=>{z.value.initForm()},300)}function N(){y.value="accountLogin",_.value="login"}function P(a){Object.assign(u,a),Object.assign(d,{mobile:"",smscode:""}),_.value="login",y.value="accountLogin",T()}function ue(){_.value="register",setTimeout(()=>{J.value.initForm()},300)}function de(){_.value="codeLogin",setTimeout(()=>{W.value.initFrom()},300)}return he(()=>{T()}),(a,i)=>{const I=K("a-input"),j=K("a-form-item"),q=K("a-form"),me=K("a-button");return f(),x("div",{class:k([o(n),"login-background-img"])},[t(o(Pe),{class:"absolute top-4 right-4 enter-x xl:text-gray-600",showText:!1}),t(o(je),{class:"absolute top-3 right-7 enter-x"}),o(te)?(f(),x("div",We,[e("img",{src:o(se),alt:"jeecg"},null,8,ze)])):(f(),x("div",Ae,[e("div",null,[e("h3",null,[e("img",{src:o(se),alt:"jeecg"},null,8,He)])])])),D(e("div",null,[e("div",Je,[e("div",Xe,[e("div",Ye,[e("div",Ze,[e("div",Qe,[e("img",{src:o(Ue)},null,8,eo)])]),e("div",oo,[e("div",so,[e("div",io,[e("div",{class:k(["aui-flex-box",y.value==="accountLogin"?"activeNav on":""]),onClick:i[0]||(i[0]=l=>X("accountLogin"))},p(o(s)("sys.login.signInFormTitle")),3),e("div",{class:k(["aui-flex-box",y.value==="phoneLogin"?"activeNav on":""]),onClick:i[1]||(i[1]=l=>X("phoneLogin"))},p(o(s)("sys.login.mobileSignInFormTitle")),3)]),e("div",no,[y.value==="accountLogin"?(f(),oe(q,{key:0,ref_key:"loginRef",ref:ne,model:u,onKeyup:G(F,["enter","native"])},{default:C(()=>[e("div",to,[e("div",ao,[lo,t(j,null,{default:C(()=>[t(I,{class:"fix-auto-fill",placeholder:o(s)("sys.login.userName"),value:u.username,"onUpdate:value":i[2]||(i[2]=l=>u.username=l)},null,8,["placeholder","value"])]),_:1})]),e("div",co,[ro,t(j,null,{default:C(()=>[t(I,{class:"fix-auto-fill",type:"password",placeholder:o(s)("sys.login.password"),value:u.password,"onUpdate:value":i[3]||(i[3]=l=>u.password=l)},null,8,["placeholder","value"])]),_:1})]),e("div",uo,[mo,t(j,null,{default:C(()=>[t(I,{class:"fix-auto-fill",type:"text",placeholder:o(s)("sys.login.inputCode"),value:u.inputCode,"onUpdate:value":i[4]||(i[4]=l=>u.inputCode=l)},null,8,["placeholder","value"])]),_:1}),e("div",go,[g.requestCodeSuccess?(f(),x("img",{key:0,src:g.randCodeImage,onClick:T},null,8,po)):(f(),x("img",{key:1,style:{"margin-top":"2px","max-width":"initial"},src:o(Be),onClick:T},null,8,_o))])]),e("div",fo,[e("div",vo,[e("div",ho,[t(I,{class:"fix-auto-fill",type:"checkbox",value:A.value,"onUpdate:value":i[5]||(i[5]=l=>A.value=l)},null,8,["value"]),e("span",yo,p(o(s)("sys.login.rememberMe")),1)])]),e("div",xo,[e("a",{onClick:re},p(o(s)("sys.login.forgetPassword")),1)])])])]),_:1},8,["model","onKeyup"])):(f(),oe(q,{key:1,ref:"phoneFormRef",model:d,onKeyup:G(F,["enter","native"])},{default:C(()=>[e("div",ko,[e("div",Co,[t(I,{class:"fix-auto-fill",placeholder:o(s)("sys.login.mobile"),value:d.mobile,"onUpdate:value":i[6]||(i[6]=l=>d.mobile=l)},null,8,["placeholder","value"])]),e("div",bo,[t(I,{class:"fix-auto-fill",maxlength:6,placeholder:o(s)("sys.login.smsCode"),value:d.smscode,"onUpdate:value":i[7]||(i[7]=l=>d.smscode=l)},null,8,["placeholder","value"]),E.value?(f(),x("div",{key:0,class:"aui-code",onClick:ce},[e("a",null,p(o(s)("component.countdown.normalText")),1)])):(f(),x("div",wo,[e("span",Io,p(o(s)("component.countdown.sendText",[o(w.value)])),1)]))])])]),_:1},8,["model","onKeyup"]))]),e("div",So,[e("div",To,[t(me,{loading:S.value,class:"aui-link-login aui-flex-box",type:"primary",onClick:F},{default:C(()=>[ye(p(o(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),e("div",Lo,[e("a",{class:"aui-linek-code aui-flex-box",onClick:de},p(o(s)("sys.login.qrSignInFormTitle")),1)]),e("div",Mo,[e("a",{class:"aui-linek-code aui-flex-box",onClick:ue},p(o(s)("sys.login.registerButton")),1)])])]),t(q,{onKeyup:G(F,["enter","native"])},{default:C(()=>[e("div",Ro,[e("div",Bo,[e("span",null,p(o(s)("sys.login.otherSignIn")),1)])]),e("div",{class:k(["aui-flex",`${o(n)}-sign-in-way`])},[e("div",Fo,[e("div",$o,[e("a",{title:"github",onClick:i[8]||(i[8]=l=>$("github"))},[t(o(Oe))])])]),e("div",Ko,[e("div",Do,[e("a",{title:"企业微信",onClick:i[9]||(i[9]=l=>$("wechat_enterprise"))},[t(o(r),{class:"item-icon",type:"icon-qiyeweixin3"})])])]),e("div",Uo,[e("div",Eo,[e("a",{title:"钉钉",onClick:i[10]||(i[10]=l=>$("dingtalk"))},[t(o(Ge))])])]),e("div",No,[e("div",Po,[e("a",{title:"微信",onClick:i[11]||(i[11]=l=>$("wechat_open"))},[t(o(Ve))])])])],2)]),_:1},8,["onKeyup"])])])])])],512),[[U,_.value==="login"]]),D(e("div",{class:k(`${o(n)}-form`)},[t($e,{ref_key:"forgotRef",ref:z,onGoBack:N,onSuccess:P},null,512)],2),[[U,_.value==="forgot"]]),D(e("div",{class:k(`${o(n)}-form`)},[t(Ke,{ref_key:"registerRef",ref:J,onGoBack:N,onSuccess:P},null,512)],2),[[U,_.value==="register"]]),D(e("div",{class:k(`${o(n)}-form`)},[t(De,{ref_key:"codeRef",ref:W,onGoBack:N,onSuccess:P},null,512)],2),[[U,_.value==="codeLogin"]]),t(Fe,{ref_key:"thirdModalRef",ref:H},null,512)],2)}}}));const ds=Re(qo,[["__scopeId","data-v-9a3c7ccc"]]);export{ds as default};
