import{d as i,k as w,g as m,U as C,a5 as o,a9 as d,a7 as n,a6 as p,f as u,E as l,V as e,t as U,A as j,aa as b,ab as y,am as aa}from"./vue-249e5fad.js";import{s as A,g as sa}from"./AmLink.api-c5bb4955.js";import{_ as na}from"./CommonList.vue_vue_type_script_setup_true_lang-c85756cb.js";import{g as la}from"./Am.api-dfa94102.js";import{D as oa,E as ua}from"./jeecg-online-vendor-7e3ae2e6.js";import{d as ea}from"./antd-vue-vendor-31afcf32.js";const da={key:0},ra={key:0},ca={size:"small",class:"text-red-500"},ta={key:2,style:{"margin-left":"-10px"}},_a={key:0,class:"text-indigo-700"},ya={key:0,class:"text-red-600"},pa={key:1},fa={key:2},ka={key:3},ha={key:4},ga={class:"text-indigo-700"},va={key:0},wa=i({__name:"AmLinkDataList",emits:["handleEdit","handleAdd","queryList"],setup(Ca,{expose:F,emit:v}){const z=oa(ua);let{username:G,realname:ba}=z==null?void 0:z.userInfo;const B=w(),Y=s=>{v("handleEdit",s)},J=s=>{v("handleAdd",s)},E=s=>$(s==null?void 0:s.link)+$(s==null?void 0:s.thirdLink)+$(s==null?void 0:s.shortLink),$=s=>{if((s==null?void 0:s.indexOf("itunes.apple.com"))>0){let r=s==null?void 0:s.indexOf("&ud_t=");if(r>0){let t=Number.parseInt(s==null?void 0:s.substring(r+6))*1e3;return ea(t).format("MM-DD HH:mm")}}return""},x=s=>{if((s==null?void 0:s.length)>0){let r=s.indexOf("clicked/");if(r>=0)return s.substring(r,r+13);if(r=s.indexOf("&ud_t="),r>=0)return s.substring(r+4)}return s},N=(s,r)=>{s.status=r,A(s,!0).then(()=>{v("queryList")})},P=s=>{A({id:s},!0).then(()=>{v("queryList")})},L=(s,r)=>{s.type=r,A(s,!0).then(()=>{v("queryList")})},{proxy:W}=m(),O=(s={})=>la({count:1,type:6,linkId:s==null?void 0:s.id,link:s==null?void 0:s.link,username:G},r=>{W.tool.copy(r,r+"已复制")}),h=w("0"),X=(s={})=>{h.value=s==null?void 0:s.status,B.value.execQuery(sa,s)},g=w(!1);return F({startQuery:X,changeAdvanced:()=>{g.value=!g.value},copyCode:O}),(s,r)=>{const t=C("a-button"),k=C("a-typography-text"),f=C("a-menu-item"),Z=C("a-menu"),_=C("a-tag");return o(),d(na,{ref_key:"CommonListRef",ref:B},{header:n(()=>[h.value==="1"?(o(),p("span",da,[u(t,{class:"mr-6",size:"small",type:"primary",preIcon:"ant-design:plus-outlined",onClick:J},{default:n(()=>[l("新增")]),_:1}),u(k,{class:"mr-6",copyable:{text:"https://www.myunidays.hk/CN/zh-CN/partners/applemusic/micro-access/online"}},{default:n(()=>[l("online地址 ")]),_:1},8,["copyable"])])):e("",!0),U(u(k,{mark:""},{default:n(()=>[l("按创建时间倒排")]),_:1},512),[[j,h.value==="0"]]),U(u(k,{mark:""},{default:n(()=>[l("按修改时间倒排 ")]),_:1},512),[[j,h.value==="100"||h.value==="-1"||h.value==="1"]])]),operate:n(({item:a})=>[u(Z,null,{default:n(()=>[(a==null?void 0:a.status)!==0?(o(),d(f,{key:0,onClick:c=>P(a.id)},{default:n(()=>[u(t,{type:"warning",ghost:"",size:"small"},{default:n(()=>[l("置顶")]),_:1})]),_:2},1032,["onClick"])):e("",!0),u(f,{onClick:c=>Y(a)},{default:n(()=>[u(t,{type:"link",size:"small"},{default:n(()=>[l("编辑")]),_:1})]),_:2},1032,["onClick"]),(a==null?void 0:a.status)===0||(a==null?void 0:a.status)===1?(o(),d(f,{key:1,onClick:c=>N(a,-1)},{default:n(()=>[u(t,{type:"link",size:"small",danger:""},{default:n(()=>[l("删除")]),_:1})]),_:2},1032,["onClick"])):e("",!0),(a==null?void 0:a.status)===0||(a==null?void 0:a.status)===-1?(o(),d(f,{key:2,onClick:c=>N(a,1)},{default:n(()=>[u(t,{type:"link",size:"small"},{default:n(()=>[l("备用")]),_:1})]),_:2},1032,["onClick"])):e("",!0),(a==null?void 0:a.status)===-1||(a==null?void 0:a.status)===1?(o(),d(f,{key:3,onClick:c=>N(a,0)},{default:n(()=>[u(t,{type:"link",size:"small"},{default:n(()=>[l("使用")]),_:1})]),_:2},1032,["onClick"])):e("",!0),(a==null?void 0:a.type)!==1&&(a==null?void 0:a.type)!==6?(o(),d(f,{key:4},{default:n(()=>[u(t,{onClick:c=>L(a,6),type:"link",size:"small"},{default:n(()=>[l("设为至尊")]),_:2},1032,["onClick"])]),_:2},1024)):e("",!0),(a==null?void 0:a.type)!==1&&(a==null?void 0:a.type)!==6?(o(),d(f,{key:5},{default:n(()=>[u(t,{onClick:c=>L(a,1),type:"link",size:"small"},{default:n(()=>[l("设为普通")]),_:2},1032,["onClick"])]),_:2},1024)):e("",!0),(a==null?void 0:a.type)===6?(o(),d(f,{key:6,onClick:c=>L(a,0)},{default:n(()=>[u(t,{type:"link",size:"small"},{default:n(()=>[l("取消至尊")]),_:1})]),_:2},1032,["onClick"])):e("",!0),(a==null?void 0:a.type)===1?(o(),d(f,{key:7,onClick:c=>L(a,0)},{default:n(()=>[u(t,{type:"link",size:"small"},{default:n(()=>[l("取消普通")]),_:1})]),_:2},1032,["onClick"])):e("",!0)]),_:2},1024)]),shelter:n(({item:a})=>[(a==null?void 0:a.bindCount)>0?(o(),p("span",ra,[l(" |"),b("span",ca,y(a==null?void 0:a.bindCount)+"次",1)])):e("",!0)]),left:n(({item:a})=>{var c;return[(a==null?void 0:a.type)===6?(o(),d(_,{key:0,color:"red"},{default:n(()=>[l("至尊版")]),_:1})):e("",!0),(a==null?void 0:a.type)===1?(o(),d(_,{key:1},{default:n(()=>[l("普通版")]),_:1})):e("",!0),((c=a==null?void 0:a.link)==null?void 0:c.length)>0?(o(),p("div",ta,[u(t,{size:"small",type:"link",onClick:D=>O(a)},{default:n(()=>[l("复制短链")]),_:2},1032,["onClick"])])):e("",!0)]}),bottom:n(({item:a})=>{var c,D,T,I,V,q,S,H,K,M,Q,R;return[b("div",{class:aa((a==null?void 0:a.type)===6?"bg-pink-100 p-2":(a==null?void 0:a.type)===1?"bg-blue-100 p-2":"")},[b("div",null,[u(_,null,{default:n(()=>[l("激活链")]),_:1}),((c=a==null?void 0:a.link)==null?void 0:c.length)>0?(o(),d(k,{key:0,delete:(a==null?void 0:a.status)===-1,copyable:{text:a.link}},{default:n(()=>[l(y(x(a.link)),1)]),_:2},1032,["delete","copyable"])):(o(),d(_,{key:1,color:"error"},{default:n(()=>[l("未生成")]),_:1}))]),b("div",null,[l(" [创建]"+y((D=a==null?void 0:a.createTime)==null?void 0:D.substring(5,16))+" ",1),((T=E(a))==null?void 0:T.length)>0?(o(),p("span",_a,"[激活]"+y(E(a)),1)):e("",!0)]),((I=a==null?void 0:a.remark)==null?void 0:I.length)>0?(o(),p("div",ya,[u(_,{color:"red"},{default:n(()=>[l("备注")]),_:1}),l(" "+y(a.remark),1)])):e("",!0),((V=a==null?void 0:a.email)==null?void 0:V.length)>0&&(g.value||(a==null?void 0:a.status)===1||(a==null?void 0:a.type)===1)?(o(),p("div",pa,[u(_,null,{default:n(()=>[l("预存")]),_:1}),((q=a==null?void 0:a.email)==null?void 0:q.length)>0?(o(),d(k,{key:0,copyable:{text:a.email}},{default:n(()=>[l(y(x(a.email)),1)]),_:2},1032,["copyable"])):(o(),d(_,{key:1,color:"error"},{default:n(()=>[l("未填写")]),_:1}))])):e("",!0),g.value&&((S=a==null?void 0:a.longLink)==null?void 0:S.length)>0||(a==null?void 0:a.status)===1?(o(),p("div",fa,[u(_,null,{default:n(()=>[l("长链接")]),_:1}),((H=a==null?void 0:a.longLink)==null?void 0:H.length)>0?(o(),d(k,{key:0,copyable:{text:a.longLink}},{default:n(()=>[l(y(x(a.longLink)),1)]),_:2},1032,["copyable"])):(o(),d(_,{key:1,color:"error"},{default:n(()=>[l("未填写")]),_:1}))])):e("",!0),((K=a==null?void 0:a.thirdLink)==null?void 0:K.length)>0&&(g.value||(a==null?void 0:a.status)===1||(a==null?void 0:a.status)===6)?(o(),p("div",ka,[u(_,null,{default:n(()=>[l("预存")]),_:1}),((M=a==null?void 0:a.thirdLink)==null?void 0:M.length)>0?(o(),d(k,{key:0,copyable:{text:a.thirdLink}},{default:n(()=>[l(y(x(a.thirdLink)),1)]),_:2},1032,["copyable"])):(o(),d(_,{key:1,color:"error"},{default:n(()=>[l("未填写")]),_:1}))])):e("",!0),g.value?(o(),p("div",ha,[b("span",ga,[l(" [创建]"+y(a==null?void 0:a.createBy)+" ",1),((Q=a==null?void 0:a.updateBy)==null?void 0:Q.length)>0?(o(),p("div",va,"[更新]"+y(a==null?void 0:a.updateBy)+"："+y((R=a==null?void 0:a.updateTime)==null?void 0:R.substring(5,19)),1)):e("",!0)])])):e("",!0)],2)]}),_:1},512)}}});export{wa as _};
