var x=Object.defineProperty;var b=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(s,t,e)=>t in s?x(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,w=(s,t)=>{for(var e in t||(t={}))B.call(t,e)&&g(s,e,t[e]);if(b)for(var e of b(t))I.call(t,e)&&g(s,e,t[e]);return s};var f=(s,t,e)=>new Promise((m,n)=>{var u=l=>{try{r(e.next(l))}catch(i){n(i)}},p=l=>{try{r(e.throw(l))}catch(i){n(i)}},r=l=>l.done?m(l.value):Promise.resolve(l.value).then(u,p);r((e=e.apply(s,t)).next())});import{B as L}from"./index-156cafb7.js";import{B as M}from"./BasicForm-202637f7.js";import"./componentMap-d4bccc5b.js";import{u as W}from"./useForm-b308f6ee.js";import"./JAddInput-b2310633.js";import"./JSelectUser-71a05f8d.js";import"./JSelectDept-1f595344.js";import"./JPopup-2fd87e0d.js";import{B as _}from"./index-ebe32d90.js";import"./cron-parser-vendor-f28c5d73.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-b03a3f81.js";import{b as c}from"./jeecg-online-vendor-231813f7.js";import{M as F}from"./antd-vue-vendor-e4fda4cf.js";import{d as U,k,u as a,e as N,a5 as O,a9 as P,a7 as S,f as T,ag as R}from"./vue-5a09445c.js";const h=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],ee=[{title:"允许的表名",dataIndex:"tableName"},{title:"允许的字段名",dataIndex:"fieldName"},{title:"状态",dataIndex:"status",customRender({text:s}){const t=h.find(e=>e.value===s);return(t==null?void 0:t.label)||"未知"}},{title:"创建时间",dataIndex:"createTime"}],te=[{label:"允许的表名",field:"tableName",component:"Input"},{label:"允许的字段名",field:"fieldName",component:"Input"},{label:"状态",field:"status",component:"Select",componentProps:{options:h}}],C=[{label:"",field:"id",component:"Input",show:!1},{label:"允许的表名",field:"tableName",component:"Input",required:!0},{label:"允许的字段名",field:"fieldName",component:"Input",required:!0,helpMessage:"多个用逗号分割"},{label:"状态",field:"status",component:"Select",defaultValue:"1",componentProps:{options:h}}],se="/sys/tableWhiteList/exportXls",oe="/sys/tableWhiteList/importExcel",le=s=>c.get({url:"/sys/tableWhiteList/list",params:s}),ae=(s,t)=>c.delete({url:"/sys/tableWhiteList/delete",params:s},{joinParamsToUrl:!0}).then(()=>{t()}),re=(s,t)=>{F.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>c.delete({url:"/sys/tableWhiteList/deleteBatch",data:s},{joinParamsToUrl:!0}).then(()=>{t()})})},V=(s,t)=>{let e=t?"/sys/tableWhiteList/edit":"/sys/tableWhiteList/add";return c.post({url:e,params:s})},ie=U({__name:"SysTableWhiteListModal",emits:["register","success"],setup(s,{emit:t}){const e=k(!0),[m,{resetFields:n,setFieldsValue:u,validate:p}]=W({labelWidth:150,schemas:C,showActionButtonGroup:!1}),[r,{setModalProps:l,closeModal:i}]=_(o=>f(this,null,function*(){yield n(),l({confirmLoading:!1,showCancelBtn:o==null?void 0:o.showFooter,showOkBtn:o==null?void 0:o.showFooter}),e.value=!!(o!=null&&o.isUpdate),a(e)&&(yield u(w({},o.record)))})),y=N(()=>a(e)?"编辑":"新增");function v(o){return f(this,null,function*(){try{let d=yield p();l({confirmLoading:!0}),yield V(d,e.value),i(),t("success",{isUpdate:e.value,values:d})}finally{l({confirmLoading:!1})}})}return(o,d)=>(O(),P(a(L),R({onRegister:a(r),title:y.value,width:"40%"},o.$attrs,{onOk:v}),{default:S(()=>[T(a(M),{onRegister:a(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ie as _,oe as a,re as b,ee as c,ae as d,se as g,le as l,te as s};
