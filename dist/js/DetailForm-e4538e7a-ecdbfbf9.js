import{p as T,W as te,X as ie,Y as le,g as ne}from"./index-bd4a6237.js";import{U as ae,f as D,g as re,af as $,b as oe,a2 as se,u as de}from"./jeecg-online-vendor-7e3ae2e6.js";import{L as ue,i as ce}from"./useExtendComponent-48d37d9b-626da71e.js";import{c as pe}from"./JUpload.vue_vue_type_style_index_0_lang-5d4a8546.js";import"./componentMap-a38e30ba.js";import"./index-04fa66a8.js";import"./BasicForm.vue_vue_type_style_index_0_lang-d092c78e.js";import{ar as me,as as fe,at as ge}from"./antd-vue-vendor-31afcf32.js";import"./JAddInput-93656682.js";import"./JSelectUser-88891e09.js";import"./JSelectDept-62570e8c.js";import"./JPopup-0d64514d.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-12d65d41.js";import"./BasicTable.vue_vue_type_style_index_0_lang-3bf91027.js";import"./useTable-4c1b444a.js";import"./LinkTableListPiece-34266919-30d056fd.js";import{d as he,k as ye,e as ve,w as Ce,U as F,a5 as c,a6 as m,f as I,a7 as H,F as P,a8 as N,a9 as J,aa as u,am as V,ab as E}from"./vue-249e5fad.js";import"./lodash-es-vendor-c1987ca1.js";import"./tinymce-vendor-676f8393.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-0b109a77.js";import"./BasicForm-1b000152.js";import"./BasicModal-f351dd71.js";import"./useWindowSizeFn-d412f40a.js";import"./useForm-885eeddc.js";import"./user.api-d1bb1fbd.js";import"./customExpression-62f5afd1.js";import"./BasicTable-e1645a10.js";import"./useFormItem-f6fd46b4.js";import"./download-1a6aa1a6.js";import"./base64Conver-fa2fe1af.js";import"./index-3c4cc9a8.js";import"./index-906cf38f.js";import"./useCountdown-e4954a2b.js";import"./areaDataUtil-ce3f5a88.js";import"./props-d5b22a57.js";import"./JSelectBiz-dc86b82d.js";import"./index-1ba0e439.js";import"./codemirror-vendor-7570b8a9.js";import"./index-4d38590a.js";import"./bem-541db94a.js";import"./props-7b44416e.js";import"./useContextMenu-81d046f5.js";import"./depart.api-23a4c432.js";import"./index-a424f035.js";import"./injectionKey-69710956.js";import"./useListPage-d0a57df4.js";import"./OnlineSelectCascade-c7baf52b-08a99a92.js";import"./JModalTip-abe1515a-6d2b1de8.js";var be=Object.defineProperty,M=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,W=(a,r,s)=>r in a?be(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,Fe=(a,r)=>{for(var s in r||(r={}))we.call(r,s)&&W(a,s,r[s]);if(M)for(var s of M(r))ke.call(r,s)&&W(a,s,r[s]);return a},g=(a,r,s)=>new Promise((y,C)=>{var k=p=>{try{h(s.next(p))}catch(w){C(w)}},b=p=>{try{h(s.throw(p))}catch(w){C(w)}},h=p=>p.done?y(p.value):Promise.resolve(p.value).then(k,b);h((s=s.apply(a,r)).next())});function xe(a){const r={},s=[],y=ye({}),{createMessage:C}=de(),k=ve(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");Ce(()=>a.data,e=>g(this,null,function*(){if(e){let n=a.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield b(i)}catch(o){}}y.value=l}}),{deep:!0,immediate:!0});function b(e){return g(this,null,function*(){let n=a.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield h(e,n);else if(t=="sel_search")i=yield w(e,n);else if(t=="cat_tree")i=yield _(e,n);else if(t=="link_table")i=yield Q(e,n);else if(t=="sel_depart")i=yield L(e,n);else if(t=="sel_user")i=yield d(e,n);else if(t=="pca")i=ce(l);else if(t=="link_down")i=yield v(e,n);else if(t=="sel_tree")i=yield O(e,n);else if(t=="switch")i=yield A(e,n);else if(t=="image"||t=="file")i=K(e,n);else if(s.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(i=D(o,l))}return i}return""})}function h(e,n){return g(this,null,function*(){let l=p(e),i=n[e.field];if(!l)return i;let t=re(l);if(t&&t.length>0)return D(t,i);{let o=[];if(r[l]?o=r[l]:o=(yield $(l))||[],o&&o.length>0)return r[l]=o,D(o,i)}return""})}function p(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function w(e,n){return g(this,null,function*(){let l=p(e),i=n[e.field];if(!i)return"";let t=[];return r[l+i]?t=r[l+i]:t=(yield oe.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(r[l+i]=t,t.join(",")):""})}function _(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield te({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function L(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e).store||"id",t=(yield ie({ids:l,primaryKey:i}))||[];if(t&&t.length>0){let o=[];for(let f of t)o.push(f.title);return o.join(",")}return""})}function d(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e),t={[i.store||"username"]:l},o=((yield le(t))||{}).records||[];if(o&&o.length>0){let f=[],j=i.text||"realname";for(let S of o)f.push(S[j]);return f.join(",")}return""})}function x(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=Fe({},i)}catch(i){}return n}function v(e,n){return g(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(r[i])t=r[i];else if(l){let o=JSON.parse(l);if(o){let{table:f,txt:j,key:S,linkField:U}=o,Z=`${f},${j},${S}`;if(t=[...(yield $(Z))||[]],t&&t.length>0&&(r[i]=t,U)){let ee=U.split(",");for(let B of ee)r[B]=t,s.push(B)}}}if(t&&t.length>0){let o=n[i];return D(t,o)}return""})}function O(e,n){return g(this,null,function*(){let{dict:l,field:i}=e,t=[];if(r[i]?t=r[i]:l&&(t=yield $(l)),t&&t.length>0){let o=n[i];return D(t,o)}return""})}function A(e,n){return g(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"是"},{value:t[1],text:"否"},{value:t[0]+"",text:"是"},{value:t[1]+"",text:"否"}],f=n[i];return se(o,f)})}function z(e){return e.span?e.span:a.span}function K(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let f=ne(o)||"";f&&t.push(f)}return t}function Y(e){e&&window.open(e)}function q(e){let n=y.value[e];if(!n||n.length==0){C.warning("无图片!");return}pe({imageList:n})}function R(e){return e?e.substring(e.lastIndexOf("/")+1):""}const X=["file","image","markdown","umeditor"];function G(e){return X.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function Q(e,n){return g(this,null,function*(){let l=n[e.field];return x(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:k,detailFormData:y,getItemSpan:z,handleDownloadFile:Y,handleViewImage:q,getFilename:R,getLabelWidthClass:G}}const De=he({name:"DetailForm",components:{DownloadOutlined:me,EyeOutlined:fe,PaperClipOutlined:ge,LinkTableCard:ue},props:{span:T.number.def(24),schemas:T.array.def([]),data:T.object.def({}),containerClass:T.string.def("")},setup(a){const{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:C,handleViewImage:k,getFilename:b,getLabelWidthClass:h}=xe(a);return{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:C,handleViewImage:k,getFilename:b,getLabelWidthClass:h}}}),Ie={class:"detail-item"},Oe=["title"],Te=["innerHTML"],_e={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},Le={key:0},je={key:2,class:"item-content"},Se={class:"ant-upload-list ant-upload-list-picture-card"},$e={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Pe={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Ne={class:"ant-upload-list-item-info"},Ee=["src"],Ue={class:"ant-upload-list-item-actions"},Be={key:3,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Je={class:""},Ve={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Me={class:"ant-upload-list-item-info"},We={class:"ant-upload-span"},Ae={class:"ant-upload-text-icon"},ze=["href"],Ke={class:"ant-upload-list-item-card-actions"},Ye={key:4,class:"item-content"};function qe(a,r,s,y,C,k){const b=F("link-table-card"),h=F("download-outlined"),p=F("eye-outlined"),w=F("paper-clip-outlined"),_=F("a-col"),L=F("a-row");return c(),m("div",{class:V(a.formContainerClass)},[I(L,null,{default:H(()=>[(c(!0),m(P,null,N(a.schemas,(d,x)=>(c(),J(_,{key:x,span:a.getItemSpan(d)},{default:H(()=>[u("div",Ie,[u("div",{class:V(["item-title",a.getLabelWidthClass(d)]),title:d.label},E(d.label)+"： ",11,Oe),d.isHtml?(c(),m("div",{key:0,class:"item-content",innerHTML:a.detailFormData[d.field]},null,8,Te)):d.isCard?(c(),m("div",_e,[a.detailFormData[d.field]?(c(),J(b,{key:1,disabled:"",detail:"",value:a.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(c(),m("span",Le))])):d.isImage?(c(),m("div",je,[u("div",Se,[(c(!0),m(P,null,N(a.detailFormData[d.field],v=>(c(),m("div",$e,[u("span",null,[u("div",Pe,[u("div",Ne,[u("img",{src:v,alt:"图片不存在",class:"ant-upload-list-item-image"},null,8,Ee)]),u("span",Ue,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"]),I(p,{onClick:O=>a.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(c(),m("div",Be,[u("div",He,[(c(!0),m(P,null,N(a.detailFormData[d.field],v=>(c(),m("div",Je,[u("span",null,[u("div",Ve,[u("div",Me,[u("span",We,[u("div",Ae,[I(w)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},E(a.getFilename(v)),9,ze),u("span",Ke,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(c(),m("div",Ye,E(a.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}const At=ae(De,[["render",qe],["__scopeId","data-v-fd1939fd"]]);export{At as default};
