import{ad as g,l as T}from"./jeecg-online-vendor-12004772.js";import{aj as s}from"./index-6916e394.js";import{d as V,k as m,r as _,U as i,aV as f,ar as v,bi as a,f as e,V as b}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const G=V({__name:"PopupSubTable",setup(I){const{createMessage:h}=T(),r=m(!1),y=m([]),k=m([{key:"num",title:"\u5E8F\u53F7",width:"80px"},{key:"ship_name",title:"\u8239\u540D",width:"180px",type:s.input},{key:"call",title:"\u547C\u53EB",width:"80px"},{key:"len",title:"\u957F",width:"80px"},{key:"ton",title:"\u5428",width:"120px"},{key:"payer",title:"\u4ED8\u6B3E\u65B9",width:"120px"},{key:"count",title:"\u6570",width:"40px"},{key:"company",title:"\u516C\u53F8",minWidth:"180px",showDetails:!0},{key:"trend",title:"\u52A8\u5411",width:"120px"}]),x=m([]),d=_({currentRowId:null,loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["100","200"],total:0},selectedRows:[],dataSource:[],columns:[{key:"dd_num",title:"\u8C03\u5EA6\u5E8F\u53F7",width:"120px"},{key:"tug",title:"\u62D6\u8F6E",width:"180px",type:s.input},{key:"work_start_time",title:"\u4F5C\u4E1A\u5F00\u59CB\u65F6\u95F4",width:"180px",type:s.input},{key:"work_stop_time",title:"\u4F5C\u4E1A\u7ED3\u675F\u65F6\u95F4",width:"180px",type:s.input},{key:"type",title:"\u8239\u8236\u5206\u7C7B",width:"120px",type:s.input},{key:"port_area",title:"\u6240\u5C5E\u6E2F\u533A",minWidth:"120px",type:s.input}]}),C=_({span:4}),U=_({span:20}),S=_({num:[{required:!0,message:"\u5FC5\u987B\u8F93\u5165\u5E8F\u53F7"}]});D();function D(){r.value=!0,g.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:30}}).then(p=>{y.value=p.records,x.value=[]}).finally(()=>{r.value=!1})}function E(p){return p?(d.currentRowId===p.id||(d.currentRowId=p.id,d.loading=!0,g.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:30,parentId:p.id}}).then(c=>{d.dataSource=c.records}).finally(()=>{d.loading=!1})),!0):!1}function B({row:p,$table:c,callback:l}){c.validate(p).then(n=>{n?(l(!1),h.warn("\u6821\u9A8C\u5931\u8D25")):(l(!0),r.value=!0,setTimeout(()=>{r.value=!1,h.success("\u4FDD\u5B58\u6210\u529F")},1e3))})}return(p,c)=>{const l=i("a-input"),n=i("a-form-item"),o=i("a-col"),w=i("a-row"),A=i("a-form"),F=i("JVxeTable"),R=i("a-card");return f(),v(R,{title:"\u5F39\u51FA\u5B50\u8868\u793A\u4F8B",bordered:!1},{default:a(()=>[e(F,{toolbar:"",rowNumber:"",rowSelection:"",highlightCurrentRow:"",clickRowShowSubForm:"",clickRowShowMainForm:"",height:750,loading:r.value,columns:k.value,dataSource:y.value,onDetailsConfirm:B},{mainForm:a(({row:t})=>[t?(f(),v(A,{key:0,ref:"form2",model:t,rules:S,"label-col":C,"wrapper-col":U},{default:a(()=>[e(w,{gutter:8},{default:a(()=>[e(o,{span:8},{default:a(()=>[e(n,{label:"ID",name:"id"},{default:a(()=>[e(l,{value:t.id,"onUpdate:value":u=>t.id=u,disabled:""},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u5E8F\u53F7",name:"num"},{default:a(()=>[e(l,{value:t.num,"onUpdate:value":u=>t.num=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u8239\u540D",name:"ship_name"},{default:a(()=>[e(l,{value:t.ship_name,"onUpdate:value":u=>t.ship_name=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u547C\u53EB",name:"call"},{default:a(()=>[e(l,{value:t.call,"onUpdate:value":u=>t.call=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u957F",name:"len"},{default:a(()=>[e(l,{value:t.len,"onUpdate:value":u=>t.len=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u5428",name:"ton"},{default:a(()=>[e(l,{value:t.ton,"onUpdate:value":u=>t.ton=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u4ED8\u6B3E\u65B9",name:"payer"},{default:a(()=>[e(l,{value:t.payer,"onUpdate:value":u=>t.payer=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u6570",name:"count"},{default:a(()=>[e(l,{value:t.count,"onUpdate:value":u=>t.count=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u516C\u53F8",name:"company"},{default:a(()=>[e(l,{value:t.company,"onUpdate:value":u=>t.company=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:a(()=>[e(n,{label:"\u52A8\u5411",name:"trend"},{default:a(()=>[e(l,{value:t.trend,"onUpdate:value":u=>t.trend=u},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["model","rules","label-col","wrapper-col"])):b("",!0)]),subForm:a(({row:t})=>[E(t)?(f(),v(F,{key:0,ref:"subFormTable",height:"auto","max-height":350,loading:d.loading,columns:d.columns,dataSource:d.dataSource},null,8,["loading","columns","dataSource"])):b("",!0)]),_:1},8,["loading","columns","dataSource"])]),_:1})}}});export{G as default};
