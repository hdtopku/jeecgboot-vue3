import M from"./index-f9c70d09.js";import{a_ as P,k as S,b0 as $,l as V}from"./index-fde9c72f.js";import{useMultipleTabSetting as w}from"./useMultipleTabSetting-af8b7873.js";import{bF as I,e as d,J as K,u as p,d as C,U as h,aV as i,as as l,F,a_ as A,V as _,v as k,A as B,ar as g,f as R,bi as N,a$ as v,ak as D,o as E,x as O,ad as Q}from"./vue-c7e3516e.js";import{a as q}from"./lodash-es-vendor-42c8d3d4.js";import{_ as L,d as z}from"./jeecg-online-vendor-bf2efbcb.js";import{a as G}from"./useContentViewHeight-c99c81b1.js";import"./useWindowSizeFn-e5cad7ae.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./usePageContext-7a6a8ce0.js";function H(){const e=I(),{currentRoute:r}=e,{getShowMultipleTab:a}=w(),s=P(),c=d(()=>n(K(e.getRoutes()))||[]),u=d(()=>s.getTabList.reduce((o,m)=>(m.meta&&Reflect.has(m.meta,"frameSrc")&&o.push(m.name),o),[]));function n(o){let m=[];for(const b of o){const{meta:{frameSrc:T}={},children:y}=b;T&&m.push(b),y&&y.length&&m.push(...n(y))}return m=q(m,"name"),m}function t(o){return o.name===p(r).name}function f(o){return p(a)?p(u).includes(o):e.currentRoute.value.name===o}return{hasRenderFrame:f,getFramePages:c,showIframe:t,getAllFramePages:n}}const J=C({name:"FrameLayout",components:{FramePage:M},setup(){const{getFramePages:e,hasRenderFrame:r,showIframe:a}=H(),s=d(()=>p(e).length>0);return{getFramePages:e,hasRenderFrame:r,showIframe:a,showFrame:s}}}),U={key:0};function j(e,r,a,s,c,u){const n=h("FramePage");return e.showFrame?(i(),l("div",U,[(i(!0),l(F,null,A(e.getFramePages,t=>(i(),l(F,{key:t.path},[t.meta.frameSrc&&e.hasRenderFrame(t.name)?k((i(),g(n,{key:0,frameSrc:t.meta.frameSrc},null,8,["frameSrc"])),[[B,e.showIframe(t)]]):_("",!0)],64))),128))])):_("",!0)}const W=L(J,[["render",j]]);function X({route:e,openCache:r,cacheTabs:a,enableTransition:s,def:c}){if(!s)return;const u=a.includes(e.name),n="fade-slide";let t=n;return r&&(t=u&&e.meta.loaded?n:void 0),t||e.meta.transitionName||c}const Y=C({name:"PageLayout",components:{FrameLayout:W},setup(){const{getShowMultipleTab:e}=w(),r=P(),{getOpenKeepAlive:a,getCanEmbedIFramePage:s}=S(),{getBasicTransition:c,getEnableTransition:u}=$(),n=d(()=>p(a)&&p(e)),t=d(()=>p(a)?r.getCachedTabList:[]);return{getTransitionName:X,openCache:n,getEnableTransition:u,getBasicTransition:c,getCaches:t,getCanEmbedIFramePage:s}}});function Z(e,r,a,s,c,u){const n=h("RouterView"),t=h("FrameLayout");return i(),l(F,null,[R(n,null,{default:N(({Component:f,route:o})=>[e.openCache?(i(),g(D,{key:0,include:e.getCaches},[(i(),g(v(f),{key:o.fullPath}))],1032,["include"])):(i(),g(v(f),{key:o.fullPath}))]),_:1}),e.getCanEmbedIFramePage?(i(),g(t,{key:0})):_("",!0)],64)}const x=L(Y,[["render",Z]]),ee=C({name:"LayoutContent",components:{PageLayout:x},setup(){const{prefixCls:e}=V("layout-content"),{getOpenPageLoading:r}=$(),{getLayoutContentMode:a,getPageLoading:s}=S(),u=z().openQianKun;return G(),E(()=>{}),{prefixCls:e,openQianKun:u,getOpenPageLoading:r,getLayoutContentMode:a,getPageLoading:s}}});const te={key:0,id:"content",class:"app-view-box"};function ne(e,r,a,s,c,u){const n=h("PageLayout"),t=O("loading");return k((i(),l("div",{class:Q([e.prefixCls,e.getLayoutContentMode])},[R(n),e.openQianKun=="true"?(i(),l("div",te)):_("",!0)],2)),[[t,e.getOpenPageLoading&&e.getPageLoading]])}const ye=L(ee,[["render",ne]]);export{ye as default};
