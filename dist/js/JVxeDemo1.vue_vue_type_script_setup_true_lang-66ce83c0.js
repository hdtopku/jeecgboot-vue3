var T=(V,s,n)=>new Promise((d,_)=>{var C=u=>{try{v(n.next(u))}catch(h){_(h)}},k=u=>{try{v(n.throw(u))}catch(h){_(h)}},v=u=>u.done?d(u.value):Promise.resolve(u.value).then(C,k);v((n=n.apply(V,s)).next())});import{u as L}from"./jeecg-online-vendor-07a23e44.js";import{J as i,C as O,D as U}from"./index-77c256db.js";import{a7 as X,d as Z}from"./antd-vue-vendor-a78909e6.js";import{r}from"./lodash-es-vendor-9b741fb8.js";import{d as W,k as y,V as w,a5 as z,a6 as K,f as o,a7 as l,E as c,aa as x,ab as Q,u as ee,F as te}from"./vue-bcbaddf9.js";const le={style:{padding:"20px"}},ae=["onClick"],oe=x("a",null,"删除",-1),de=W({__name:"JVxeDemo1",setup(V){const{createMessage:s}=L(),n=y(),d=y(!1),_=y(!1),C=y([{title:"ID",key:"id",type:i.hidden},{title:"不可编辑",key:"noEdit",type:i.normal,width:180,defaultValue:"noEdit-new"},{title:"单行文本",key:"input",type:i.input,width:180,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"请输入${title}"},{pattern:/^[a-z|A-Z][a-z|A-Z\d_-]*$/,message:"必须以字母开头，可包含数字、下划线、横杠"},{unique:!0,message:"${title}不能重复"},{handler({cellValue:t,row:a,column:e},b,f){t==="abc"?b(!1,"${title}不能是abc"):b(!0)},message:"${title}默认提示"}]},{title:"多行文本",key:"textarea",type:i.textarea,width:200},{title:"数字",key:"number",type:i.inputNumber,width:80,defaultValue:32,statistics:["sum","average"]},{title:"下拉框",key:"select",type:i.select,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],allowSearch:!0,placeholder:"请选择"},{title:"下拉框_字典",key:"select_dict",type:i.select,width:180,options:[],dictCode:"sex",placeholder:"请选择"},{title:"下拉框_多选",key:"select_multiple",type:i.selectMultiple,width:205,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],defaultValue:["int","boolean"],placeholder:"多选"},{title:"下拉框_搜索",key:"select_search",type:i.selectSearch,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}]},{title:"日期时间",key:"datetime",type:i.datetime,width:200,defaultValue:"2019-04-30 14:52:22",placeholder:"请选择"},{title:"时间",key:"time",type:i.time,width:200,defaultValue:"14:52:22",placeholder:"请选择"},{title:"复选框",key:"checkbox",type:i.checkbox,width:100,customValue:["Y","N"],defaultChecked:!1},{title:"操作",key:"action",type:i.slot,fixed:"right",minWidth:100,align:"center",slotName:"myAction"}]),k=y([]);function v(t,a,e=!1){e&&(d.value=!0);let b=()=>{let p=r(1e3,9999999999999);return Z(new Date(p)).format("YYYY-MM-DD HH:mm:ss")},f=(t-1)*a,g=["string","int","double","boolean"],D=Date.now(),m=[];for(let p=0;p<a;p++)m.push({id:O(),noEdit:`noEdit-${f+p+1}`,input:`text-${f+p+1}`,textarea:`textarea-${f+p+1}`,number:r(0,233),select:g[r(0,3)],select_dict:r(1,2).toString(),select_multiple:(()=>{let G=r(1,4),$=[];for(let N=0;N<G;N++)U($,g[r(0,3)]);return $.join(",")})(),select_search:g[r(0,3)],datetime:b(),checkbox:["Y","N"][r(0,1)]});k.value=m;let R=Date.now()-D;e&&R<a&&setTimeout(()=>d.value=!1,a-R)}v(0,20,!0);function u(t){s.success("请在控制台查看输出")}function h(t){return T(this,null,function*(){var e;const a=yield(e=n.value)==null?void 0:e.removeRows(t.row);a&&a.rows.length>0&&s.success("删除成功")})}function E(t){}function A(){n.value.validateTable().then(t=>{t?s.error("验证未通过，请在控制台查看详细"):s.success("验证通过")})}function B(){n.value.getTableData(),s.success("获取值成功，请看控制台输出")}function I(){v(1,1e3,!0)}function J(){const a=n.value.getXTable().getTableData().fullData[0];n.value.removeRows(a)}function M(){n.value.getXTable().removeCheckboxRow()}function Y(){s.info("请看控制台")}function j(){n.value.clearSelection()}function H(){d.value=!d.value}function F(){_.value=!_.value}function P(t){return new Promise(a=>{t.map(e=>e.id),setTimeout(()=>a(!0),1500)})}function q(t){return T(this,null,function*(){const a=s.loading("删除中…",0);try{(yield P(t.deleteRows))?(yield n.value.removeSelection(),s.success("删除成功！")):s.warn("删除失败！")}finally{a()}})}return(t,a)=>{const e=w("a-button"),b=w("a-space"),f=w("a-tooltip"),g=w("a-divider"),D=w("JVxeTable");return z(),K(te,null,[o(b,null,{default:l(()=>[o(e,{onClick:H},{default:l(()=>[c("切换加载")]),_:1}),o(e,{onClick:F},{default:l(()=>[c("切换禁用")]),_:1})]),_:1}),o(D,{ref_key:"tableRef",ref:n,stripe:"",toolbar:"",rowNumber:"",rowSelection:"",rowExpand:"",resizable:"",asyncRemove:"",clickSelectRow:"",maxHeight:480,checkboxConfig:{range:!0},disabledRows:{input:["text--16","text--18"]},loading:d.value,disabled:_.value,columns:C.value,dataSource:k.value,onRemoved:q,onValueChange:E},{toolbarSuffix:l(()=>[o(e,{onClick:A},{default:l(()=>[c("表单验证")]),_:1}),o(f,{placement:"top",title:"获取值，忽略表单验证",autoAdjustOverflow:!0},{default:l(()=>[o(e,{onClick:B},{default:l(()=>[c("获取数据")]),_:1})]),_:1}),o(f,{placement:"top",title:"模拟加载1000条数据",autoAdjustOverflow:!0},{default:l(()=>[o(e,{onClick:I},{default:l(()=>[c("设置值")]),_:1})]),_:1}),o(e,{onClick:Y},{default:l(()=>[c("获取选中数据")]),_:1}),o(e,{onClick:j},{default:l(()=>[c("清空选中")]),_:1}),o(e,{onClick:J},{default:l(()=>[c("删除第一行数据")]),_:1}),o(e,{onClick:M},{default:l(()=>[c("删除选中数据")]),_:1})]),expandContent:l(m=>[x("div",le,[x("span",null,"Hello! My name is: "+Q(m.row.input)+"!",1)])]),myAction:l(m=>[x("a",{onClick:S=>u(m)},"查看",8,ae),o(g,{type:"vertical"}),o(ee(X),{title:"确定删除吗？",onConfirm:S=>h(m)},{default:l(()=>[oe]),_:2},1032,["onConfirm"])]),_:1},8,["loading","disabled","columns","dataSource"])],64)}}});export{de as _};
