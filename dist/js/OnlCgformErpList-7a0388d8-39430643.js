import{k as T,w as V,V as I,a5 as n,a6 as y,aa as _,f as p,u as e,W as c,a9 as l,a7 as i,E as h,F as P,a8 as z,ab as B,t as Ve,A as ze,am as Ke,ad as Ne,ae as $e,af as Je,ag as je,ah as qe}from"./vue-bcbaddf9.js";import Ue from"./BasicTable-862478b3.js";import{Q as We}from"./componentMap-e7638604.js";import"./useTable-cb85a52b.js";import{u as Ge}from"./jeecg-online-vendor-c39424cc.js";import Xe from"./OnlineAutoModal-2a146238-6f1ba0d2.js";import Ye from"./OnlineCustomModal-456a85a6-fafb3688.js";import K from"./OnlineDetailModal-f967f080-4cbae8d4.js";import{x as Ze}from"./JImportModal-cdd8cb66.js";import{l as eo,o as oo}from"./useListButton-cef1371a-d3d2d557.js";import{d as to,p as no,a as io,g as lo}from"./useExtendComponent-48d37d9b-f0a95851.js";import ao from"./OnlineQueryForm-1c5949a7-f0d54f60.js";import ro from"./SuperQuery-3821f984-e912f61c.js";import{E as so}from"./useOnlinePopEvent-e9a042f8-2a2f7ed7.js";import co from"./OnlCgformErpSubTable-fc6ade76-e5ecd3b0.js";import{e as N}from"./constant-fe20103a-44089532.js";import"./index-9793b37c.js";import"./index-a9a5a3b3.js";import"./BasicForm.vue_vue_type_style_index_0_lang-f6de4fad.js";import"./antd-vue-vendor-a78909e6.js";import"./JAddInput-c3d24774.js";import"./JSelectUser-7d43c9a7.js";import"./JSelectDept-1dcd8f6b.js";import"./JPopup-576bb5ed.js";import"./cron-parser-vendor-15fe1aca.js";import"./CommentPanel-5c09b8b3.js";import"./DetailForm-e4538e7a-2dfd72f9.js";import"./JUpload.vue_vue_type_style_index_0_lang-358a369a.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-86283748.js";import"./LinkTableListPiece-34266919-dd5ea2eb.js";import"./BasicTable.vue_vue_type_style_index_0_lang-0b380a35.js";import"./BasicForm-f4f93547.js";import"./lodash-es-vendor-9b741fb8.js";import"./BasicModal-ad16c7dc.js";import"./useWindowSizeFn-55a16b74.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-173f2e92.js";import"./echarts-vendor-6c8e2159.js";import"./useForm-23b2a8f6.js";import"./injectionKey-69710956.js";import"./useFormItem-9538f46d.js";import"./download-7f755caf.js";import"./base64Conver-fa2fe1af.js";import"./index-b9668583.js";import"./index-aa1c1e89.js";import"./useCountdown-b4219b78.js";import"./areaDataUtil-661e31ab.js";import"./props-6433aa15.js";import"./JSelectBiz-330e4490.js";import"./index-5a0963ca.js";import"./codemirror-vendor-7570b8a9.js";import"./index-79d0205b.js";import"./bem-72ed9070.js";import"./props-c7c3390f.js";import"./useContextMenu-8429746d.js";import"./depart.api-e6ed521a.js";import"./index-2cc22f86.js";import"./OnlineForm-630a22c2-f3f72e9e.js";import"./user.api-cb55f0e0.js";import"./customExpression-62f5afd1.js";import"./useListPage-f9433ee2.js";import"./OnlineSelectCascade-c7baf52b-9f3c57cb.js";import"./JModalTip-abe1515a-8dd29006.js";import"./OnlineFormDetail-1b216792-ae6ec479.js";import"./OnlineSubFormDetail-0aa4966c-efade965.js";import"./SuperQueryValComponent.vue_vue_type_script_lang-e3ad7ee8-abc68c2e.js";var D=(F,C,u)=>new Promise((k,S)=>{var d=a=>{try{b(u.next(a))}catch(s){S(s)}},m=a=>{try{b(u.throw(a))}catch(s){S(s)}},b=a=>a.done?k(a.value):Promise.resolve(a.value).then(d,m);b((u=u.apply(F,C)).next())});const po={class:"p-2 cgformErpList"},uo={class:"content"},mo={key:0,style:{"font-size":"12px","font-style":"italic"}},go={key:0,style:{"font-size":"12px","font-style":"italic"}},fo=["src","onClick"],yo=["innerHTML"],ho=["title"],Dt={__name:"OnlCgformErpList",setup(F){const C=T([]),u=T(0),k=T(null),{createMessage:S}=Ge(),{ID:d,onlineTableContext:m,onlineQueryFormOuter:b,loading:a,reload:s,dataSource:O,pagination:$,handleSpecialConfig:J,getColumnList:j,handleChangeInTable:q,loadData:U,superQueryButtonRef:L,superQueryStatus:W,handleSuperQuery:G,onlineExtConfigJson:Q,handleFormConfig:X,registerCustomModal:Y,tableReloading:Z}=eo({themeTemplate:N});d.value||S.warning("地址错误, 配置ID不存在!");let{initCgEnhanceJs:ee}=to(m);const{buttonSwitch:v,cgLinkButtonList:Co,cgTopButtonList:M,importUrl:oe,registerModal:te,handleAdd:ne,handleEdit:ko,handleBatchDelete:ie,registerImportModal:le,onImportExcel:ae,onExportExcel:re,cgButtonJsHandler:se,cgButtonActionHandler:ce,cgButtonLinkHandler:bo,handleSubmitFlow:vo,getDropDownActions:pe,getActions:ue,initButtonList:me,initButtonSwitch:de,registerDetailModal:ge}=oo(m,Q),E=T(!1);function fe(){return D(this,null,function*(){try{E.value=!0,yield re()}finally{setTimeout(()=>E.value=!1,1500)}})}const{columns:ye,actionColumn:he,selectedKeys:w,rowSelection:Ce,enableScrollBar:ke,tableScroll:be,downloadRowFile:ve,getImgView:Se,getPcaText:H,getFormatDate:we,handleColumnResult:Re,hrefComponent:R,viewOnlineCellImage:xe,hrefMainTableId:Te,registerOnlineHrefModal:Ie,registerPopModal:_e,openPopModal:Be,onlinePopModalRef:Le,popTableId:A}=no(m,Q);V(w,t=>{var r;(r=w.value)!=null&&r.length?k.value=O.value.find(x=>x.id===w.value[0]):k.value=null},{immediate:!0}),V(d,()=>{Me()},{immediate:!0});function Me(){return D(this,null,function*(){a.value=!0;let t=yield j(N);Ee(t.main),C.value=t.subList,yield U(),a.value=!1,m.execButtonEnhance("setup")})}function Ee(t){let r=ee(t.enhanceJs);m.EnhanceJS=r,me(t.cgButtonList),de(t.hideColumns),Re(t,"radio"),J(t)}function Pe(t){m.queryParam=t,s()}function De(t){return D(this,null,function*(){yield lo(L),L.value.init(t)})}function Fe(t){A.value=t.id;let r={title:t.describe};t.record&&t.record.id&&(r.record=t.record,r.isUpdate=!0),Be(!0,r)}return so(Fe),(t,r)=>{var x;const g=I("a-button"),Oe=I("a-tab-pane"),Qe=I("a-tabs"),He=I("a-modal");return n(),y("div",po,[_("div",uo,[p(ao,{ref_key:"onlineQueryFormOuter",ref:b,id:e(d),onSearch:Pe,onLoaded:De},null,8,["id"]),e(Z)?c("",!0):(n(),l(e(Ue),{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e(a),columns:e(ye),dataSource:e(O),pagination:e($),rowSelection:e(Ce),actionColumn:e(he),showTableSetting:!0,clickToRowSelect:!1,scroll:e(be),onTableRedo:e(s),class:Ke({"j-table-force-nowrap":e(ke)}),onChange:e(q)},{tableTitle:i(()=>[e(v).add?(n(),l(g,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e(ne)},{default:i(()=>[h("新增")]),_:1},8,["onClick"])):c("",!0),e(v).import?(n(),l(g,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e(ae)},{default:i(()=>[h("导入")]),_:1},8,["onClick"])):c("",!0),e(v).export?(n(),l(g,{key:2,preIcon:"ant-design:export-outlined",type:"primary",loading:E.value,onClick:fe},{default:i(()=>[h(" 导出")]),_:1},8,["loading"])):c("",!0),e(M)&&e(M).length>0?(n(!0),y(P,{key:3},z(e(M),(o,f)=>(n(),y(P,null,[o.optType=="js"?(n(),l(g,{key:"cgbtn"+f,onClick:Ae=>e(se)(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[h(B(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):o.optType=="action"?(n(),l(g,{key:"cgbtn"+f,onClick:Ae=>e(ce)(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:i(()=>[h(B(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):c("",!0)],64))),256)):c("",!0),e(v).batch_delete?Ve((n(),l(g,{key:4,preIcon:"ant-design:delete-outlined",onClick:e(ie)},{default:i(()=>[h(" 批量删除")]),_:1},8,["onClick"])),[[ze,e(w).length>0]]):c("",!0),e(v).super_query?(n(),l(ro,{key:5,ref_key:"superQueryButtonRef",ref:L,online:"",status:e(W),onSearch:e(G)},null,8,["status","onSearch"])):c("",!0)]),fileSlot:i(({text:o})=>[o?(n(),l(g,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:f=>e(ve)(o)},{default:i(()=>[h(" 下载 ")]),_:2},1032,["onClick"])):(n(),y("span",mo,"无文件"))]),imgSlot:i(({text:o})=>[o?(n(),y("img",{key:1,src:e(Se)(o),alt:"图片不存在",class:"online-cell-image",onClick:f=>e(xe)(o)},null,8,fo)):(n(),y("span",go,"无图片"))]),htmlSlot:i(({text:o})=>[_("div",{innerHTML:o},null,8,yo)]),pcaSlot:i(({text:o})=>[_("div",{title:e(H)(o)},B(e(H)(o)),9,ho)]),dateSlot:i(({text:o})=>[_("span",null,B(e(we)(o)),1)]),action:i(({record:o})=>[p(e(We),{actions:e(ue)(o),dropDownActions:e(pe)(o)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),(x=C.value)!=null&&x.length?(n(),l(Qe,{key:1,activeKey:u.value,"onUpdate:activeKey":r[0]||(r[0]=o=>u.value=o),style:{margin:"10px"}},{default:i(()=>[(n(!0),y(P,null,z(C.value,(o,f)=>(n(),l(Oe,{tab:o.description,key:f},{default:i(()=>[u.value==f?(n(),l(co,{key:0,data:o,mainTableSelectedRowRcord:k.value},null,8,["data","mainTableSelectedRowRcord"])):c("",!0)]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey"])):c("",!0),p(Xe,{id:e(d),onRegister:e(te),onSuccess:e(s),onFormConfig:e(X)},null,8,["id","onRegister","onSuccess","onFormConfig"]),p(K,{id:e(d),onRegister:e(ge)},null,8,["id","onRegister"]),p(Ze,{onRegister:e(le),url:e(oe)(),onOk:e(s),online:""},null,8,["onRegister","url","onOk"]),p(He,je(e(R).model,qe(e(R).on)),{default:i(()=>[(n(),l(Ne(e(R).is),$e(Je(e(R).params)),null,16))]),_:1},16),p(Ye,{onRegister:e(Y),onSuccess:e(s)},null,8,["onRegister","onSuccess"]),p(K,{id:e(Te),onRegister:e(Ie),defaultFullscreen:!1},null,8,["id","onRegister"]),p(io,{ref_key:"onlinePopModalRef",ref:Le,id:e(A),onRegister:e(_e),onSuccess:e(s),request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])])}}};export{Dt as default};
