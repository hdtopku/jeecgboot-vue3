import{d as M,k as F,w as W,U as f,aV as l,ar as x,bi as n,at as e,v as D,f as r,E as c,A as b,as as d,ag as o,V as _,u as E,ad as I}from"./vue-c7e3516e.js";import{_ as X}from"./CommonList.vue_vue_type_script_setup_true_lang-96bbb986.js";import{a as Y,s as Z}from"./Am.api-4a05091a.js";import{n as i}from"./index-fde9c72f.js";const m={key:0},uu={key:1},au={key:0},nu={key:1},su={key:0},ou={key:1},lu={key:0},ru={key:1},cu={key:0},eu={key:0},du={key:0},tu={key:1},_u={key:0,class:"font-light text-sm text-gray-500"},ku=M({__name:"AmDataList",emits:["handleEdit"],setup(pu,{expose:K,emit:P}){const{hasPermission:v}=i(),w=F(),A=F(),Q=(a,k)=>{a.valid=k,Z(a,!0).then(()=>{})},y=F("0"),R=a=>(a==null?void 0:a.type)===6?"c.taojingling.cn/d/"+(a==null?void 0:a.code):"c.taojingling.cn/c/"+(a==null?void 0:a.code),h=F(0);W(A,()=>{var a,k;h.value=0,(k=(a=A.value)==null?void 0:a.records)==null||k.forEach(s=>{s.valid===-1&&(s.status===-1||s.status===-2)&&++h.value,s.showOperate=(s==null?void 0:s.valid)!==-1&&(s==null?void 0:s.status)>-1&&(s==null?void 0:s.status)<4})});const H=a=>{switch(a=Number.parseInt(a),a){case 0:case 1:case 2:return"processing";case 3:return"cyan";case 4:return"success";case-1:case-2:return"error"}},q=a=>{P("handleEdit",a)},T=F(!1);return K({startQuery:(a={})=>{y.value=a==null?void 0:a.status,w.value.execQuery(Y,a)},changeAdvanced:()=>{T.value=!T.value},changeActiveKey:a=>{y.value=a}}),(a,k)=>{const s=f("a-typography-text"),G=f("a-typography-link"),V=f("a-button"),N=f("a-menu-item"),J=f("a-menu"),p=f("a-tag");return l(),x(X,{ref_key:"CommonListRef",ref:w},{header:n(()=>[e("span",null,[D(r(s,{mark:""},{default:n(()=>[c("\u5DF2\u6253\u5F00\u9A8C\u8BC1\u9875\u9762\uFF0C\u4F46\u8FD8\u6CA1\u70B9\u51FB\u5F00\u59CB\u9A8C\u8BC1")]),_:1},512),[[b,y.value==="1"]]),D(r(s,{mark:""},{default:n(()=>[c("\u6240\u6709\u72B6\u6001\uFF1A\u5DF2\u6253\u5F00+\u5DF2\u5F00\u59CB+\u5DF2\u5173\u95ED+\u9000\u6B3E\u7B49")]),_:1},512),[[b,y.value==="0"]]),D(r(s,{mark:""},{default:n(()=>[c("\u9A8C\u8BC1\u7ED3\u675F\u540E\uFF0C\u7CFB\u7EDF\u5173\u95ED\u6559\u7A0B\u53CA\u9875\u9762\u81F3\u7A7A\u767D")]),_:1},512),[[b,y.value==="2"]]),D(r(s,{mark:""},{default:n(()=>{var u,t;return[((u=A.value)==null?void 0:u.total)===0?(l(),d("span",m,"\u4E70\u5BB6\u7533\u8BF7\u9000\u6B3E\uFF0C\u8BB0\u5F97\u9500\u6BC1\u9A8C\u8BC1\u9875\u9762")):(l(),d("span",uu,[e("span",null,"\u7BA1\u7406\u5458\u5173\u95ED"+o(((t=A.value)==null?void 0:t.total)-h.value)+"\u6761",1),h.value>0?(l(),d("span",au,"+\u4E70\u5BB6\u4E3B\u52A8\u9000\u6B3E"+o(h.value)+"\u6761",1)):(l(),d("span",nu,"\u4E70\u5BB6\u4E3B\u52A8\u9000\u6B3E"))]))]}),_:1},512),[[b,y.value==="4"]])])]),shelter:n(({item:u})=>[u.verifyCount>0?(l(),d("span",su,"|"+o(u.verifyCount),1)):_("",!0),c(),E(v)("link:switch")&&(u==null?void 0:u.type)===6?(l(),d("span",ou,"[\u5C0A]")):_("",!0)]),left:n(({item:u})=>{var t,B;return[e("div",null,[r(s,{copyable:{text:R(u)}},{default:n(()=>[e("span",{class:I(["",(u==null?void 0:u.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},o(u==null?void 0:u.code),3)]),_:2},1032,["copyable"])]),E(v)("link:switch")&&((t=u==null?void 0:u.link)==null?void 0:t.length)>3?(l(),d("div",lu,[r(G,{copyable:{text:u==null?void 0:u.link}},{default:n(()=>{var C,g;return[c(o((g=u==null?void 0:u.link)==null?void 0:g.substring(((C=u==null?void 0:u.link)==null?void 0:C.length)-4)),1)]}),_:2},1032,["copyable"])])):_("",!0),E(v)("link:switch")&&((B=u==null?void 0:u.remark)==null?void 0:B.length)>0?(l(),d("div",ru,[r(s,{copyable:{text:u==null?void 0:u.remark},mark:""},{default:n(()=>[c(" \u6CE8:"+o(u==null?void 0:u.remark),1)]),_:2},1032,["copyable"])])):_("",!0)]}),operate:n(({item:u})=>[r(J,null,{default:n(()=>[u?(l(),x(N,{key:0,onClick:t=>q(u)},{default:n(()=>[E(v)("link:switch")?(l(),x(V,{key:0,type:"link",size:"small"},{default:n(()=>[c("\u7F16\u8F91 ")]),_:1})):_("",!0)]),_:2},1032,["onClick"])):_("",!0),r(N,null,{default:n(()=>[_("",!0),r(V,{type:"link",size:"small",danger:"",onClick:t=>Q(u,-1)},{default:n(()=>[c(" \u9500\u6BC1\u9A8C\u8BC1 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),top:n(({item:u})=>{var t,B,C,g,L,z,O,S,$,U,j;return[e("div",null,o(((t=u==null?void 0:u.country)==null?void 0:t.indexOf("\u4E2D\u56FD"))>-1||((C=(B=u==null?void 0:u.country)==null?void 0:B.toUpperCase())==null?void 0:C.indexOf("CHINA"))>-1?"":u.country)+" "+o(u.province)+o(u.city)+o(u.county)+" | "+o(u.browser),1),e("div",null,o(u.operator)+" | "+o(u.model)+" | "+o(u.system),1),e("div",null,[r(p,null,{default:n(()=>[c("\u6253\u5F00\u65F6\u95F4")]),_:1}),c(" "+o((g=u==null?void 0:u.visitTime)==null?void 0:g.substring(5)),1)]),e("div",null,[r(p,null,{default:n(()=>[c("\u9A8C\u8BC1\u65F6\u95F4")]),_:1}),((L=u==null?void 0:u.verifyTime)==null?void 0:L.length)>0?(l(),d("span",cu,o((z=u==null?void 0:u.verifyTime)==null?void 0:z.substring(5)),1)):(l(),x(p,{key:1,color:"error",plain:"",plainFill:""},{default:n(()=>[c(" \u672A\u5F00\u59CB")]),_:1}))]),e("div",null,[r(p,null,{default:n(()=>[c("\u6700\u540E\u8BBF\u95EE")]),_:1}),((O=u==null?void 0:u.updateTime)==null?void 0:O.length)>0?(l(),d("span",eu,o((S=u==null?void 0:u.updateTime)==null?void 0:S.substring(5)),1)):_("",!0)]),(($=u==null?void 0:u.refundTime)==null?void 0:$.length)>0?(l(),d("div",du,[r(p,{color:"error"},{default:n(()=>[c("\u4E70\u5BB6\u9000\u6B3E")]),_:1}),e("span",null,o((U=u==null?void 0:u.refundTime)==null?void 0:U.substring(5)),1)])):_("",!0),E(v)("link:switch")&&((j=u==null?void 0:u.createBy)==null?void 0:j.length)>0?(l(),d("div",tu,[r(p,null,{default:n(()=>[c("\u521B\u5EFA\u4EBA")]),_:1}),e("span",null,o(u==null?void 0:u.createBy),1)])):_("",!0)]}),right:n(({item:u})=>[e("div",null,[e("div",null,[r(p,{color:H(u.status)},{default:n(()=>[e("text",{class:I((u==null?void 0:u.valid)===-1?"line-through":"")},o(u.statusName),3)]),_:2},1032,["color"])]),(u==null?void 0:u.valid)!==-1&&(u==null?void 0:u.status)>-1&&(u==null?void 0:u.status)<4?_("",!0):(l(),d("div",_u," \u9875\u9762\u7A7A\u767D "))])]),_:1},512)}}});export{ku as _};
