var R=Object.defineProperty;var d=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var f=(o,s,e)=>s in o?R(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,g=(o,s)=>{for(var e in s||(s={}))_.call(s,e)&&f(o,e,s[e]);if(d)for(var e of d(s))v.call(s,e)&&f(o,e,s[e]);return o};var u=(o,s,e)=>new Promise((i,c)=>{var l=t=>{try{m(e.next(t))}catch(a){c(a)}},p=t=>{try{m(e.throw(t))}catch(a){c(a)}},m=t=>t.done?i(t.value):Promise.resolve(t.value).then(l,p);m((e=e.apply(o,s)).next())});import{B as F}from"./index-1c1dc92f.js";import{B as M}from"./BasicForm-16b0dbe3.js";import"./componentMap-954cd91c.js";import{u as k}from"./useForm-a6f4b45a.js";import"./JAddInput-0d73042c.js";import"./JSelectUser-ef2d6619.js";import"./JSelectDept-3b235dbd.js";import"./JPopup-10c26cf4.js";import{B as y}from"./index-12df1add.js";import{e as I,s as x}from"./menu.data-5f0fe008.js";import{d as L,k as S,u as n,e as U,a5 as C,a9 as O,a7 as P,f as V,ag as b}from"./vue-249e5fad.js";const Q=L({__name:"DataRuleModal",props:{permissionId:String},emits:["success","register"],setup(o,{emit:s}){const e=o,i=S(!0),[c,{resetFields:l,setFieldsValue:p,validate:m}]=k({schemas:I,showActionButtonGroup:!1}),[t,{setModalProps:a,closeModal:B}]=y(r=>u(this,null,function*(){yield l(),a({confirmLoading:!1}),i.value=!!(r!=null&&r.isUpdate),n(i)&&(yield p(g({},r.record)))})),h=U(()=>n(i)?"编辑规则":"新增规则");function w(){return u(this,null,function*(){try{const r=yield m();r.permissionId=e.permissionId,a({confirmLoading:!0}),yield x(r,i.value),B(),s("success")}finally{a({confirmLoading:!1})}})}return(r,A)=>(C(),O(n(F),b(r.$attrs,{onRegister:n(t),title:h.value,onOk:w,width:"700px"}),{default:P(()=>[V(n(M),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Q as _};
