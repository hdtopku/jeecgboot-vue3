import{bW as v,ad as S,l as w}from"./jeecg-online-vendor-12004772.js";import{k as p,w as d,U as f,aV as i,ar as m,bi as h,as as q,F as y,a_ as C,E as x,ag as k}from"./vue-c7e3516e.js";import{f as O}from"./index-6916e394.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const{createMessage:B}=w(),b={name:"JOnlineSearchSelect",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},sql:{type:String,required:!0}},emits:["update:value"],setup(l,{emit:c}){let a=p(""),t=p([]);d(()=>l.value,e=>{e?a.value=e:a.value=void 0},{immediate:!0}),d(()=>l.sql,()=>{s()},{immediate:!0});const u=O(n,800);function n(e=""){let g={keyword:e},_="/online/cgreport/api/getReportDictList?sql="+l.sql;S.get({url:_,params:g},{isTransformResponse:!1}).then(r=>{r.success?r.result&&r.result.length>0?t.value=r.result:t.value=[]:B.warning(r.message)})}function o(e){c("update:value",e),(!e||e=="")&&s()}function s(){t.value=[],n()}return{selectOptions:t,handleSearch:u,handleChange:o,selected:a}}};function D(l,c,a,t,u,n){const o=f("a-select-option"),s=f("a-select");return i(),m(s,{value:t.selected,placeholder:a.placeholder,"show-search":"","default-active-first-option":!1,"show-arrow":!0,"filter-option":!1,"not-found-content":null,onSearch:t.handleSearch,onChange:t.handleChange,allowClear:""},{default:h(()=>[(i(!0),q(y,null,C(t.selectOptions,e=>(i(),m(o,{key:e.value},{default:h(()=>[x(k(e.text),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder","onSearch","onChange"])}var U=v(b,[["render",D]]);export{U as default};
