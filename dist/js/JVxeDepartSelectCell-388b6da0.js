var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var I=(e,t,a)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))x.call(t,a)&&I(e,a,t[a]);if(F)for(var a of F(t))ee.call(t,a)&&I(e,a,t[a]);return e},J=(e,t)=>Y(e,Z(t));import{B as te}from"./index-8cf3aabb.js";import{p as h,A as ae,R as ne,T as oe,E as le,aF as se,aG as re,aI as ue}from"./index-fde9c72f.js";import{ab as z,_ as A,aa as ie,f as ce,i as pe}from"./jeecg-online-vendor-bf2efbcb.js";import{t as de}from"./props-8e8dbf4f.js";import{_ as me}from"./index-d4783a30.js";import{u as fe}from"./useTreeBiz-faf9875a.js";import{d as L,k as v,u as y,U as c,aV as D,as as N,f as u,bi as i,ar as K,E as S,V as P,aQ as V,r as ge,p as w,s as he,w as M,J as j,e as R,ad as ve}from"./vue-c7e3516e.js";import{J as Ce}from"./JSelectBiz-b9d8b069.js";import{useRuleFormItem as ye}from"./useFormItem-4a12ff45.js";import"./BasicModal-ff8f2086.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./useWindowSizeFn-e5cad7ae.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";const _e=L({name:"DeptSelectModal",components:{BasicModal:te,BasicTree:me},props:J(b({},de),{modalTitle:{type:String,default:"\u90E8\u95E8\u9009\u62E9"},value:h.oneOfType([h.string,h.array])}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:a}){const[p,{closeModal:d}]=ae(),m=z(),l=v(null);let o=e.value===""?[]:e.value;const s=Object.assign({},y(e),y(m),{value:o},{disabled:!1}),f=W(),[{visibleChange:n,checkedKeys:C,getCheckStrictly:_,getSelectTreeData:g,onCheck:$,onLoadData:B,treeData:E,checkALL:r,expandAll:k,onSelect:q}]=fe(l,f,s),U=v(e.params),G=v([]),H={key:e.rowKey};function Q(){g((O,T)=>{t("getSelectResult",O,T),d()})}function W(){let O=e.sync?ne:oe;return T=>O(Object.assign({},T,{primaryKey:e.rowKey}))}return{tree:G,handleOk:Q,searchInfo:U,treeRef:l,treeData:E,onCheck:$,onSelect:q,checkALL:r,expandAll:k,fieldNames:H,checkedKeys:C,register:p,getBindValue:s,getCheckStrictly:_,visibleChange:n,onLoadData:B}}});function ke(e,t,a,p,d,m){const l=c("BasicTree"),o=c("a-menu-item"),s=c("a-menu"),f=c("Icon"),n=c("a-button"),C=c("a-dropdown"),_=c("BasicModal");return D(),N("div",null,[u(_,V(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:"500px",onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{insertFooter:i(()=>[u(C,{placement:"top"},{overlay:i(()=>[u(s,null,{default:i(()=>[e.multiple?(D(),K(o,{key:"1",onClick:t[0]||(t[0]=g=>e.checkALL(!0))},{default:i(()=>[S("\u5168\u90E8\u52FE\u9009")]),_:1})):P("",!0),e.multiple?(D(),K(o,{key:"2",onClick:t[1]||(t[1]=g=>e.checkALL(!1))},{default:i(()=>[S("\u53D6\u6D88\u5168\u9009")]),_:1})):P("",!0),u(o,{key:"3",onClick:t[2]||(t[2]=g=>e.expandAll(!0))},{default:i(()=>[S("\u5C55\u5F00\u5168\u90E8")]),_:1}),u(o,{key:"4",onClick:t[3]||(t[3]=g=>e.expandAll(!1))},{default:i(()=>[S("\u6298\u53E0\u5168\u90E8")]),_:1})]),_:1})]),default:i(()=>[u(n,{style:{float:"left"}},{default:i(()=>[S(" \u6811\u64CD\u4F5C "),u(f,{icon:"ant-design:up-outlined"})]),_:1})]),_:1})]),default:i(()=>[u(l,V({ref:"treeRef",treeData:e.treeData,"load-data":e.sync==!1?null:e.onLoadData},e.getBindValue,{onSelect:e.onSelect,onCheck:e.onCheck,fieldNames:e.fieldNames,checkedKeys:e.checkedKeys,checkStrictly:e.getCheckStrictly}),null,16,["treeData","load-data","onSelect","onCheck","fieldNames","checkedKeys","checkStrictly"])]),_:1},16,["onRegister","title","onOk","onVisibleChange"])])}const Se=A(_e,[["render",ke]]),De=L({name:"JSelectDept",components:{DeptSelectModal:Se,JSelectBiz:Ce},inheritAttrs:!1,props:{value:h.oneOfType([h.string,h.array]),multiple:h.bool.def(!0)},emits:["options-change","change","select","update:value"],setup(e,{emit:t,refs:a}){const p=v(),[d,{openModal:m}]=le(),[l]=ye(e,"value","change",p),o=v([]);let s=ge({value:[]});const f=v(!1);w("selectOptions",o),w("selectValues",s),w("loadingEcho",f);const n=v(!1),C=z();he(()=>{e.value&&g()}),M(()=>e.value,()=>{g()}),M(s,()=>{s&&(l.value=s.value)}),M(o,()=>{o&&t("select",j(y(o)),j(y(s)))});function _(){n.value=!0,m(!0,{isUpdate:!1})}function g(){let r=e.value?e.value:[];r&&typeof r=="string"?(l.value=r.split(","),s.value=r.split(",")):s.value=r}function $(r,k){o.value=r,l.value=k,s.value=k,t("update:value",k.join(","))}const B=Object.assign({},y(e),y(C));function E(r){t("update:value",r)}return{state:l,attrs:C,selectOptions:o,selectValues:s,loadingEcho:f,getBindValue:B,tag:n,regModal:d,setValue:$,handleOpen:_,handleChange:E}}});function Ve(e,t,a,p,d,m){const l=c("JSelectBiz"),o=c("DeptSelectModal");return D(),N("div",null,[u(l,V({onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs,{onChange:e.handleChange}),null,16,["onHandleOpen","loading","onChange"]),u(o,V({onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue),null,16,["onRegister","onGetSelectResult"])])}const $e=A(De,[["render",Ve],["__scopeId","data-v-6d96a60e"]]),Be=L({name:"JVxeDepartSelectCell",components:{JSelectDept:$e},props:se(),setup(e){const{innerValue:t,cellProps:a,handleChangeCommon:p,useCellDesign:d}=re(e),{prefixCls:m}=d("depart-select"),l=R(()=>{let n=t.value;return n==null?n:ie(n)?[]:ce(n)?n:pe(n)?n.split(","):[n]}),o=R(()=>a.value.multi!=!1),s=R(()=>J(b({},a.value),{value:l.value,showButton:!1,showSearch:!1,maxTagCount:1,maxTagPlaceholder:({length:n})=>"+"+n}));function f(n){p(n.join(","))}return{prefixCls:m,selectedValue:l,multiple:o,cellProps:a,getProps:s,handleChange:f}},data(){return{}},computed:{},watch:{},methods:{},enhanced:{switches:{visible:!0},translate:{enabled:!1},aopEvents:{editActived({$event:e}){ue({$event:e,props:this.props,className:".ant-select .ant-select-selection-search-input",isClick:!0})}}}});function Ee(e,t,a,p,d,m){const l=c("JSelectDept");return D(),N("div",{class:ve([e.prefixCls])},[u(l,V(e.getProps,{onChange:e.handleChange}),null,16,["onChange"])],2)}const Xe=A(Be,[["render",Ee]]);export{Xe as default};
