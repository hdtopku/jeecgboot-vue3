import{_ as S}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-993561ae.js";import{c as y,k as Q,bI as w,bJ as L}from"./jeecg-online-vendor-12004772.js";import{au as T,ay as V}from"./index-6916e394.js";import{Q as b}from"./index-4c9d5f8e.js";import{d as B,k as f,e as g,w as q,aV as E,as as N,f as s,at as D,u as t,bi as _,E as p,ag as k,F,V as j}from"./vue-c7e3516e.js";import{cI as U,cn as z}from"./antd-vue-vendor-1561c1ba.js";const J={class:"enter-x min-w-64 min-h-64"},M=B({__name:"QrCodeForm",setup(O){const c=f("");let a;const{t:n}=Q(),v=y(),{handleBackLogin:C,getLoginState:h}=T(),o=f("0"),i=g(()=>t(h)===V.QR_CODE),x=g(()=>t(o)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){o.value="0",w().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&I(e.qrcodeId)})}function u(e){L({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(a)),r.success&&(o.value="2",clearInterval(a),setTimeout(()=>{v.qrCodeLogin(d)},500))})}function I(e){u(e),m(),a=setInterval(()=>{u(e)},1500)}function m(){a&&clearInterval(a)}return q(i,e=>{e?l():m()}),(e,r)=>i.value?(E(),N(F,{key:0},[s(S,{class:"enter-x"}),D("div",J,[s(t(b),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),s(t(U),{class:"enter-x"},{default:_(()=>[p(k(x.value),1)]),_:1}),s(t(z),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:_(()=>[p(k(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):j("",!0)}});export{M as _};
