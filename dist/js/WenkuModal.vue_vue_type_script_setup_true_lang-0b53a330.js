var g=Object.defineProperty;var d=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(i,o,e)=>o in i?g(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e,w=(i,o)=>{for(var e in o||(o={}))k.call(o,e)&&h(i,e,o[e]);if(d)for(var e of d(o))M.call(o,e)&&h(i,e,o[e]);return i};var f=(i,o,e)=>new Promise((m,a)=>{var c=s=>{try{r(e.next(s))}catch(l){a(l)}},p=s=>{try{r(e.throw(s))}catch(l){a(l)}},r=s=>s.done?m(s.value):Promise.resolve(s.value).then(c,p);r((e=e.apply(i,o)).next())});import{B as Y}from"./index-04fa66a8.js";import{B}from"./BasicForm-1b000152.js";import"./componentMap-a38e30ba.js";import{u as F}from"./useForm-885eeddc.js";import"./JAddInput-93656682.js";import"./JSelectUser-88891e09.js";import"./JSelectDept-62570e8c.js";import"./JPopup-0d64514d.js";import{B as D}from"./index-bd4a6237.js";import{s as _}from"./Wenku.api-6a4f7dc2.js";import{d as I,k as P,u as n,e as y,a5 as T,a9 as R,a7 as U,f as C,ag as L}from"./vue-249e5fad.js";const O=[{label:"",field:"id",component:"Input",show:!1},{label:"链接key",field:"code",component:"Input"},{label:"激活码状态(0-正常,-1-失效)",field:"valid",component:"Input"},{label:"验证状态(-1-已退款,0-未使用,1-已打开,2-已提交,4-已发送)",field:"status",component:"Input"},{label:"文库下载地址",field:"link",component:"Input"},{label:"邮箱地址",field:"email",component:"Input"},{label:"备注",field:"remark",component:"Input"},{label:"客户首次访问的时间",field:"visitTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}},{label:"客户开始验证的时间",field:"verifyTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}},{label:"买家申请退款时间",field:"refundTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}}],H=I({__name:"WenkuModal",emits:["register","success"],setup(i,{emit:o}){const e=P(!0),[m,{resetFields:a,setFieldsValue:c,validate:p}]=F({labelWidth:150,schemas:O,showActionButtonGroup:!1}),[r,{setModalProps:s,closeModal:l}]=D(t=>f(this,null,function*(){yield a(),s({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),n(e)&&(yield c(w({},t.record)))})),v=y(()=>n(e)?"编辑":"新增");function b(t){return f(this,null,function*(){try{let u=yield p();s({confirmLoading:!0}),yield _(u,e.value),l(),o("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(t,u)=>(T(),R(n(Y),L(t.$attrs,{onRegister:n(r),title:v.value,onOk:b,width:"96%"}),{default:U(()=>[C(n(B),{onRegister:n(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{H as _};
