var K=Object.defineProperty,q=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var T=(e,t,o)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,$=(e,t)=>{for(var o in t||(t={}))N.call(t,o)&&T(e,o,t[o]);if(S)for(var o of S(t))Y.call(t,o)&&T(e,o,t[o]);return e},V=(e,t)=>q(e,H(t));var D=(e,t,o)=>new Promise((b,m)=>{var B=r=>{try{s(o.next(r))}catch(p){m(p)}},c=r=>{try{s(o.throw(r))}catch(p){m(p)}},s=r=>r.done?b(r.value):Promise.resolve(r.value).then(B,c);s((o=o.apply(e,t)).next())});import{B as z}from"./index-abefda79.js";import{J as f,a8 as I,B as P}from"./index-0d179770.js";import"./vxe-table-vendor-9edfd3ae.js";import{D as X}from"./jeecg-online-vendor-658239c9.js";import{o as G,a as Q,s as W}from"./jvxetable.api-6cc4d309.js";import{useJvxeMethod as Z}from"./useJvxeMethods-8064b901.js";import{d as x,k as v,r as y,u as F,e as ee,V as d,a5 as te,a9 as ae,a7 as l,f as a,E as A,ag as oe}from"./vue-bcbaddf9.js";import"./BasicModal-d4150903.js";import"./antd-vue-vendor-a78909e6.js";import"./tinymce-vendor-676f8393.js";import"./useWindowSizeFn-fbe431de.js";import"./lodash-es-vendor-9b741fb8.js";import"./echarts-vendor-6c8e2159.js";import"./vxeUtils-8e137732.js";const le=[{title:"客户名",key:"name",width:180,type:f.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"性别",key:"sex",width:180,type:f.select,options:[{title:"男",value:"1"},{title:"女",value:"2"}],defaultValue:"",placeholder:"请选择${title}"},{title:"身份证号",key:"idcard",width:180,type:f.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}格式不正确"}]},{title:"手机号",key:"telphone",width:180,type:f.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^1[3456789]\\d{9}$",message:"${title}格式不正确"}]}],re=[{title:"航班号",key:"ticketCode",width:180,type:f.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"航班时间",key:"tickectDate",width:180,type:f.date,placeholder:"请选择${title}",defaultValue:""}],ue=x({name:"JVexTableModal",components:{BasicModal:z,JVxeTable:I},emits:["success","register"],setup(e,{emit:t}){const o=v(!0),b=v(),m=v(),B=v(["tableRef1","tableRef2"]),c=v("tableRef1"),s={tableRef1:b,tableRef2:m},r=y({xs:{span:24},sm:{span:5}}),p=y({xs:{span:24},sm:{span:16}}),g=y({loading:!1,dataSource:[],columns:le}),M=y({loading:!1,dataSource:[],columns:re}),u=y({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[_,C,k,w]=Z(J,j,s,c,B),[R,{setModalProps:n,closeModal:O}]=P(i=>D(this,null,function*(){if(n({confirmLoading:!1}),E(),o.value=!!(i!=null&&i.isUpdate),F(o)){Object.assign(u,i.record);let h={id:u.id};k(G,h,g),k(Q,h,M)}})),L={orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},U=ee(()=>F(o)?"编辑":"新增");function j(i){let h=Object.assign(u,i.formValue);return V($({},h),{jeecgOrderCustomerList:i.tablesValue[0].tableData,jeecgOrderTicketList:i.tablesValue[1].tableData})}function E(){u.id=null,u.orderCode="",u.orderMoney="",u.orderDate=null,u.ctype="",u.content="",u.jeecgOrderCustomerList=[],u.jeecgOrderTicketList=[],g.dataSource=[],M.dataSource=[]}function J(i){return D(this,null,function*(){n({confirmLoading:!0}),yield W(i,F(o)),O(),t("success")})}return{formRef:w,activeKey:c,table1:g,table2:M,tableRef1:b,tableRef2:m,getTitle:U,labelCol:r,wrapperCol:p,validatorRules:L,orderMainModel:u,registerModal:R,handleChangeTabs:_,handleSubmit:C}}});function ne(e,t,o,b,m,B){const c=d("a-input"),s=d("a-form-item"),r=d("a-col"),p=d("a-select-option"),g=d("a-select"),M=d("a-date-picker"),u=d("a-row"),_=d("JVxeTable"),C=d("a-tab-pane"),k=d("a-tabs"),w=d("a-form"),R=d("BasicModal");return te(),ae(R,oe(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:l(()=>[a(w,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:l(()=>[a(u,{class:"form-row",gutter:16},{default:l(()=>[a(r,{lg:8},{default:l(()=>[a(s,{label:"订单号",name:"orderCode"},{default:l(()=>[a(c,{value:e.orderMainModel.orderCode,"onUpdate:value":t[0]||(t[0]=n=>e.orderMainModel.orderCode=n),placeholder:"请输入订单号"},null,8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:l(()=>[a(s,{label:"订单类型",name:"ctype"},{default:l(()=>[a(g,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":t[1]||(t[1]=n=>e.orderMainModel.ctype=n)},{default:l(()=>[a(p,{value:"1"},{default:l(()=>[A("国内订单")]),_:1}),a(p,{value:"2"},{default:l(()=>[A("国际订单")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:l(()=>[a(s,{label:"订单日期",name:"orderDate"},{default:l(()=>[a(M,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":t[2]||(t[2]=n=>e.orderMainModel.orderDate=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(u,{class:"form-row",gutter:16},{default:l(()=>[a(r,{lg:8},{default:l(()=>[a(s,{label:"订单金额",name:"orderMoney"},{default:l(()=>[a(c,{value:e.orderMainModel.orderMoney,"onUpdate:value":t[3]||(t[3]=n=>e.orderMainModel.orderMoney=n),placeholder:"请输入订单金额"},null,8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:l(()=>[a(s,{label:"订单备注",name:"content"},{default:l(()=>[a(c,{value:e.orderMainModel.content,"onUpdate:value":t[4]||(t[4]=n=>e.orderMainModel.content=n),placeholder:"请输入订单备注"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(k,{activeKey:e.activeKey,"onUpdate:activeKey":t[5]||(t[5]=n=>e.activeKey=n),onChange:e.handleChangeTabs},{default:l(()=>[a(C,{tab:"客户信息",key:"tableRef1"},{default:l(()=>[a(_,{ref:"tableRef1",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource},null,8,["loading","columns","dataSource"])]),_:1}),a(C,{tab:"机票信息",key:"tableRef2",forceRender:""},{default:l(()=>[a(_,{ref:"tableRef2",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource},null,8,["loading","columns","dataSource"])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const ke=X(ue,[["render",ne]]);export{ke as default};
