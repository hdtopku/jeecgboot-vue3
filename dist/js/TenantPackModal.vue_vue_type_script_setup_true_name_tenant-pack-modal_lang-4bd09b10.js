var W=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(o,n,t)=>n in o?W(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,w=(o,n)=>{for(var t in n||(n={}))H.call(n,t)&&M(o,t,n[t]);if(y)for(var t of y(n))J.call(n,t)&&M(o,t,n[t]);return o},B=(o,n)=>q(o,G(n));var i=(o,n,t)=>new Promise((u,p)=>{var k=s=>{try{f(t.next(s))}catch(c){p(c)}},r=s=>{try{f(t.throw(s))}catch(c){p(c)}},f=s=>s.done?u(s.value):Promise.resolve(s.value).then(k,r);f((t=t.apply(o,n)).next())});import{B as X}from"./index-9793b37c.js";import{a as Y,b as Z}from"./tenant.data-3a7b6783.js";import{p as ee,d as P}from"./tenant.api-8d56bbc4.js";import{useListPage as te}from"./useListPage-f9433ee2.js";import ne from"./BasicTable-862478b3.js";import{Q as ae}from"./componentMap-e7638604.js";import"./useTable-cb85a52b.js";import{_ as oe}from"./TenantPackMenuModal.vue_vue_type_script_setup_true_name_tenant-pack-menu-modal_lang-433beea5.js";import{u as se}from"./jeecg-online-vendor-c39424cc.js";import ie from"./TenantPackUserModal-4dabfa9a.js";import{z as R,B as re}from"./index-a9a5a3b3.js";import{M as le}from"./antd-vue-vendor-a78909e6.js";import{d as S,k as v,r as ce,V as me,a5 as I,a6 as de,f as l,a7 as d,u as a,E as O,a9 as ue,W as pe,ag as fe,F as ge}from"./vue-bcbaddf9.js";const ke=S({name:"tenant-pack-modal"}),Te=S(B(w({},ke),{emits:["register","success"],setup(o,{emit:n}){const[t,{openModal:u}]=R(),[p,{openModal:k}]=R(),r=v(0),{prefixCls:f,tableContext:s}=te({designScope:"tenant-template",tableProps:{api:ee,columns:Y,immediate:!1,formConfig:{schemas:Z,labelCol:{xxl:8},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8}},beforeFetch:e=>Object.assign(e,{tenantId:a(r)})}}),[c,{reload:T},{rowSelection:U,selectedRowKeys:_,selectedRows:A}]=s,h=v(""),[F,{setModalProps:_e,closeModal:V}]=re(e=>i(this,null,function*(){r.value=e.tenantId,h.value=e.createBy,m()})),E="租户产品包列表";function N(e){return i(this,null,function*(){V()})}function j(e){return[{label:"用户",onClick:D.bind(null,e)},{label:"编辑",onClick:K.bind(null,e)},{label:"删除",popConfirm:{title:"是否确认删除租户产品包",confirm:L.bind(null,e)}}]}function m(){(_.value=[])&&T()}function K(e){return i(this,null,function*(){u(!0,{isUpdate:!0,record:e,tenantId:a(r)})})}const C=ce(["superAdmin","accountAdmin","appAdmin"]),{createMessage:x}=se();function L(e){return i(this,null,function*(){if(C.indexOf(e.packCode)!=-1){x.warning("默认系统产品包不允许删除");return}yield P({ids:e.id},m)})}function $(){return i(this,null,function*(){let e=A.value;if(e&&e.length>0){for(let g=0;g<e.length;g++)if(C.indexOf(e[g].packCode)!=-1){x.warning("默认系统产品包不允许删除");return}}le.confirm({title:"删除租户产品包",content:"是否删除租户产品包",okText:"确认",cancelText:"取消",onOk:()=>i(this,null,function*(){yield P({ids:_.value.join(",")},m)})})})}function z(){u(!0,{isUpdate:!1,tenantId:a(r)})}function D(e){e.createBy=a(h),k(!0,{record:e})}return(e,g)=>{const b=me("a-button");return I(),de(ge,null,[l(a(X),fe(e.$attrs,{onRegister:a(F),title:E,onOk:N,width:"800px",showCancelBtn:!1,showOkBtn:!1}),{default:d(()=>[l(a(ne),{onRegister:a(c),rowSelection:a(U)},{tableTitle:d(()=>[l(b,{preIcon:"ant-design:plus-outlined",type:"primary",onClick:z,style:{"margin-right":"5px"}},{default:d(()=>[O("新增 ")]),_:1}),a(_).length>0?(I(),ue(b,{key:0,preIcon:"ant-design:delete-outlined",type:"primary",onClick:$,style:{"margin-right":"5px"}},{default:d(()=>[O("批量删除 ")]),_:1})):pe("",!0)]),action:d(({record:Q})=>[l(a(ae),{actions:j(Q)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"])]),_:1},16,["onRegister"]),l(oe,{onRegister:a(t),onSuccess:m},null,8,["onRegister"]),l(ie,{onRegister:a(p),onSuccess:m},null,8,["onRegister"])],64)}}}));export{Te as _};
