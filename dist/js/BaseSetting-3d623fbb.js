var y=(c,g,l)=>new Promise((u,p)=>{var e=n=>{try{d(l.next(n))}catch(m){p(m)}},v=n=>{try{d(l.throw(n))}catch(m){p(m)}},d=n=>n.done?u(n.value):Promise.resolve(n.value).then(e,v);d((l=l.apply(c,g)).next())});import{u as A,C as Y}from"./upload-6788df26.js";import{g as F,s as R,u as V,C as H}from"./jeecg-online-vendor-ef755ff7.js";import{h as O}from"./header-55b09394.js";import{z as j,g as q}from"./index-12df1add.js";import{c as P,d as $}from"./antd-vue-vendor-31afcf32.js";import{a as G,g as J}from"./UserSetting.api-bda7d720.js";import{_ as K}from"./UserAccountModal.vue_vue_type_script_setup_true_lang-dd3b3ecf.js";import"./index-1c1dc92f.js";import{d as L,k as b,e as Q,o as W,U as x,a5 as D,a6 as I,aa as t,f,u as T,ab as r,a7 as X,E as Z,F as tt,ap as et,aq as st}from"./vue-249e5fad.js";import"./base64Conver-fa2fe1af.js";import"./tinymce-vendor-676f8393.js";import"./lodash-es-vendor-c1987ca1.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-0b109a77.js";import"./BasicForm-16b0dbe3.js";import"./componentMap-954cd91c.js";import"./useFormItem-7623fae7.js";import"./JUpload.vue_vue_type_style_index_0_lang-30d4d8b5.js";import"./BasicModal-e6e1e190.js";import"./useWindowSizeFn-8e659aab.js";import"./download-219035f9.js";import"./index-4d91db79.js";import"./index-2f5742f5.js";import"./useCountdown-da2dd22b.js";import"./JAddInput-0d73042c.js";import"./areaDataUtil-ce3f5a88.js";import"./JSelectUser-ef2d6619.js";import"./props-e09496a2.js";import"./JSelectBiz-a8f462b6.js";import"./index-228eef18.js";import"./codemirror-vendor-7570b8a9.js";import"./index-6c18513e.js";import"./bem-fb1a73a6.js";import"./props-7b44416e.js";import"./useContextMenu-82899327.js";import"./depart.api-0ee34edf.js";import"./JSelectDept-3b235dbd.js";import"./JPopup-10c26cf4.js";import"./index-860d67ba.js";import"./BasicForm.vue_vue_type_style_index_0_lang-cef173f8.js";import"./useForm-a6f4b45a.js";const i=c=>(et("data-v-6673b8e2"),c=c(),st(),c),ot={class:"account-padding"},at={class:"user-setting-top"},nt={class:"account-avatar"},it={class:"account-right"},lt={key:0},rt={class:"font-size-17 account-name"},ct={key:1},pt={class:"use-day"},ut={class:"account-data"},dt={class:"account-detail"},mt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"详细资料",-1)),_t={class:"margin-bottom-10 font-size-13"},ft=i(()=>t("span",{class:"gray-75 item-label"},"生日",-1)),vt={class:"gray-3"},gt={class:"margin-bottom-10 font-size-13"},ht=i(()=>t("span",{class:"gray-75 item-label"},"性别",-1)),yt={class:"gray-3"},bt={class:"margin-bottom-10 nowarp font-size-13"},xt=i(()=>t("span",{class:"gray-75 item-label"},"职位",-1)),Dt={class:"gray-3"},It=i(()=>t("span",{class:"item-label"},null,-1)),Tt={class:"account-info"},zt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"联系信息",-1)),Ct={class:"margin-bottom-10 font-size-13"},Mt=i(()=>t("span",{class:"gray-75 item-label"},"邮箱",-1)),St={class:"gray-3"},Bt={class:"margin-bottom-10 font-size-13"},Ut=i(()=>t("span",{class:"gray-75 item-label"},"手机",-1)),kt={class:"gray-3"},wt=L({__name:"BaseSetting",setup(c){const g=F("sex")||[{text:"男",value:"1"},{text:"女",value:"2"}],{createMessage:l}=V(),u=R(),p=b(!1),e=b({}),v=b(),[d,{openModal:n}]=j(),m=Q(()=>q(e.value.avatar)||O);function M(s,o){const a=u.getUserInfo;a.avatar=o,u.setUserInfo(a),o&&z({avatar:o,id:a.id})}function z(s){G(s).then(o=>{o.success||l.warn(o.message)})}function S(){p.value=!0,setTimeout(()=>{v.value.focus()},100)}function B(){e.value.realname?(z({realname:e.value.realname,id:e.value.id}),u.setUserInfo(e.value)):l.warn("请输入姓名"),p.value=!1}function U(s){return s?$(s).format("YYYY-MM-DD"):"未填写"}function k(s){let o=g.find(_=>parseInt(_.value)===s),a="未填写";return o&&(a=o.text),a}function w(){let s=P(e.value);n(!0,{record:s})}function C(){J().then(s=>y(this,null,function*(){s.success&&(s.result?(s.result.sexText=k(s.result.sex),s.result.birthday=U(s.result.birthday),s.result.createTimeText=E(s.result.createTime),e.value=s.result):e.value={})}))}function E(s){let o,a,_=Date.parse(s),h=new Date().getTime();return a=Math.abs(h-_),o=Math.floor(a/(1e3*3600*24)),o+" 天"}return W(()=>y(this,null,function*(){C()})),(s,o)=>{const a=x("Icon"),_=x("a-tooltip"),h=x("a-input");return D(),I(tt,null,[t("div",ot,[t("div",at,[t("div",nt,[f(T(Y),{uploadApi:T(A),showBtn:!1,value:m.value,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:M,width:"80"},null,8,["uploadApi","value"]),t("div",it,[p.value?(D(),I("div",ct,[f(h,{ref_key:"accountNameEdit",ref:v,maxlength:100,value:e.value.realname,"onUpdate:value":o[0]||(o[0]=N=>e.value.realname=N),onBlur:B},null,8,["value"])])):(D(),I("div",lt,[t("span",rt,r(e.value.realname),1),f(_,{content:"编辑姓名"},{default:X(()=>[f(a,{class:"pointer font-size-17 gray-bd account-icon",icon:"ant-design:edit-outlined",onClick:S})]),_:1})])),t("div",pt,[Z(" 使用："),t("span",null,r(e.value.createTimeText),1)])])])]),t("div",ut,[t("div",dt,[mt,t("div",_t,[ft,t("span",vt,r(e.value.birthday),1)]),t("div",gt,[ht,t("span",yt,r(e.value.sexText),1)]),t("div",bt,[xt,t("span",Dt,r(e.value.postText?e.value.postText:"未填写"),1)]),t("div",{class:"font-size-13"},[It,t("span",{class:"item-label pointer",style:{color:"#1e88e5"},onClick:w},"编辑")])]),t("div",Tt,[zt,t("div",Ct,[Mt,t("span",St,r(e.value.email?e.value.email:"未填写"),1)]),t("div",Bt,[Ut,t("span",kt,r(e.value.phone?e.value.phone:"未填写"),1)])])])]),f(K,{onRegister:T(d),onSuccess:C},null,8,["onRegister"])],64)}}});const xe=H(wt,[["__scopeId","data-v-6673b8e2"]]);export{xe as default};
