var z=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var x=(o,n,t)=>n in o?z(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,y=(o,n)=>{for(var t in n||(n={}))J.call(n,t)&&x(o,t,n[t]);if(E)for(var t of E(n))W.call(n,t)&&x(o,t,n[t]);return o},A=(o,n)=>G(o,H(n));var u=(o,n,t)=>new Promise((d,p)=>{var C=s=>{try{f(t.next(s))}catch(l){p(l)}},i=s=>{try{f(t.throw(s))}catch(l){p(l)}},f=s=>s.done?d(s.value):Promise.resolve(s.value).then(C,i);f((t=t.apply(o,n)).next())});import{B as X}from"./index-8cf3aabb.js";import{a as Y,b as Z}from"./tenant.data-c14b7f8b.js";import{p as ee,d as F}from"./tenant.api-de8dd33d.js";import{useListPage as te}from"./useListPage-5049b37a.js";import ne from"./BasicTable-29c6504d.js";import{T as ae}from"./componentMap-a6d21ad6.js";import"./BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js";import"./useTable-7e303edd.js";import{_ as oe}from"./TenantPackMenuModal.vue_vue_type_script_setup_true_name_tenant-pack-menu-modal_lang-a34c891d.js";import{l as se}from"./jeecg-online-vendor-bf2efbcb.js";import ue from"./TenantPackUserModal-f76ac5c2.js";import{E as M,A as ie}from"./index-fde9c72f.js";import{d as R,k as w,u as a,r as re,U as le,aV as D,as as ce,f as r,bi as m,E as P,ar as me,V as de,aQ as pe,F as fe}from"./vue-c7e3516e.js";import{a9 as ge}from"./antd-vue-vendor-1561c1ba.js";const Ce=R({name:"tenant-pack-modal"}),ve=R(A(y({},Ce),{emits:["register","success"],setup(o,{emit:n}){const[t,{openModal:d}]=M(),[p,{openModal:C}]=M(),i=w(0),{prefixCls:f,tableContext:s}=te({designScope:"tenant-template",tableProps:{api:ee,columns:Y,immediate:!1,formConfig:{schemas:Z,labelCol:{xxl:8},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8}},beforeFetch:e=>Object.assign(e,{tenantId:a(i)})}}),[l,{reload:T},{rowSelection:v,selectedRowKeys:k,selectedRows:I}]=s,B=w(""),[O,{setModalProps:ke,closeModal:S}]=ie(e=>u(this,null,function*(){i.value=e.tenantId,B.value=e.createBy,c()})),U="\u79DF\u6237\u4EA7\u54C1\u5305\u5217\u8868";function V(e){return u(this,null,function*(){S()})}function N(e){return[{label:"\u7528\u6237",onClick:Q.bind(null,e)},{label:"\u7F16\u8F91",onClick:j.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u79DF\u6237\u4EA7\u54C1\u5305",confirm:L.bind(null,e)}}]}function c(){(k.value=[])&&T()}function j(e){return u(this,null,function*(){d(!0,{isUpdate:!0,record:e,tenantId:a(i)})})}const b=re(["superAdmin","accountAdmin","appAdmin"]),{createMessage:_}=se();function L(e){return u(this,null,function*(){if(b.indexOf(e.packCode)!=-1){_.warning("\u9ED8\u8BA4\u7CFB\u7EDF\u4EA7\u54C1\u5305\u4E0D\u5141\u8BB8\u5220\u9664");return}yield F({ids:e.id},c)})}function $(){return u(this,null,function*(){let e=I.value;if(e&&e.length>0){for(let g=0;g<e.length;g++)if(b.indexOf(e[g].packCode)!=-1){_.warning("\u9ED8\u8BA4\u7CFB\u7EDF\u4EA7\u54C1\u5305\u4E0D\u5141\u8BB8\u5220\u9664");return}}ge.confirm({title:"\u5220\u9664\u79DF\u6237\u4EA7\u54C1\u5305",content:"\u662F\u5426\u5220\u9664\u79DF\u6237\u4EA7\u54C1\u5305",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>u(this,null,function*(){yield F({ids:k.value.join(",")},c)})})})}function K(){d(!0,{isUpdate:!1,tenantId:a(i)})}function Q(e){e.createBy=a(B),C(!0,{record:e})}return(e,g)=>{const h=le("a-button");return D(),ce(fe,null,[r(a(X),pe(e.$attrs,{onRegister:a(O),title:U,onOk:V,width:"800px",showCancelBtn:!1,showOkBtn:!1}),{default:m(()=>[r(a(ne),{onRegister:a(l),rowSelection:a(v)},{tableTitle:m(()=>[r(h,{preIcon:"ant-design:plus-outlined",type:"primary",onClick:K,style:{"margin-right":"5px"}},{default:m(()=>[P("\u65B0\u589E ")]),_:1}),a(k).length>0?(D(),me(h,{key:0,preIcon:"ant-design:delete-outlined",type:"primary",onClick:$,style:{"margin-right":"5px"}},{default:m(()=>[P("\u6279\u91CF\u5220\u9664 ")]),_:1})):de("",!0)]),action:m(({record:q})=>[r(a(ae),{actions:N(q)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"])]),_:1},16,["onRegister"]),r(oe,{onRegister:a(t),onSuccess:c},null,8,["onRegister"]),r(ue,{onRegister:a(p),onSuccess:c},null,8,["onRegister"])],64)}}}));export{ve as _};
