var _e=Object.defineProperty,Ee=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var Fe=(e,o,a)=>o in e?_e(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,v=(e,o)=>{for(var a in o||(o={}))$e.call(o,a)&&Fe(e,a,o[a]);if(Be)for(var a of Be(o))qe.call(o,a)&&Fe(e,a,o[a]);return e},Te=(e,o)=>Ee(e,We(o));var L=(e,o,a)=>new Promise((d,w)=>{var p=g=>{try{f(a.next(g))}catch(u){w(u)}},c=g=>{try{f(a.throw(g))}catch(u){w(u)}},f=g=>g.done?d(g.value):Promise.resolve(g.value).then(p,c);f((a=a.apply(e,o)).next())});import{k as ge,ae as Ae,e as _,an as G,ar as He,_ as ze,aI as $,am as X,f as re,i as se,bb as Ye,at as Ie,O as De,aG as Ue}from"./jeecg-online-vendor-12004772.js";import{a3 as Ke,y as Pe,a4 as Ge,c as Je,u as Xe,a5 as Qe,a6 as Ze,p as j,a7 as et,f as Re,z as tt,l as nt}from"./index-6916e394.js";import{e as V,u as t,d as we,H as ot,v as st,f as R,i as at,A as it,aQ as J,E as ae,U as Z,aV as ee,ar as te,bi as U,at as rt,af as lt,R as ne,ag as fe,V as oe,ae as ct,w as ie,J as je,s as ut,n as Me,r as Se,k as K,o as dt}from"./vue-c7e3516e.js";import{i as xe}from"./componentMap-90ab712d.js";import{cU as le,cI as ft,cS as ve,aa as be,ab as ye,cT as mt}from"./antd-vue-vendor-1561c1ba.js";import{u as pt,s as ht,a as bt}from"./lodash-es-vendor-42c8d3d4.js";import"./index-a882524d.js";import{u as yt}from"./BasicModal-b901e352.js";const{t:me}=ge();function ke(e){return e.includes("Input")||e.includes("Complete")?me("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?me("common.chooseText"):""}const gt=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function At(){return[...gt,"RangePicker"]}function wt(e,o,a){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(o)?e.type=a?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(o)?e.type="array":["InputNumber"].includes(o)&&(e.type="number")}function vt(e,o){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&o&&Ae(o)?`${o}`:o}const Le=At();function Ct(e,o){return V(()=>{const a=t(e),{labelCol:d={},wrapperCol:w={}}=a.itemProps||{},{labelWidth:p,disabledLabelWidth:c}=a,{labelWidth:f,labelCol:g,wrapperCol:u,layout:k}=t(o);if(c)return{labelCol:d,wrapperCol:w};if(!f&&!p&&!g)return d.style={textAlign:"left"},{labelCol:d,wrapperCol:w};let P=p||f;const T=v(v({},g),d),W=v(v({},u),w);return P&&(P=Ae(P)?`${P}px`:P),{labelCol:v({style:{width:P||"100%"}},T),wrapperCol:v({style:{width:k==="vertical"?"100%":`calc(100% - ${P})`}},W)}})}function pe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!at(e)}const Ot=we({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:o}){const{t:a}=ge(),{schema:d,formProps:w}=ot(e),p=Ct(d,w),c=V(()=>{const{allDefaultValues:l,formModel:i,schema:h}=e,{mergeDynamicData:C}=e.formProps;return{field:h.field,model:i,values:v(v(v({},C),l),i),schema:h}}),f=V(()=>{var b;const{schema:l,tableAction:i,formModel:h,formActionType:C}=e;let{componentProps:m={}}=l;return _(m)&&(m=(b=m({schema:l,tableAction:i,formModel:h,formActionType:C}))!=null?b:{}),l.component==="Divider"&&(m=Object.assign({type:"horizontal"},m,{orientation:"left",plain:!0})),m}),g=V(()=>{const{disabled:l}=e.formProps,{dynamicDisabled:i}=e.schema,{disabled:h=!1}=t(f);let C=!!l||h;return G(i)&&(C=i),_(i)&&(C=i(t(c))),C});function u(){const{show:l,ifShow:i}=e.schema,{showAdvancedButton:h}=e.formProps,C=h&&G(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let m=!0,b=!0;return G(l)&&(m=l),G(i)&&(b=i),_(l)&&(m=l(t(c))),_(i)&&(b=i(t(c))),m=m&&C,{isShow:m,isIfShow:b}}function k(){var D;const{rules:l=[],component:i,rulesMessageJoinLabel:h,label:C,dynamicRules:m,required:b}=e.schema;if(_(m))return m(t(c));let A=be(l);const{rulesMessageJoinLabel:x}=e.formProps,n=Reflect.has(e.schema,"rulesMessageJoinLabel")?h:x,s=ke(i)+`${n?C:""}`;function y(I,O){const N=I.message||s;return O===void 0||He(O)||Array.isArray(O)&&O.length===0||typeof O=="string"&&O.trim()===""||typeof O=="object"&&Reflect.has(O,"checked")&&Reflect.has(O,"halfChecked")&&Array.isArray(O.checked)&&Array.isArray(O.halfChecked)&&O.checked.length===0&&O.halfChecked.length===0?Promise.reject(N):Promise.resolve()}const r=_(b)?b(t(c)):b;(!A||A.length===0)&&r&&(A=[{required:r,validator:y}]);const S=A.findIndex(I=>Reflect.has(I,"required")&&!Reflect.has(I,"validator"));if(S!==-1){const I=A[S],{isShow:O}=u();if(O||(I.required=!1),i){Reflect.has(I,"type")||(I.type=i==="InputNumber"?"number":"string"),I.message=I.message||s,(i.includes("Input")||i.includes("Textarea"))&&(I.whitespace=!0);const N=(D=t(f))==null?void 0:D.valueFormat;wt(I,i,N)}}const F=A.findIndex(I=>I.max);return F!==-1&&!A[F].validator&&(A[F].message=A[F].message||a("component.form.maxTip",[A[F].max])),A}function P(){var O;const{renderComponentContent:l,component:i,field:h,changeEvent:C="change",valueField:m}=e.schema,b=i&&["Switch","Checkbox"].includes(i),A=`on${pt(C)}`,x={[A]:(...N)=>{const[H]=N;r[A]&&r[A](...N);const z=H?H.target:null,ce=z?b?z.checked:z.value:H;e.setFormModel(h,ce)}},n=xe.get(i),{autoSetPlaceHolder:s,size:y}=e.formProps,r=Te(v({allowClear:!0,getPopupContainer:N=>N.parentNode,size:y},t(f)),{disabled:t(g)});!r.disabled&&s&&i!=="RangePicker"&&i&&(r.placeholder=((O=t(f))==null?void 0:O.placeholder)||ke(i)+e.schema.label),r.codeField=h,r.formValues=t(c);const F={[m||(b?"checked":"value")]:e.formModel[h]},D=v(v(v({},r),x),F);if(!l)return R(n,D,null);const I=_(l)?v({},l(t(c))):{default:()=>l};return R(n,D,pe(I)?I:{default:()=>[I]})}function T(){const{label:l,helpMessage:i,helpComponentProps:h,subLabel:C,labelLength:m}=e.schema;let b=l+"";m&&b.length>4&&(b=b.substr(0,m));const x=C?R("span",null,[l,ae(" "),R("span",{class:"text-secondary"},[C])]):m?R("label",{title:l},[b]):l,n=_(i)?i(t(c)):i;return!n||Array.isArray(n)&&n.length===0?x:R("span",null,[x,R(Ge,J({placement:"top",class:"mx-1",text:n},h),null)])}function W(){const{itemProps:l,slot:i,render:h,field:C,suffix:m,component:b}=e.schema,{labelCol:A,wrapperCol:x}=t(p),{colon:n}=e.formProps;if(b==="Divider"){let s;return R(le,{span:24},{default:()=>[R(ft,t(f),pe(s=T())?s:{default:()=>[s]})]})}else{const s=()=>i?Pe(o,i,t(c)):h?h(t(c)):P(),y=!!m,r=_(m)?m(t(c)):m;return R(ve.Item,J({name:C,colon:n,class:{"suffix-item":y}},l,{label:T(),rules:k(),labelCol:A,wrapperCol:x}),{default:()=>[R("div",{style:"display:flex"},[R("div",{style:"flex:1; width: 100%;"},[s()]),y&&R("span",{class:"suffix"},[r])])]})}}return()=>{let l;const{colProps:i={},colSlot:h,renderColContent:C,component:m}=e.schema;if(!xe.has(m))return null;const{baseColProps:b={}}=e.formProps,{getIsMobile:A}=Ke();let x;i.span&&!t(A)&&["xs","sm","md","lg","xl","xxl"].forEach(S=>delete b[S]),x=v(v({},b),i);const{isIfShow:n,isShow:s}=u(),y=t(c);return n&&st(R(le,x,pe(l=(()=>h?Pe(o,h,y):C?C(y):W())())?l:{default:()=>[l]}),[[it,s]])}}}),Ve=Symbol();function Bt(e){return Je(e,Ve)}function Ft(){return Xe(Ve)}const Tt=we({name:"BasicFormAction",components:{FormItem:ve.Item,Button:Qe,BasicArrow:Ze,[le.name]:le},props:{showActionButtonGroup:j.bool.def(!0),showResetButton:j.bool.def(!0),showSubmitButton:j.bool.def(!0),showAdvancedButton:j.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:j.number.def(6),isAdvanced:j.bool,hideAdvanceBtn:j.bool},emits:["toggle-advanced"],setup(e,{emit:o}){const{t:a}=ge(),d=V(()=>{const{showAdvancedButton:f,actionSpan:g,actionColOptions:u}=e,k=24-g,P=f?{span:k<6?24:k}:{};return v(v({style:{textAlign:"right"},span:f?6:4},P),u)}),w=V(()=>Object.assign({text:a("common.resetText"),preIcon:"ic:baseline-restart-alt"},e.resetButtonOptions)),p=V(()=>Object.assign({},{text:a("common.queryText"),preIcon:"ant-design:search-outlined"},e.submitButtonOptions));function c(){o("toggle-advanced")}return v({t:a,actionColOpt:d,getResetBtnOptions:w,getSubmitBtnOptions:p,toggleAdvanced:c},Ft())}});function It(e,o,a,d,w,p){const c=Z("Button"),f=Z("BasicArrow"),g=Z("FormItem"),u=Z("a-col");return e.showActionButtonGroup?(ee(),te(u,ct(J({key:0},e.actionColOpt)),{default:U(()=>[rt("div",{style:lt([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[R(g,null,{default:U(()=>[ne(e.$slots,"submitBefore"),e.showSubmitButton?(ee(),te(c,J({key:0,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:U(()=>[ae(fe(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):oe("",!0),ne(e.$slots,"resetBefore"),e.showResetButton?(ee(),te(c,J({key:1,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:U(()=>[ae(fe(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):oe("",!0),ne(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(ee(),te(c,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:U(()=>[ae(fe(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),R(f,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):oe("",!0),ne(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):oe("",!0)}const Pt=ze(Tt,[["render",It]]);function jt(e,o){var w,p;return((w=t(e))==null?void 0:w.fieldMapToTime)&&(o=St(e,o)),((p=t(e))==null?void 0:p.fieldMapToNumber)&&(o=xt(e,o)),o}function St(e,o){const a=t(e).fieldMapToTime;if(!a||!Array.isArray(a))return o;for(const[d,[w,p],c="YYYY-MM-DD"]of a){if(!d||!w||!p||!o[d])continue;let f=o[d];Array.isArray(f)||(f=f.split(","));const[g,u]=f;o[w]=$(g).format(c),o[p]=$(u).format(c),Reflect.deleteProperty(o,d)}return o}function xt(e,o){const a=t(e).fieldMapToNumber;if(!a||!Array.isArray(a))return o;for(const[d,[w,p]]of a){if(!d||!w||!p||!o[d])continue;let c=o[d];typeof c=="string"&&(c=c.split(","));const[f,g]=c;o[w]=f,o[p]=g,Reflect.deleteProperty(o,d)}return o}function kt({defaultValueRef:e,getSchema:o,formModel:a,getProps:d}){function w(c){if(!X(c))return{};const f={};for(const g of Object.entries(c)){let[,u]=g;const[k]=g;if(!k||re(u)&&u.length===0||_(u))continue;const P=t(d).transformDateFunc;X(u)&&(u=P==null?void 0:P(u)),re(u)&&ye.isDayjs(u[0])&&ye.isDayjs(u[1])&&(u=u.map(T=>P==null?void 0:P(T))),se(u)&&(u=u.trim()),ht(f,k,u)}return jt(d,f)}function p(){const c=t(o),f={};c.forEach(g=>{const{defaultValue:u}=g;Ye(u)||(f[g.field]=u,a[g.field]=u)}),e.value=f}return{handleFormValues:w,initDefault:p}}const q=24;function Dt({advanceState:e,emit:o,getProps:a,getSchema:d,formModel:w,defaultValueRef:p}){const{realWidthRef:c,screenEnum:f,screenRef:g}=et(),u=V(()=>{if(!e.isAdvanced)return 0;const l=t(a).emptySpan||0;if(Ae(l))return l;if(X(l)){const{span:i=0}=l,h=t(g);return l[h.toLowerCase()]||i||0}return 0}),k=Re(T,30);ie([()=>t(d),()=>e.isAdvanced,()=>t(c)],()=>{const{showAdvancedButton:l}=t(a);l&&k()},{immediate:!0});function P(l,i=0,h=!1,C=0){var y;const m=t(c),b=parseInt(l.md)||parseInt(l.xs)||parseInt(l.sm)||l.span||q,A=parseInt(l.lg)||b,x=parseInt(l.xl)||A,n=parseInt(l.xxl)||x;m<=f.LG?i+=b:m<f.XL?i+=A:m<f.XXL?i+=x:i+=n;let s=(y=t(a).autoAdvancedCol)!=null?y:3;return h?(e.hideAdvanceBtn=t(d).length<=s,i>q*2&&i<=q*(t(a).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced,t(d).length>s&&(e.hideAdvanceBtn=!1,e.isAdvanced=!1)),{isAdvanced:e.isAdvanced,itemColSum:i}):i>q*(t(a).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:i}:!e.isAdvanced&&C+1>s?{isAdvanced:!1,itemColSum:i}:{isAdvanced:!0,itemColSum:i}}function T(){let l=0,i=0;const{baseColProps:h={}}=t(a),C=t(d);for(let m=0;m<C.length;m++){const b=C[m],{show:A,colProps:x}=b;let n=!0;if(G(A)&&(n=A),_(A)&&(n=A({schema:b,model:w,field:b.field,values:v(v({},t(p)),w)})),n&&(x||h)){const{itemColSum:s,isAdvanced:y}=P(v(v({},h),x),l,!1,m);l=s||0,y&&(i=l),b.isAdvanced=y}}e.actionSpan=i%q+t(u),P(t(a).actionColOptions||{span:q},l,!0),o("advanced-change")}function W(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:W}}function Rt({emit:e,getProps:o,formModel:a,getSchema:d,defaultValueRef:w,formElRef:p,schemaRef:c,handleFormValues:f}){function g(){return L(this,null,function*(){const{resetFunc:n,submitOnReset:s}=t(o);n&&_(n)&&(yield n()),t(p)&&(Object.keys(a).forEach(r=>{a[r]=w.value[r]}),b(),e("reset",je(a)),s&&x())})}function u(n){return L(this,null,function*(){const s=t(d).map(r=>r.field).filter(Boolean),y=[];Object.keys(n).forEach(r=>{const S=t(d).find(I=>I.field===r);let F=n[r];if(!(n instanceof Object))return;const D=Reflect.has(n,r);if(F=vt(S==null?void 0:S.component,F),D&&s.includes(r)){if(h(r))if(Array.isArray(F)){const I=[];for(const O of F)I.push(O?$(O):null);a[r]=I}else{const{componentProps:I}=S||{};let O=I;typeof I=="function"&&(O=O({formModel:a})),a[r]=F?O!=null&&O.valueFormat?F:$(F):null}else a[r]=F;y.push(r)}}),C(y).catch(r=>{})})}function k(n){return L(this,null,function*(){const s=be(t(d));if(!n)return;let y=se(n)?[n]:n;se(n)&&(y=[n]);for(const r of y)P(r,s);c.value=s})}function P(n,s){if(se(n)){const y=s.findIndex(r=>r.field===n);y!==-1&&(delete a[n],s.splice(y,1))}}function T(n,s,y=!1){return L(this,null,function*(){const r=be(t(d)),S=r.findIndex(D=>D.field===s);if(!!r.some(D=>D.field===s||n.field)){if(!s||S===-1||y){y?r.unshift(n):r.push(n),c.value=r;return}S!==-1&&r.splice(S+1,0,n),c.value=r}})}function W(n){return L(this,null,function*(){let s=[];if(X(n)&&s.push(n),re(n)&&(s=[...n]),!s.every(r=>r.component==="Divider"||Reflect.has(r,"field")&&r.field)){Ie("All children of the form Schema array that need to be updated must contain the `field` field");return}c.value=s})}function l(n){return L(this,null,function*(){let s=[];if(X(n)&&s.push(n),re(n)&&(s=[...n]),!s.every(S=>S.component==="Divider"||Reflect.has(S,"field")&&S.field)){Ie("All children of the form Schema array that need to be updated must contain the `field` field");return}const r=[];s.forEach(S=>{t(d).forEach(F=>{if(F.field===S.field){const D=De(F,S);r.push(D)}else r.push(F)})}),c.value=bt(r,"field")})}function i(){return t(p)?f(je(t(a))):{}}function h(n){return t(d).some(s=>s.field===n?Le.includes(s.component):!1)}function C(n){return L(this,null,function*(){var s;return(s=t(p))==null?void 0:s.validateFields(n)})}function m(n){return L(this,null,function*(){var s;return yield(s=t(p))==null?void 0:s.validate(n)})}function b(n){return L(this,null,function*(){var s;yield(s=t(p))==null?void 0:s.clearValidate(n)})}function A(n,s){return L(this,null,function*(){var y;yield(y=t(p))==null?void 0:y.scrollToField(n,s)})}function x(n){return L(this,null,function*(){n&&n.preventDefault();const{submitFunc:s}=t(o);if(s&&_(s)){yield s();return}if(!!t(p))try{const r=yield m();for(let F in r)r[F]instanceof Array&&Ue(o,F)==="string"&&(r[F]=r[F].join(","));const S=f(r);e("submit",S)}catch(r){e("submit",{})}})}return{handleSubmit:x,clearValidate:b,validate:m,validateFields:C,getFieldsValue:i,updateSchema:l,resetSchema:W,appendSchemaByField:T,removeSchemaByFiled:k,resetFields:g,setFieldsValue:u,scrollToField:A}}function Mt(w){return L(this,arguments,function*({getSchema:e,getProps:o,formElRef:a,isInitedDefault:d}){ut(()=>L(this,null,function*(){if(t(d)||!t(o).autoFocusFirstItem)return;yield Me();const p=t(e),c=t(a),f=c==null?void 0:c.$el;if(!c||!f||!p||p.length===0||!p[0].component.includes("Input"))return;const u=f.querySelector(".ant-row:first-child input");!u||u==null||u.focus()}))})}const{form:he}=tt,Lt={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},fieldMapToNumber:{type:Array,default:()=>[]},compact:j.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:j.bool.def(!0),autoSubmitOnEnter:j.bool.def(!1),submitOnReset:j.bool,size:j.oneOf(["default","small","large"]).def("default"),disabled:j.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:j.bool,transformDateFunc:{type:Function,default:e=>ye.isDayjs(e)?e==null?void 0:e.format("YYYY-MM-DD HH:mm:ss"):e},rulesMessageJoinLabel:j.bool.def(!0),autoAdvancedCol:j.number.def(3),autoAdvancedLine:j.number.def(3),alwaysShowLines:j.number.def(1),showActionButtonGroup:j.bool.def(!0),actionColOptions:Object,showResetButton:j.bool.def(!0),autoFocusFirstItem:j.bool,resetButtonOptions:Object,showSubmitButton:j.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:j.bool,labelCol:{type:Object,default:he.labelCol},layout:j.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:{type:Object,default:he.wrapperCol},colon:j.bool.def(he.colon),labelAlign:j.string,rowProps:Object,autoSearch:j.bool.def(!1)},Yt=we({name:"BasicForm",components:{FormItem:Ot,Form:ve,Row:mt,FormAction:Pt},props:Lt,emits:["advanced-change","reset","submit","register"],setup(e,{emit:o,attrs:a}){const d=Se({}),w=yt(),p=Se({isAdvanced:!1,hideAdvanceBtn:!0,isLoad:!1,actionSpan:6}),c=K({}),f=K(!1),g=K({}),u=K(null),k=K(null),{prefixCls:P}=nt("basic-form"),T=V(()=>{let B=v(v({},e),t(g));return B.labelWidth&&(B.labelCol=void 0),B}),W=V(()=>[P,{[`${P}--compact`]:t(T).compact}]),l=V(()=>{const{baseRowStyle:B={},rowProps:M}=t(T);return v({style:B},M)}),i=V(()=>v(v(v({},a),e),t(T))),h=V(()=>{const B=t(u)||t(T).schemas;for(const M of B){const{defaultValue:E,component:Ce,componentProps:Q}=M;if(E&&Le.includes(Ce)){let Y="";if(Q&&(Y=Q==null?void 0:Q.valueFormat),!Array.isArray(E))Y?M.defaultValue=$(E).format(Y):M.defaultValue=$(E);else{const de=[];E.forEach(Oe=>{Y?de.push($(Oe).format(Y)):de.push($(Oe))}),M.defaultValue=de}}}return t(T).showAdvancedButton?B.filter(M=>M.component!=="Divider"):B}),{handleToggleAdvanced:C}=Dt({advanceState:p,emit:o,getProps:T,getSchema:h,formModel:d,defaultValueRef:c}),{handleFormValues:m,initDefault:b}=kt({getProps:T,defaultValueRef:c,getSchema:h,formModel:d});Mt({getSchema:h,getProps:T,isInitedDefault:f,formElRef:k});const{handleSubmit:A,setFieldsValue:x,clearValidate:n,validate:s,validateFields:y,getFieldsValue:r,updateSchema:S,resetSchema:F,appendSchemaByField:D,removeSchemaByFiled:I,resetFields:O,scrollToField:N}=Rt({emit:o,getProps:T,formModel:d,getSchema:h,defaultValueRef:c,formElRef:k,schemaRef:u,handleFormValues:m});Bt({resetAction:O,submitAction:A}),ie(()=>t(T).model,()=>{const{model:B}=t(T);!B||x(B)},{immediate:!0}),ie(()=>t(T).schemas,B=>{F(B!=null?B:[])}),ie(()=>h.value,B=>{Me(()=>{var M;(M=w==null?void 0:w.redoModalHeight)==null||M.call(w)}),!t(f)&&B!=null&&B.length&&(b(),f.value=!0)});function H(B){return L(this,null,function*(){g.value=De(t(g)||{},B)})}const z=Re(A,300);function ce(B,M){d[B]=M;const{validateTrigger:E}=t(i);(!E||E==="change")&&y([B]).catch(Ce=>{}),e.autoSearch===!0&&z()}function Ne(B){const{autoSubmitOnEnter:M}=t(T);if(!!M&&B.key==="Enter"&&B.target&&B.target instanceof HTMLElement){const E=B.target;E&&E.tagName&&E.tagName.toUpperCase()=="INPUT"&&A()}}const ue={getFieldsValue:r,setFieldsValue:x,resetFields:O,updateSchema:S,resetSchema:F,setProps:H,getProps:T,removeSchemaByFiled:I,appendSchemaByField:D,clearValidate:n,validateFields:y,validate:s,submit:A,scrollToField:N};return dt(()=>{b(),o("register",ue)}),v({getBindValue:i,handleToggleAdvanced:C,handleEnterPress:Ne,formModel:d,defaultValueRef:c,advanceState:p,getRow:l,getProps:T,formElRef:k,getSchema:h,formActionType:ue,setFormModel:ce,getFormClass:W,getFormActionBindProps:V(()=>v(v({},T.value),p))},ue)}});export{Yt as _,jt as h};
