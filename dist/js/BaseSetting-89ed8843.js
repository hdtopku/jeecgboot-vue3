var y=(c,g,l)=>new Promise((u,p)=>{var e=n=>{try{d(l.next(n))}catch(m){p(m)}},v=n=>{try{d(l.throw(n))}catch(m){p(m)}},d=n=>n.done?u(n.value):Promise.resolve(n.value).then(e,v);d((l=l.apply(c,g)).next())});import{u as A,C as Y}from"./upload-f8fe390d.js";import{g as F,s as R,u as V,C as H}from"./jeecg-online-vendor-88d7be55.js";import{h as O}from"./header-55b09394.js";import{z as j,g as q}from"./index-b6e19f4a.js";import{ac as P,ad as $}from"./antd-vue-vendor-cce59da1.js";import{a as G,g as J}from"./UserSetting.api-94ba4641.js";import{_ as K}from"./UserAccountModal.vue_vue_type_script_setup_true_lang-ae68272d.js";import"./index-378f1f74.js";import{d as L,k as b,e as Q,o as W,U as x,a5 as D,a6 as I,aa as t,f,u as T,ab as r,a7 as X,E as Z,F as tt,ap as et,aq as st}from"./vue-705b7309.js";import"./base64Conver-fa2fe1af.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-60c6a8c7.js";import"./BasicForm-b17dbcb2.js";import"./componentMap-ac4d3a60.js";import"./useFormItem-faf326fe.js";import"./JUpload.vue_vue_type_style_index_0_lang-72743f30.js";import"./BasicModal-93f24ffc.js";import"./useWindowSizeFn-b9945b41.js";import"./download-827e9970.js";import"./index-99de6536.js";import"./index-a24a9872.js";import"./useCountdown-5da1361d.js";import"./JAddInput-079a6c33.js";import"./areaDataUtil-6588b720.js";import"./JSelectUser-b7290477.js";import"./props-4069293e.js";import"./JSelectBiz-53a9985e.js";import"./index-2ccd691b.js";import"./index-4eb07c8e.js";import"./bem-eb26b268.js";import"./props-dec3c169.js";import"./useContextMenu-430f82bc.js";import"./depart.api-880d8784.js";import"./JSelectDept-52bb52e5.js";import"./JPopup-4aed0a12.js";import"./index-4802827d.js";import"./BasicForm.vue_vue_type_style_index_0_lang-ad90633d.js";import"./useForm-ec2789c8.js";const i=c=>(et("data-v-6673b8e2"),c=c(),st(),c),at={class:"account-padding"},ot={class:"user-setting-top"},nt={class:"account-avatar"},it={class:"account-right"},lt={key:0},rt={class:"font-size-17 account-name"},ct={key:1},pt={class:"use-day"},ut={class:"account-data"},dt={class:"account-detail"},mt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"详细资料",-1)),_t={class:"margin-bottom-10 font-size-13"},ft=i(()=>t("span",{class:"gray-75 item-label"},"生日",-1)),vt={class:"gray-3"},gt={class:"margin-bottom-10 font-size-13"},ht=i(()=>t("span",{class:"gray-75 item-label"},"性别",-1)),yt={class:"gray-3"},bt={class:"margin-bottom-10 nowarp font-size-13"},xt=i(()=>t("span",{class:"gray-75 item-label"},"职位",-1)),Dt={class:"gray-3"},It=i(()=>t("span",{class:"item-label"},null,-1)),Tt={class:"account-info"},zt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"联系信息",-1)),Ct={class:"margin-bottom-10 font-size-13"},Mt=i(()=>t("span",{class:"gray-75 item-label"},"邮箱",-1)),St={class:"gray-3"},Bt={class:"margin-bottom-10 font-size-13"},Ut=i(()=>t("span",{class:"gray-75 item-label"},"手机",-1)),kt={class:"gray-3"},wt=L({__name:"BaseSetting",setup(c){const g=F("sex")||[{text:"男",value:"1"},{text:"女",value:"2"}],{createMessage:l}=V(),u=R(),p=b(!1),e=b({}),v=b(),[d,{openModal:n}]=j(),m=Q(()=>q(e.value.avatar)||O);function M(s,a){const o=u.getUserInfo;o.avatar=a,u.setUserInfo(o),a&&z({avatar:a,id:o.id})}function z(s){G(s).then(a=>{a.success||l.warn(a.message)})}function S(){p.value=!0,setTimeout(()=>{v.value.focus()},100)}function B(){e.value.realname?(z({realname:e.value.realname,id:e.value.id}),u.setUserInfo(e.value)):l.warn("请输入姓名"),p.value=!1}function U(s){return s?$(s).format("YYYY-MM-DD"):"未填写"}function k(s){let a=g.find(_=>parseInt(_.value)===s),o="未填写";return a&&(o=a.text),o}function w(){let s=P(e.value);n(!0,{record:s})}function C(){J().then(s=>y(this,null,function*(){s.success&&(s.result?(s.result.sexText=k(s.result.sex),s.result.birthday=U(s.result.birthday),s.result.createTimeText=E(s.result.createTime),e.value=s.result):e.value={})}))}function E(s){let a,o,_=Date.parse(s),h=new Date().getTime();return o=Math.abs(h-_),a=Math.floor(o/(1e3*3600*24)),a+" 天"}return W(()=>y(this,null,function*(){C()})),(s,a)=>{const o=x("Icon"),_=x("a-tooltip"),h=x("a-input");return D(),I(tt,null,[t("div",at,[t("div",ot,[t("div",nt,[f(T(Y),{uploadApi:T(A),showBtn:!1,value:m.value,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:M,width:"80"},null,8,["uploadApi","value"]),t("div",it,[p.value?(D(),I("div",ct,[f(h,{ref_key:"accountNameEdit",ref:v,maxlength:100,value:e.value.realname,"onUpdate:value":a[0]||(a[0]=N=>e.value.realname=N),onBlur:B},null,8,["value"])])):(D(),I("div",lt,[t("span",rt,r(e.value.realname),1),f(_,{content:"编辑姓名"},{default:X(()=>[f(o,{class:"pointer font-size-17 gray-bd account-icon",icon:"ant-design:edit-outlined",onClick:S})]),_:1})])),t("div",pt,[Z(" 使用："),t("span",null,r(e.value.createTimeText),1)])])])]),t("div",ut,[t("div",dt,[mt,t("div",_t,[ft,t("span",vt,r(e.value.birthday),1)]),t("div",gt,[ht,t("span",yt,r(e.value.sexText),1)]),t("div",bt,[xt,t("span",Dt,r(e.value.postText?e.value.postText:"未填写"),1)]),t("div",{class:"font-size-13"},[It,t("span",{class:"item-label pointer",style:{color:"#1e88e5"},onClick:w},"编辑")])]),t("div",Tt,[zt,t("div",Ct,[Mt,t("span",St,r(e.value.email?e.value.email:"未填写"),1)]),t("div",Bt,[Ut,t("span",kt,r(e.value.phone?e.value.phone:"未填写"),1)])])])]),f(K,{onRegister:T(d),onSuccess:C},null,8,["onRegister"])],64)}}});const xe=H(wt,[["__scopeId","data-v-6673b8e2"]]);export{xe as default};
