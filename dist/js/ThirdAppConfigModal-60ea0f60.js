var f=(e,r,n)=>new Promise((c,i)=>{var s=t=>{try{o(n.next(t))}catch(p){i(p)}},d=t=>{try{o(n.throw(t))}catch(p){i(p)}},o=t=>t.done?c(t.value):Promise.resolve(t.value).then(s,d);o((n=n.apply(e,r)).next())});import{d as g,l as T,V as h,a7 as y,ac as A,aa as C,f as I}from"./vue-50733b77.js";import{B as w}from"./index-f7d688aa.js";import"./index-7e7a94e9.js";import{ap as u,_ as B}from"./jeecg-online-vendor-d3e1865b.js";import{B as _,u as b}from"./useForm-14ceb529.js";import{E as k}from"./index-b34ff7bc.js";const M=(e,r)=>{let n=r?"/sys/thirdApp/editThirdAppConfig":"/sys/thirdApp/addThirdAppConfig";return u.post({url:n,params:e},{joinParamsToUrl:!0})},S=e=>u.get({url:"/sys/thirdApp/getThirdConfigByTenantId",params:e}),q=()=>u.get({url:"/sys/thirdApp/sync/dingtalk/departAndUser/toLocal"},{isTransformResponse:!1}),F=[{label:"id",field:"id",component:"Input",show:!1},{label:"thirdType",field:"thirdType",component:"Input",show:!1},{label:"Agentld",field:"agentId",component:"Input",required:!0},{label:"AppKey",field:"clientId",component:"Input",required:!0},{label:"AppSecret",field:"clientSecret",component:"Input",required:!0},{label:"agentAppSecret",field:"agentAppSecret",component:"Input",ifShow:({values:e})=>e.thirdType=="wechat_enterprise"},{label:"启用",field:"status",component:"Switch",componentProps:{checkedChildren:"关闭",checkedValue:1,unCheckedChildren:"开启",unCheckedValue:0},defaultValue:1},{label:"租户id",field:"tenantId",component:"Input",show:!1}],v=g({name:"ThirdAppConfigModal",components:{BasicModal:w,BasicForm:_},setup(e,{emit:r}){const n=T("钉钉配置"),[c,{resetFields:i,setFieldsValue:s,validate:d}]=b({schemas:F,showActionButtonGroup:!1,labelCol:{span:24},wrapperCol:{span:24}}),[o,{setModalProps:t,closeModal:p}]=k(a=>f(this,null,function*(){t({confirmLoading:!0}),yield i();let l=yield S({tenantId:a.tenantId,thirdType:a.thirdType});t({confirmLoading:!1}),l?yield s(l):yield s(a)}));function m(){return f(this,null,function*(){let a=yield d(),l=!1;a.id&&(l=!0),yield M(a,l),r("success"),p()})}return{title:n,registerForm:c,registerModal:o,handleSubmit:m}}});function U(e,r,n,c,i,s){const d=h("BasicForm"),o=h("BasicModal");return y(),A(o,{onRegister:e.registerModal,width:800,title:e.title,onOk:e.handleSubmit},{default:C(()=>[I(d,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},8,["onRegister","title","onOk"])}const L=B(v,[["render",U]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{L as T,z as a,S as g,q as s};
