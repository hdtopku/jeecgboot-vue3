var A=(t,n,c)=>new Promise((C,_)=>{var B=a=>{try{o(c.next(a))}catch(f){_(f)}},s=a=>{try{o(c.throw(a))}catch(f){_(f)}},o=a=>a.done?C(a.value):Promise.resolve(a.value).then(B,s);o((c=c.apply(t,n)).next())});import{B as Y}from"./index-a882524d.js";import{s as $}from"./jvxetable.api-8716f4e0.js";import{o as I,a as V}from"./api-43da7e1f.js";import{A as q}from"./index-6916e394.js";import{d as N,k as U,r as E,u as h,e as z,U as i,aV as F,ar as b,bi as u,f as e,E as d,at as H,as as O,F as j,a_ as T,aQ as P}from"./vue-c7e3516e.js";import{_ as S}from"./jeecg-online-vendor-12004772.js";import"./BasicModal-b901e352.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./useWindowSizeFn-581ed1a8.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const K=N({name:"tableModal",components:{BasicModal:Y},emits:["success","register"],setup(t,{emit:n}){const c=U(!0),C=U(""),_=U(),B=E({xs:{span:24},sm:{span:5}}),s=E({xs:{span:24},sm:{span:16}}),o={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},a=E({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[f,{setModalProps:v,closeModal:M}]=q(l=>A(this,null,function*(){if(v({confirmLoading:!1}),c.value=!!(l!=null&&l.isUpdate),y(),h(c)){C.value=l.record.id,Object.assign(a,l.record);let p={id:a.id};const r=yield I(p);a.jeecgOrderCustomerList=r;const R=yield V(p);a.jeecgOrderTicketList=R}})),m=z(()=>h(c)?"\u7F16\u8F91":"\u65B0\u589E");function g(){a.jeecgOrderCustomerList.push({})}function k(l){a.jeecgOrderCustomerList.splice(l,1),a.jeecgOrderCustomerList.splice(l,1)}function y(){a.id=null,a.orderCode="",a.orderMoney="",a.orderDate=null,a.ctype="",a.content="",a.jeecgOrderCustomerList=[],a.jeecgOrderTicketList=[]}function D(){a.jeecgOrderTicketList.push({})}function w(l){a.jeecgOrderTicketList.splice(l,1),a.jeecgOrderTicketList.splice(l,1)}function L(){return A(this,null,function*(){_.value.validate().then(()=>A(this,null,function*(){try{v({confirmLoading:!0}),yield $(a,h(c)),M(),n("success")}finally{v({confirmLoading:!1})}})).catch(l=>{})})}return{formRef:_,validatorRules:o,orderMainModel:a,registerModal:f,getTitle:m,labelCol:B,wrapperCol:s,addRowCustom:g,delRowCustom:k,addRowTicket:D,delRowTicket:w,handleSubmit:L}}});function Q(t,n,c,C,_,B){const s=i("a-input"),o=i("a-form-item"),a=i("a-col"),f=i("a-select-option"),v=i("a-select"),M=i("a-date-picker"),m=i("a-row"),g=i("Icon"),k=i("a-button"),y=i("a-tab-pane"),D=i("a-tabs"),w=i("a-form"),L=i("BasicModal");return F(),b(L,P(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit,width:"70%"}),{default:u(()=>[e(w,{ref:"formRef",model:t.orderMainModel,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.validatorRules},{default:u(()=>[e(m,{class:"form-row",gutter:16},{default:u(()=>[e(a,{lg:8},{default:u(()=>[e(o,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:u(()=>[e(s,{value:t.orderMainModel.orderCode,"onUpdate:value":n[0]||(n[0]=l=>t.orderMainModel.orderCode=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),e(a,{lg:8},{default:u(()=>[e(o,{label:"\u8BA2\u5355\u7C7B\u578B"},{default:u(()=>[e(v,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:t.orderMainModel.ctype,"onUpdate:value":n[1]||(n[1]=l=>t.orderMainModel.ctype=l)},{default:u(()=>[e(f,{value:"1"},{default:u(()=>[d("\u56FD\u5185\u8BA2\u5355")]),_:1}),e(f,{value:"2"},{default:u(()=>[d("\u56FD\u9645\u8BA2\u5355")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(a,{lg:8},{default:u(()=>[e(o,{label:"\u8BA2\u5355\u65E5\u671F"},{default:u(()=>[e(M,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:t.orderMainModel.orderDate,"onUpdate:value":n[2]||(n[2]=l=>t.orderMainModel.orderDate=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{class:"form-row",gutter:16},{default:u(()=>[e(a,{lg:8},{default:u(()=>[e(o,{label:"\u8BA2\u5355\u91D1\u989D"},{default:u(()=>[e(s,{value:t.orderMainModel.orderMoney,"onUpdate:value":n[3]||(n[3]=l=>t.orderMainModel.orderMoney=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),e(a,{lg:8},{default:u(()=>[e(o,{label:"\u8BA2\u5355\u5907\u6CE8"},{default:u(()=>[e(s,{value:t.orderMainModel.content,"onUpdate:value":n[4]||(n[4]=l=>t.orderMainModel.content=l),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(D,{defaultActiveKey:"1"},{default:u(()=>[e(y,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"1"},{default:u(()=>[H("div",null,[e(m,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:u(()=>[e(a,{span:5},{default:u(()=>[d("\u5BA2\u6237\u540D")]),_:1}),e(a,{span:5},{default:u(()=>[d("\u6027\u522B")]),_:1}),e(a,{span:6},{default:u(()=>[d("\u8EAB\u4EFD\u8BC1\u53F7\u7801")]),_:1}),e(a,{span:6},{default:u(()=>[d("\u624B\u673A\u53F7")]),_:1}),e(a,{span:2},{default:u(()=>[d("\u64CD\u4F5C")]),_:1})]),_:1}),(F(!0),O(j,null,T(t.orderMainModel.jeecgOrderCustomerList,(l,p)=>(F(),b(m,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:p},{default:u(()=>[e(a,{span:6,style:{display:"none"}},{default:u(()=>[e(o,null,{default:u(()=>[e(s,{placeholder:"id",value:l.id,"onUpdate:value":r=>l.id=r},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(a,{span:5},{default:u(()=>[e(o,null,{default:u(()=>[e(s,{placeholder:"\u5BA2\u6237\u540D",value:l.name,"onUpdate:value":r=>l.name=r},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(a,{span:5},{default:u(()=>[e(o,null,{default:u(()=>[e(v,{placeholder:"\u6027\u522B",value:l.sex,"onUpdate:value":r=>l.sex=r},{default:u(()=>[e(f,{value:"1"},{default:u(()=>[d("\u7537")]),_:1}),e(f,{value:"2"},{default:u(()=>[d("\u5973")]),_:1})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(a,{span:6},{default:u(()=>[(F(),b(o,{name:["jeecgOrderCustomerList",p,"idcard"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",trigger:"blur"}],key:p},{default:u(()=>[e(s,{placeholder:"\u8EAB\u4EFD\u8BC1\u53F7",value:l.idcard,"onUpdate:value":r=>l.idcard=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]))]),_:2},1024),e(a,{span:6},{default:u(()=>[e(o,{name:["jeecgOrderCustomerList",p,"telphone"]},{default:u(()=>[e(s,{placeholder:"\u624B\u673A\u53F7",value:l.telphone,"onUpdate:value":r=>l.telphone=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name"])]),_:2},1024),e(a,{span:2},{default:u(()=>[e(o,null,{default:u(()=>[e(g,{icon:"ant-design:minus-outlined",onClick:r=>t.delRowCustom(p),style:{fontsize:"20px"}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(k,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:t.addRowCustom},{default:u(()=>[e(g,{icon:"ph:plus-bold"}),d(" \u6DFB\u52A0\u5BA2\u6237\u4FE1\u606F ")]),_:1},8,["onClick"])])]),_:1}),e(y,{tab:"\u673A\u7968\u4FE1\u606F",key:"2",forceRender:""},{default:u(()=>[e(m,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:u(()=>[e(a,{span:6},{default:u(()=>[d("\u822A\u73ED\u53F7")]),_:1}),e(a,{span:6},{default:u(()=>[d("\u822A\u73ED\u65F6\u95F4")]),_:1}),e(a,{span:6},{default:u(()=>[d("\u64CD\u4F5C")]),_:1})]),_:1}),(F(!0),O(j,null,T(t.orderMainModel.jeecgOrderTicketList,(l,p)=>(F(),b(m,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:p},{default:u(()=>[e(a,{span:6,style:{display:"none"}},{default:u(()=>[e(o,null,{default:u(()=>[e(s,{placeholder:"id",value:l.id,"onUpdate:value":r=>l.id=r},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(a,{span:6},{default:u(()=>[e(o,{name:["jeecgOrderTicketList",p,"ticketCode"],rules:{required:!0,message:"\u8BF7\u8F93\u5165\u822A\u73ED\u53F7",trigger:"blur"}},{default:u(()=>[e(s,{placeholder:"\u822A\u73ED\u53F7",value:l.ticketCode,"onUpdate:value":r=>l.ticketCode=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name"])]),_:2},1024),e(a,{span:6},{default:u(()=>[e(o,null,{default:u(()=>[e(M,{placeholder:"\u822A\u73ED\u65F6\u95F4",valueFormat:"YYYY-MM-DD",value:l.tickectDate,"onUpdate:value":r=>l.tickectDate=r},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(a,{span:6},{default:u(()=>[e(o,null,{default:u(()=>[e(g,{icon:"ant-design:minus-outlined",onClick:r=>t.delRowTicket(p),style:{fontsize:"20px"}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(k,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:t.addRowTicket},{default:u(()=>[e(g,{icon:"ph:plus-bold"}),d(" \u6DFB\u52A0\u673A\u7968\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const ie=S(K,[["render",Q],["__scopeId","data-v-ffab824d"]]);export{ie as default};
