import{d as M,k as T,V as x,a5 as c,a6 as C,f as e,a7 as a,v as w,E as s,A as $,aa as o,ab as d,a9 as h,W as k,am as i,F as W}from"./vue-5a09445c.js";import{_ as G}from"./CommonList.vue_vue_type_script_setup_true_lang-a9802df1.js";import{g as J,s as S}from"./IdeaMember.api-2c2e9886.js";import{_ as X}from"./IdeaSysIpInfo.vue_vue_type_script_setup_true_lang-d7ea8ecd.js";const Y={key:0},Z={key:0},m={class:"text-red-500"},ll={key:1},al={key:0},el={key:0},nl={key:0},sl={key:0},ol={key:1},ul={style:{color:"#dc2626"}},dl=["onClick"],rl=["onClick"],fl=M({__name:"IdeaMemberDataList",emits:["queryList","handleEdit"],setup(tl,{expose:U,emit:z}){const I=T(!1),B=T(!1),j=()=>{B.value=!1},q=(n,p)=>`账【${n}】
密【${p}】`,N=n=>"c.taojingling.cn/j/"+n,O=n=>{if(n.valid===-1)return"error";if(n.valid===-2)return"default";switch(Number.parseInt(n.status)){case 1:return"processing";case 2:return"success";case 0:return"error"}},v=T(),V=(n,p=!1)=>{v.value=n,v.value.showIp=p,B.value=!0},L=(n,p)=>{n.valid=p,S(n,!0).then(()=>{z("queryList")})},g=T("0"),R=n=>{z("handleEdit",n)},F=n=>{S({id:n},!0).then(()=>{z("queryList")})},A=T(),P=n=>{var p,r,_,f;if(((p=n==null?void 0:n.sysIps)==null?void 0:p.length)>0){let t=n==null?void 0:n.sysIps[0];return(((r=t==null?void 0:t.country)==null?void 0:r.indexOf("中国"))>-1||((f=(_=t==null?void 0:t.country)==null?void 0:_.toUpperCase())==null?void 0:f.indexOf("CHINA"))>-1?"":t==null?void 0:t.country)+t.province+t.city+t.county+" | "+t.browser}return""},Q=n=>{var p;if(((p=n==null?void 0:n.sysIps)==null?void 0:p.length)>0){let r=n==null?void 0:n.sysIps[0];return r.operator+" | "+r.model+" | "+r.system}return""};return U({startQuery:(n={})=>{g.value=n==null?void 0:n.status,A.value.execQuery(J,n)},changeAdvanced:()=>{I.value=!I.value}}),(n,p)=>{const r=x("a-typography-text"),_=x("a-tag"),f=x("a-button"),t=x("a-menu-item"),H=x("a-menu"),K=x("a-drawer");return c(),C(W,null,[e(G,{ref_key:"CommonListRef",ref:A},{header:a(()=>[w(e(r,{mark:""},{default:a(()=>[s("关黑屋，激活码会失效")]),_:1},512),[[$,g.value==="-100"]]),w(e(r,{mark:""},{default:a(()=>[s("重点观察，激活码不会失效")]),_:1},512),[[$,g.value==="-90"]]),w(e(r,{mark:""},{default:a(()=>[s("激活码会失效")]),_:1},512),[[$,g.value==="-10"]]),w(e(r,{mark:""},{default:a(()=>[s("按提取次数倒排")]),_:1},512),[[$,g.value==="90"]]),w(e(r,{mark:""},{default:a(()=>[s(" 按更新时间倒排 ")]),_:1},512),[[$,g.value!=="-100"&&g.value!=="-90"&&g.value!=="-10"&&g.value!=="90"]])]),top:a(({item:l})=>{var y,u;return[o("div",null,d(P(l)),1),o("div",null,d(Q(l)),1),o("div",null,[e(_,{color:"processing"},{default:a(()=>[e(r,null,{default:a(()=>[s("标识")]),_:1})]),_:1}),(l==null?void 0:l.identity.length)>0?(c(),C("span",Y,[e(r,{copyable:""},{default:a(()=>[s(d(l.identity),1)]),_:2},1024)])):(c(),h(_,{key:1,color:"error"},{default:a(()=>[s("未绑定")]),_:1}))]),((u=(y=l==null?void 0:l.remark)==null?void 0:y.trim())==null?void 0:u.length)>0?(c(),C("div",Z,[e(_,{color:"error"},{default:a(()=>[s(" 备注")]),_:1}),o("span",m,d(l==null?void 0:l.remark),1)])):k("",!0),(l==null?void 0:l.valid)===1?(c(),C("div",ll,[e(_,{color:"warning"},{default:a(()=>[s(" 重点观察中")]),_:1})])):k("",!0)]}),bottom:a(({item:l})=>{var y,u,b,D,E;return[l.status===0||l.status===1?(c(),C("div",al,[e(_,null,{default:a(()=>[s("打开")]),_:1}),((y=l==null?void 0:l.openTime)==null?void 0:y.length)>0?(c(),C("span",el,d(l==null?void 0:l.openTime),1)):(c(),h(_,{key:1,color:"error"},{default:a(()=>[s("未打开")]),_:1}))])):k("",!0),o("div",null,[e(_,null,{default:a(()=>[s("激活")]),_:1}),s(" "+d(l==null?void 0:l.activeTime),1)]),o("div",null,[e(_,null,{default:a(()=>[s("截止")]),_:1}),s(" "+d(l==null?void 0:l.invalidTime),1)]),o("div",null,[(l==null?void 0:l.status)===2&&(l==null?void 0:l.ideaStatus)!=null?(c(),C("span",nl,[e(r,{delete:(l==null?void 0:l.ideaStatus)===-1,copyable:I.value?{text:q(l.ideaAccount,l.ideaPassword)}:!1},{default:a(()=>[o("div",null,[e(_,null,{default:a(()=>[e(r,null,{default:a(()=>[s("账密")]),_:1})]),_:1}),e(r,{copyable:I.value},{default:a(()=>[s(d(l.ideaAccount),1)]),_:2},1032,["copyable"])]),e(r,{copyable:I.value},{default:a(()=>[s(d(l.ideaPassword),1)]),_:2},1032,["copyable"])]),_:2},1032,["delete","copyable"]),w(o("div",null,[o("div",null," 售后至："+d((u=l==null?void 0:l.ideaInvalidTime)==null?void 0:u.substring(0,10)),1),o("div",null," 失效："+d((b=l==null?void 0:l.ideaRealInvalidTime)==null?void 0:b.substring(0,10)),1),o("div",null,[e(_,null,{default:a(()=>[s("更新")]),_:1}),s(" "+d(l==null?void 0:l.updateTime),1)])],512),[[$,I.value]])])):(c(),h(_,{key:1,color:"error"},{default:a(()=>[s("未关联")]),_:1}))]),o("div",null,[((D=l==null?void 0:l.createBy)==null?void 0:D.length)>0?(c(),C("span",sl," 创建："+d(l==null?void 0:l.createBy),1)):k("",!0),((E=l==null?void 0:l.updateBy)==null?void 0:E.length)>0?(c(),C("span",ol,"，更新："+d(l==null?void 0:l.updateBy),1)):k("",!0)])]}),left:a(({item:l,index:y})=>[o("div",null,[e(r,{copyable:{text:N(l==null?void 0:l.code)}},{default:a(()=>[o("span",{class:i(["",(l==null?void 0:l.valid)<0?"text-gray-500 line-through":"text-purple-900 font-medium"])},d(l==null?void 0:l.code),3)]),_:2},1032,["copyable"])]),o("div",ul,[o("div",null,[o("a",{href:"javascript:;",onClick:u=>V(l)},d(l==null?void 0:l.sysIps.length)+"个设备",9,dl)]),o("div",null,[o("a",{href:"javascript:;",onClick:u=>V(l,!0)},d(l==null?void 0:l.ideaUsages.length)+"个账号",9,rl)]),s(" 总"+d(l==null?void 0:l.count)+"次提取 ",1)])]),operate:a(({item:l,index:y})=>[e(H,null,{default:a(()=>[e(t,{onClick:u=>F(l.id)},{default:a(()=>[e(f,{type:"warning",ghost:"",size:"small"},{default:a(()=>[s("置顶")]),_:1})]),_:2},1032,["onClick"]),e(t,{onClick:u=>R(l)},{default:a(()=>[e(f,{type:"link",size:"small"},{default:a(()=>[s("编辑")]),_:1})]),_:2},1032,["onClick"]),l.valid!==-1?(c(),h(t,{key:0,onClick:u=>L(l,-1)},{default:a(()=>[e(f,{type:"link",size:"small",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid!==-2?(c(),h(t,{key:1,onClick:u=>L(l,-2)},{default:a(()=>[e(f,{type:"link",size:"small",danger:""},{default:a(()=>[s("拉黑")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid===-1||l.valid===-2?(c(),h(t,{key:2,onClick:u=>L(l,0)},{default:a(()=>[e(f,{type:"link",size:"small"},{default:a(()=>[s(" 恢复")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid!==1?(c(),h(t,{key:3,onClick:u=>L(l,1)},{default:a(()=>[e(f,{type:"warning",size:"small"},{default:a(()=>[s(" 重点观察")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid===1?(c(),h(t,{key:4,onClick:u=>L(l,0)},{default:a(()=>[e(f,{type:"warning",size:"small",ghost:""},{default:a(()=>[s(" 取消重点")]),_:1})]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),right:a(({item:l})=>[e(_,{color:O(l)},{default:a(()=>[o("text",{class:i((l==null?void 0:l.valid)<0?"line-through":"")},d(l.statusName),3)]),_:2},1032,["color"])]),_:1},512),e(K,{placement:"bottom",closable:"",visible:B.value,onClose:j},{title:a(()=>{var l,y;return[o("div",null,[e(_,null,{default:a(()=>{var u;return[s("总次数："+d((u=v.value)!=null&&u.showIp?v.value.totalUseCount:v.value.totalVisitCount),1)]}),_:1}),e(r,{copyable:{text:N((l=v.value)==null?void 0:l.code)}},{default:a(()=>{var u,b;return[o("span",{class:i(["",((u=v.value)==null?void 0:u.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},d((b=v.value)==null?void 0:b.code),3)]}),_:1},8,["copyable"])]),o("div",null,[e(_,null,{default:a(()=>{var u,b;return[s("总条数："+d((u=v.value)!=null&&u.showIp?v.value.ideaUsages.length:(b=v.value)==null?void 0:b.sysIps.length),1)]}),_:1}),((y=v.value)==null?void 0:y.identity.length)>0?(c(),h(r,{key:0,copyable:""},{default:a(()=>[o("span",null,d(v.value.identity),1)]),_:1})):(c(),h(_,{key:1,color:"error"},{default:a(()=>[s("未绑定")]),_:1}))])]}),default:a(()=>[e(X,{ipIdeaItem:v.value},null,8,["ipIdeaItem"])]),_:1},8,["visible"])],64)}}});export{fl as _};
