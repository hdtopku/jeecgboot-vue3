var l=(h,r,s)=>new Promise((p,c)=>{var m=t=>{try{u(s.next(t))}catch(o){c(o)}},w=t=>{try{u(s.throw(t))}catch(o){c(o)}},u=t=>t.done?p(t.value):Promise.resolve(t.value).then(m,w);u((s=s.apply(h,r)).next())});import z from"./BasicTable-04058a09.js";import{T as D}from"./componentMap-90ab712d.js";import"./BasicTable.vue_vue_type_style_index_0_lang-3c8b8bcc.js";import"./useTable-7c8820b4.js";import{aa as k,l as K}from"./jeecg-online-vendor-12004772.js";import{_ as N}from"./JeecgOrderTicketModal.vue_vue_type_script_setup_true_lang-44c6e5de.js";import{useListPage as U}from"./useListPage-8d85dabf.js";import"./index-a882524d.js";import{t as O,f as P,g as $,h as j}from"./erplist.api-e3df30f5.js";import{E as H}from"./index-6916e394.js";import{d as J,c as q,e as G,w as Q,u as a,U as d,aV as y,as as W,f as n,bi as i,E as g,ar as X,V as Y}from"./vue-c7e3516e.js";const de=J({__name:"JeecgOrderTicketList",setup(h){const r=q("orderId",G(()=>"")),s=K(),[p,{openModal:c}]=H(),m={},{prefixCls:w,tableContext:u}=U({tableProps:{api:T,tableSetting:{cacheKey:"ticket"},columns:O,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[t,{reload:o,setSelectedRowKeys:E},{rowSelection:F,selectedRowKeys:f}]=u;Q(r,()=>{m.orderId=a(r),o(),E([])});function T(e){return l(this,null,function*(){let{orderId:_}=e;return _==null||k(_)?[]:yield P(e)})}function S(){if(k(a(r))){s.createMessage.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u8BA2\u5355\u4FE1\u606F");return}c(!0,{isUpdate:!1,showFooter:!0})}function B(e){return l(this,null,function*(){c(!0,{record:e,isUpdate:!0,showFooter:!0})})}function I(e){return l(this,null,function*(){yield j({id:e.id},o)})}function R(){return l(this,null,function*(){yield $({ids:f.value},()=>{f.value=[],o()})})}function v(){o()}function x(e){return[{label:"\u7F16\u8F91",onClick:B.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:I.bind(null,e)}}]}return(e,_)=>{const b=d("a-button"),C=d("Icon"),A=d("a-menu-item"),M=d("a-menu"),V=d("a-dropdown");return y(),W("div",null,[n(a(z),{onRegister:a(t),rowSelection:a(F),searchInfo:m},{tableTitle:i(()=>[n(b,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:S},{default:i(()=>[g(" \u65B0\u589E")]),_:1}),a(f).length>0?(y(),X(V,{key:0},{overlay:i(()=>[n(M,null,{default:i(()=>[n(A,{key:"1",onClick:R},{default:i(()=>[n(C,{icon:"ant-design:delete-outlined"}),g(" \u5220\u9664 ")]),_:1})]),_:1})]),default:i(()=>[n(b,null,{default:i(()=>[g("\u6279\u91CF\u64CD\u4F5C "),n(C,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Y("",!0)]),action:i(({record:L})=>[n(a(D),{actions:x(L)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),n(N,{onRegister:a(p),onSuccess:v},null,8,["onRegister"])])}}});export{de as _};
