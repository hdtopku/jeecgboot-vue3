import{d as K,k as _,e as X,g as Y,V as u,a5 as v,a6 as h,aa as i,f as a,a7 as t,E as m,ab as p,v as I,A as M,al as Z,R as f,u as ee,a9 as T,W as oe,F as te}from"./vue-5a09445c.js";import{bp as le}from"./antd-vue-vendor-e4fda4cf.js";const ae={class:"border-solid rounded"},ne={class:"ant-dropdown-link"},se={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},ue={key:0},re={key:1},de=K({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0},buttonColor:{type:String,default:"primary"}},emits:["queryList","changeAdvanced","confirmCopy"],setup(w,{expose:H,emit:L}){const $=w,r=_(1),y=_(!1),N=()=>{y.value=!0,L("confirmCopy",{count:r.value})},g=_(!1),k=_(!1),e=_(),B=_(),F=_(),S=(o,c,d=!1)=>{B.value=o,F.value=c,d?k.value=!0:(g.value=!0,c.pageNo=1),o(c).then(s=>{if(c.pageNo=s.current+1,s.current>1&&d){e.value.records.push(...s.records);return}e.value=s}).catch(s=>{}).finally(()=>{g.value=!1,k.value=!1})},O=()=>{S(B.value,F.value,!0)},P=X(()=>{var o,c,d,s;return((o=e==null?void 0:e.value)==null?void 0:o.total)===0||((d=(c=e==null?void 0:e.value)==null?void 0:c.records)==null?void 0:d.length)>=((s=e==null?void 0:e.value)==null?void 0:s.total)}),{proxy:C}=Y();return H({execQuery:S,queryFinish:(o=null)=>{o==null?C.tool.error("复制失败"):r.value===1?C.tool.copy(o,o+"已复制"):C.tool.copy(o,r.value+"条已复制"),y.value=!1}}),(o,c)=>{var V;const d=u("a-typography-title"),s=u("a-col"),Q=u("a-slider"),b=u("a-button"),R=u("a-popconfirm"),U=u("a-row"),W=u("a-dropdown"),j=u("a-list-item-meta"),z=u("a-list-item"),G=u("a-spin"),J=u("a-list");return v(),h(te,null,[i("div",null,[a(U,{class:""},{default:t(()=>[a(s,{span:4},{default:t(()=>[a(d,{level:5},{default:t(()=>{var l,n;return[m("共"+p((n=(l=e.value)==null?void 0:l.total)!=null?n:0)+"条",1)]}),_:1})]),_:1}),a(s,{span:14},{default:t(()=>[a(Q,{style:{display:"inline-block"},value:r.value,"onUpdate:value":c[0]||(c[0]=l=>r.value=l),min:1,max:500},null,8,["value"])]),_:1}),a(s,{class:"text-center",span:6},{default:t(()=>[I(a(b,{loading:y.value,type:$.buttonColor,onClick:N},{default:t(()=>[m("复制"+p(r.value)+"条 ",1)]),_:1},8,["loading","type"]),[[M,r.value===1]]),a(R,{title:`确定复制${r.value}条吗?`,"ok-text":"确定","cancel-text":"取消",onConfirm:N},{default:t(()=>[I(a(b,{type:$.buttonColor,loading:y.value},{default:t(()=>[m("复制"+p(r.value)+"条 ",1)]),_:1},8,["type","loading"]),[[M,r.value>1]])]),_:1},8,["title"])]),_:1})]),_:1})]),a(J,{loading:g.value,"data-source":(V=e.value)==null?void 0:V.records},{renderItem:t(({item:l,index:n})=>[a(z,null,{default:t(()=>[a(j,null,Z({title:t(()=>[i("span",null,[f(o.$slots,"top",{item:l,index:n})])]),description:t(()=>[f(o.$slots,"bottom",{item:l,index:n})]),_:2},[w.showLeft?{name:"avatar",fn:t(()=>[i("div",null,[i("span",ae,"#"+p(n+1),1),i("span",null,[f(o.$slots,"shelter",{item:l,index:n})])]),a(W,null,{overlay:t(()=>[i("span",null,[f(o.$slots,"operate",{item:l,index:n})])]),default:t(()=>[i("a",ne,[m(" 操作 "),a(ee(le))])]),_:2},1024),i("span",null,[f(o.$slots,"left",{style:"position: relative",item:l,index:n})])]),key:"0"}:void 0]),1024),i("span",null,[f(o.$slots,"right",{item:l,index:n})])]),_:2},1024)]),loadMore:t(()=>{var l,n,q,x;return[((l=e.value)==null?void 0:l.total)>0?(v(),h("div",se,[P.value?(v(),h("span",ue,"加载完成("+p((q=(n=e.value)==null?void 0:n.records)==null?void 0:q.length)+"/"+p((x=e.value)==null?void 0:x.total)+")",1)):(v(),h("span",re,[k.value?(v(),T(G,{key:0})):(v(),T(b,{key:1,onClick:O},{default:t(()=>{var A,D,E;return[m("加载更多("+p((D=(A=e.value)==null?void 0:A.records)==null?void 0:D.length)+"/"+p((E=e.value)==null?void 0:E.total)+")",1)]}),_:1}))]))])):oe("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{de as _};
