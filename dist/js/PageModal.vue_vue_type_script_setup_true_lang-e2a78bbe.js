var h=Object.defineProperty;var B=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var _=(r,t,e)=>t in r?h(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,f=(r,t)=>{for(var e in t||(t={}))k.call(t,e)&&_(r,e,t[e]);if(B)for(var e of B(t))w.call(t,e)&&_(r,e,t[e]);return r};var g=(r,t,e)=>new Promise((c,p)=>{var m=a=>{try{i(e.next(a))}catch(l){p(l)}},d=a=>{try{i(e.throw(a))}catch(l){p(l)}},i=a=>a.done?c(a.value):Promise.resolve(a.value).then(m,d);i((e=e.apply(r,t)).next())});import{B as F}from"./index-cd2db611.js";import{B as M}from"./BasicForm-1c4cfe6b.js";import"./componentMap-bab84cb7.js";import{u as P}from"./useForm-799a6766.js";import"./JAddInput-903fbbea.js";import"./JSelectUser-14c3fad5.js";import"./JSelectDept-56a87299.js";import"./JPopup-d3d151eb.js";import{B as I}from"./index-b03d7914.js";import"./cron-parser-vendor-d9194a40.js";import{s as R}from"./page.api-85db3c92.js";import{a8 as x,a7 as S,a9 as U,a5 as V}from"./jeecg-online-vendor-ecddc31b.js";import{d as E,k as A,u as n,e as D,V as L,a5 as O,a9 as T,a7 as C,f as b,E as q,ag as G}from"./vue-bcbaddf9.js";const re=[{label:"名称",field:"name",component:"Input",colProps:{span:6}}],J=[{label:"",field:"id",component:"Input",show:!1},{label:"名称",field:"name",component:"Input",required:!0},{label:"封面图",field:"coverUrl",component:"JImageUpload",componentProps:{fileMax:1}},{label:"分类",field:"type",component:"Select",defaultValue:"1",required:!0,componentProps:{options:[{label:"仪表盘设计",value:"1",key:"1"},{label:"门户设计器",value:"2",key:"2"}]}},{label:"保护码",field:"protectionCode",component:"StrengthMeter"}],se=E({__name:"PageModal",emits:["success","register"],setup(r,{emit:t}){const e=A(!0),[c,{resetFields:p,setFieldsValue:m,validate:d}]=P({schemas:J,showActionButtonGroup:!1}),[i,{setModalProps:a,closeModal:l}]=I(s=>g(this,null,function*(){if(yield p(),a({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),n(e)){let o=f({},s.record);o.protectionCode&&o.protectionCode.length>0&&(o.protectionCode=x(o.protectionCode)),yield m(f({},o))}})),v=D(()=>n(e)?"编辑":"新增");function y(s=0){return g(this,null,function*(){try{const o=yield d();a({confirmLoading:!0}),o.protectionCode&&(o.protectionCode=S(o.protectionCode));const u=yield R(o,e.value);o.id&&U(V.DRAG_CACHE_PREFIX+o.id),l(),t("success",s===1?u:null)}finally{a({confirmLoading:!1})}})}return(s,o)=>{const u=L("a-button");return O(),T(n(F),G(s.$attrs,{onRegister:n(i),okText:"保存",title:v.value,onOk:y,width:700,destroyOnClose:""}),{appendFooter:C(()=>[b(u,{type:"primary",onClick:o[0]||(o[0]=N=>y(1))},{default:C(()=>[q("保存并设计")]),_:1})]),default:C(()=>[b(n(M),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{se as _,re as s};
