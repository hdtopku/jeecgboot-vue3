var h=(C,v,i)=>new Promise((c,_)=>{var u=n=>{try{l(i.next(n))}catch(m){_(m)}},e=n=>{try{l(i.throw(n))}catch(m){_(m)}},l=n=>n.done?c(n.value):Promise.resolve(n.value).then(u,e);l((i=i.apply(C,v)).next())});import{d as A,l as y,e as F,o as V,V as x,a7 as b,a8 as D,ad as t,f as d,u as f,ae as r,aa as Y,E as R,ak as j,F as H}from"./vue-ebecda47.js";import{u as O,C as $}from"./upload-c3126eb0.js";import{aE as P,u as q,C as G}from"./jeecg-online-vendor-cfb58502.js";import{h as J}from"./header-55b09394.js";import{m as K,F as L,g as Q}from"./index-85cfc899.js";import{e as W,d as X}from"./antd-vue-vendor-b75e8c06.js";import{a as Z,g as tt}from"./UserSetting.api-9a2cb8de.js";import{_ as et}from"./UserAccountModal-f23a10f3.js";import"./index-e91e8b28.js";import"./lodash-es-vendor-cd7703c8.js";import"./base64Conver-fa2fe1af.js";import"./tinymce-vendor-7c917b36.js";import"./vxe-table-vendor-4aae63bf.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./index-a2e0ccba.js";import"./useForm-21b78d9f.js";import"./componentMap-c36c4b8d.js";import"./useFormItem-ba20c4de.js";import"./index-be9b0972.js";import"./BasicModal-7e6e7ae9.js";import"./useWindowSizeFn-50bd5ea0.js";import"./download-c9e5f3f7.js";import"./index-96e99de8.js";import"./index-118a05d7.js";import"./useCountdown-00a25cd7.js";import"./useFormItemSingle-36e25e6f.js";import"./JAddInput-64f6e84f.js";import"./areaDataUtil-4a5c6609.js";import"./JSelectUser-94adcf4d.js";import"./props-c57324f9.js";import"./JSelectBiz-4fc2f082.js";import"./index-1c3e0ea1.js";import"./index-097af6f9.js";import"./bem-311698ef.js";import"./props-13a58630.js";import"./useContextMenu-eb481e60.js";import"./depart.api-1888bf18.js";import"./JSelectDept-394df716.js";import"./JPopup-f9a8bda3.js";import"./cron-parser-vendor-afad4b1e.js";import"./JEllipsis-410bb5e8.js";import"./JUpload-ffe34816.js";import"./index-ae3841ab.js";import"./index-ab54dd3c.js";import"./validator-fb5fa821.js";import"./user.api-729c8827.js";const st={class:"user-setting-top"},ot={class:"account-avatar"},at={class:"account-right"},nt={key:0},it={class:"font-size-17 account-name"},rt={key:1},lt={class:"use-day"},ct={class:"account-data"},ut={class:"account-detail"},mt=t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"详细资料",-1),pt={class:"margin-bottom-10 font-size-13"},dt=t("span",{class:"gray-75 item-label"},"生日",-1),_t={class:"gray-3"},ft={class:"margin-bottom-10 font-size-13"},vt=t("span",{class:"gray-75 item-label"},"性别",-1),gt={class:"gray-3"},ht={class:"margin-bottom-10 nowarp font-size-13"},yt=t("span",{class:"gray-75 item-label"},"职位",-1),xt={class:"gray-3"},bt=t("span",{class:"item-label"},null,-1),Dt={class:"account-info"},Ct=t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"联系信息",-1),It={class:"margin-bottom-10 font-size-13"},Tt=t("span",{class:"gray-75 item-label"},"邮箱",-1),zt={class:"gray-3"},Mt={class:"margin-bottom-10 font-size-13"},kt=t("span",{class:"gray-75 item-label"},"手机",-1),Bt={class:"gray-3"},Ie=A({__name:"BaseSetting",setup(C){const v=P("sex")||[{text:"男",value:"1"},{text:"女",value:"2"}],{createMessage:i}=G(),c=q(),{prefixCls:_}=K("j-base-setting-container"),u=y(!1),e=y({}),l=y(),[n,{openModal:m}]=L(),z=F(()=>Q(e.value.avatar)||J);function M(s,o){const a=c.getUserInfo;a.avatar=o,c.setUserInfo(a),o&&I({avatar:o,id:a.id})}function I(s){Z(s).then(o=>{o.success||i.warn(o.message)})}function k(){u.value=!0,setTimeout(()=>{l.value.focus()},100)}function B(){e.value.realname?(I({realname:e.value.realname,id:e.value.id}),c.setUserInfo(e.value)):i.warn("请输入姓名"),u.value=!1}function U(s){return s?W(s).format("YYYY-MM-DD"):"未填写"}function w(s){let o=v.find(p=>parseInt(p.value)===s),a="未填写";return o&&(a=o.text),a}function E(){let s=X(e.value);m(!0,{record:s})}function T(){tt().then(s=>h(this,null,function*(){s.success&&(s.result?(s.result.sexText=w(s.result.sex),s.result.birthday=U(s.result.birthday),s.result.createTimeText=S(s.result.createTime),e.value=s.result):e.value={})}))}function S(s){let o,a,p=Date.parse(s),g=new Date().getTime();return a=Math.abs(g-p),o=Math.floor(a/(1e3*3600*24)),o+" 天"}return V(()=>h(this,null,function*(){T()})),(s,o)=>{const a=x("Icon"),p=x("a-tooltip"),g=x("a-input");return b(),D(H,null,[t("div",{class:j(["account-padding",[`${f(_)}`]])},[t("div",st,[t("div",ot,[d(f($),{uploadApi:f(O),showBtn:!1,value:z.value,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:M,width:"80"},null,8,["uploadApi","value"]),t("div",at,[u.value?(b(),D("div",rt,[d(g,{ref_key:"accountNameEdit",ref:l,maxlength:100,value:e.value.realname,"onUpdate:value":o[0]||(o[0]=N=>e.value.realname=N),onBlur:B},null,8,["value"])])):(b(),D("div",nt,[t("span",it,r(e.value.realname),1),d(p,{content:"编辑姓名"},{default:Y(()=>[d(a,{class:"pointer font-size-17 gray-bd account-icon",icon:"ant-design:edit-outlined",onClick:k})]),_:1})])),t("div",lt,[R(" 使用："),t("span",null,r(e.value.createTimeText),1)])])])]),t("div",ct,[t("div",ut,[mt,t("div",pt,[dt,t("span",_t,r(e.value.birthday),1)]),t("div",ft,[vt,t("span",gt,r(e.value.sexText),1)]),t("div",ht,[yt,t("span",xt,r(e.value.postText?e.value.postText:"未填写"),1)]),t("div",{class:"font-size-13"},[bt,t("span",{class:"item-label pointer",style:{color:"#1e88e5"},onClick:E},"编辑")])]),t("div",Dt,[Ct,t("div",It,[Tt,t("span",zt,r(e.value.email?e.value.email:"未填写"),1)]),t("div",Mt,[kt,t("span",Bt,r(e.value.phone?e.value.phone:"未填写"),1)])])])],2),d(et,{onRegister:f(n),onSuccess:T},null,8,["onRegister"])],64)}}});export{Ie as default};
