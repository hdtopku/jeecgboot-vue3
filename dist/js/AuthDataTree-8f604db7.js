import{bW as P,l as T}from"./jeecg-online-vendor-bf2efbcb.js";import{o as w,l as A,p as N}from"./auth.api-9f2a65b5.js";import{d as M,k as s,e as S,w as V,U as h,aV as f,as as D,ar as E,F as R,at as $,f as v,bi as g,E as I}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";var y=(e,r,t)=>new Promise((c,d)=>{var i=a=>{try{o(t.next(a))}catch(u){d(u)}},n=a=>{try{o(t.throw(a))}catch(u){d(u)}},o=a=>a.done?c(a.value):Promise.resolve(a.value).then(i,n);o((t=t.apply(e,r)).next())});const z=M({name:"AuthDataTree",props:{cgformId:{type:String,required:!0}},setup(e){const{createMessage:r}=T(),t=s(""),c=s(3),d=s(!0),i=s([]),n=s([]),o=s([]),a=s(""),u=S(()=>!t.value);V(()=>e.cgformId,m,{immediate:!0});function m(){return y(this,null,function*(){if(!e.cgformId)return;let l=yield w(e.cgformId,c.value);o.value=l.map(p=>({key:p.id,title:p.ruleName}))})}function k(l,p){return y(this,null,function*(){t.value=l,a.value=p,n.value=[],yield m();let B=yield A({roleId:l,cgformId:e.cgformId,type:c.value,authMode:p});n.value=B.map(x=>x.authId)})}function _(){t.value="",m()}function C(){m(),k(t.value,a.value)}function K(){return y(this,null,function*(){yield N(t.value,e.cgformId,{authId:JSON.stringify(n.value),authMode:a.value}),r.success("\u4FDD\u5B58\u6210\u529F")})}function F(l){i.value=l,d.value=!1}function b(){t.value="",n.value=[]}return{loadChecked:k,clear:b,expandedKeys:i,autoExpandParent:d,checkedKeys:n,treeData:o,disabled:u,onSave:K,onExpand:F,onRefresh:C,clearChecked:_}}}),U={class:"onl-auth-tree-btns"};function q(e,r,t,c,d,i){const n=h("a-empty"),o=h("a-button"),a=h("a-tree");return f(),D("div",null,[e.disabled?(f(),E(n,{key:0,description:"\u8BF7\u5148\u9009\u4E2D\u5DE6\u4FA7\u89D2\u8272/\u90E8\u95E8/\u7528\u6237"})):e.treeData.length===0?(f(),E(n,{key:1,description:"\u65E0\u6743\u9650\u4FE1\u606F"})):(f(),D(R,{key:2},[$("div",U,[v(o,{onClick:e.onRefresh,size:"small",type:"primary",preIcon:"ant-design:redo",ghost:""},{default:g(()=>[I("\u5237\u65B0")]),_:1},8,["onClick"]),v(o,{onClick:e.onSave,size:"small",type:"primary",preIcon:"ant-design:save",ghost:""},{default:g(()=>[I("\u4FDD\u5B58")]),_:1},8,["onClick"])]),v(a,{checkable:"",checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":r[0]||(r[0]=u=>e.checkedKeys=u),expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData,onExpand:e.onExpand},null,8,["checkedKeys","expandedKeys","autoExpandParent","treeData","onExpand"])],64))])}var H=P(z,[["render",q],["__scopeId","data-v-a8874950"]]);export{H as default};
