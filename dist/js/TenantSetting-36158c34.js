var pe=Object.defineProperty,ve=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var H=(d,u,i)=>u in d?pe(d,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[u]=i,K=(d,u)=>{for(var i in u||(u={}))me.call(u,i)&&H(d,i,u[i]);if(G)for(var i of G(u))ge.call(u,i)&&H(d,i,u[i]);return d},Q=(d,u)=>ve(d,fe(u));var E=(d,u,i)=>new Promise((U,_)=>{var N=g=>{try{r(i.next(g))}catch(S){_(S)}},P=g=>{try{r(i.throw(g))}catch(S){_(S)}},r=g=>g.done?U(g.value):Promise.resolve(g.value).then(N,P);r((i=i.apply(d,u)).next())});import{d as te,k as p,o as he,V as y,a5 as c,a6 as v,aa as e,E as w,ab as f,W as xe,F,a8 as X,B as $,f as o,a9 as A,v as ye,A as we,am as ke,u as m,a7 as a,ap as Ce,aq as Te}from"./vue-5a09445c.js";import{f as be,h as Ie,i as Ue,j as Se,k as ze}from"./UserSetting.api-11741bdd.js";import{t as Ne,a8 as Y,u as Pe,D as Oe}from"./jeecg-online-vendor-231813f7.js";import{m as Ve,an as Z}from"./index-ebe32d90.js";import{U as $e}from"./index-afd7fbfc.js";import{M as ee}from"./antd-vue-vendor-e4fda4cf.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-3f622b6f.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./index-156cafb7.js";import"./BasicModal-4736e0c2.js";import"./useWindowSizeFn-090d6233.js";const l=d=>(Ce("data-v-6c57a81b"),d=d(),Te(),d),Be={class:"my-tenant"},De=l(()=>e("span",{style:{flex:"1"}},"我的租户",-1)),Me={key:0,class:"approved-count"},Ee={key:0,class:"tenant-list"},Ae=["onClick"],Le={class:"tenant-title"},Re={class:"item-left"},je={class:"item-name"},Fe=["onClick"],qe={class:"item-right"},Je={key:0},We=l(()=>e("span",{class:"pointer examine"},"待审核",-1)),Ge=["onClick"],He={key:1},Ke=["onClick"],Qe=["onClick"],Xe={key:2,style:{width:"75px"}},Ye={style:{"margin-left":"24px"}},Ze={class:"item-content"},et={class:"content-box"},tt=l(()=>e("div",{class:"content-name"}," 组织名片 ",-1)),nt={class:"content-desc"},st={class:"flex-flow"},ot=l(()=>e("div",{class:"content-des-text"},"姓名",-1)),at={style:{"font-size":"13px",color:"#000000"}},it={class:"flex-flow"},lt=l(()=>e("div",{class:"content-des-text"},"部门",-1)),ct={style:{"font-size":"13px"}},dt={class:"flex-flow"},ut=l(()=>e("div",{class:"content-des-text"},"职业",-1)),rt={style:{"font-size":"13px"}},_t={class:"footer-box"},pt=["onClick"],vt=l(()=>e("span",null,"查看租户名片",-1)),ft={key:1,class:"font-color9e flex-flow margin-right40 font-size13"},mt=l(()=>e("span",null,"查看租户名片",-1)),gt=["onClick"],ht=l(()=>e("span",null,"退出租户",-1)),xt={key:3,class:"font-color9e flex-flow margin-right40 font-size13"},yt=l(()=>e("span",null,"退出租户",-1)),wt=l(()=>e("div",{style:{"font-size":"17px","font-weight":"700"}},"查看名片",-1)),kt=l(()=>e("div",{style:{color:"#9e9e9e","margin-top":"10px","font-size":"13px"}}," 名片是您在该组织下的个人信息，只在本组织中展示。 ",-1)),Ct={style:{"margin-top":"24px","font-size":"13px",padding:"0 24px"}},Tt=l(()=>e("div",{class:"font-color75"},"姓名",-1)),bt={class:"margin-top6 margin-bottom-16"},It=l(()=>e("div",null,"部门",-1)),Ut={class:"margin-top6 margin-bottom-16"},St=l(()=>e("div",null,"职位",-1)),zt={class:"margin-top6 margin-bottom-16"},Nt=l(()=>e("div",null,"工作地点",-1)),Pt={class:"margin-top6 margin-bottom-16"},Ot=l(()=>e("div",null,"工号",-1)),Vt={class:"margin-top6 margin-bottom-16"},$t={class:"cancellation"},Bt={style:{padding:"20px"}},Dt=l(()=>e("div",{class:"change-owen"}," 只有变更拥有着之后,才能退出 ",-1)),Mt=["onClick"],Et=["onClick"],At=l(()=>e("div",{style:{height:"20px"}},null,-1)),Lt=te({name:"tenant-setting"}),Rt=te(Q(K({},Lt),{setup(d){const{prefixCls:u}=Ve("j-user-tenant-setting-container"),i=p([]),U=Ne(),{createMessage:_}=Pe();p([]);const N=p(!1),P=p([]),r=p({realname:U.getUserInfo.realname,workNo:U.getUserInfo.workNo,orgCodeTxt:U.getUserInfo.orgCodeTxt,postText:U.getUserInfo.postText});function g(){return E(this,null,function*(){be({userTenantStatus:"1,3,5"}).then(s=>{if(s.success)if(s.result&&s.result.length>0){let t=s.result,h=[],V=[];for(let x=0;x<t.length;x++)t[x].userTenantStatus==="5"&&V.push(t[x]),h.push(t[x]);i.value=h,R.value=V,D.value=V.length}else S();else S()})})}function S(){i.value=[],R.value=[],D.value=0}function ne(s){const t=document.createElement("input");t.setAttribute("value",s),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),_.success("复制成功")}function se(s){ee.confirm({title:"取消申请",content:"是否取消申请",okText:"确认",cancelText:"取消",onOk:()=>{Ie({tenantId:s}).then(t=>{t.success?(_.success("取消申请成功"),g()):_.warning(t.message)}).catch(t=>{_.warning(t.message)})}})}function oe(s){s.show?s.show=!1:s.show=!0}function q(s,t){P.value=t,s==="editTenant"?N.value=!0:s==="exitTenant"&&(k.value={loginPassword:"",tenantName:""},O.value=!0,I.value=!0,T.value=t)}const I=p(!1),k=p({}),T=p({}),O=p(!0),B=p(""),L=p(!1);function ae(){let s=m(T).name,t=m(k).tenantName;s===t?O.value=!1:O.value=!0}function ie(){return E(this,null,function*(){if(!m(k).loginPassword){_.warning("请输入登录密码");return}yield Ue({id:m(T).tenantUserId,loginPassword:m(k).loginPassword}).then(s=>{if(s.success)_.success(s.message),I.value=!1,Z(m(T).tenantUserId);else if(s.message==="assignedOwen")L.value=!0,I.value=!1;else if(s.message==="cancelTenant"){I.value=!1;let t=Y.currentRoute.value.fullPath;ee.confirm({title:"您是该组织的拥有者",content:"该组织下没有其他成员，需要您前往注销",okText:"前往注销",okType:"danger",cancelText:"取消",onOk:()=>{t!=="/system/usersetting"&&Y.push("/myapps/settings/organization/organMessage/"+m(T).tenantUserId)}})}else _.warning(s.message)}).catch(s=>{_.warning(s.message)})})}function le(){I.value=!1,O.value=!0}function ce(){if(!m(B)){_.warning("请选择变更拥有者");return}Se({userId:m(B),tenantId:m(T).tenantUserId}).then(s=>{s.success?(_.success(s.message),Z(m(T).tenantUserId)):_.warning(s.message)})}const D=p(0),R=p([]),j=p(!1);function de(){j.value=!0}function M(s,t){return E(this,null,function*(){yield ze({tenantId:Number.parseInt(s),status:t}),g()})}return he(()=>{g()}),(s,t)=>{const h=y("Icon"),V=y("a-empty"),x=y("a-modal"),C=y("a-col"),ue=y("a-input"),z=y("a-row"),J=y("a-form-item"),re=y("a-input-password"),_e=y("a-form"),W=y("a-button");return c(),v(F,null,[e("div",{class:ke(["tenant-padding",[`${m(u)}`]])},[e("div",Be,[De,e("span",{class:"invited",onClick:de},[w("我的受邀信息"),D.value>0?(c(),v("span",Me,f(D.value),1)):xe("",!0)])]),i.value.length>0?(c(),v("div",Ee,[(c(!0),v(F,null,X(i.value,n=>(c(),v("div",{class:"tenant-list-item",onClick:b=>oe(n)},[e("div",Le,[e("div",Re,[e("div",je,f(n.name),1),e("div",{class:"item-house",onClick:$(b=>ne(n.houseNumber),["stop"])},[e("span",null,[w(" 组织门牌号："+f(n.houseNumber)+" ",1),o(h,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])],8,Fe)]),e("div",qe,[n.userTenantStatus==="3"?(c(),v("span",Je,[We,e("span",{class:"pointer cancel-apply",onClick:$(b=>se(n.tenantUserId),["stop"])},"取消申请",8,Ge)])):n.userTenantStatus==="5"?(c(),v("span",He,[e("span",{class:"pointer examine",onClick:b=>M(n.tenantUserId,"1")},"加入",8,Ke),e("span",{class:"pointer cancel-apply",onClick:$(b=>M(n.tenantUserId,"4"),["stop"])},"拒绝",8,Qe)])):(c(),v("div",Xe)),e("span",Ye,[n.show?(c(),A(h,{key:0,icon:"ant-design:down-outlined",style:{"font-size":"13px",color:"#707070"}})):(c(),A(h,{key:1,icon:"ant-design:right-outlined",style:{"font-size":"13px",color:"#707070"}}))])])]),ye(e("div",Ze,[e("div",et,[tt,e("div",nt,[e("div",st,[ot,e("div",at,f(r.value.realname),1)]),e("div",it,[lt,e("div",ct,f(r.value.orgCodeTxt?r.value.orgCodeTxt:"未填写"),1)]),e("div",dt,[ut,e("div",rt,f(r.value.postText?r.value.postText:"未填写"),1)])])]),e("div",_t,[n.userTenantStatus!=="3"?(c(),v("span",{key:0,onClick:$(b=>q("editTenant",n),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[o(h,{icon:"ant-design:edit-outlined",class:"footer-icon"}),vt],8,pt)):(c(),v("span",ft,[o(h,{icon:"ant-design:edit-outlined",class:"footer-icon"}),mt])),n.userTenantStatus!=="3"?(c(),v("span",{key:2,onClick:$(b=>q("exitTenant",n),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[o(h,{icon:"ant-design:export-outlined",class:"footer-icon"}),ht],8,gt)):(c(),v("span",xt,[o(h,{icon:"ant-design:export-outlined",class:"footer-icon"}),yt]))])],512),[[we,n.show]])],8,Ae))),256))])):(c(),A(V,{key:1,description:"暂无数据",style:{position:"relative",top:"50px"}}))],2),o(x,{visible:N.value,"onUpdate:visible":t[0]||(t[0]=n=>N.value=n),width:"400px",wrapClassName:"edit-tenant-setting"},{title:a(()=>[wt,kt]),default:a(()=>[e("div",Ct,[Tt,e("div",bt,f(r.value.realname),1),It,e("div",Ut,f(r.value.orgCodeTxt?r.value.orgCodeTxt:"未填写"),1),St,e("div",zt,f(r.value.postText?r.value.postText:"未填写"),1),Nt,e("div",Pt,f(P.value.workPlace?P.value.workPlace:"未填写"),1),Ot,e("div",Vt,f(r.value.workNo?r.value.workNo:"未填写"),1)])]),_:1},8,["visible"]),o(x,{visible:I.value,"onUpdate:visible":t[3]||(t[3]=n=>I.value=n),width:"800","destroy-on-close":""},{title:a(()=>[e("div",$t,[o(h,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),w(" 退出租户 "+f(T.value.name),1)])]),footer:a(()=>[o(W,{type:"primary",onClick:ie,disabled:O.value},{default:a(()=>[w("确定")]),_:1},8,["disabled"]),o(W,{onClick:le},{default:a(()=>[w("取消")]),_:1})]),default:a(()=>[o(_e,{model:k.value,ref:"cancelTenantRef"},{default:a(()=>[o(J,{name:"tenantName"},{default:a(()=>[o(z,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[w(" 请输入租户名称 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(ue,{value:k.value.tenantName,"onUpdate:value":t[1]||(t[1]=n=>k.value.tenantName=n),onChange:ae},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(J,{name:"loginPassword"},{default:a(()=>[o(z,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:a(()=>[o(C,{span:24},{default:a(()=>[w(" 请输入您的登录密码 ")]),_:1}),o(C,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o(re,{value:k.value.loginPassword,"onUpdate:value":t[2]||(t[2]=n=>k.value.loginPassword=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),o(x,{title:"变更拥有者",visible:L.value,"onUpdate:visible":t[5]||(t[5]=n=>L.value=n),width:"800","destroy-on-close":"",cancelButtonProps:{display:"none"},onOk:ce},{default:a(()=>[e("div",Bt,[o(z,{span:24},{default:a(()=>[Dt]),_:1}),o(z,{span:24,style:{"margin-top":"10px"}},{default:a(()=>[o($e,{value:B.value,"onUpdate:value":t[4]||(t[4]=n=>B.value=n),izExcludeMy:""},null,8,["value"])]),_:1})])]),_:1},8,["visible"]),o(x,{title:"我的受邀信息",visible:j.value,"onUpdate:visible":t[6]||(t[6]=n=>j.value=n),footer:null},{default:a(()=>[o(z,{span:24,class:"invited-row"},{default:a(()=>[o(C,{span:16},{default:a(()=>[w(" 组织 ")]),_:1}),o(C,{span:8},{default:a(()=>[w(" 操作 ")]),_:1})]),_:1}),(c(!0),v(F,null,X(R.value,n=>(c(),A(z,{span:24,class:"invited-row-list"},{default:a(()=>[o(C,{span:16},{default:a(()=>[w(f(n.name),1)]),_:2},1024),o(C,{span:8},{default:a(()=>[e("span",{class:"common",onClick:b=>M(n.tenantUserId,"1")},"加入",8,Mt),e("span",{class:"common refuse",onClick:b=>M(n.tenantUserId,"4")},"拒绝",8,Et)]),_:2},1024)]),_:2},1024))),256)),At]),_:1},8,["visible"])],64)}}}));const sn=Oe(Rt,[["__scopeId","data-v-6c57a81b"]]);export{sn as default};
