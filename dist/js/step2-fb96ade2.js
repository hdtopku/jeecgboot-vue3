var g=(e,o,t)=>new Promise((f,r)=>{var c=s=>{try{a(t.next(s))}catch(m){r(m)}},u=s=>{try{a(t.throw(s))}catch(m){r(m)}},a=s=>s.done?f(s.value):Promise.resolve(s.value).then(c,u);a((t=t.apply(e,o)).next())});import{q as k,as as F,u as P,C as b}from"./jeecg-online-vendor-88d7be55.js";import{H as y,I as C}from"./index-b6e19f4a.js";import{S as B}from"./index-99de6536.js";import{cm as D,cg as v,ck as I}from"./antd-vue-vendor-cce59da1.js";import{d as S,k as _,r as E,J as j,U as d,a5 as M,a9 as R,a7 as p,f as n,E as h}from"./vue-705b7309.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-60c6a8c7.js";const z=S({name:"step2",components:{Button:D,Form:v,FormItem:v.Item,InputPassword:I.Password,Input:I,StrengthMeter:B},props:{accountInfo:{type:Object,default:()=>({})}},emits:["prevStep","nextStep"],setup(e,{emit:o}){const{t}=k(),{createErrorModal:f}=P(),{accountInfo:r}=e,c=_(),u=E({username:r.obj.username||"",password:"",confirmPassword:""}),{getFormRules:a}=y(u),{validForm:s}=C(c);function m(){o("prevStep",r.obj)}function w(){return g(this,null,function*(){const i=yield s();if(!i)return;const l=yield F(j({username:i.username,password:i.password,smscode:r.obj.smscode,phone:r.obj.phone}));l.success?o("nextStep",r.obj):f({title:t("sys.api.errorTip"),content:l.message||t("sys.api.networkExceptionMsg")})})}return{t,formRef:c,formData:u,getFormRules:a,handleNext:w,handlePrev:m}}});function N(e,o,t,f,r,c){const u=d("Input"),a=d("FormItem"),s=d("StrengthMeter"),m=d("InputPassword"),w=d("Button"),i=d("Form");return M(),R(i,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:p(()=>[n(a,{name:"username",class:"enter-x"},{default:p(()=>[n(u,{size:"large",value:e.formData.username,"onUpdate:value":o[0]||(o[0]=l=>e.formData.username=l),placeholder:e.t("sys.login.userName"),disabled:""},null,8,["value","placeholder"])]),_:1}),n(a,{name:"password",class:"enter-x"},{default:p(()=>[n(s,{size:"large",value:e.formData.password,"onUpdate:value":o[1]||(o[1]=l=>e.formData.password=l),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])]),_:1}),n(a,{name:"confirmPassword",class:"enter-x"},{default:p(()=>[n(m,{size:"large",visibilityToggle:"",value:e.formData.confirmPassword,"onUpdate:value":o[2]||(o[2]=l=>e.formData.confirmPassword=l),placeholder:e.t("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),n(a,{class:"enter-x"},{default:p(()=>[n(w,{type:"primary",size:"large",block:"",onClick:e.handlePrev},{default:p(()=>[h(" 上一步 ")]),_:1},8,["onClick"]),n(w,{size:"large",block:"",class:"mt-4",onClick:e.handleNext},{default:p(()=>[h(" 下一步 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}const K=b(z,[["render",N]]);export{K as default};
