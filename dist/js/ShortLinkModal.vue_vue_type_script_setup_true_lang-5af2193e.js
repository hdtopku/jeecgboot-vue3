var x=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(o,t,e)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,b=(o,t)=>{for(var e in t||(t={}))w.call(t,e)&&k(o,e,t[e]);if(h)for(var e of h(t))B.call(t,e)&&k(o,e,t[e]);return o};var f=(o,t,e)=>new Promise((c,a)=>{var p=s=>{try{r(e.next(s))}catch(i){a(i)}},d=s=>{try{r(e.throw(s))}catch(i){a(i)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(p,d);r((e=e.apply(o,t)).next())});import{B as L}from"./index-5e1edea3.js";import{B as v}from"./BasicForm-43f63892.js";import"./componentMap-4f24d9c4.js";import{u as _}from"./useForm-56054a7d.js";import"./JAddInput-7275d351.js";import"./JSelectUser-c48969f7.js";import"./JSelectDept-f9e74791.js";import"./JPopup-5cac5270.js";import{B as F}from"./index-797f995b.js";import"./cron-parser-vendor-df2efc7b.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-cd7c9198.js";import{b as m}from"./jeecg-online-vendor-a84f26e2.js";import{M}from"./antd-vue-vendor-04f0af1d.js";import{d as U,k as y,u as l,e as T,a5 as C,a9 as O,a7 as N,f as P,ag as R}from"./vue-5a09445c.js";const Z=[{title:"短链接码",dataIndex:"code"},{title:"链接",dataIndex:"link"},{title:"备注",dataIndex:"remark"},{title:"访问次数",dataIndex:"visitCount"},{title:"手机是否可以访问(0-可以,-1-不可以)",dataIndex:"mobile"},{title:"电脑是否可以访问(0-可以,-1-不可以)",dataIndex:"pc"},{title:"状态(0：正常，-1:失效)",dataIndex:"status"},{title:"链接类型:1-agiso订单",dataIndex:"linkType"}],ee=[{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"}],S=[{label:"",field:"id",component:"Input",show:!1},{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"},{label:"备注",field:"remark",component:"Input"},{label:"访问次数",field:"visitCount",component:"InputNumber"},{label:"手机是否可以访问(0-可以,-1-不可以)",field:"mobile",component:"InputNumber"},{label:"电脑是否可以访问(0-可以,-1-不可以)",field:"pc",component:"InputNumber"},{label:"状态(0：正常，-1:失效)",field:"status",component:"Input"},{label:"链接类型:1-agiso订单",field:"linkType",component:"Input"}],te="/pms/shortLink/exportXls",oe="/pms/shortLink/importExcel",ne=o=>m.get({url:"/pms/shortLink/list",params:o}),se=(o,t)=>m.delete({url:"/pms/shortLink/delete",params:o},{joinParamsToUrl:!0}).then(()=>{t()}),le=(o,t)=>{M.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>m.delete({url:"/pms/shortLink/deleteBatch",data:o},{joinParamsToUrl:!0}).then(()=>{t()})})},j=(o,t)=>{let e=t?"/pms/shortLink/edit":"/pms/shortLink/add";return m.post({url:e,params:o})},re=U({__name:"ShortLinkModal",emits:["register","success"],setup(o,{emit:t}){const e=y(!0),[c,{resetFields:a,setFieldsValue:p,validate:d}]=_({labelWidth:150,schemas:S,showActionButtonGroup:!1}),[r,{setModalProps:s,closeModal:i}]=F(n=>f(this,null,function*(){yield a(),s({confirmLoading:!1,showCancelBtn:n==null?void 0:n.showFooter,showOkBtn:n==null?void 0:n.showFooter}),e.value=!!(n!=null&&n.isUpdate),l(e)&&(yield p(b({},n.record)))})),I=T(()=>l(e)?"编辑":"新增");function g(n){return f(this,null,function*(){try{let u=yield d();s({confirmLoading:!0}),yield j(u,e.value),i(),t("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(n,u)=>(C(),O(l(L),R(n.$attrs,{onRegister:l(r),title:I.value,onOk:g,width:"60%"}),{default:N(()=>[P(l(v),{onRegister:l(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{re as _,oe as a,le as b,Z as c,se as d,te as g,ne as l,ee as s};
