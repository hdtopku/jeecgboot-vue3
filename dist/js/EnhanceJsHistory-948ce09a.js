import{aQ as D,a4 as F,bW as L,aO as j}from"./jeecg-online-vendor-bf2efbcb.js";import{B as H}from"./index-8cf3aabb.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./componentMap-a6d21ad6.js";import{k as I}from"./JAddInput-2cbbbde9.js";import{A as N}from"./index-fde9c72f.js";import{d as x,k as g,n as V,U as s,aV as $,ar as R,bi as a,f as i,E as J,ad as b,at as S,ag as A}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./useFormItem-4a12ff45.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./index-ed4be6fa.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";var T=Object.defineProperty,O=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,w=(e,t,o)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&w(e,o,t[o]);if(O)for(var o of O(t))Q.call(t,o)&&w(e,o,t[o]);return e},U=(e,t,o)=>new Promise((u,d)=>{var f=r=>{try{c(o.next(r))}catch(p){d(p)}},_=r=>{try{c(o.throw(r))}catch(p){d(p)}},c=r=>r.done?u(r.value):Promise.resolve(r.value).then(f,_);c((o=o.apply(e,t)).next())});const B=D(),M="enhance_",W=F({id:"online-cgform-enhance",state:()=>({enhanceJs:{}}),getters:{},actions:{getEnhanceJs(e){return this.enhanceJs[e]=B.get(M+e),this.enhanceJs[e]},addEnhanceJs(e){this.enhanceJs[e.code]?this.enhanceJs[e.code].push(P({},e)):this.enhanceJs[e.code]=[P({},e)];let t=this.enhanceJs[e.code];for(;t.length>16;)t.shift();B.set(M+e.code,t)}}}),q=x({name:"EnhanceJsHistory",components:{BasicModal:H,JCodeEditor:I},setup(){const e=W(),t=g(),o=g(!1),u=g([]),d=g(""),f=g(0),[_,{closeModal:c}]=N(n=>U(this,null,function*(){r(n.code,n.type)}));function r(n,E){d.value="",u.value=[];let C=e.getEnhanceJs(n),l=[],m=0;for(let h of C)h.type===E&&(m++,l.push(Object.assign({},h,{index:m})));l&&l.length>0&&l.sort((h,k)=>k.date-h.date),u.value=[...l],V(()=>v(l[0]))}function p(){c()}function y(n){return j(n,"yyyy-MM-DD HH:mm:ss")}function v(n){f.value=n.index,t.value.setValue(n.str)}return{codeEditorRef:t,fullCode:v,registerModal:_,getFormatDate:y,onCancel:p,confirmLoading:o,dataList:u,jsStr:d,activeIndex:f}}}),G=["onClick"];function K(e,t,o,u,d,f){const _=s("a-divider"),c=s("a-list-item"),r=s("a-list"),p=s("a-layout-sider"),y=s("JCodeEditor"),v=s("a-layout-content"),n=s("a-layout"),E=s("a-spin"),C=s("a-button"),l=s("BasicModal");return $(),R(l,{onRegister:e.registerModal,title:"JS\u589E\u5F3A\u5386\u53F2\u8BB0\u5F55",width:1200,maskClosable:!1,confirmLoading:e.confirmLoading,defaultFullscreen:"",onCancel:e.onCancel},{footer:a(()=>[i(C,{onClick:e.onCancel},{default:a(()=>[J("\u5173\u95ED")]),_:1},8,["onClick"])]),default:a(()=>[i(E,{spinning:e.confirmLoading},{default:a(()=>[i(n,null,{default:a(()=>[i(p,{theme:"light"},{default:a(()=>[i(r,{bordered:"",dataSource:e.dataList,class:b("enhance-list")},{header:a(()=>[S("div",null,[i(_,{style:{margin:"0"}},{default:a(()=>[J("\u4FDD\u5B58\u65F6\u95F4")]),_:1})])]),renderItem:a(({item:m})=>[i(c,{class:b(e.activeIndex===m.index?"bg-blue":"")},{default:a(()=>[S("a",{onClick:h=>e.fullCode(m)},A(e.getFormatDate(m.date)),9,G)]),_:2},1032,["class"])]),_:1},8,["dataSource"])]),_:1}),i(n,null,{default:a(()=>[i(v,{style:{margin:"8px 8px",padding:"8px",background:"#fff",minHeight:"280px"}},{default:a(()=>[i(y,{ref:"codeEditorRef",language:"javascript",fullScreen:!0,lineNumbers:!1,"language-change":!1},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["onRegister","confirmLoading","onCancel"])}var X=L(q,[["render",K],["__scopeId","data-v-8964b74c"]]),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as E,Fe as a,W as u};
