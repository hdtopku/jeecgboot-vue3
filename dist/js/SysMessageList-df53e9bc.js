import{a as H,u as O}from"./useSysMessage-bb4caff0.js";import{_ as B,bO as E,bP as R,bQ as V,bR as N,bS as w,bT as A}from"./jeecg-online-vendor-bf2efbcb.js";import{m as I}from"./antd-vue-vendor-1561c1ba.js";import{U as l,aV as o,ar as r,bi as e,as as c,f as s,E as F,V as z,at as y,ag as D,F as f}from"./vue-c7e3516e.js";import"./index-fde9c72f.js";import"./lodash-es-vendor-42c8d3d4.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const P={name:"SysMessageList",components:{FilterOutlined:E,CloseOutlined:I,BellFilled:R,ExclamationOutlined:V,MailOutlined:N,InteractionOutlined:w,AlertOutlined:A},props:{star:{type:Boolean,default:!1}},emits:["close","detail"],setup(L,{emit:k}){const{messageList:C,loadEndStatus:t,loadingMoreStatus:S,onLoadMore:T,noRead:b,getMsgCategory:x,searchParams:d,reset:g,loadData:i,updateStarMessage:_}=H();function u(n){let{fromUser:M,rangeDateKey:a,rangeDate:v}=n;d.fromUser=M||"",d.rangeDateKey=a||"",d.rangeDate=v||[],L.star===!0?d.starFlag="1":d.starFlag="",g(),i()}function p(n){_(n),n.starFlag=="1"?n.starFlag="0":n.starFlag="1"}const{goPage:m}=O(k);function h(n){n.readFlag="1",m(n),k("close",n.id)}return{messageList:C,loadEndStatus:t,loadingMoreStatus:S,onLoadMore:T,noRead:b,getMsgCategory:x,reload:u,clickStar:p,showMessageDetail:h}}},U={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},K={key:1,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},Q={style:{position:"relative"}},j=["innerHTML"],q=["innerHTML"],G=["onClick"];function J(L,k,C,t,S,T){const b=l("a-button"),x=l("a-rate"),d=l("a-tooltip"),g=l("mail-outlined"),i=l("a-avatar"),_=l("a-badge"),u=l("interaction-outlined"),p=l("alert-outlined"),m=l("bell-filled"),h=l("a-list-item-meta"),n=l("a-list-item"),M=l("a-list");return o(),r(M,{"item-layout":"horizontal","data-source":t.messageList},{loadMore:e(()=>[t.messageList&&t.messageList.length>0&&!t.loadEndStatus&&!t.loadingMoreStatus?(o(),c("div",U,[s(b,{onClick:t.onLoadMore},{default:e(()=>[F("\u52A0\u8F7D\u66F4\u591A")]),_:1},8,["onClick"])])):z("",!0),t.messageList&&t.messageList.length>0&&t.loadEndStatus?(o(),c("div",K," \u6CA1\u6709\u66F4\u591A\u4E86 ")):z("",!0)]),renderItem:e(({item:a})=>[s(n,null,{actions:e(()=>[s(x,{value:a.starFlag=="1"?1:0,count:1,onClick:v=>t.clickStar(a),style:{cursor:"pointer"},disabled:""},null,8,["value","onClick"])]),default:e(()=>[s(h,{description:a.createTime},{title:e(()=>[y("div",Q,[y("span",null,D(t.getMsgCategory(a)),1),a.busType=="bpm"?(o(),c("span",{key:0,class:"bpm-cuiban-content",innerHTML:a.msgContent},null,8,j)):(o(),r(d,{key:1},{title:e(()=>[y("div",{innerHTML:a.msgContent},null,8,q)]),default:e(()=>[F(" "+D(a.titile),1)]),_:2},1024)),y("a",{onClick:v=>t.showMessageDetail(a),style:{"margin-left":"16px"}},"\u67E5\u770B\u8BE6\u60C5",8,G)])]),avatar:e(()=>[a.busType=="email"?(o(),c(f,{key:0},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"},title:"\u672A\u8BFB\u6D88\u606F"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm_task"?(o(),c(f,{key:1},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"},title:"\u672A\u8BFB\u6D88\u606F"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm"?(o(),c(f,{key:2},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"},title:"\u672A\u8BFB\u6D88\u606F"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"}})]),_:1}))],64)):(o(),c(f,{key:3},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(m,{style:{"font-size":"16px"},title:"\u672A\u8BFB\u6D88\u606F"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(m,{style:{"font-size":"16px"}})]),_:1}))],64))]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])}const le=B(P,[["render",J],["__scopeId","data-v-61c483dc"]]);export{le as default};
