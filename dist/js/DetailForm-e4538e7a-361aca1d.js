import{p as T,W as te,X as ie,Y as le,g as ne}from"./index-4b015b65.js";import{Q as ae,f as D,g as re,a1 as $,b as oe,W as se,u as de}from"./jeecg-online-vendor-885afdd4.js";import{L as ue,i as pe}from"./useExtendComponent-48d37d9b-a1e8211d.js";import{c as ce}from"./JUpload.vue_vue_type_style_index_0_lang-4988a4ba.js";import"./componentMap-b7e1d2b2.js";import"./index-9d0047d3.js";import"./BasicForm.vue_vue_type_style_index_0_lang-7b6f7701.js";import{aA as me,aB as fe,aC as ge}from"./antd-vue-vendor-a78909e6.js";import"./JAddInput-63b4f847.js";import"./JSelectUser-43dfc55e.js";import"./JSelectDept-3f191bfb.js";import"./JPopup-99598936.js";import"./cron-parser-vendor-658b8fec.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-5217d4dd.js";import"./BasicTable.vue_vue_type_style_index_0_lang-d58c7acd.js";import"./useTable-7249c6ae.js";import"./LinkTableListPiece-34266919-dfff3108.js";import{d as he,k as ye,e as ve,w as Ce,V as F,a5 as p,a6 as m,f as I,a7 as H,F as P,a8 as N,a9 as J,aa as u,am as W,ab as B}from"./vue-bcbaddf9.js";import"./lodash-es-vendor-9b741fb8.js";import"./tinymce-vendor-676f8393.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-9edfd3ae.js";import"./BasicForm-cb329d14.js";import"./BasicModal-5ab8e0d9.js";import"./useWindowSizeFn-e9ba77b6.js";import"./useForm-fd714c19.js";import"./user.api-023a32e5.js";import"./customExpression-62f5afd1.js";import"./BasicTable-96d859ce.js";import"./useFormItem-4c9e708e.js";import"./download-19743191.js";import"./base64Conver-fa2fe1af.js";import"./index-9331928c.js";import"./index-8e8b432a.js";import"./useCountdown-4ab5c024.js";import"./areaDataUtil-661e31ab.js";import"./props-53502c55.js";import"./JSelectBiz-fda4a398.js";import"./index-d096c39b.js";import"./codemirror-vendor-611c4582.js";import"./index-b8c8f01c.js";import"./bem-2f6fe1be.js";import"./props-c7c3390f.js";import"./useContextMenu-790e41ea.js";import"./depart.api-6f5abe31.js";import"./index-ae3db9b9.js";import"./injectionKey-69710956.js";import"./useListPage-761bc624.js";import"./OnlineSelectCascade-c7baf52b-18ff6e90.js";import"./JModalTip-abe1515a-b57dc82d.js";var be=Object.defineProperty,M=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,U=(a,r,s)=>r in a?be(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,Fe=(a,r)=>{for(var s in r||(r={}))we.call(r,s)&&U(a,s,r[s]);if(M)for(var s of M(r))ke.call(r,s)&&U(a,s,r[s]);return a},g=(a,r,s)=>new Promise((y,C)=>{var k=c=>{try{h(s.next(c))}catch(w){C(w)}},b=c=>{try{h(s.throw(c))}catch(w){C(w)}},h=c=>c.done?y(c.value):Promise.resolve(c.value).then(k,b);h((s=s.apply(a,r)).next())});function xe(a){const r={},s=[],y=ye({}),{createMessage:C}=de(),k=ve(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");Ce(()=>a.data,e=>g(this,null,function*(){if(e){let n=a.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield b(i)}catch(o){}}y.value=l}}),{deep:!0,immediate:!0});function b(e){return g(this,null,function*(){let n=a.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield h(e,n);else if(t=="sel_search")i=yield w(e,n);else if(t=="cat_tree")i=yield _(e,n);else if(t=="link_table")i=yield G(e,n);else if(t=="sel_depart")i=yield L(e,n);else if(t=="sel_user")i=yield d(e,n);else if(t=="pca")i=pe(l);else if(t=="link_down")i=yield v(e,n);else if(t=="sel_tree")i=yield O(e,n);else if(t=="switch")i=yield A(e,n);else if(t=="image"||t=="file")i=K(e,n);else if(s.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(i=D(o,l))}return i}return""})}function h(e,n){return g(this,null,function*(){let l=c(e),i=n[e.field];if(!l)return i;let t=re(l);if(t&&t.length>0)return D(t,i);{let o=[];if(r[l]?o=r[l]:o=(yield $(l))||[],o&&o.length>0)return r[l]=o,D(o,i)}return""})}function c(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function w(e,n){return g(this,null,function*(){let l=c(e),i=n[e.field];if(!i)return"";let t=[];return r[l+i]?t=r[l+i]:t=(yield oe.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(r[l+i]=t,t.join(",")):""})}function _(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield te({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function L(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e).store||"id",t=(yield ie({ids:l,primaryKey:i}))||[];if(t&&t.length>0){let o=[];for(let f of t)o.push(f.title);return o.join(",")}return""})}function d(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e),t={[i.store||"username"]:l},o=((yield le(t))||{}).records||[];if(o&&o.length>0){let f=[],j=i.text||"realname";for(let S of o)f.push(S[j]);return f.join(",")}return""})}function x(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=Fe({},i)}catch(i){}return n}function v(e,n){return g(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(r[i])t=r[i];else if(l){let o=JSON.parse(l);if(o){let{table:f,txt:j,key:S,linkField:E}=o,Z=`${f},${j},${S}`;if(t=[...(yield $(Z))||[]],t&&t.length>0&&(r[i]=t,E)){let ee=E.split(",");for(let V of ee)r[V]=t,s.push(V)}}}if(t&&t.length>0){let o=n[i];return D(t,o)}return""})}function O(e,n){return g(this,null,function*(){let{dict:l,field:i}=e,t=[];if(r[i]?t=r[i]:l&&(t=yield $(l)),t&&t.length>0){let o=n[i];return D(t,o)}return""})}function A(e,n){return g(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"是"},{value:t[1],text:"否"},{value:t[0]+"",text:"是"},{value:t[1]+"",text:"否"}],f=n[i];return se(o,f)})}function z(e){return e.span?e.span:a.span}function K(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let f=ne(o)||"";f&&t.push(f)}return t}function Y(e){e&&window.open(e)}function q(e){let n=y.value[e];if(!n||n.length==0){C.warning("无图片!");return}ce({imageList:n})}function Q(e){return e?e.substring(e.lastIndexOf("/")+1):""}const R=["file","image","markdown","umeditor"];function X(e){return R.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function G(e,n){return g(this,null,function*(){let l=n[e.field];return x(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:k,detailFormData:y,getItemSpan:z,handleDownloadFile:Y,handleViewImage:q,getFilename:Q,getLabelWidthClass:X}}const De=he({name:"DetailForm",components:{DownloadOutlined:me,EyeOutlined:fe,PaperClipOutlined:ge,LinkTableCard:ue},props:{span:T.number.def(24),schemas:T.array.def([]),data:T.object.def({}),containerClass:T.string.def("")},setup(a){const{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:C,handleViewImage:k,getFilename:b,getLabelWidthClass:h}=xe(a);return{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:C,handleViewImage:k,getFilename:b,getLabelWidthClass:h}}}),Ie={class:"detail-item"},Oe=["title"],Te=["innerHTML"],_e={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},Le={key:0},je={key:2,class:"item-content"},Se={class:"ant-upload-list ant-upload-list-picture-card"},$e={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Pe={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Ne={class:"ant-upload-list-item-info"},Be=["src"],Ee={class:"ant-upload-list-item-actions"},Ve={key:3,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Je={class:""},We={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Me={class:"ant-upload-list-item-info"},Ue={class:"ant-upload-span"},Ae={class:"ant-upload-text-icon"},ze=["href"],Ke={class:"ant-upload-list-item-card-actions"},Ye={key:4,class:"item-content"};function qe(a,r,s,y,C,k){const b=F("link-table-card"),h=F("download-outlined"),c=F("eye-outlined"),w=F("paper-clip-outlined"),_=F("a-col"),L=F("a-row");return p(),m("div",{class:W(a.formContainerClass)},[I(L,null,{default:H(()=>[(p(!0),m(P,null,N(a.schemas,(d,x)=>(p(),J(_,{key:x,span:a.getItemSpan(d)},{default:H(()=>[u("div",Ie,[u("div",{class:W(["item-title",a.getLabelWidthClass(d)]),title:d.label},B(d.label)+"： ",11,Oe),d.isHtml?(p(),m("div",{key:0,class:"item-content",innerHTML:a.detailFormData[d.field]},null,8,Te)):d.isCard?(p(),m("div",_e,[a.detailFormData[d.field]?(p(),J(b,{key:1,disabled:"",detail:"",value:a.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(p(),m("span",Le))])):d.isImage?(p(),m("div",je,[u("div",Se,[(p(!0),m(P,null,N(a.detailFormData[d.field],v=>(p(),m("div",$e,[u("span",null,[u("div",Pe,[u("div",Ne,[u("img",{src:v,alt:"图片不存在",class:"ant-upload-list-item-image"},null,8,Be)]),u("span",Ee,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"]),I(c,{onClick:O=>a.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(p(),m("div",Ve,[u("div",He,[(p(!0),m(P,null,N(a.detailFormData[d.field],v=>(p(),m("div",Je,[u("span",null,[u("div",We,[u("div",Me,[u("span",Ue,[u("div",Ae,[I(w)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},B(a.getFilename(v)),9,ze),u("span",Ke,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(p(),m("div",Ye,B(a.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}const zt=ae(De,[["render",qe],["__scopeId","data-v-fd1939fd"]]);export{zt as default};
