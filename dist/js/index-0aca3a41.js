var I=(e,l,a)=>new Promise((d,r)=>{var p=o=>{try{c(a.next(o))}catch(i){r(i)}},t=o=>{try{c(a.throw(o))}catch(i){r(i)}},c=o=>o.done?d(o.value):Promise.resolve(o.value).then(p,t);c((a=a.apply(e,l)).next())});import{au as f,D as _,c as O,k as T,aH as N,bL as H,bN as q,bM as A,l as j,_ as z}from"./jeecg-online-vendor-bf2efbcb.js";import{p as G,l as K,as as W,E as Y,g as J}from"./index-fde9c72f.js";import{S as Q}from"./siteSetting-61b5f4a4.js";import{useHeaderSetting as X}from"./useHeaderSetting-cb5b213a.js";import"./index-8cf3aabb.js";import{h as S}from"./header-102ede9c.js";import{r as Z,q as ee}from"./dict.api-6374bb84.js";import{d as te,e as M,k as L,U as u,aV as y,as as oe,f as n,bi as C,ar as U,V as b,at as g,ad as h,ag as ne,F as se}from"./vue-c7e3516e.js";import{cj as ae,ci as P}from"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";const{createMessage:E}=j(),re=te({name:"UserDropdown",components:{Dropdown:ae,Menu:P,MenuItem:f(()=>_(()=>import("./DropMenuItem-048a8102.js"),["js/DropMenuItem-048a8102.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/vue-c7e3516e.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css"])),MenuDivider:P.Divider,LockAction:f(()=>_(()=>import("./LockModal-c456d65e.js"),["js/LockModal-c456d65e.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/vue-c7e3516e.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/index-8cf3aabb.js","js/BasicModal-ff8f2086.js","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/BasicForm-83ba9c88.js","js/BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js","js/componentMap-a6d21ad6.js","js/useFormItem-4a12ff45.js","js/JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js","assets/JUpload.ffbeea34.css","js/download-c8889ed9.js","js/base64Conver-4e359726.js","js/index-ee020524.js","assets/index.399aa0e3.css","js/index-53e807bd.js","js/useCountdown-473e4dcc.js","assets/index.15cc10f8.css","js/JAddInput-2cbbbde9.js","js/areaDataUtil-b2642a1f.js","js/useSelectBiz-c744cf20.js","js/props-8e8dbf4f.js","js/index-d4783a30.js","js/bem-deccd0b6.js","js/props-c3781b9d.js","js/useContextMenu-c0be0b5c.js","assets/useContextMenu.6fcaad79.css","assets/index.a95e0833.css","js/useTreeBiz-faf9875a.js","js/index-63ed9c18.js","js/depart.api-25dc3d39.js","assets/JAddInput.b4406d8f.css","js/index-ed4be6fa.js","assets/index.600d2c21.css","assets/componentMap.524c5264.css","assets/BasicForm.384f4697.css","js/useForm-fa63344e.js","js/lock-5f9e454f.js","js/header-102ede9c.js","assets/LockModal.aba0abca.css"])),DepartSelect:f(()=>_(()=>import("./DepartSelect-4006b942.js"),["js/DepartSelect-4006b942.js","js/index-8cf3aabb.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/vue-c7e3516e.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/BasicModal-ff8f2086.js","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/depart.api-25dc3d39.js","js/tenant.api-de8dd33d.js","assets/DepartSelect.335dfc8f.css"])),UpdatePassword:f(()=>_(()=>import("./UpdatePassword-ae1bf139.js"),["js/UpdatePassword-ae1bf139.js","js/validator-4a4216c7.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/vue-c7e3516e.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/user.api-dd1b3184.js","js/index-8cf3aabb.js","js/BasicModal-ff8f2086.js","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/BasicForm-83ba9c88.js","js/BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js","js/componentMap-a6d21ad6.js","js/useFormItem-4a12ff45.js","js/JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js","assets/JUpload.ffbeea34.css","js/download-c8889ed9.js","js/base64Conver-4e359726.js","js/index-ee020524.js","assets/index.399aa0e3.css","js/index-53e807bd.js","js/useCountdown-473e4dcc.js","assets/index.15cc10f8.css","js/JAddInput-2cbbbde9.js","js/areaDataUtil-b2642a1f.js","js/useSelectBiz-c744cf20.js","js/props-8e8dbf4f.js","js/index-d4783a30.js","js/bem-deccd0b6.js","js/props-c3781b9d.js","js/useContextMenu-c0be0b5c.js","assets/useContextMenu.6fcaad79.css","assets/index.a95e0833.css","js/useTreeBiz-faf9875a.js","js/index-63ed9c18.js","js/depart.api-25dc3d39.js","assets/JAddInput.b4406d8f.css","js/index-ed4be6fa.js","assets/index.600d2c21.css","assets/componentMap.524c5264.css","assets/BasicForm.384f4697.css","js/useForm-fa63344e.js"]))},props:{theme:G.oneOf(["dark","light"])},setup(){const{prefixCls:e}=K("header-user-dropdown"),{t:l}=T(),{getShowDoc:a,getUseLockPage:d}=X(),r=O(),p=W(),t=M(()=>{const{realname:s="",avatar:D,desc:V}=r.getUserInfo||{};return{realname:s,avatar:D||S,desc:V}}),c=M(()=>{let{avatar:s}=t.value;return s==S?s:J(s)}),[o,{openModal:i}]=Y(),m=L();function w(){i(!0)}function k(){r.confirmLoginOut()}function R(){N(Q)}function B(){return I(this,null,function*(){if((yield Z()).success){const D=yield ee();H(A),q(A,D.result),E.success("\u5237\u65B0\u7F13\u5B58\u5B8C\u6210\uFF01")}else E.error("\u5237\u65B0\u7F13\u5B58\u5931\u8D25\uFF01")})}function $(){m.value.show()}const v=L();function x(){v.value.show(r.getUserInfo.username)}function F(s){switch(s.key){case"logout":k();break;case"doc":R();break;case"lock":w();break;case"cache":B();break;case"depart":$();break;case"password":x();break;case"account":p("/system/usersetting");break}}return{prefixCls:e,t:l,getUserInfo:t,getAvatarUrl:c,handleMenuClick:F,getShowDoc:a,register:o,getUseLockPage:d,loginSelectRef:m,updatePasswordRef:v}}});const ce=["src"];function ie(e,l,a,d,r,p){const t=u("MenuItem"),c=u("MenuDivider"),o=u("Menu"),i=u("Dropdown"),m=u("LockAction"),w=u("DepartSelect"),k=u("UpdatePassword");return y(),oe(se,null,[n(i,{placement:"bottomLeft",overlayClassName:`${e.prefixCls}-dropdown-overlay`},{overlay:C(()=>[n(o,{onClick:e.handleMenuClick},{default:C(()=>[e.getShowDoc?(y(),U(t,{key:"doc",text:e.t("layout.header.dropdownItemDoc"),icon:"ion:document-text-outline"},null,8,["text"])):b("",!0),e.getShowDoc?(y(),U(c,{key:1})):b("",!0),n(t,{key:"account",text:e.t("layout.header.dropdownItemSwitchAccount"),icon:"ant-design:setting-outlined"},null,8,["text"]),n(t,{key:"password",text:e.t("layout.header.dropdownItemSwitchPassword"),icon:"ant-design:edit-outlined"},null,8,["text"]),n(t,{key:"depart",text:e.t("layout.header.dropdownItemSwitchDepart"),icon:"ant-design:cluster-outlined"},null,8,["text"]),n(t,{key:"cache",text:e.t("layout.header.dropdownItemRefreshCache"),icon:"ion:sync-outline"},null,8,["text"]),n(t,{key:"logout",text:e.t("layout.header.dropdownItemLoginOut"),icon:"ion:power-outline"},null,8,["text"])]),_:1},8,["onClick"])]),default:C(()=>[g("span",{class:h([[e.prefixCls,`${e.prefixCls}--${e.theme}`],"flex"])},[g("img",{class:h(`${e.prefixCls}__header`),src:e.getAvatarUrl},null,10,ce),g("span",{class:h(`${e.prefixCls}__info hidden md:block`)},[g("span",{class:h([`${e.prefixCls}__name  `,"truncate"])},ne(e.getUserInfo.realname),3)],2)],2)]),_:1},8,["overlayClassName"]),n(m,{onRegister:e.register},null,8,["onRegister"]),n(w,{ref:"loginSelectRef"},null,512),n(k,{ref:"updatePasswordRef"},null,512)],64)}const Me=z(re,[["render",ie]]);export{Me as default};
