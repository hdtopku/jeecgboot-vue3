var d=(t,o,e)=>new Promise((c,r)=>{var l=n=>{try{u(e.next(n))}catch(a){r(a)}},s=n=>{try{u(e.throw(n))}catch(a){r(a)}},u=n=>n.done?c(n.value):Promise.resolve(n.value).then(l,s);u((e=e.apply(t,o)).next())});import{q as $,S as b,D as m,w as C}from"./jeecg-online-vendor-885afdd4.js";import{u as w}from"./useCountdown-4ab5c024.js";import{ab as B}from"./antd-vue-vendor-a78909e6.js";import{d as S,k as h,e as z,u as f,s as F,V as i,a5 as g,a9 as v,a7 as p,E as I,ab as k,ag as y,al as A,a8 as N,R as T,ae as D,af as P,f as R}from"./vue-bcbaddf9.js";import{m as V}from"./index-4b015b65.js";import{useRuleFormItem as j}from"./useFormItem-4c9e708e.js";const E={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},O=S({name:"CountButton",components:{Button:B},props:E,setup(t){const o=h(!1),{currentCount:e,isStart:c,start:r,reset:l}=w(t.count),{t:s}=$(),u=z(()=>f(c)?s("component.countdown.sendText",[f(e)]):s("component.countdown.normalText"));F(()=>{t.value===void 0&&l()});function n(){return d(this,null,function*(){const{beforeStartFunc:a}=t;if(a&&b(a)){o.value=!0;try{(yield a())&&r()}finally{o.value=!1}}else r()})}return{handleStart:n,currentCount:e,loading:o,getButtonText:u,isStart:c}}});function q(t,o,e,c,r,l){const s=i("Button");return g(),v(s,y(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:p(()=>[I(k(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}const _=m(O,[["render",q]]),L={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},G=S({name:"CountDownInput",components:{CountButton:_},inheritAttrs:!1,props:L,setup(t){const{prefixCls:o}=V("countdown-input"),[e]=j(t);return{prefixCls:o,state:e}}});function H(t,o,e,c,r,l){const s=i("CountButton"),u=i("a-input");return g(),v(u,y(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),A({addonAfter:p(()=>[R(s,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[N(Object.keys(t.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(a=>[T(t.$slots,n,D(P(a||{})))])}))]),1040,["class","size","value"])}const J=m(G,[["render",H]]),x=C(J);C(_);export{x as C};
