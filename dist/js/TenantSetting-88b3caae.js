var oe=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var q=(r,l,i)=>l in r?oe(r,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[l]=i,R=(r,l)=>{for(var i in l||(l={}))ie.call(l,i)&&q(r,i,l[i]);if(L)for(var i of L(l))le.call(l,i)&&q(r,i,l[i]);return r},j=(r,l)=>se(r,ae(l));var M=(r,l,i)=>new Promise((f,C)=>{var z=h=>{try{T(i.next(h))}catch(N){C(N)}},_=h=>{try{T(i.throw(h))}catch(N){C(N)}},T=h=>h.done?f(h.value):Promise.resolve(h.value).then(z,_);T((i=i.apply(r,l)).next())});import{d as J,k as v,o as ce,U as m,a5 as c,a6 as u,aa as e,F as G,a8 as de,ab as g,B as y,E as S,f as n,a9 as A,v as re,A as ue,V as H,a7 as d,u as k,ap as _e,aq as pe}from"./vue-705b7309.js";import{c as fe,d as ve,e as ge,f as me}from"./UserSetting.api-94ba4641.js";import{s as he,u as xe,C as we}from"./jeecg-online-vendor-88d7be55.js";import{a as ye}from"./index-4802827d.js";import{ab as ke}from"./antd-vue-vendor-cce59da1.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./index-b6e19f4a.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-60c6a8c7.js";import"./index-378f1f74.js";import"./BasicModal-93f24ffc.js";import"./useWindowSizeFn-b9945b41.js";const a=r=>(_e("data-v-a81d2eeb"),r=r(),pe(),r),Ce={class:"tenant-padding"},Te=a(()=>e("div",{class:"my-tenant"},"我的租户",-1)),be={key:0,class:"tenant-list"},Se=["onClick"],ze={class:"tenant-title"},Ne={class:"item-left"},Ue={class:"item-name"},Ie=["onClick"],Pe={class:"item-right"},Be={key:0},Oe=a(()=>e("span",{class:"examine"},"待审核",-1)),Ve=["onClick"],$e={key:1,style:{width:"75px"}},De={style:{"margin-left":"24px"}},Me={class:"item-content"},Ae={class:"content-box"},Ee=a(()=>e("div",{class:"content-name"}," 组织名片 ",-1)),Fe={class:"content-desc"},Le={class:"flex-flow"},qe=a(()=>e("div",{class:"content-des-text"},"姓名",-1)),Re={style:{"font-size":"13px",color:"#000000"}},je={class:"flex-flow"},Ge=a(()=>e("div",{class:"content-des-text"},"部门",-1)),He={style:{"font-size":"13px"}},Je={class:"flex-flow"},Ke=a(()=>e("div",{class:"content-des-text"},"职业",-1)),Qe={style:{"font-size":"13px"}},We={class:"footer-box"},Xe=["onClick"],Ye=a(()=>e("span",null,"查看租户名片",-1)),Ze={key:1,class:"font-color9e flex-flow margin-right40 font-size13"},et=a(()=>e("span",null,"查看租户名片",-1)),tt=["onClick"],nt=a(()=>e("span",null,"租户管理？",-1)),ot={key:3,class:"font-color9e flex-flow margin-right40 font-size13"},st=a(()=>e("span",null,"租户管理？",-1)),at=["onClick"],it=a(()=>e("span",null,"申请角色权限？",-1)),lt={key:5,class:"font-color9e flex-flow margin-right40 font-size13"},ct=a(()=>e("span",null,"申请角色权限？",-1)),dt=["onClick"],rt=a(()=>e("span",null,"我的汇报关系？",-1)),ut={key:7,class:"font-color9e flex-flow margin-right40 font-size13"},_t=a(()=>e("span",null,"我的汇报关系？",-1)),pt=["onClick"],ft=a(()=>e("span",null,"退出租户",-1)),vt={key:9,class:"font-color9e flex-flow margin-right40 font-size13"},gt=a(()=>e("span",null,"退出租户",-1)),mt=a(()=>e("div",{style:{"font-size":"17px","font-weight":"700"}},"查看名片",-1)),ht=a(()=>e("div",{style:{color:"#9e9e9e","margin-top":"10px","font-size":"13px"}}," 名片是您在该组织下的个人信息，只在本组织中展示。 ",-1)),xt={style:{"margin-top":"24px","font-size":"13px",padding:"0 24px"}},wt=a(()=>e("div",{class:"font-color75"},"姓名",-1)),yt={class:"margin-top6 margin-bottom-16"},kt=a(()=>e("div",null,"部门",-1)),Ct={class:"margin-top6 margin-bottom-16"},Tt=a(()=>e("div",null,"职位",-1)),bt={class:"margin-top6 margin-bottom-16"},St=a(()=>e("div",null,"工作地点",-1)),zt={class:"margin-top6 margin-bottom-16"},Nt=a(()=>e("div",null,"工号",-1)),Ut={class:"margin-top6 margin-bottom-16"},It={class:"cancellation"},Pt={style:{padding:"20px"}},Bt=a(()=>e("div",{class:"change-owen"}," 只有变更拥有着之后,才能退出 ",-1)),Ot=J({name:"tenant-setting"}),Vt=J(j(R({},Ot),{setup(r){const l=v([]),i=he(),{createMessage:f}=xe();v([]);const C=v(!1),z=v([]),_=v({realname:i.getUserInfo.realname,workNo:i.getUserInfo.workNo,orgCodeTxt:i.getUserInfo.orgCodeTxt,postText:i.getUserInfo.postText});function T(){return M(this,null,function*(){fe({userTenantStatus:"1,3"}).then(o=>{o.success?l.value=o.result:l.value=[]})})}function h(o){const s=document.createElement("input");s.setAttribute("value",o),document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),f.success("复制成功")}function N(o){ke.confirm({title:"取消申请",content:"是否取消申请",okText:"确认",cancelText:"取消",onOk:()=>{ve({tenantId:o}).then(s=>{s.success?(f.success("取消申请成功"),T()):f.warning(s.message)}).catch(s=>{f.warning(s.message)})}})}function K(o){o.show?o.show=!1:o.show=!0}function U(o,s){z.value=s,o==="editTenant"?C.value=!0:o==="exitTenant"&&(x.value={loginPassword:"",tenantName:""},I.value=!0,b.value=!0,P.value=s)}const b=v(!1),x=v({}),P=v({}),I=v(!0),B=v(""),$=v(!1);function Q(){let o=k(P).name,s=k(x).tenantName;o===s?I.value=!1:I.value=!0}function W(){return M(this,null,function*(){if(!k(x).loginPassword){f.warning("请输入登录密码");return}yield ge({id:k(P).tenantUserId,loginPassword:k(x).loginPassword}).then(o=>{o.success?(f.success(o.message),b.value=!1,window.location.reload()):o.message==="assignedOwen"?($.value=!0,b.value=!1):f.warning(o.message)}).catch(o=>{f.warning(o.message)})})}function X(){b.value=!1,I.value=!0}function Y(){if(!k(B)){f.warning("请选择变更拥有者");return}me({userId:k(B)}).then(o=>{o.success?(f.success(o.message),window.location.reload()):f.warning(o.message)})}return ce(()=>{T()}),(o,s)=>{const p=m("Icon"),Z=m("a-empty"),D=m("a-modal"),O=m("a-col"),ee=m("a-input"),V=m("a-row"),E=m("a-form-item"),te=m("a-input-password"),ne=m("a-form"),F=m("a-button");return c(),u(G,null,[e("div",Ce,[Te,l.value.length>0?(c(),u("div",be,[(c(!0),u(G,null,de(l.value,t=>(c(),u("div",{class:"tenant-list-item",onClick:w=>K(t)},[e("div",ze,[e("div",Ne,[e("div",Ue,g(t.name),1),e("div",{class:"item-house",onClick:y(w=>h(t.houseNumber),["stop"])},[e("span",null,[S(" 组织门牌号："+g(t.houseNumber)+" ",1),n(p,{icon:"ant-design:copy-outlined",style:{"font-size":"13px","margin-left":"2px"}})])],8,Ie)]),e("div",Pe,[t.userTenantStatus==="3"?(c(),u("span",Be,[Oe,e("span",{class:"pointer cancel-apply",onClick:y(w=>N(t.tenantUserId),["stop"])},"取消申请",8,Ve)])):(c(),u("div",$e)),e("span",De,[t.show?(c(),A(p,{key:0,icon:"ant-design:down-outlined",style:{"font-size":"13px",color:"#707070"}})):(c(),A(p,{key:1,icon:"ant-design:right-outlined",style:{"font-size":"13px",color:"#707070"}}))])])]),re(e("div",Me,[e("div",Ae,[Ee,e("div",Fe,[e("div",Le,[qe,e("div",Re,g(_.value.realname),1)]),e("div",je,[Ge,e("div",He,g(_.value.orgCodeTxt?_.value.orgCodeTxt:"未填写"),1)]),e("div",Je,[Ke,e("div",Qe,g(_.value.postText?_.value.postText:"未填写"),1)])])]),e("div",We,[t.userTenantStatus!=="3"?(c(),u("span",{key:0,onClick:y(w=>U("editTenant",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[n(p,{icon:"ant-design:edit-outlined",class:"footer-icon"}),Ye],8,Xe)):(c(),u("span",Ze,[n(p,{icon:"ant-design:edit-outlined",class:"footer-icon"}),et])),t.userTenantStatus!=="3"&&t.auth?(c(),u("span",{key:2,onClick:y(w=>U("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[n(p,{icon:"ant-design:tool-outlined",class:"footer-icon"}),nt],8,tt)):t.userTenantStatus==="3"&&t.auth?(c(),u("span",ot,[n(p,{icon:"ant-design:tool-outlined",class:"footer-icon"}),st])):H("",!0),t.userTenantStatus!=="3"&&!t.auth?(c(),u("span",{key:4,onClick:y(w=>U("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[n(p,{icon:"ant-design:tool-outlined",class:"footer-icon"}),it],8,at)):t.userTenantStatus==="3"&&!t.auth?(c(),u("span",lt,[n(p,{icon:"ant-design:tool-outlined",class:"footer-icon"}),ct])):H("",!0),t.userTenantStatus!=="3"?(c(),u("span",{key:6,onClick:y(w=>U("tenantSetting",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[n(p,{icon:"ant-design:gold-outlined",class:"footer-icon"}),rt],8,dt)):(c(),u("span",ut,[n(p,{icon:"ant-design:gold-outlined",class:"footer-icon"}),_t])),t.userTenantStatus!=="3"?(c(),u("span",{key:8,onClick:y(w=>U("exitTenant",t),["stop"]),class:"font-color333 flex-flow margin-right40 font-size13 pointer"},[n(p,{icon:"ant-design:export-outlined",class:"footer-icon"}),ft],8,pt)):(c(),u("span",vt,[n(p,{icon:"ant-design:export-outlined",class:"footer-icon"}),gt]))])],512),[[ue,t.show]])],8,Se))),256))])):(c(),A(Z,{key:1,description:"暂无数据",style:{position:"relative",top:"50px"}}))]),n(D,{visible:C.value,"onUpdate:visible":s[0]||(s[0]=t=>C.value=t),width:"400px",wrapClassName:"edit-tenant-setting"},{title:d(()=>[mt,ht]),default:d(()=>[e("div",xt,[wt,e("div",yt,g(_.value.realname),1),kt,e("div",Ct,g(_.value.orgCodeTxt?_.value.orgCodeTxt:"未填写"),1),Tt,e("div",bt,g(_.value.postText?_.value.postText:"未填写"),1),St,e("div",zt,g(z.value.workPlace?z.value.workPlace:"未填写"),1),Nt,e("div",Ut,g(_.value.workNo?_.value.workNo:"未填写"),1)])]),_:1},8,["visible"]),n(D,{visible:b.value,"onUpdate:visible":s[3]||(s[3]=t=>b.value=t),width:"800","destroy-on-close":""},{title:d(()=>[e("div",It,[n(p,{icon:"ant-design:warning-outlined",style:{"font-size":"20px",color:"red"}}),S(" 退出租户 "+g(P.value.name),1)])]),footer:d(()=>[n(F,{type:"primary",onClick:W,disabled:I.value},{default:d(()=>[S("确定")]),_:1},8,["disabled"]),n(F,{onClick:X},{default:d(()=>[S("取消")]),_:1})]),default:d(()=>[n(ne,{model:x.value,ref:"cancelTenantRef"},{default:d(()=>[n(E,{name:"tenantName"},{default:d(()=>[n(V,{span:24,style:{padding:"20px 20px 0","font-size":"13px"}},{default:d(()=>[n(O,{span:24},{default:d(()=>[S(" 请输入租户名称 ")]),_:1}),n(O,{span:24,style:{"margin-top":"10px"}},{default:d(()=>[n(ee,{value:x.value.tenantName,"onUpdate:value":s[1]||(s[1]=t=>x.value.tenantName=t),onChange:Q},null,8,["value"])]),_:1})]),_:1})]),_:1}),n(E,{name:"loginPassword"},{default:d(()=>[n(V,{span:24,style:{padding:"0 20px","font-size":"13px"}},{default:d(()=>[n(O,{span:24},{default:d(()=>[S(" 请输入您的登录密码 ")]),_:1}),n(O,{span:24,style:{"margin-top":"10px"}},{default:d(()=>[n(te,{value:x.value.loginPassword,"onUpdate:value":s[2]||(s[2]=t=>x.value.loginPassword=t)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),n(D,{title:"变更拥有者",visible:$.value,"onUpdate:visible":s[5]||(s[5]=t=>$.value=t),width:"800","destroy-on-close":"",cancelButtonProps:{display:"none"},onOk:Y},{default:d(()=>[e("div",Pt,[n(V,{span:24},{default:d(()=>[Bt]),_:1}),n(V,{span:24,style:{"margin-top":"10px"}},{default:d(()=>[n(ye,{value:B.value,"onUpdate:value":s[4]||(s[4]=t=>B.value=t),izExcludeMy:""},null,8,["value"])]),_:1})])]),_:1},8,["visible"])],64)}}}));const Wt=we(Vt,[["__scopeId","data-v-a81d2eeb"]]);export{Wt as default};
