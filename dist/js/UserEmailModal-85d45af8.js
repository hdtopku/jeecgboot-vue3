var x=Object.defineProperty,V=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var b=(s,e,a)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,f=(s,e)=>{for(var a in e||(e={}))I.call(e,a)&&b(s,a,e[a]);if(C)for(var a of C(e))N.call(e,a)&&b(s,a,e[a]);return s},h=(s,e)=>V(s,z(e));var _=(s,e,a)=>new Promise((c,o)=>{var l=t=>{try{u(a.next(t))}catch(m){o(m)}},d=t=>{try{u(a.throw(t))}catch(m){o(m)}},u=t=>t.done?c(t.value):Promise.resolve(t.value).then(l,d);u((a=a.apply(s,e)).next())});import{d as k,r as O,l as R,V as p,a7 as P,ac as T,aa as n,f as i,E as U,af as j,u as q}from"./vue-ebecda47.js";import{B as A}from"./BasicModal-7e6e7ae9.js";import{u as G,C as L,b9 as $,bp as D}from"./jeecg-online-vendor-cfb58502.js";import"./index-e91e8b28.js";import{rules as H}from"./validator-fb5fa821.js";import{c2 as J}from"./antd-vue-vendor-b75e8c06.js";import{E as K}from"./index-85cfc899.js";import{a as Q}from"./UserSetting.api-9a2cb8de.js";import"./useWindowSizeFn-50bd5ea0.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-cd7703c8.js";import"./vxe-table-vendor-4aae63bf.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./user.api-729c8827.js";const W=k({name:"user-replace-email-modal"}),fe=k(h(f({},W),{emits:["register","success"],setup(s,{emit:e}){const a=G(),{createMessage:c}=L(),o=O({email:""}),l=R(),d={email:[f({},H.duplicateCheckRule("sys_user","email",o,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]},u=J.useForm,t=R(""),[m,{setModalProps:y,closeModal:E}]=K(r=>_(this,null,function*(){l.value.resetFields(),l.value.clearValidate(),y({confirmLoading:!1}),t.value="修改邮箱",r.record.smscode="",Object.assign(o,r.record)}));function X(){return $({mobile:o.phone,smsmode:D.REGISTER})}function M(){return _(this,null,function*(){yield l.value.validateFields(),Q(o).then(r=>{r.success?(c.success("修改邮箱成功"),e("success"),E()):c.warning(r.message)})})}return(r,g)=>{const w=p("a-input"),v=p("a-form-item"),B=p("a-button"),F=p("a-form");return P(),T(A,j(r.$attrs,{onRegister:q(m),width:"500px",title:t.value,showCancelBtn:!1,showOkBtn:!1}),{default:n(()=>[i(F,{class:"antd-modal-form",ref_key:"formRef",ref:l,model:o,rules:d},{default:n(()=>[i(v,{name:"email"},{default:n(()=>[i(w,{size:"large",value:o.email,"onUpdate:value":g[0]||(g[0]=S=>o.email=S),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),i(v,null,{default:n(()=>[i(B,{size:"large",type:"primary",block:"",onClick:M},{default:n(()=>[U(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{fe as default};
