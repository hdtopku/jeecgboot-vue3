import{_ as Q}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-2385555e.js";import{s as I,q as w,Q as y,R as L}from"./jeecg-online-vendor-e26fc0e5.js";import{G as T,L as q}from"./index-ea73cedc.js";import{Q as B}from"./index-bacaaa22.js";import{cn as V,cm as E}from"./antd-vue-vendor-cce59da1.js";import{d as N,k as f,e as g,u as t,w as b,a5 as D,a6 as F,f as s,aa as j,a7 as _,E as p,ab as v,F as R,V as U}from"./vue-705b7309.js";const z={class:"enter-x min-w-64 min-h-64"},M=N({__name:"QrCodeForm",setup(G){const c=f("");let a;const{t:n}=w(),k=I(),{handleBackLogin:C,getLoginState:h}=T(),o=f("0"),i=g(()=>t(h)===q.QR_CODE),x=g(()=>t(o)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){o.value="0",y().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){L({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(a)),r.success&&(o.value="2",clearInterval(a),setTimeout(()=>{k.qrCodeLogin(d)},500))})}function S(e){u(e),m(),a=setInterval(()=>{u(e)},1500)}function m(){a&&clearInterval(a)}return b(i,e=>{e?l():m()}),(e,r)=>i.value?(D(),F(R,{key:0},[s(Q,{class:"enter-x"}),j("div",z,[s(t(B),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),s(t(V),{class:"enter-x"},{default:_(()=>[p(v(x.value),1)]),_:1}),s(t(E),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:_(()=>[p(v(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):U("",!0)}});export{M as _};
