var v=(g,r,c)=>new Promise((o,l)=>{var d=t=>{try{u(c.next(t))}catch(p){l(p)}},m=t=>{try{u(c.throw(t))}catch(p){l(p)}},u=t=>t.done?o(t.value):Promise.resolve(t.value).then(d,m);u((c=c.apply(g,r)).next())});import{b as h,u as D}from"./jeecg-online-vendor-e26fc0e5.js";import{J as n}from"./index-ea73cedc.js";import{d as T,r as w,k as f,U as S,a5 as z,a9 as V,a7 as J,f as B}from"./vue-705b7309.js";import"./antd-vue-vendor-cce59da1.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-cc7eb3b4.js";const j=T({__name:"JSBCDemo",setup(g){const{createMessage:r}=D(),c=w({btn:["add","save","remove","clearSelection"]}),o=f(!1),l=w({current:1,pageSize:200,pageSizeOptions:["10","20","30","100","200"],total:0}),d=f([]),m=f([]),u=f([{key:"num",title:"序号",width:80,type:n.normal},{key:"ship_name",title:"船名",width:180,type:n.input},{key:"call",title:"呼叫",width:80,type:n.input},{key:"len",title:"长",width:80,type:n.input},{key:"ton",title:"吨",width:120,defaultValue:233,type:n.input},{key:"payer",title:"付款方",width:120,defaultValue:"张三",type:n.input},{key:"count",title:"数",width:40,type:n.normal},{key:"company",title:"公司",minWidth:180,type:n.input},{key:"trend",title:"动向",width:120,type:n.input}]);t();function t(){return v(this,null,function*(){o.value=!0,yield h.get({url:"/mock/vxe/getData",params:{pageNo:l.current,pageSize:l.pageSize}}).then(e=>{l.total=e.total,m.value=e.records,d.value=[]}).finally(()=>{o.value=!1})})}function p({$table:e,target:a}){e.validate().then(i=>{if(!i){let s=a.getTableData();a.getNewData(),a.getDeleteData(),o.value=!0,h.post({url:"/mock/vxe/immediateSaveAll",params:s}).then(()=>{r.success("保存成功！")}).finally(()=>{o.value=!1})}})}function k(e){e.deleteRows.map(a=>a.id),o.value=!0,window.setTimeout(()=>{o.value=!1,r.success("删除成功"),e.confirmRemove()},1e3)}function _(e){let{$table:a,row:i,column:s}=e,y=s.property;a.isUpdateByRow(i,y)&&a.validate(i).then(R=>{if(!R){let x=r.loading(`正在保存"${s.title}"`,0);h.put({url:"/mock/vxe/immediateSaveRow",params:i}).then(N=>{r.success(`"${s.title}"保存成功！`),a.reloadRow(i,null,y)}).finally(()=>{x()})}})}function b(e){l.current=e.current,l.pageSize=e.pageSize,t()}function C(e){d.value=e.selectedRows}return(e,a)=>{const i=S("JVxeTable"),s=S("a-card");return z(),V(s,{title:"即时保存示例",bordered:!1},{default:J(()=>[B(i,{toolbar:"",toolbarConfig:c,rowNumber:"",rowSelection:"",keepSource:"",asyncRemove:"",height:340,loading:o.value,columns:u.value,dataSource:m.value,pagination:l,onSave:p,onRemoved:k,onEditClosed:_,onPageChange:b,onSelectRowChange:C},null,8,["toolbarConfig","loading","columns","dataSource","pagination"])]),_:1})}}});export{j as default};
