var C=Object.defineProperty;var F=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var b=(e,t,r)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&b(e,r,t[r]);if(F)for(var r of F(t))J.call(t,r)&&b(e,r,t[r]);return e};var f=(e,t,r)=>new Promise((p,c)=>{var d=u=>{try{n(r.next(u))}catch(l){c(l)}},m=u=>{try{n(r.throw(u))}catch(l){c(l)}},n=u=>u.done?p(u.value):Promise.resolve(u.value).then(d,m);n((r=r.apply(e,t)).next())});import{B as z}from"./index-8cf3aabb.js";import{B as x}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as w}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{A as q}from"./index-fde9c72f.js";import{render as B}from"./renderUtils-76d1e990.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import{a9 as T}from"./antd-vue-vendor-1561c1ba.js";import{ad as s,b7 as I}from"./jeecg-online-vendor-bf2efbcb.js";import{J as A}from"./validator-113a6fea.js";import{d as _,k as v,u as a,e as S,aV as D,ar as j,bi as P,f as M,aQ as N}from"./vue-c7e3516e.js";const te=[{title:"\u4EFB\u52A1\u7C7B\u540D",dataIndex:"jobClassName",width:200,align:"left"},{title:"Cron\u8868\u8FBE\u5F0F",dataIndex:"cronExpression",width:200},{title:"\u53C2\u6570",dataIndex:"parameter",width:200},{title:"\u63CF\u8FF0",dataIndex:"description",width:200},{title:"\u72B6\u6001",dataIndex:"status",width:100,customRender:({text:e})=>{const t=e=="0"?"green":e=="-1"?"red":"gray";return B.renderTag(B.renderDict(e,"quartz_status"),t)}}],re=[{field:"jobClassName",label:"\u4EFB\u52A1\u7C7B\u540D",component:"Input",colProps:{span:8}},{field:"status",label:"\u4EFB\u52A1\u72B6\u6001",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",stringToNumber:!0},colProps:{span:8}}],U=[{field:"id",label:"id",component:"Input",show:!1},{field:"jobClassName",label:"\u4EFB\u52A1\u7C7B\u540D",component:"Input",required:!0},{field:"cronExpression",label:"Cron\u8868\u8FBE\u5F0F",component:"JEasyCron",defaultValue:"* * * * * ? *",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Cron\u8868\u8FBE\u5F0F"},{validator:A}]},{field:"paramterType",label:"\u53C2\u6570\u7C7B\u578B",component:"Select",defaultValue:"string",componentProps:{options:[{label:"\u5B57\u7B26\u4E32",value:"string"},{label:"JSON\u5BF9\u8C61",value:"json"}]}},{field:"parameter",label:"\u53C2\u6570",component:"InputTextArea",ifShow:({values:e})=>e.paramterType=="string"},{field:"parameter",label:"\u53C2\u6570",component:"JAddInput",helpMessage:"\u952E\u503C\u5BF9\u5F62\u5F0F\u586B\u5199",ifShow:({values:e})=>e.paramterType=="json"},{field:"status",label:"\u72B6\u6001",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",type:"radioButton",stringToNumber:!0,dropdownStyle:{maxHeight:"6vh"}}},{field:"description",label:"\u63CF\u8FF0",component:"InputTextArea"}],ue="/sys/quartzJob/exportXls",oe="/sys/quartzJob/importExcel",se=e=>s.get({url:"/sys/quartzJob/list",params:e}),k=(e,t)=>{let r=t?"/sys/quartzJob/edit":"/sys/quartzJob/add";return s.post({url:r,params:e})},ae=(e,t)=>s.delete({url:"/sys/quartzJob/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),ne=(e,t)=>s.get({url:"/sys/quartzJob/resume",params:e}).then(()=>{t()}),le=(e,t)=>s.get({url:"/sys/quartzJob/pause",params:e}).then(()=>{t()}),ie=(e,t)=>s.get({url:"/sys/quartzJob/execute",params:e}).then(()=>{t()}),ce=(e,t)=>{T.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>s.delete({url:"/sys/quartzJob/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},pe=_({__name:"QuartzModal",emits:["register","success"],setup(e,{emit:t}){const r=v(!0),[p,{resetFields:c,setFieldsValue:d,validate:m}]=w({schemas:U,showActionButtonGroup:!1}),[n,{setModalProps:u,closeModal:l}]=q(o=>f(this,null,function*(){var i;if(yield c(),u({confirmLoading:!1}),r.value=!!(o!=null&&o.isUpdate),a(r)){try{o.record.paramterType=I((i=o==null?void 0:o.record)==null?void 0:i.parameter)?"json":"string"}catch(Q){}yield d(g({},o.record))}})),h=S(()=>a(r)?"\u7F16\u8F91\u4EFB\u52A1":"\u65B0\u589E\u4EFB\u52A1");function y(o){return f(this,null,function*(){try{let i=yield m();u({confirmLoading:!0}),yield k(i,r.value),l(),t("success")}finally{u({confirmLoading:!1})}})}return(o,i)=>(D(),j(a(z),N(o.$attrs,{onRegister:a(n),title:h.value,onOk:y,width:"40%"}),{default:P(()=>[M(a(x),{onRegister:a(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{pe as _,ue as a,oe as b,te as c,ae as d,ie as e,ce as f,se as g,le as p,ne as r,re as s};
