var H=Object.defineProperty,J=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var F=(n,o,e)=>o in n?H(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,y=(n,o)=>{for(var e in o||(o={}))X.call(o,e)&&F(n,e,o[e]);if(x)for(var e of x(o))Y.call(o,e)&&F(n,e,o[e]);return n},A=(n,o)=>J(n,Q(o));var w=(n,o,e)=>new Promise((d,m)=>{var _=l=>{try{r(e.next(l))}catch(u){m(u)}},g=l=>{try{r(e.throw(l))}catch(u){m(u)}},r=l=>l.done?d(l.value):Promise.resolve(l.value).then(_,g);r((e=e.apply(n,o)).next())});import Z from"./BasicTable-04058a09.js";import{T as ee}from"./componentMap-90ab712d.js";import"./BasicTable.vue_vue_type_style_index_0_lang-3c8b8bcc.js";import"./useTable-7c8820b4.js";import"./index-a882524d.js";import{a as te}from"./index-1b5a8dbb.js";import{useListPage as oe}from"./useListPage-8d85dabf.js";import{_ as ne}from"./DepartRoleModal.vue_vue_type_script_setup_true_lang-384122b6.js";import{_ as ae}from"./DepartRoleAuthDrawer.vue_vue_type_script_setup_true_lang-3d580c4c.js";import{f as re,g as le}from"./depart.user.api-2013af88.js";import{d as se,a as ie}from"./depart.user.data-971e30a7.js";import{E as ue}from"./index-6916e394.js";import{d as ce,c as pe,e as de,w as me,o as fe,U as c,aV as E,as as v,f as a,bi as s,E as _e,u as i,F as k,V as ge,at as B}from"./vue-c7e3516e.js";const be=B("span",null,"\u5220\u9664",-1),we=B("span",null,"\u6279\u91CF\u64CD\u4F5C ",-1),Se=ce({__name:"DepartRoleInfoTab",props:{data:{require:!0,type:Object}},emits:["register"],setup(n){const o=n;pe("prefixCls");const e=de(()=>{var t;return(t=o.data)==null?void 0:t.id}),d={xs:24,sm:24,md:24,lg:12,xl:12,xxl:8},{tableContext:m,createMessage:_}=oe({tableProps:{api:re,columns:se,canResize:!1,formConfig:{labelWidth:100,schemas:ie,baseColProps:d,labelAlign:"left",labelCol:{xs:24,sm:24,md:24,lg:9,xl:7,xxl:6},wrapperCol:{},actionColOptions:A(y({},d),{style:{textAlign:"left"}})},beforeFetch(t){t.deptId=e.value}}}),[g,{reload:r,setProps:l,setLoading:u,updateTableDataRecord:T},{rowSelection:M,selectedRowKeys:b}]=m,[S,C]=ue(),[I,P]=te();me(()=>o.data,()=>r()),fe(()=>{r()});function V(){b.value=[]}function j(){C.openModal(!0,{isUpdate:!1,record:{}})}function N(t){C.openModal(!0,{isUpdate:!0,record:t})}function L(t){P.openDrawer(!0,{record:t})}function D(t,p){return w(this,null,function*(){if(!e.value)_.warning("\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u90E8\u95E8");else{u(!0);let f=i(t).join(",");try{return yield le({ids:f},p),r()}finally{u(!1)}}return Promise.reject()})}function U(){return w(this,null,function*(){try{yield D(b,!0),V()}catch(t){}})}function O({isUpdate:t,values:p}){t?T(p.id,p):r()}function $(t){return[{label:"\u7F16\u8F91",onClick:N.bind(null,t)}]}function q(t){return[{label:"\u6388\u6743",onClick:L.bind(null,t)},{label:"\u5220\u9664",color:"error",popConfirm:{title:"\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F",confirm:D.bind(null,[t.id],!1)}}]}return(t,p)=>{const f=c("a-button"),z=c("a-divider"),R=c("icon"),K=c("a-menu-item"),W=c("a-menu"),G=c("a-dropdown");return E(),v(k,null,[a(i(Z),{onRegister:i(g),rowSelection:i(M)},{tableTitle:s(()=>[a(f,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:j},{default:s(()=>[_e("\u6DFB\u52A0\u90E8\u95E8\u89D2\u8272")]),_:1}),i(b).length>0?(E(),v(k,{key:0},[a(z,{type:"vertical"}),a(G,null,{overlay:s(()=>[a(W,null,{default:s(()=>[a(K,{key:"1",onClick:U},{default:s(()=>[a(R,{icon:"ant-design:delete-outlined"}),be]),_:1})]),_:1})]),default:s(()=>[a(f,null,{default:s(()=>[we,a(R,{icon:"akar-icons:chevron-down"})]),_:1})]),_:1})],64)):ge("",!0)]),action:s(({record:h})=>[a(i(ee),{actions:$(h),dropDownActions:q(h)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),a(ne,{departId:e.value,onRegister:i(S),onSuccess:O},null,8,["departId","onRegister"]),a(ae,{onRegister:i(I)},null,8,["onRegister"])],64)}}});export{Se as _};
