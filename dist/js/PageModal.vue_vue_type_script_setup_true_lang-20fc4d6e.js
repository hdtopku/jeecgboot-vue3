var E=Object.defineProperty;var b=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var y=(r,t,e)=>t in r?E(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,f=(r,t)=>{for(var e in t||(t={}))_.call(t,e)&&y(r,e,t[e]);if(b)for(var e of b(t))D.call(t,e)&&y(r,e,t[e]);return r};var B=(r,t,e)=>new Promise((c,l)=>{var p=a=>{try{u(e.next(a))}catch(i){l(i)}},m=a=>{try{u(e.throw(a))}catch(i){l(i)}},u=a=>a.done?c(a.value):Promise.resolve(a.value).then(p,m);u((e=e.apply(r,t)).next())});import{B as h}from"./index-8cf3aabb.js";import{B as w}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as A}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{A as k}from"./index-fde9c72f.js";import{s as M}from"./page.api-265971d0.js";import{bv as P,bu as I,bw as R,br as U}from"./jeecg-online-vendor-bf2efbcb.js";import{d as x,k as S,u as n,e as V,U as L,aV as O,ar as T,bi as C,f as F,E as q,aQ as G}from"./vue-c7e3516e.js";const ee=[{label:"\u540D\u79F0",field:"name",component:"Input",colProps:{span:6}}],J=[{label:"",field:"id",component:"Input",show:!1},{label:"\u540D\u79F0",field:"name",component:"Input",required:!0},{label:"\u5C01\u9762\u56FE",field:"coverUrl",component:"JImageUpload",componentProps:{fileMax:1}},{label:"\u5206\u7C7B",field:"type",component:"Select",defaultValue:"1",required:!0,componentProps:{options:[{label:"\u4EEA\u8868\u76D8\u8BBE\u8BA1",value:"1",key:"1"},{label:"\u95E8\u6237\u8BBE\u8BA1\u5668",value:"2",key:"2"}]}},{label:"\u4FDD\u62A4\u7801",field:"protectionCode",component:"StrengthMeter"}],oe=x({__name:"PageModal",emits:["success","register"],setup(r,{emit:t}){const e=S(!0),[c,{resetFields:l,setFieldsValue:p,validate:m}]=A({schemas:J,showActionButtonGroup:!1}),[u,{setModalProps:a,closeModal:i}]=k(s=>B(this,null,function*(){if(yield l(),a({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),n(e)){let o=f({},s.record);o.protectionCode&&o.protectionCode.length>0&&(o.protectionCode=P(o.protectionCode)),yield p(f({},o))}})),v=V(()=>n(e)?"\u7F16\u8F91":"\u65B0\u589E");function g(s=0){return B(this,null,function*(){try{const o=yield m();a({confirmLoading:!0}),o.protectionCode&&(o.protectionCode=I(o.protectionCode));const d=yield M(o,e.value);o.id&&R(U.DRAG_CACHE_PREFIX+o.id),i(),t("success",s===1?d:null)}finally{a({confirmLoading:!1})}})}return(s,o)=>{const d=L("a-button");return O(),T(n(h),G(s.$attrs,{onRegister:n(u),okText:"\u4FDD\u5B58",title:v.value,onOk:g,width:700,destroyOnClose:""}),{appendFooter:C(()=>[F(d,{type:"primary",onClick:o[0]||(o[0]=N=>g(1))},{default:C(()=>[q("\u4FDD\u5B58\u5E76\u8BBE\u8BA1")]),_:1})]),default:C(()=>[F(n(w),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}});export{oe as _,ee as s};
