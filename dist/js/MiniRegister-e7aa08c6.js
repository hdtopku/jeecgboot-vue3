var L=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var S=(r,t,n)=>t in r?L(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,O=(r,t)=>{for(var n in t||(t={}))Q.call(t,n)&&S(r,n,t[n]);if(R)for(var n of R(t))X.call(t,n)&&S(r,n,t[n]);return r},V=(r,t)=>q(r,z(t));var E=(r,t,n)=>new Promise((o,g)=>{var U=s=>{try{y(n.next(s))}catch(p){g(p)}},u=s=>{try{y(n.throw(s))}catch(p){g(p)}},y=s=>s.done?o(s.value):Promise.resolve(s.value).then(U,u);y((n=n.apply(r,t)).next())});import{d as G,l as h,r as Y,V as I,a7 as f,a8 as _,ad as e,u as a,f as l,aa as v,ae as k,W as $,a5 as Ws,a6 as js,J as Z}from"./vue-ebecda47.js";import{B as ss,C as es,b9 as os,bp as as,bt as is,_ as ns}from"./jeecg-online-vendor-cfb58502.js";import{a as ls}from"./jeecg_ad_text-1683a714.js";import"./antd-vue-vendor-b75e8c06.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-cd7703c8.js";import"./vxe-table-vendor-4aae63bf.js";const F="/assets/icon-eye-k-62c61241.png",D="/assets/icon-eye-g-a35cc0c0.png";const ts={class:"aui-content"},cs={class:"aui-container"},rs={class:"aui-form"},ds={class:"aui-image"},us={class:"aui-image-text"},ps=["src"],ms={class:"aui-formBox"},fs={class:"aui-formWell"},_s={class:"aui-flex aui-form-nav aui-clear-left",style:{"padding-bottom":"21px"}},vs={class:"aui-flex-box activeNav on"},gs={class:"aui-form-box"},ys={class:"aui-account aui-account-line"},ws={class:"aui-input-line"},xs={class:"aui-input-line"},hs={class:"aui-input-line"},ks={key:1,class:"aui-code-line"},bs={class:"aui-input-line"},Cs={class:"aui-eye"},Is=["src"],Ps=["src"],Ts={class:"aui-input-line"},Ms={class:"aui-eye"},Es=["src"],Us=["src"],Bs={class:"aui-flex"},Ns={class:"aui-flex-box"},Rs={class:"aui-choice"},Ss={style:{color:"#1b90ff","margin-left":"4px"}},Os={class:"aui-formButton"},Vs={class:"aui-flex"},$s={class:"aui-flex"},Fs=G({name:"mini-register"}),Ds=G(V(O({},Fs),{emits:["go-back","success","register"],setup(r,{expose:t,emit:n}){const{t:o}=ss(),{notification:g,createErrorModal:U,createMessage:u}=es(),y=h(),s=Y({username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),p=h(!0),w=h(60),m=h(null),P=h("close"),T=h("close");function H(){n("go-back"),M()}function W(){return E(this,null,function*(){if(!s.mobile){u.warn(o("sys.login.mobilePlaceholder"));return}(yield os({mobile:s.mobile,smsmode:as.REGISTER}))&&(a(m)||(w.value=60,p.value=!1,m.value=setInterval(()=>{a(w)>0&&a(w)<=60?w.value=w.value-1:(p.value=!0,clearInterval(a(m)),m.value=null)},1e3)))})}function j(){if(!s.username){u.warn(o("sys.login.accountPlaceholder"));return}if(!s.mobile){u.warn(o("sys.login.mobilePlaceholder"));return}if(!s.smscode){u.warn(o("sys.login.smsPlaceholder"));return}if(!s.password){u.warn(o("sys.login.passwordPlaceholder"));return}if(!s.confirmPassword){u.warn(o("sys.login.confirmPassword"));return}if(s.password!==s.confirmPassword){u.warn(o("sys.login.diffPwd"));return}if(!s.policy){u.warn(o("sys.login.policyPlaceholder"));return}A()}function A(){return E(this,null,function*(){try{const d=yield is(Z({username:s.username,password:s.password,phone:s.mobile,smscode:s.smscode}));d&&d.data.success?(g.success({description:d.data.message||o("sys.api.registerMsg"),duration:3}),n("success",{username:s.username,password:s.password}),M()):g.warning({message:o("sys.api.errorTip"),description:d.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(d){g.error({message:o("sys.api.errorTip"),description:d.message||o("sys.api.networkExceptionMsg"),duration:3})}})}function M(){Object.assign(s,{username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),a(m)||(p.value=!0,clearInterval(a(m)),m.value=null),y.value.resetFields()}function B(d){P.value=d}function N(d){T.value=d}return t({initForm:M}),(d,i)=>{const b=I("Icon"),C=I("a-input"),x=I("a-form-item"),J=I("a-checkbox"),K=I("a-form");return f(),_("div",ts,[e("div",cs,[e("div",rs,[e("div",ds,[e("div",us,[e("img",{src:a(ls),alt:""},null,8,ps)])]),e("div",ms,[e("div",fs,[l(K,{ref_key:"formRef",ref:y,model:s},{default:v(()=>[e("div",_s,[e("div",vs,k(a(o)("sys.login.signUpFormTitle")),1)]),e("div",gs,[e("div",ys,[l(x,null,{default:v(()=>[e("div",ws,[l(b,{class:"aui-icon",icon:"ant-design:user-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:a(o)("sys.login.userName"),value:s.username,"onUpdate:value":i[0]||(i[0]=c=>s.username=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",xs,[l(b,{class:"aui-icon",icon:"ant-design:mobile-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:a(o)("sys.login.mobile"),value:s.mobile,"onUpdate:value":i[1]||(i[1]=c=>s.mobile=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",hs,[l(b,{class:"aui-icon",icon:"ant-design:mail-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:a(o)("sys.login.smsCode"),value:s.smscode,"onUpdate:value":i[2]||(i[2]=c=>s.smscode=c)},null,8,["placeholder","value"]),p.value?(f(),_("div",{key:0,class:"aui-code-line",onClick:W},k(a(o)("component.countdown.normalText")),1)):(f(),_("div",ks,k(a(o)("component.countdown.sendText",[a(w.value)])),1))])]),_:1}),l(x,null,{default:v(()=>[e("div",bs,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:P.value==="close"?"password":"text",placeholder:a(o)("sys.login.password"),value:s.password,"onUpdate:value":i[3]||(i[3]=c=>s.password=c)},null,8,["type","placeholder","value"]),e("div",Cs,[P.value==="open"?(f(),_("img",{key:0,src:a(F),alt:"开启",onClick:i[4]||(i[4]=c=>B("close"))},null,8,Is)):P.value==="close"?(f(),_("img",{key:1,src:a(D),alt:"关闭",onClick:i[5]||(i[5]=c=>B("open"))},null,8,Ps)):$("",!0)])])]),_:1}),l(x,null,{default:v(()=>[e("div",Ts,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:T.value==="close"?"password":"text",placeholder:a(o)("sys.login.confirmPassword"),value:s.confirmPassword,"onUpdate:value":i[6]||(i[6]=c=>s.confirmPassword=c)},null,8,["type","placeholder","value"]),e("div",Ms,[T.value==="open"?(f(),_("img",{key:0,src:a(F),alt:"开启",onClick:i[7]||(i[7]=c=>N("close"))},null,8,Es)):T.value==="close"?(f(),_("img",{key:1,src:a(D),alt:"关闭",onClick:i[8]||(i[8]=c=>N("open"))},null,8,Us)):$("",!0)])])]),_:1}),l(x,{name:"policy"},{default:v(()=>[e("div",Bs,[e("div",Ns,[e("div",Rs,[l(J,{checked:s.policy,"onUpdate:checked":i[9]||(i[9]=c=>s.policy=c)},null,8,["checked"]),e("span",Ss,k(a(o)("sys.login.policy")),1)])])])]),_:1})])]),e("div",Os,[e("div",Vs,[e("a",{class:"aui-link-login aui-flex-box",onClick:j},k(a(o)("sys.login.registerButton")),1)]),e("div",$s,[e("a",{class:"aui-linek-code aui-flex-box",onClick:H},k(a(o)("sys.login.backSignIn")),1)])])]),_:1},8,["model"])])])])])])}}}));const Qs=ns(Ds,[["__scopeId","data-v-dcdb3616"]]);export{Qs as default};
