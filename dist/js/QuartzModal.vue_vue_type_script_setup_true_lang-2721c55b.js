var x=Object.defineProperty;var g=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var b=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))q.call(t,r)&&b(e,r,t[r]);return e};var f=(e,t,r)=>new Promise((p,c)=>{var m=o=>{try{l(r.next(o))}catch(i){c(i)}},d=o=>{try{l(r.throw(o))}catch(i){c(i)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(m,d);l((r=r.apply(e,t)).next())});import{B as T}from"./index-9d0047d3.js";import{B as I}from"./BasicForm-cb329d14.js";import"./componentMap-b7e1d2b2.js";import{u as C}from"./useForm-fd714c19.js";import"./JAddInput-63b4f847.js";import"./JSelectUser-43dfc55e.js";import"./JSelectDept-3f191bfb.js";import"./JPopup-99598936.js";import{B as _}from"./index-4b015b65.js";import"./cron-parser-vendor-658b8fec.js";import{render as y}from"./renderUtils-3baa1edf.js";import{b as a,am as v}from"./jeecg-online-vendor-885afdd4.js";import"./BasicForm.vue_vue_type_style_index_0_lang-7b6f7701.js";import{M as S}from"./antd-vue-vendor-a78909e6.js";import{J as B}from"./validator-9065e2bf.js";import{d as j,k as M,u as n,e as P,a5 as N,a9 as U,a7 as k,f as F,ag as E}from"./vue-bcbaddf9.js";const ae=[{title:"任务类名",dataIndex:"jobClassName",width:200,align:"left"},{title:"Cron表达式",dataIndex:"cronExpression",width:200},{title:"参数",dataIndex:"parameter",width:200},{title:"描述",dataIndex:"description",width:200},{title:"状态",dataIndex:"status",width:100,customRender:({text:e})=>{const t=e=="0"?"green":e=="-1"?"red":"gray";return y.renderTag(y.renderDict(e,"quartz_status"),t)}}],ne=[{field:"jobClassName",label:"任务类名",component:"Input",colProps:{span:8}},{field:"status",label:"任务状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",stringToNumber:!0},colProps:{span:8}}],O=[{field:"id",label:"id",component:"Input",show:!1},{field:"jobClassName",label:"任务类名",component:"Input",required:!0},{field:"cronExpression",label:"Cron表达式",component:"JEasyCron",defaultValue:"* * * * * ? *",rules:[{required:!0,message:"请输入Cron表达式"},{validator:B}]},{field:"paramterType",label:"参数类型",component:"Select",defaultValue:"string",componentProps:{options:[{label:"字符串",value:"string"},{label:"JSON对象",value:"json"}]}},{field:"parameter",label:"参数",component:"InputTextArea",ifShow:({values:e})=>e.paramterType=="string"},{field:"parameter",label:"参数",component:"JAddInput",helpMessage:"键值对形式填写",ifShow:({values:e})=>e.paramterType=="json"},{field:"status",label:"状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",type:"radioButton",stringToNumber:!0,dropdownStyle:{maxHeight:"6vh"}}},{field:"description",label:"描述",component:"InputTextArea"}],le="/sys/quartzJob/exportXls",ie="/sys/quartzJob/importExcel",ue=e=>a.get({url:"/sys/quartzJob/list",params:e}),Q=(e,t)=>{let r=t?"/sys/quartzJob/edit":"/sys/quartzJob/add";return a.post({url:r,params:e})},ce=(e,t)=>a.delete({url:"/sys/quartzJob/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),pe=(e,t)=>a.get({url:"/sys/quartzJob/resume",params:e}).then(()=>{t()}),me=(e,t)=>a.get({url:"/sys/quartzJob/pause",params:e}).then(()=>{t()}),de=(e,t)=>a.get({url:"/sys/quartzJob/execute",params:e}).then(()=>{t()}),fe=(e,t)=>{S.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>a.delete({url:"/sys/quartzJob/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},ge=j({__name:"QuartzModal",emits:["register","success"],setup(e,{emit:t}){const r=M(!0),[p,{resetFields:c,setFieldsValue:m,validate:d}]=C({schemas:O,showActionButtonGroup:!1}),[l,{setModalProps:o,closeModal:i}]=_(s=>f(this,null,function*(){var u;if(yield c(),o({confirmLoading:!1}),r.value=!!(s!=null&&s.isUpdate),n(r)){try{s.record.paramterType=v((u=s==null?void 0:s.record)==null?void 0:u.parameter)?"json":"string"}catch(R){}yield m(h({},s.record))}})),J=P(()=>n(r)?"编辑任务":"新增任务");function z(s){return f(this,null,function*(){try{let u=yield d();o({confirmLoading:!0}),yield Q(u,r.value),i(),t("success")}finally{o({confirmLoading:!1})}})}return(s,u)=>(N(),U(n(T),E(s.$attrs,{onRegister:n(l),title:J.value,onOk:z,width:"40%"}),{default:k(()=>[F(n(I),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ge as _,le as a,ie as b,ae as c,ce as d,de as e,fe as f,ue as g,me as p,pe as r,ne as s};
