var S=Object.defineProperty;var h=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(t,s,e)=>s in t?S(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,B=(t,s)=>{for(var e in s||(s={}))_.call(s,e)&&y(t,e,s[e]);if(h)for(var e of h(s))k.call(s,e)&&y(t,e,s[e]);return t};var f=(t,s,e)=>new Promise((c,l)=>{var m=n=>{try{a(e.next(n))}catch(r){l(r)}},p=n=>{try{a(e.throw(n))}catch(r){l(r)}},a=n=>n.done?c(n.value):Promise.resolve(n.value).then(m,p);a((e=e.apply(t,s)).next())});import{B as v}from"./index-8cf3aabb.js";import{B as w}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as A}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{A as M}from"./index-fde9c72f.js";import"./antd-vue-vendor-1561c1ba.js";import{c as C,l as E}from"./jeecg-online-vendor-bf2efbcb.js";import{a as I}from"./UserSetting.api-279c855f.js";import{d as T,k as g,aV as R,ar as x,bi as L,f as Y,u as i,aQ as O}from"./vue-c7e3516e.js";const K=[{key:"1",name:"\u4E2A\u4EBA\u4FE1\u606F",component:"BaseSetting",icon:"ant-design:user-outlined"},{key:"2",name:"\u6211\u7684\u79DF\u6237",component:"TenantSetting",icon:"ant-design:team-outlined"},{key:"3",name:"\u8D26\u53F7\u5B89\u5168",component:"AccountSetting",icon:"ant-design:lock-outlined"},{key:"4",name:"\u7B2C\u4E09\u65B9APP",component:"WeChatDingSetting",icon:"ant-design:contacts-outlined"}],U=[{field:"realname",component:"Input",label:"\u59D3\u540D",colProps:{span:24},required:!0},{field:"birthday",component:"DatePicker",label:"\u751F\u65E5",colProps:{span:24},componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD",getPopupContainer:()=>document.body}},{field:"sex",component:"RadioGroup",label:"\u6027\u522B",colProps:{span:24},componentProps:{options:[{label:"\u7537",value:1},{label:"\u5973",value:2}]}},{field:"relTenantIds",component:"JDictSelectTag",label:"\u79DF\u6237",colProps:{span:24},componentProps:{mode:"multiple",dictCode:"sys_tenant,name,id",disabled:!0}},{field:"post",component:"JDictSelectTag",label:"\u804C\u4F4D",colProps:{span:24},componentProps:{mode:"multiple",dictCode:"sys_position,name,code",disabled:!0}},{label:"",field:"id",component:"Input",show:!1}],X=T({__name:"UserAccountModal",emits:["register","success"],setup(t,{emit:s}){const e=C(),{createMessage:c}=E(),[l,{resetFields:m,setFieldsValue:p,validate:a,updateSchema:n}]=A({schemas:U,showActionButtonGroup:!1}),r=g({});g(!1);const b=g(""),[F,{setModalProps:d,closeModal:P}]=M(o=>f(this,null,function*(){yield m(),d({confirmLoading:!1}),b.value="\u7F16\u8F91\u4E2A\u4EBA\u8D44\u6599",o.record.post&&(o.record.post=o.record.post.split(",")),o.record.relTenantIds&&(o.record.relTenantIds=o.record.relTenantIds.split(",")),r.value=o.record,o.record.birthday==="\u672A\u586B\u5199"&&(o.record.birthday=void 0),yield p(B({},o.record))}));function D(){return f(this,null,function*(){try{let o=yield a();d({confirmLoading:!0}),yield I(o).then(u=>{u.success?c.success(u.message):c.warn(u.message)}),Object.assign(r.value,o),e.setUserInfo(i(r)),s("success"),P()}finally{d({confirmLoading:!1})}})}return(o,u)=>(R(),x(i(v),O(o.$attrs,{onRegister:i(F),width:"500px",title:b.value,onOk:D,destroyOnClose:""}),{default:L(()=>[Y(i(w),{onRegister:i(l)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{X as _,K as s};
