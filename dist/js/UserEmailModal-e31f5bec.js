var x=Object.defineProperty,V=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(s,e,a)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,f=(s,e)=>{for(var a in e||(e={}))z.call(e,a)&&h(s,a,e[a]);if(b)for(var a of b(e))I.call(e,a)&&h(s,a,e[a]);return s},C=(s,e)=>V(s,q(e));var _=(s,e,a)=>new Promise((c,o)=>{var l=t=>{try{u(a.next(t))}catch(m){o(m)}},d=t=>{try{u(a.throw(t))}catch(m){o(m)}},u=t=>t.done?c(t.value):Promise.resolve(t.value).then(l,d);u((a=a.apply(s,e)).next())});import{d as k,r as N,l as R,V as p,a7 as O,ac as P,aa as n,f as i,E as T,af as U,u as j}from"./vue-86253b15.js";import{B as A}from"./BasicModal-8033a6fa.js";import{u as G,q as L,b9 as $,bp as D}from"./jeecg-online-vendor-bc5d810e.js";import"./index-5f3b36bb.js";import{rules as H}from"./validator-c577537d.js";import{c2 as J}from"./antd-vue-vendor-371529c2.js";import{E as K}from"./index-4de4eaa0.js";import{a as Q}from"./UserSetting.api-604009d2.js";import"./useWindowSizeFn-0b39b13a.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./user.api-26c541a7.js";const W=k({name:"user-replace-email-modal"}),fe=k(C(f({},W),{emits:["register","success"],setup(s,{emit:e}){const a=G(),{createMessage:c}=L(),o=N({email:""}),l=R(),d={email:[f({},H.duplicateCheckRule("sys_user","email",o,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]},u=J.useForm,t=R(""),[m,{setModalProps:y,closeModal:E}]=K(r=>_(this,null,function*(){l.value.resetFields(),l.value.clearValidate(),y({confirmLoading:!1}),t.value="修改邮箱",r.record.smscode="",Object.assign(o,r.record)}));function X(){return $({mobile:o.phone,smsmode:D.REGISTER})}function M(){return _(this,null,function*(){yield l.value.validateFields(),Q(o).then(r=>{r.success?(c.success("修改邮箱成功"),e("success"),E()):c.warning(r.message)})})}return(r,g)=>{const w=p("a-input"),v=p("a-form-item"),B=p("a-button"),F=p("a-form");return O(),P(A,U(r.$attrs,{onRegister:j(m),width:"500px",title:t.value,showCancelBtn:!1,showOkBtn:!1}),{default:n(()=>[i(F,{class:"antd-modal-form",ref_key:"formRef",ref:l,model:o,rules:d},{default:n(()=>[i(v,{name:"email"},{default:n(()=>[i(w,{size:"large",value:o.email,"onUpdate:value":g[0]||(g[0]=S=>o.email=S),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),i(v,null,{default:n(()=>[i(B,{size:"large",type:"primary",block:"",onClick:M},{default:n(()=>[T(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{fe as default};
