var fe=Object.defineProperty,ge=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var W=(e,o,s)=>o in e?fe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,D=(e,o)=>{for(var s in o||(o={}))he.call(o,s)&&W(e,s,o[s]);if(U)for(var s of U(o))ye.call(o,s)&&W(e,s,o[s]);return e},L=(e,o)=>ge(e,we(o));var G=(e,o,s)=>new Promise((c,l)=>{var p=i=>{try{n(s.next(i))}catch(u){l(u)}},t=i=>{try{n(s.throw(i))}catch(u){l(u)}},n=i=>i.done?c(i.value):Promise.resolve(i.value).then(p,t);n((s=s.apply(e,o)).next())});import{B as x,_ as q,ar as me,a6 as K,aq as De,v as ee,aB as j,aC as te,y as Ce}from"./jeecg-online-vendor-cfb58502.js";import{d as I,e as w,V as C,a7 as f,a8 as B,ak as v,aq as se,F as ke,R as g,ac as S,af as O,aa as h,E as N,ae as _,W as P,ad as Q,f as A,l as k,g as F,J as b,u as a,w as X,n as oe,x as ve,as as Y,v as $e,ab as be,ai as Be,aj as Pe,r as ne,s as Se}from"./vue-ebecda47.js";import{cR as Te,bV as Oe,bb as _e}from"./antd-vue-vendor-b75e8c06.js";import{m as M,B as Fe,p as R,x as Ve,h as re}from"./index-85cfc899.js";import"./lodash-es-vendor-cd7703c8.js";const{t:Z}=x(),ae={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:Z("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:Z("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},He=D({class:{type:[String,Object,Array]},isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},ae),Le=I({name:"BasicDrawerFooter",props:L(D({},ae),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:o}){const{prefixCls:s}=M("basic-drawer-footer"),c=w(()=>{const t=`${e.height}`;return{height:t,lineHeight:t}});function l(){o("ok")}function p(){o("close")}return{handleOk:l,prefixCls:s,handleClose:p,getStyle:c}}});function Re(e,o,s,c,l,p){const t=C("a-button");return e.showFooter||e.$slots.footer?(f(),B("div",{key:0,class:v(e.prefixCls),style:se(e.getStyle)},[e.$slots.footer?g(e.$slots,"footer",{key:1}):(f(),B(ke,{key:0},[g(e.$slots,"insertFooter"),e.showCancelBtn?(f(),S(t,O({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:h(()=>[N(_(e.cancelText),1)]),_:1},16,["onClick"])):P("",!0),g(e.$slots,"centerFooter"),e.showOkBtn?(f(),S(t,O({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:h(()=>[N(_(e.okText),1)]),_:1},16,["type","onClick","loading"])):P("",!0),g(e.$slots,"appendFooter")],64))],6)):P("",!0)}const je=q(Le,[["render",Re]]),Ne=I({name:"BasicDrawerHeader",components:{BasicTitle:Fe,ArrowLeftOutlined:Te},props:{isDetail:R.bool,showDetailBack:R.bool,title:R.string},emits:["close"],setup(e,{emit:o}){const{prefixCls:s}=M("basic-drawer-header");function c(){o("close")}return{prefixCls:s,handleClose:c}}});const Ae={key:1};function Ee(e,o,s,c,l,p){const t=C("BasicTitle"),n=C("ArrowLeftOutlined");return e.isDetail?(f(),B("div",{key:1,class:v([e.prefixCls,`${e.prefixCls}--detail`])},[Q("span",{class:v(`${e.prefixCls}__twrap`)},[e.showDetailBack?(f(),B("span",{key:0,onClick:o[0]||(o[0]=(...i)=>e.handleClose&&e.handleClose(...i))},[A(n,{class:v(`${e.prefixCls}__back`)},null,8,["class"])])):P("",!0),e.title?(f(),B("span",Ae,_(e.title),1)):P("",!0)],2),Q("span",{class:v(`${e.prefixCls}__toolbar`)},[g(e.$slots,"titleToolbar")],2)],2)):(f(),S(t,{key:0,class:v(e.prefixCls)},{default:h(()=>[g(e.$slots,"title"),N(" "+_(e.$slots.title?"":e.title),1)]),_:3},8,["class"]))}const qe=q(Ne,[["render",Ee]]),Ie=I({components:{Drawer:Oe,ScrollContainer:Ve,DrawerFooter:je,DrawerHeader:qe},inheritAttrs:!1,props:He,emits:["visible-change","ok","close","register"],setup(e,{emit:o}){const s=k(!1),c=me(),l=k(null),{t:p}=x(),{prefixVar:t,prefixCls:n}=M("basic-drawer"),i={setDrawerProps:ue,emitVisible:void 0},u=F();u&&o("register",i,u.uid);const m=w(()=>K(b(e),a(l))),y=w(()=>{const r=L(D(D({placement:"right"},a(c)),a(m)),{visible:a(s)});r.title=void 0;let{isDetail:d,width:H,wrapClassName:T,getContainer:de}=r;if(d){H||(r.width="100%");const J=`${n}__detail`;T=r.class?r.class:T,r.class=T?`${T} ${J}`:J,de||(r.getContainer=`.${t}-layout-content`)}return r}),V=w(()=>D(D({},c),a(y))),z=w(()=>{const{footerHeight:r,showFooter:d}=a(y);return d&&r?De(r)?`${r}px`:`${r.replace("px","")}px`:"0px"}),le=w(()=>({position:"relative",height:`calc(100% - ${a(z)})`})),ie=w(()=>{var r;return!!((r=a(y))!=null&&r.loading)});X(()=>e.visible,(r,d)=>{r!==d&&(s.value=r)},{deep:!0}),X(()=>s.value,r=>{oe(()=>{var d;o("visible-change",r),u&&((d=i.emitVisible)==null||d.call(i,r,u.uid))})});function ce(r){return G(this,null,function*(){const{closeFunc:d}=a(y);if(o("close",r),d&&ee(d)){const H=yield d();s.value=!H;return}s.value=!1})}function ue(r){l.value=K(a(l)||{},r),Reflect.has(r,"visible")&&(s.value=!!r.visible)}function pe(){o("ok")}return{onClose:ce,t:p,prefixCls:n,getMergeProps:m,getScrollContentStyle:le,getProps:y,getLoading:ie,getBindValues:V,getFooterHeight:z,handleOk:pe}}});function Me(e,o,s,c,l,p){const t=C("DrawerHeader"),n=C("ScrollContainer"),i=C("DrawerFooter"),u=C("Drawer"),m=ve("loading");return f(),S(u,O({class:e.prefixCls,onClose:e.onClose},e.getBindValues),Y({default:h(()=>[$e((f(),S(n,{style:se(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:h(()=>[g(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[m,e.getLoading]]),A(i,O(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),Y({_:2},[be(Object.keys(e.$slots),y=>({name:y,fn:h(V=>[g(e.$slots,y,Be(Pe(V||{})))])}))]),1040,["onClose","onOk","height"])]),_:2},[e.$slots.title?{name:"title",fn:h(()=>[g(e.$slots,"title")]),key:"1"}:{name:"title",fn:h(()=>[A(t,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:h(()=>[g(e.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack","onClose"])]),key:"0"}]),1040,["class","onClose"])}const ze=q(Ie,[["render",Me]]),$=ne({}),E=ne({});function Xe(){if(!F())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=k(null),o=k(!1),s=k("");function c(t,n){j()&&re(()=>{e.value=null,o.value=null,$[a(s)]=null}),!(a(o)&&j()&&t===a(e))&&(s.value=n,e.value=t,o.value=!0,t.emitVisible=(i,u)=>{E[u]=i})}const l=()=>{const t=a(e);return t||te("useDrawer instance is undefined!"),t},p={setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)},getVisible:w(()=>E[~~a(s)]),openDrawer:(t=!0,n,i=!0)=>{var m;if((m=l())==null||m.setDrawerProps({visible:t}),!n)return;if(i){$[a(s)]=null,$[a(s)]=b(n);return}_e(b($[a(s)]),b(n))||($[a(s)]=b(n))},closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({visible:!1})}};return[c,p]}const Ye=e=>{const o=k(null),s=F(),c=k("");if(!F())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const t=a(o);if(!t){te("useDrawerInner instance is undefined!");return}return t},p=(t,n)=>{j()&&re(()=>{o.value=null}),c.value=n,o.value=t,s==null||s.emit("register",t,n)};return Se(()=>{const t=$[a(c)];t&&(!e||!ee(e)||oe(()=>{e(t)}))}),[p,{changeLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({confirmLoading:t})},getVisible:w(()=>E[~~a(c)]),closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({visible:!1})},setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)}}]},Ze=Ce(ze);export{Ze as B,Xe as a,Ye as u};
