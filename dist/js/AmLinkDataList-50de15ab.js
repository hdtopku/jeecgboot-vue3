import{d as i,l as w,V as C,a7 as o,ac as r,aa as s,a8 as p,f as e,E as l,W as u,v as j,B as F,ad as b,ae as y,ak as m,g as aa}from"./vue-86253b15.js";import{s as D,g as na}from"./AmLink.api-1b4451c1.js";import sa from"./CommonList-aaa63f3f.js";import{g as la}from"./Am.api-a009ccd3.js";import{bb as oa,bc as ea}from"./jeecg-online-vendor-bc5d810e.js";import{e as ua}from"./antd-vue-vendor-371529c2.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";const ra={key:0},da={key:0},ca={size:"small",class:"text-red-500"},ta={key:2,style:{"margin-left":"-10px"}},_a={key:0,class:"text-indigo-700"},ya={key:0,class:"text-red-600"},pa={key:1},fa={key:2},ka={key:3},ha={key:4},ga={class:"text-indigo-700"},va={key:0},Ta=i({__name:"AmLinkDataList",emits:["handleEdit","handleAdd","queryList"],setup(Ca,{expose:G,emit:v}){const z=oa(ea);let{username:U,realname:ba}=z==null?void 0:z.userInfo;const O=w(),W=n=>{v("handleEdit",n)},Y=n=>{v("handleAdd",n)},T=n=>$(n==null?void 0:n.link)+$(n==null?void 0:n.thirdLink)+$(n==null?void 0:n.shortLink),$=n=>{if((n==null?void 0:n.indexOf("itunes.apple.com"))>0){let d=n==null?void 0:n.indexOf("&ud_t=");if(d>0){let t=Number.parseInt(n==null?void 0:n.substring(d+6))*1e3;return ua(t).format("MM-DD HH:mm")}}return""},x=n=>{if((n==null?void 0:n.length)>0){let d=n.indexOf("clicked/");if(d>=0)return n.substring(d,d+13);if(d=n.indexOf("&ud_t="),d>=0)return n.substring(d+4)}return n},N=(n,d)=>{n.status=d,D(n,!0).then(()=>{v("queryList")})},J=n=>{D({id:n},!0).then(()=>{v("queryList")})},L=(n,d)=>{n.type=d,D(n,!0).then(()=>{v("queryList")})},{proxy:P}=aa(),A=(n={})=>la({count:1,type:6,linkId:n==null?void 0:n.id,link:n==null?void 0:n.link,username:U},d=>{P.tool.copy(d,d+"已复制")}),h=w("0"),X=(n={})=>{h.value=n==null?void 0:n.status,O.value.execQuery(na,n)},g=w(!1);return G({startQuery:X,changeAdvanced:()=>{g.value=!g.value},copyCode:A}),(n,d)=>{const t=C("a-button"),k=C("a-typography-text"),f=C("a-menu-item"),Z=C("a-menu"),_=C("a-tag");return o(),r(sa,{ref_key:"CommonListRef",ref:O},{header:s(()=>[h.value==="1"?(o(),p("span",ra,[e(t,{class:"mr-6",size:"small",type:"primary",preIcon:"ant-design:plus-outlined",onClick:Y},{default:s(()=>[l("新增")]),_:1}),e(k,{class:"mr-6",copyable:{text:"https://www.myunidays.hk/CN/zh-CN/partners/applemusic/micro-access/online"}},{default:s(()=>[l("online地址 ")]),_:1},8,["copyable"])])):u("",!0),j(e(k,{mark:""},{default:s(()=>[l("按创建时间倒排")]),_:1},512),[[F,h.value==="0"]]),j(e(k,{mark:""},{default:s(()=>[l("按修改时间倒排 ")]),_:1},512),[[F,h.value==="100"||h.value==="-1"||h.value==="1"]])]),operate:s(({item:a})=>[e(Z,null,{default:s(()=>[(a==null?void 0:a.status)!==0?(o(),r(f,{key:0,onClick:c=>J(a.id)},{default:s(()=>[e(t,{type:"warning",ghost:"",size:"small"},{default:s(()=>[l("置顶")]),_:1})]),_:2},1032,["onClick"])):u("",!0),e(f,{onClick:c=>W(a)},{default:s(()=>[e(t,{type:"link",size:"small"},{default:s(()=>[l("编辑")]),_:1})]),_:2},1032,["onClick"]),(a==null?void 0:a.status)===0||(a==null?void 0:a.status)===1?(o(),r(f,{key:1,onClick:c=>N(a,-1)},{default:s(()=>[e(t,{type:"link",size:"small",danger:""},{default:s(()=>[l("删除")]),_:1})]),_:2},1032,["onClick"])):u("",!0),(a==null?void 0:a.status)===0||(a==null?void 0:a.status)===-1?(o(),r(f,{key:2,onClick:c=>N(a,1)},{default:s(()=>[e(t,{type:"link",size:"small"},{default:s(()=>[l("备用")]),_:1})]),_:2},1032,["onClick"])):u("",!0),(a==null?void 0:a.status)===-1||(a==null?void 0:a.status)===1?(o(),r(f,{key:3,onClick:c=>N(a,0)},{default:s(()=>[e(t,{type:"link",size:"small"},{default:s(()=>[l("使用")]),_:1})]),_:2},1032,["onClick"])):u("",!0),(a==null?void 0:a.type)!==1&&(a==null?void 0:a.type)!==6?(o(),r(f,{key:4},{default:s(()=>[e(t,{onClick:c=>L(a,6),type:"link",size:"small"},{default:s(()=>[l("设为至尊")]),_:2},1032,["onClick"])]),_:2},1024)):u("",!0),(a==null?void 0:a.type)!==1&&(a==null?void 0:a.type)!==6?(o(),r(f,{key:5},{default:s(()=>[e(t,{onClick:c=>L(a,1),type:"link",size:"small"},{default:s(()=>[l("设为普通")]),_:2},1032,["onClick"])]),_:2},1024)):u("",!0),(a==null?void 0:a.type)===6?(o(),r(f,{key:6,onClick:c=>L(a,0)},{default:s(()=>[e(t,{type:"link",size:"small"},{default:s(()=>[l("取消至尊")]),_:1})]),_:2},1032,["onClick"])):u("",!0),(a==null?void 0:a.type)===1?(o(),r(f,{key:7,onClick:c=>L(a,0)},{default:s(()=>[e(t,{type:"link",size:"small"},{default:s(()=>[l("取消普通")]),_:1})]),_:2},1032,["onClick"])):u("",!0)]),_:2},1024)]),shelter:s(({item:a})=>[(a==null?void 0:a.bindCount)>0?(o(),p("span",da,[l(" |"),b("span",ca,y(a==null?void 0:a.bindCount)+"次",1)])):u("",!0)]),left:s(({item:a})=>{var c;return[(a==null?void 0:a.type)===6?(o(),r(_,{key:0,color:"red"},{default:s(()=>[l("至尊版")]),_:1})):u("",!0),(a==null?void 0:a.type)===1?(o(),r(_,{key:1},{default:s(()=>[l("普通版")]),_:1})):u("",!0),((c=a==null?void 0:a.link)==null?void 0:c.length)>0?(o(),p("div",ta,[e(t,{size:"small",type:"link",onClick:B=>A(a)},{default:s(()=>[l("复制短链")]),_:2},1032,["onClick"])])):u("",!0)]}),bottom:s(({item:a})=>{var c,B,E,I,V,q,S,H,K,M,Q,R;return[b("div",{class:m((a==null?void 0:a.type)===6?"bg-pink-100 p-2":(a==null?void 0:a.type)===1?"bg-blue-100 p-2":"")},[b("div",null,[e(_,null,{default:s(()=>[l("激活链")]),_:1}),((c=a==null?void 0:a.link)==null?void 0:c.length)>0?(o(),r(k,{key:0,delete:(a==null?void 0:a.status)===-1,copyable:{text:a.link}},{default:s(()=>[l(y(x(a.link)),1)]),_:2},1032,["delete","copyable"])):(o(),r(_,{key:1,color:"error"},{default:s(()=>[l("未生成")]),_:1}))]),b("div",null,[l(" [创建]"+y((B=a==null?void 0:a.createTime)==null?void 0:B.substring(5,16))+" ",1),((E=T(a))==null?void 0:E.length)>0?(o(),p("span",_a,"[激活]"+y(T(a)),1)):u("",!0)]),((I=a==null?void 0:a.remark)==null?void 0:I.length)>0?(o(),p("div",ya,[e(_,{color:"red"},{default:s(()=>[l("备注")]),_:1}),l(" "+y(a.remark),1)])):u("",!0),((V=a==null?void 0:a.email)==null?void 0:V.length)>0&&(g.value||(a==null?void 0:a.status)===1||(a==null?void 0:a.type)===1)?(o(),p("div",pa,[e(_,null,{default:s(()=>[l("预存")]),_:1}),((q=a==null?void 0:a.email)==null?void 0:q.length)>0?(o(),r(k,{key:0,copyable:{text:a.email}},{default:s(()=>[l(y(x(a.email)),1)]),_:2},1032,["copyable"])):(o(),r(_,{key:1,color:"error"},{default:s(()=>[l("未填写")]),_:1}))])):u("",!0),g.value&&((S=a==null?void 0:a.longLink)==null?void 0:S.length)>0||(a==null?void 0:a.status)===1?(o(),p("div",fa,[e(_,null,{default:s(()=>[l("长链接")]),_:1}),((H=a==null?void 0:a.longLink)==null?void 0:H.length)>0?(o(),r(k,{key:0,copyable:{text:a.longLink}},{default:s(()=>[l(y(x(a.longLink)),1)]),_:2},1032,["copyable"])):(o(),r(_,{key:1,color:"error"},{default:s(()=>[l("未填写")]),_:1}))])):u("",!0),((K=a==null?void 0:a.thirdLink)==null?void 0:K.length)>0&&(g.value||(a==null?void 0:a.status)===1||(a==null?void 0:a.status)===6)?(o(),p("div",ka,[e(_,null,{default:s(()=>[l("预存")]),_:1}),((M=a==null?void 0:a.thirdLink)==null?void 0:M.length)>0?(o(),r(k,{key:0,copyable:{text:a.thirdLink}},{default:s(()=>[l(y(x(a.thirdLink)),1)]),_:2},1032,["copyable"])):(o(),r(_,{key:1,color:"error"},{default:s(()=>[l("未填写")]),_:1}))])):u("",!0),g.value?(o(),p("div",ha,[b("span",ga,[l(" [创建]"+y(a==null?void 0:a.createBy)+" ",1),((Q=a==null?void 0:a.updateBy)==null?void 0:Q.length)>0?(o(),p("div",va,"[更新]"+y(a==null?void 0:a.updateBy)+"："+y((R=a==null?void 0:a.updateTime)==null?void 0:R.substring(5,19)),1)):u("",!0)])])):u("",!0)],2)]}),_:1},512)}}});export{Ta as default};
