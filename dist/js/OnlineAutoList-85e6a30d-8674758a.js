import{k as Te,w as Re,V as s,a5 as n,a6 as C,f as d,W as p,a9 as c,a7 as r,E as g,F as A,a8 as ve,ab as M,v as De,A as Le,aa as E,am as Ee,ad as Oe,ae as Fe,af as Pe,ag as Ae,ah as Qe}from"./vue-5a09445c.js";import He from"./BasicTable-0c3b97e4.js";import{Q as _e}from"./componentMap-3d0064b3.js";import"./useTable-e785b2d6.js";import{V as Je,u as Ve}from"./jeecg-online-vendor-a80da268.js";import qe from"./OnlineAutoModal-2a146238-9b0dac38.js";import ze from"./OnlineCustomModal-456a85a6-4cd63e83.js";import Ne from"./OnlineDetailModal-f967f080-d7753c36.js";import{x as Ke}from"./JImportModal-f48013aa.js";import{l as Ue,o as We}from"./useListButton-cef1371a-45b1d8c8.js";import{a as je,d as $e,p as Ge,g as Xe}from"./useExtendComponent-48d37d9b-bf2a5eb0.js";import Ye from"./OnlineQueryForm-1c5949a7-7052b8f0.js";import Ze from"./SuperQuery-3821f984-e5301f19.js";import{E as eo}from"./useOnlinePopEvent-e9a042f8-43e104ff.js";import{o as oo}from"./constant-fe20103a-44089532.js";import"./index-5effa088.js";import"./index-0f5326ee.js";import"./BasicForm.vue_vue_type_style_index_0_lang-92cda8aa.js";import"./antd-vue-vendor-04f0af1d.js";import"./JAddInput-7a10c45b.js";import"./JSelectUser-0b713614.js";import"./JSelectDept-a5c54ddb.js";import"./JPopup-cd3c8a0f.js";import"./cron-parser-vendor-278b5be3.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-d40bf8e2.js";import"./CommentPanel-4fb7984a.js";import"./DetailForm-e4538e7a-7460ca89.js";import"./JUpload.vue_vue_type_style_index_0_lang-c2f2a386.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-18270bc5.js";import"./LinkTableListPiece-34266919-92c59f43.js";import"./BasicTable.vue_vue_type_style_index_0_lang-370f2588.js";import"./BasicForm-862341ae.js";import"./lodash-es-vendor-70833b4a.js";import"./BasicModal-588c46fe.js";import"./useWindowSizeFn-31e0259d.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./useForm-3526c2e4.js";import"./injectionKey-69710956.js";import"./useFormItem-742dfe7c.js";/* empty css              */import"./download-d03a8b78.js";import"./base64Conver-fa2fe1af.js";import"./index-eae03fd6.js";import"./index-73ed1f2f.js";import"./useCountdown-85782a4d.js";import"./useFormItemSingle-373c20d8.js";import"./areaDataUtil-1f845736.js";import"./props-4cb7d255.js";import"./JSelectBiz-bd869605.js";import"./index-21f376b3.js";import"./index-14b4b10a.js";import"./bem-8d785cce.js";import"./props-17f0c5eb.js";import"./useContextMenu-16ff3db3.js";import"./depart.api-19a655aa.js";import"./index-b484e0e9.js";import"./index-42cdfb26.js";import"./OnlineForm-630a22c2-5f1e5547.js";import"./user.api-99a0b5cb.js";import"./customExpression-62f5afd1.js";import"./useListPage-5c54d46c.js";import"./OnlineSelectCascade-c7baf52b-c8fd8464.js";import"./JModalTip-abe1515a-31977e16.js";import"./OnlineFormDetail-1b216792-e30048b8.js";import"./OnlineSubFormDetail-0aa4966c-dcfbd4e9.js";import"./SuperQueryValComponent.vue_vue_type_script_lang-e3ad7ee8-0aa3c1ba.js";var O=(e,h,l)=>new Promise((k,m)=>{var b=a=>{try{i(l.next(a))}catch(u){m(u)}},S=a=>{try{i(l.throw(a))}catch(u){m(u)}},i=a=>a.done?k(a.value):Promise.resolve(a.value).then(b,S);i((l=l.apply(e,h)).next())});const to={name:"OnlineAutoList",components:{BasicTable:He,TableAction:_e,OnlineAutoModal:qe,JImportModal:Ke,OnlineQueryForm:Ye,OnlineSuperQuery:Ze,OnlineCustomModal:ze,OnlineDetailModal:Ne,OnlinePopModal:je},setup(){const{createMessage:e}=Ve(),{ID:h,onlineTableContext:l,onlineQueryFormOuter:k,loading:m,reload:b,dataSource:S,pagination:i,handleSpecialConfig:a,getColumnList:u,handleChangeInTable:x,loadData:B,superQueryButtonRef:f,superQueryStatus:T,handleSuperQuery:R,onlineExtConfigJson:w,handleFormConfig:v,registerCustomModal:o,tableReloading:y}=Ue();if(!h.value){e.warning("地址错误, 配置ID不存在!");return}let{initCgEnhanceJs:D}=$e(l);const{buttonSwitch:Q,cgLinkButtonList:H,cgTopButtonList:_,importUrl:J,registerModal:V,handleAdd:q,handleEdit:z,handleBatchDelete:N,registerImportModal:K,onImportExcel:U,onExportExcel:F,cgButtonJsHandler:W,cgButtonActionHandler:j,cgButtonLinkHandler:$,handleSubmitFlow:G,getDropDownActions:X,getActions:Y,initButtonList:Z,initButtonSwitch:ee,registerDetailModal:oe,registerBpmModal:te}=We(l,w),L=Te(!1);function ne(){return O(this,null,function*(){try{L.value=!0,yield F()}finally{setTimeout(()=>L.value=!1,1500)}})}const{columns:re,actionColumn:ie,selectedKeys:le,rowSelection:ae,enableScrollBar:se,tableScroll:ce,downloadRowFile:de,getImgView:pe,getPcaText:me,getFormatDate:ue,handleColumnResult:ge,hrefComponent:he,viewOnlineCellImage:fe,hrefMainTableId:ye,registerOnlineHrefModal:Ce,registerPopModal:be,openPopModal:Se,onlinePopModalRef:we,popTableId:P}=Ge(l,w);Re(h,()=>{Ie()},{immediate:!0});function Ie(){return O(this,null,function*(){m.value=!0;let t=yield u(oo);ke(t),yield B(),m.value=!1,l.execButtonEnhance("setup")})}function ke(t){let I=D(t.enhanceJs);l.EnhanceJS=I,Z(t.cgButtonList),ee(t.hideColumns),ge(t),a(t)}function Me(t){l.queryParam=t,b()}function xe(t){return O(this,null,function*(){yield Xe(f),f.value.init(t)})}function Be(t){P.value=t.id;let I={title:t.describe};t.record&&t.record.id&&(I.record=t.record,I.isUpdate=!0),Se(!0,I)}return eo(Be),{ID:h,onlineQueryFormOuter:k,queryWithCondition:Me,onQueryFormLoaded:xe,reload:b,superQueryButtonRef:f,superQueryStatus:T,handleSuperQuery:R,loading:m,columns:re,dataSource:S,pagination:i,actionColumn:ie,rowSelection:ae,selectedKeys:le,tableScroll:ce,enableScrollBar:se,handleChangeInTable:x,buttonSwitch:Q,handleAdd:q,handleEdit:z,onImportExcel:U,onExportExcel:F,exportLoading:L,onExportExcelOverride:ne,cgTopButtonList:_,cgLinkButtonList:H,cgButtonJsHandler:W,cgButtonActionHandler:j,cgButtonLinkHandler:$,handleBatchDelete:N,downloadRowFile:de,getImgView:pe,getPcaText:me,getFormatDate:ue,getActions:Y,getDropDownActions:X,registerModal:V,registerCustomModal:o,registerImportModal:K,registerDetailModal:oe,importUrl:J,handleFormConfig:v,onlinePopModalRef:we,tableReloading:y,handleSubmitFlow:G,hrefComponent:he,viewOnlineCellImage:fe,hrefMainTableId:ye,onlineExtConfigJson:w,registerOnlineHrefModal:Ce,registerPopModal:be,popTableId:P,registerBpmModal:te}}},no={class:"p-2"},ro={key:0,style:{"font-size":"12px","font-style":"italic"}},io={key:0,style:{"font-size":"12px","font-style":"italic"}},lo=["src","onClick"],ao=["innerHTML"],so=["title"];function co(e,h,l,k,m,b){const S=s("online-query-form"),i=s("a-button"),a=s("online-super-query"),u=s("TableAction"),x=s("BasicTable"),B=s("OnlineAutoModal"),f=s("online-detail-modal"),T=s("JImportModal"),R=s("a-modal"),w=s("online-custom-modal"),v=s("online-pop-modal");return n(),C("div",no,[d(S,{ref:"onlineQueryFormOuter",id:e.ID,onSearch:e.queryWithCondition,onLoaded:e.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),e.tableReloading?p("",!0):(n(),c(x,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e.loading,columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,actionColumn:e.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:e.tableScroll,onTableRedo:e.reload,class:Ee({"j-table-force-nowrap":e.enableScrollBar}),onChange:e.handleChangeInTable},{tableTitle:r(()=>[e.buttonSwitch.add?(n(),c(i,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e.handleAdd},{default:r(()=>[g("新增")]),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.import?(n(),c(i,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e.onImportExcel},{default:r(()=>[g("导入")]),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.export?(n(),c(i,{key:2,preIcon:"ant-design:export-outlined",type:"primary",loading:e.exportLoading,onClick:e.onExportExcelOverride},{default:r(()=>[g(" 导出")]),_:1},8,["loading","onClick"])):p("",!0),e.cgTopButtonList&&e.cgTopButtonList.length>0?(n(!0),C(A,{key:3},ve(e.cgTopButtonList,(o,y)=>(n(),C(A,null,[o.optType=="js"?(n(),c(i,{key:"cgbtn"+y,onClick:D=>e.cgButtonJsHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:r(()=>[g(M(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):o.optType=="action"?(n(),c(i,{key:"cgbtn"+y,onClick:D=>e.cgButtonActionHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:r(()=>[g(M(o.buttonName),1)]),_:2},1032,["onClick","preIcon"])):p("",!0)],64))),256)):p("",!0),e.buttonSwitch.batch_delete?De((n(),c(i,{key:4,preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:r(()=>[g(" 批量删除")]),_:1},8,["onClick"])),[[Le,e.selectedKeys.length>0]]):p("",!0),e.buttonSwitch.super_query?(n(),c(a,{key:5,ref:"superQueryButtonRef",online:"",status:e.superQueryStatus,onSearch:e.handleSuperQuery},null,8,["status","onSearch"])):p("",!0)]),fileSlot:r(({text:o})=>[o?(n(),c(i,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:y=>e.downloadRowFile(o)},{default:r(()=>[g(" 下载 ")]),_:2},1032,["onClick"])):(n(),C("span",ro,"无文件"))]),imgSlot:r(({text:o})=>[o?(n(),C("img",{key:1,src:e.getImgView(o),alt:"图片不存在",class:"online-cell-image",onClick:y=>e.viewOnlineCellImage(o)},null,8,lo)):(n(),C("span",io,"无图片"))]),htmlSlot:r(({text:o})=>[E("div",{innerHTML:o},null,8,ao)]),pcaSlot:r(({text:o})=>[E("div",{title:e.getPcaText(o)},M(e.getPcaText(o)),9,so)]),dateSlot:r(({text:o})=>[E("span",null,M(e.getFormatDate(o)),1)]),action:r(({record:o})=>[d(u,{actions:e.getActions(o),dropDownActions:e.getDropDownActions(o)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),d(B,{id:e.ID,onRegister:e.registerModal,onSuccess:e.reload,onFormConfig:e.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),d(f,{id:e.ID,onRegister:e.registerDetailModal},null,8,["id","onRegister"]),d(T,{onRegister:e.registerImportModal,url:e.importUrl(),onOk:e.reload,online:""},null,8,["onRegister","url","onOk"]),d(R,Ae(e.hrefComponent.model,Qe(e.hrefComponent.on)),{default:r(()=>[(n(),c(Oe(e.hrefComponent.is),Fe(Pe(e.hrefComponent.params)),null,16))]),_:1},16),d(w,{onRegister:e.registerCustomModal,onSuccess:e.reload},null,8,["onRegister","onSuccess"]),d(f,{id:e.hrefMainTableId,onRegister:e.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),d(v,{ref:"onlinePopModalRef",id:e.popTableId,onRegister:e.registerPopModal,onSuccess:e.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}const Bt=Je(to,[["render",co]]);export{Bt as default};
