var v=Object.defineProperty;var d=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var h=(t,s,e)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,g=(t,s)=>{for(var e in s||(s={}))F.call(s,e)&&h(t,e,s[e]);if(d)for(var e of d(s))B.call(s,e)&&h(t,e,s[e]);return t};var f=(t,s,e)=>new Promise((u,n)=>{var m=r=>{try{i(e.next(r))}catch(l){n(l)}},c=r=>{try{i(e.throw(r))}catch(l){n(l)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(m,c);i((e=e.apply(t,s)).next())});import{B as D}from"./index-9c776ac3.js";import{B as b}from"./BasicForm-af127472.js";import"./componentMap-49086925.js";import{u as I}from"./useForm-027be146.js";import"./JAddInput-f981b8f0.js";import"./JSelectUser-2142310a.js";import"./JSelectDept-89a20b68.js";import"./JPopup-c3fe6e18.js";import{B as _}from"./index-ea73cedc.js";import{s as k}from"./Idea.api-273de608.js";import{ad as w}from"./antd-vue-vendor-cce59da1.js";import{d as H,k as y,u as a,e as T,a5 as P,a9 as O,a7 as R,f as U,ag as q}from"./vue-705b7309.js";const x=[{label:"",field:"id",component:"Input",show:!1},{label:"账号",field:"account",component:"Input",rules:[{required:!0,message:"请输入账号"}]},{label:"密码",field:"password",component:"Input",rules:[{required:!0,message:"请输入密码"}]},{label:"账号售后截至",helpMessage:"默认为激活时间+1年，账号不一定失效",field:"invalidTime",component:"DatePicker",componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD HH:mm:ss"}},{label:"账号失效时间",helpMessage:"默认为激活时间+1年，账号的真实失效时间",field:"realInvalidTime",component:"DatePicker",componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD HH:mm:ss"}},{label:"备注",field:"remark",component:"InputTextArea",rules:[{required:!1}]}],K=H({__name:"IdeaModal",emits:["register","success"],setup(t,{emit:s}){const e=y(!0),[u,{resetFields:n,setFieldsValue:m,validate:c}]=I({labelWidth:150,schemas:x,showActionButtonGroup:!1,autoFocusFirstItem:!0,autoSubmitOnEnter:!0}),[i,{setModalProps:r,closeModal:l}]=_(o=>f(this,null,function*(){yield n(),r({confirmLoading:!1,showCancelBtn:o==null?void 0:o.showFooter,showOkBtn:o==null?void 0:o.showFooter}),e.value=!!(o!=null&&o.isUpdate),a(e)?yield m(g({},o.record)):yield m({invalidTime:w().add(364,"days").format("YYYY-MM-DD HH:mm:ss"),realInvalidTime:w().add(364,"days").format("YYYY-MM-DD HH:mm:ss")})})),M=T(()=>a(e)?"编辑":"新增");function Y(o){return f(this,null,function*(){try{let p=yield c();r({confirmLoading:!0}),yield k(p,e.value),l(),s("success",{isUpdate:e.value,values:p})}finally{r({confirmLoading:!1})}})}return(o,p)=>(P(),O(a(D),q(o.$attrs,{onRegister:a(i),title:M.value,onOk:Y,width:"96%"}),{default:R(()=>[U(a(b),{onRegister:a(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{K as _};
