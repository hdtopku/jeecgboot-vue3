import{ad as b,bW as M,l as D}from"./jeecg-online-vendor-12004772.js";import k from"./BasicTable-04058a09.js";import"./componentMap-90ab712d.js";import"./BasicTable.vue_vue_type_style_index_0_lang-3c8b8bcc.js";import"./useTable-7c8820b4.js";import{B as y}from"./index-a882524d.js";import{useListTable as R}from"./useListPage-8d85dabf.js";import{A as S}from"./index-6916e394.js";import{d as A,k as l,U as p,aV as I,ar as N,bi as r,f as d,E as g,at as v}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm-030e7c21.js";import"./BasicForm.vue_vue_type_style_index_0_lang-8cb333b2.js";import"./BasicModal-b901e352.js";import"./useWindowSizeFn-581ed1a8.js";import"./useFormItem-cc50e63d.js";import"./JUpload.vue_vue_type_style_index_0_lang-5851070a.js";import"./download-fc124faf.js";import"./base64Conver-4e359726.js";import"./index-d83c9bcd.js";import"./index-6d615beb.js";import"./useCountdown-61c82faf.js";import"./JAddInput-dff0b84f.js";import"./areaDataUtil-13d415af.js";import"./useSelectBiz-f95680cd.js";import"./props-18305405.js";import"./index-3ce15f67.js";import"./bem-2be191b9.js";import"./props-c3781b9d.js";import"./useContextMenu-1b1215cd.js";import"./useTreeBiz-cda2af6e.js";import"./index-c5567c31.js";import"./depart.api-de6ffddd.js";import"./index-fcc2460e.js";import"./useForm-ae9e1cbd.js";import"./injectionKey-5da932b3.js";const $=A({name:"TransDb2Online",components:{BasicModal:y,BasicTable:k},emits:["success","register"],setup(e,{emit:h}){const{createMessage:f}=D(),n=l("\u6682\u65E0\u6570\u636E"),s=l(!1),u=l(!1),a=l([]),t=l([]),[m,{closeModal:c}]=S(()=>{u.value=!1,n.value="\u6682\u65E0\u6570\u636E",i.value=[],C()}),[E,{setPagination:T},{rowSelection:w,selectedRowKeys:i}]=R({bordered:!0,columns:[{title:"\u8868\u540D",align:"left",dataIndex:"id"}],dataSource:t,maxHeight:300,locale:{emptyText:n},pagination:{showQuickJumper:!1,showSizeChanger:!1},clickToRowSelect:!0,showIndexColumn:!0,showActionColumn:!1,formConfig:{schemas:[{label:"\u8868\u540D",field:"tableName",component:"Input",componentProps:{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u4EE5\u6A21\u7CCA\u7B5B\u9009",onChange:o=>B(o.target.value)},disabledLabelWidth:!0,itemProps:{labelCol:{sm:24,md:4},wrapperCol:{sm:24,md:20}}}],baseColProps:{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24},showActionButtonGroup:!1}});function C(){return s.value=!0,b.get({url:"/online/cgform/head/queryTables/"},{errorMessageMode:"none"}).then(o=>(t.value=o,a.value=[...o],o),o=>{o.message=="noadminauth"&&(n.value="\u975Eadmin\u7528\u6237\u65E0\u6743\u9650\u64CD\u4F5C\uFF01",f.warn(n.value)),t.value=[],a.value=[]}).finally(()=>{s.value=!1})}function B(o){a.value.length!==0&&(o?(t.value=a.value.filter(L=>L.id.toLowerCase().includes(o.toLowerCase())),n.value=t.value.length===0?"\u65E0\u7B5B\u9009\u7ED3\u679C":"\u6682\u65E0\u6570\u636E"):t.value=[...a.value],T({current:1}))}function F(){c()}function _(){if(!i.value||i.value.length==0){f.warning("\u8BF7\u9009\u62E9\u4E00\u5F20\u8868");return}else{u.value=!0;let o=i.value.join(",");b.post({url:"/online/cgform/head/transTables/"+o}).then(()=>{c(),h("success")}).finally(()=>u.value=!1)}}return{emptyText:n,confirmLoading:s,btnLoading:u,metaSource:a,handleTrans:_,handleCancel:F,queryTables:C,registerModal:m,registerTable:E,rowSelection:w,selectedRowKeys:i}}}),P=v("div",null,[g(" \u6CE8\uFF1A\u5BFC\u5165\u8868\u4F1A\u6392\u9664\u914D\u7F6E\u524D\u7F00\u8868 "),v("a",{href:"http://doc.jeecg.com/2043924",target:"_blank"}," \u53C2\u8003\u6587\u6863")],-1);function V(e,h,f,n,s,u){const a=p("BasicTable"),t=p("a-spin"),m=p("a-button"),c=p("BasicModal");return I(),N(c,{onRegister:e.registerModal,width:500,title:"\u4ECE\u6570\u636E\u5E93\u5BFC\u5165\u8868\u5355",confirmLoading:e.confirmLoading,onCancel:e.handleCancel},{footer:r(()=>[d(m,{onClick:e.handleCancel},{default:r(()=>[g("\u5173\u95ED")]),_:1},8,["onClick"]),d(m,{onClick:e.handleTrans,type:"primary",preIcon:"ant-design:swap",loading:e.confirmLoading||e.btnLoading},{default:r(()=>[g(" \u751F\u6210\u8868\u5355 ")]),_:1},8,["onClick","loading"])]),default:r(()=>[d(t,{spinning:e.confirmLoading},{default:r(()=>[d(a,{onRegister:e.registerTable,rowSelection:e.rowSelection,onTableRedo:e.queryTables},{tableTitle:r(()=>[P]),_:1},8,["onRegister","rowSelection","onTableRedo"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","confirmLoading","onCancel"])}var Le=M($,[["render",V]]);export{Le as default};
