var M=Object.defineProperty;var y=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var F=(s,o,e)=>o in s?M(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,v=(s,o)=>{for(var e in o||(o={}))k.call(o,e)&&F(s,e,o[e]);if(y)for(var e of y(o))D.call(o,e)&&F(s,e,o[e]);return s};var d=(s,o,e)=>new Promise((l,p)=>{var u=t=>{try{n(e.next(t))}catch(c){p(c)}},f=t=>{try{n(e.throw(t))}catch(c){p(c)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(u,f);n((e=e.apply(s,o)).next())});import{B as P}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as R}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{A as j}from"./index-fde9c72f.js";import{B as x}from"./index-8cf3aabb.js";import{b as A}from"./depart.api-25dc3d39.js";import{o as w,u as S}from"./depart.data-ab9ac8cf.js";import{d as U,c as V,k as B,e as I,u as a,aV as L,ar as T,bi as E,f as G,aQ as N}from"./vue-c7e3516e.js";const Z=U({__name:"DepartFormModal",props:{rootTreeData:{type:Array,default:()=>[]}},emits:["success","register"],setup(s,{emit:o}){const e=s;V("prefixCls");const l=B(!1),p=B({}),u=I(()=>l.value?"\u7F16\u8F91":"\u65B0\u589E"),[f,{resetFields:n,setFieldsValue:t,validate:c,updateSchema:C}]=R({schemas:S().basicFormSchema,showActionButtonGroup:!1}),[O,{setModalProps:g,closeModal:_}]=j(r=>d(this,null,function*(){yield n(),l.value=a(r==null?void 0:r.isUpdate);let m=a(r==null?void 0:r.isChild),h=m?w.child:w.root;C([{field:"parentId",show:m,componentProps:{disabled:m,treeData:e.rootTreeData}},{field:"orgCode",show:!1},{field:"orgCategory",componentProps:{options:h}}]);let i=a(r==null?void 0:r.record);typeof i!="object"&&(i={}),i=Object.assign({departOrder:0,orgCategory:h[0].value},i),p.value=i,yield t(v({},i))}));function b(){return d(this,null,function*(){try{g({confirmLoading:!0});let r=yield c();yield A(r,l.value),_(),o("success")}finally{g({confirmLoading:!1})}})}return(r,m)=>(L(),T(a(x),N({title:u.value,width:800},r.$attrs,{onOk:b,onRegister:a(O)}),{default:E(()=>[G(a(P),{onRegister:a(f)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{Z as _};
