import{l as te,e as ie,w as le,d as ne,V as F,a7 as p,a8 as m,ak as H,f as D,aa as J,F as $,ab as E,ac as M,ad as u,ae as P}from"./vue-50733b77.js";import{a2 as ae,a7 as re,a5 as oe,g as se,p as T}from"./index-b34ff7bc.js";import{q as de,aO as I,aE as ue,az as N,ap as pe,ay as ce,bB as me}from"./jeecg-online-vendor-d3e1865b.js";import{i as fe,L as ye}from"./useExtendComponent-48d37d9b-605c45a2.js";import{c as ge}from"./JUpload-c8630cc9.js";import{dj as he,cV as ve,dk as Ce}from"./antd-vue-vendor-c5335947.js";import"./componentMap-5c02cfaf.js";import"./index-f7d688aa.js";import"./index-7e7a94e9.js";import"./lodash-es-vendor-058e2396.js";import"./index-5593b297.js";import"./user.api-c252cb60.js";import"./customExpression-62f5afd1.js";import"./index-f191817e.js";import"./useListPage-4f9607d2.js";import"./LinkTableListPiece-34266919-7405b407.js";import"./OnlineSelectCascade-c7baf52b-e9e1ca05.js";import"./JModalTip-abe1515a-57f430d6.js";import"./tinymce-vendor-7c917b36.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-838914b0.js";import"./areaDataUtil-5dfcdadb.js";import"./useForm-14ceb529.js";import"./BasicModal-064024e0.js";import"./useWindowSizeFn-34cbae37.js";import"./BasicTable-ca5b2c76.js";import"./injectionKey-69710956.js";import"./JAddInput-9c2385b5.js";import"./useFormItem-915d7f1b.js";import"./JSelectUser-99e618da.js";import"./props-2079d80b.js";import"./JSelectBiz-f98b6288.js";import"./index-95220aa0.js";import"./index-7963a080.js";import"./bem-e62027cc.js";import"./props-12d3a914.js";import"./useContextMenu-e6153f12.js";import"./depart.api-1967d2cb.js";import"./JSelectDept-0fd43050.js";import"./JPopup-8bd4163b.js";import"./JEllipsis-66e02300.js";import"./index-fa22fec6.js";import"./download-49b89a1a.js";import"./base64Conver-fa2fe1af.js";import"./index-54db12ae.js";import"./index-f3acc26c.js";import"./useCountdown-9338ec9a.js";import"./useFormItemSingle-37938520.js";import"./cron-parser-vendor-19ac00ef.js";import"./index-665aeeac.js";import"./index-1ac4dcff.js";var be=Object.defineProperty,U=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,W=(a,r,s)=>r in a?be(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,Fe=(a,r)=>{for(var s in r||(r={}))ke.call(r,s)&&W(a,s,r[s]);if(U)for(var s of U(r))we.call(r,s)&&W(a,s,r[s]);return a},y=(a,r,s)=>new Promise((h,C)=>{var w=c=>{try{g(s.next(c))}catch(k){C(k)}},b=c=>{try{g(s.throw(c))}catch(k){C(k)}},g=c=>c.done?h(c.value):Promise.resolve(c.value).then(w,b);g((s=s.apply(a,r)).next())});function xe(a){const r={},s=[],h=te({}),{createMessage:C}=de(),w=ie(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");le(()=>a.data,e=>y(this,null,function*(){if(e){let n=a.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield b(i)}catch(o){}}h.value=l}}),{deep:!0,immediate:!0});function b(e){return y(this,null,function*(){let n=a.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield g(e,n);else if(t=="sel_search")i=yield k(e,n);else if(t=="cat_tree")i=yield _(e,n);else if(t=="link_table")i=yield X(e,n);else if(t=="sel_depart")i=yield j(e,n);else if(t=="sel_user")i=yield d(e,n);else if(t=="pca")i=fe(l);else if(t=="link_down")i=yield v(e,n);else if(t=="sel_tree")i=yield O(e,n);else if(t=="switch")i=yield z(e,n);else if(t=="image"||t=="file")i=q(e,n);else if(s.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(i=I(o,l))}return i}return""})}function g(e,n){return y(this,null,function*(){let l=c(e),i=n[e.field];if(!l)return i;let t=ue(l);if(t&&t.length>0)return I(t,i);{let o=[];if(r[l]?o=r[l]:o=(yield N(l))||[],o&&o.length>0)return r[l]=o,I(o,i)}return""})}function c(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function k(e,n){return y(this,null,function*(){let l=c(e),i=n[e.field];if(!i)return"";let t=[];return r[l+i]?t=r[l+i]:t=(yield pe.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(r[l+i]=t,t.join(",")):""})}function _(e,n){return y(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield ae({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function j(e,n){return y(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e).store||"id",t=(yield re({ids:l,primaryKey:i}))||[];if(t&&t.length>0){let o=[];for(let f of t)o.push(f.title);return o.join(",")}return""})}function d(e,n){return y(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e),t={[i.store||"username"]:l},o=((yield oe(t))||{}).records||[];if(o&&o.length>0){let f=[],L=i.text||"realname";for(let S of o)f.push(S[L]);return f.join(",")}return""})}function x(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=Fe({},i)}catch(i){}return n}function v(e,n){return y(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(r[i])t=r[i];else if(l){let o=JSON.parse(l);if(o){let{table:f,txt:L,key:S,linkField:V}=o,Z=`${f},${L},${S}`;if(t=[...(yield N(Z))||[]],t&&t.length>0&&(r[i]=t,V)){let ee=V.split(",");for(let B of ee)r[B]=t,s.push(B)}}}if(t&&t.length>0){let o=n[i];return I(t,o)}return""})}function O(e,n){return y(this,null,function*(){let{dict:l,field:i}=e,t=[];if(r[i]?t=r[i]:l&&(t=yield N(l)),t&&t.length>0){let o=n[i];return I(t,o)}return""})}function z(e,n){return y(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"是"},{value:t[1],text:"否"},{value:t[0]+"",text:"是"},{value:t[1]+"",text:"否"}],f=n[i];return ce(o,f)})}function A(e){return e.span?e.span:a.span}function q(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let f=se(o)||"";f&&t.push(f)}return t}function K(e){e&&window.open(e)}function R(e){let n=h.value[e];if(!n||n.length==0){C.warning("无图片!");return}ge({imageList:n})}function Y(e){return e?e.substring(e.lastIndexOf("/")+1):""}const G=["file","image","markdown","umeditor"];function Q(e){return G.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function X(e,n){return y(this,null,function*(){let l=n[e.field];return x(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:w,detailFormData:h,getItemSpan:A,handleDownloadFile:K,handleViewImage:R,getFilename:Y,getLabelWidthClass:Q}}const De=ne({name:"DetailForm",components:{DownloadOutlined:he,EyeOutlined:ve,PaperClipOutlined:Ce,LinkTableCard:ye},props:{span:T.number.def(24),schemas:T.array.def([]),data:T.object.def({}),containerClass:T.string.def("")},setup(a){const{formContainerClass:r,detailFormData:s,getItemSpan:h,handleDownloadFile:C,handleViewImage:w,getFilename:b,getLabelWidthClass:g}=xe(a);return{formContainerClass:r,detailFormData:s,getItemSpan:h,handleDownloadFile:C,handleViewImage:w,getFilename:b,getLabelWidthClass:g}}}),Ie={class:"detail-item"},Oe=["title"],Te=["innerHTML"],_e={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},je={key:0},Le={key:2,class:"item-content"},Se={class:"ant-upload-list ant-upload-list-picture-card"},$e={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Ee={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Pe={class:"ant-upload-list-item-info"},Ne=["src"],Ve={class:"ant-upload-list-item-actions"},Be={key:3,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Je={class:""},Me={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Ue={class:"ant-upload-list-item-info"},We={class:"ant-upload-span"},ze={class:"ant-upload-text-icon"},Ae=["href"],qe={class:"ant-upload-list-item-card-actions"},Ke={key:4,class:"item-content"};function Re(a,r,s,h,C,w){const b=F("link-table-card"),g=F("download-outlined"),c=F("eye-outlined"),k=F("paper-clip-outlined"),_=F("a-col"),j=F("a-row");return p(),m("div",{class:H(a.formContainerClass)},[D(j,null,{default:J(()=>[(p(!0),m($,null,E(a.schemas,(d,x)=>(p(),M(_,{key:x,span:a.getItemSpan(d)},{default:J(()=>[u("div",Ie,[u("div",{class:H(["item-title",a.getLabelWidthClass(d)]),title:d.label},P(d.label)+"： ",11,Oe),d.isHtml?(p(),m("div",{key:0,class:"item-content",innerHTML:a.detailFormData[d.field]},null,8,Te)):d.isCard?(p(),m("div",_e,[a.detailFormData[d.field]?(p(),M(b,{key:1,disabled:"",detail:"",value:a.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(p(),m("span",je))])):d.isImage?(p(),m("div",Le,[u("div",Se,[(p(!0),m($,null,E(a.detailFormData[d.field],v=>(p(),m("div",$e,[u("span",null,[u("div",Ee,[u("div",Pe,[u("img",{src:v,alt:"图片不存在",class:"ant-upload-list-item-image"},null,8,Ne)]),u("span",Ve,[D(g,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"]),D(c,{onClick:O=>a.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(p(),m("div",Be,[u("div",He,[(p(!0),m($,null,E(a.detailFormData[d.field],v=>(p(),m("div",Je,[u("span",null,[u("div",Me,[u("div",Ue,[u("span",We,[u("div",ze,[D(k)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},P(a.getFilename(v)),9,Ae),u("span",qe,[D(g,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(p(),m("div",Ke,P(a.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}const Kt=me(De,[["render",Re],["__scopeId","data-v-fd1939fd"]]);export{Kt as default};
