var F=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var y=(s,a,e)=>a in s?F(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e,p=(s,a)=>{for(var e in a||(a={}))z.call(a,e)&&y(s,e,a[e]);if(k)for(var e of k(a))N.call(a,e)&&y(s,e,a[e]);return s},B=(s,a)=>V(s,E(a));var _=(s,a,e)=>new Promise((t,r)=>{var d=o=>{try{n(e.next(o))}catch(m){r(m)}},u=o=>{try{n(e.throw(o))}catch(m){r(m)}},n=o=>o.done?t(o.value):Promise.resolve(o.value).then(d,u);n((e=e.apply(s,a)).next())});import{B as O}from"./BasicModal-02606f87.js";import{t as P,u as S}from"./jeecg-online-vendor-a84f26e2.js";import"./index-5e1edea3.js";import{rules as U}from"./validator-45883e15.js";import{B as j}from"./index-797f995b.js";import{a as q}from"./UserSetting.api-cd36e5f4.js";import{bo as I}from"./antd-vue-vendor-04f0af1d.js";import{d as b,r as L,k as M,V as f,a5 as T,a9 as $,a7 as i,f as c,E as A,ag as D,u as G}from"./vue-5a09445c.js";const H=b({name:"user-replace-email-modal"}),se=b(B(p({},H),{emits:["register","success"],setup(s,{emit:a}){P();const{createMessage:e}=S(),t=L({email:""}),r=M(),d={email:[p({},U.duplicateCheckRule("sys_user","email",t,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]};I.useForm;const u=M(""),[n,{setModalProps:o,closeModal:m}]=j(l=>_(this,null,function*(){r.value.resetFields(),r.value.clearValidate(),o({confirmLoading:!1}),u.value="修改邮箱",l.record.smscode="",Object.assign(t,l.record)}));function h(){return _(this,null,function*(){yield r.value.validateFields(),q(t).then(l=>{l.success?(e.success("修改邮箱成功"),a("success"),m()):e.warning(l.message)})})}return(l,g)=>{const w=f("a-input"),v=f("a-form-item"),C=f("a-button"),R=f("a-form");return T(),$(O,D(l.$attrs,{onRegister:G(n),width:"500px",title:u.value,showCancelBtn:!1,showOkBtn:!1}),{default:i(()=>[c(R,{class:"antd-modal-form",ref_key:"formRef",ref:r,model:t,rules:d},{default:i(()=>[c(v,{name:"email"},{default:i(()=>[c(w,{size:"large",value:t.email,"onUpdate:value":g[0]||(g[0]=x=>t.email=x),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),c(v,null,{default:i(()=>[c(C,{size:"large",type:"primary",block:"",onClick:h},{default:i(()=>[A(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{se as _};
