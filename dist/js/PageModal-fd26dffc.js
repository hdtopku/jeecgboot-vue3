var B=Object.defineProperty;var C=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var _=(n,t,e)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,f=(n,t)=>{for(var e in t||(t={}))M.call(t,e)&&_(n,e,t[e]);if(C)for(var e of C(t))P.call(t,e)&&_(n,e,t[e]);return n};var g=(n,t,e)=>new Promise((p,c)=>{var d=a=>{try{l(e.next(a))}catch(i){c(i)}},m=a=>{try{l(e.throw(a))}catch(i){c(i)}},l=a=>a.done?p(a.value):Promise.resolve(a.value).then(d,m);l((e=e.apply(n,t)).next())});import{d as w,l as F,e as k,u as r,V as I,a7 as S,ac as x,aa as b,f as v,E as R,af as E}from"./vue-86253b15.js";import{B as O}from"./index-5f3b36bb.js";import"./index-2b71c6a1.js";import{s as U}from"./page.api-9e058fb4.js";import{bh as V,bf as T,bi as j,be as A}from"./jeecg-online-vendor-bc5d810e.js";import{u as D,B as L}from"./useForm-61401b42.js";import{E as q}from"./index-4de4eaa0.js";const Z=[{label:"名称",field:"name",component:"Input",colProps:{span:6}}],G=[{label:"",field:"id",component:"Input",show:!1},{label:"名称",field:"name",component:"Input",required:!0},{label:"封面图",field:"coverUrl",component:"JImageUpload",componentProps:{fileMax:1}},{label:"分类",field:"type",component:"Select",defaultValue:"1",required:!0,componentProps:{options:[{label:"仪表盘设计",value:"1",key:"1"},{label:"门户设计器",value:"2",key:"2"}]}},{label:"保护码",field:"protectionCode",component:"StrengthMeter"}],J=w({__name:"PageModal",emits:["success","register"],setup(n,{emit:t}){const e=F(!0),[p,{resetFields:c,setFieldsValue:d,validate:m}]=D({schemas:G,showActionButtonGroup:!1}),[l,{setModalProps:a,closeModal:i}]=q(s=>g(this,null,function*(){if(yield c(),a({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),r(e)){let o=f({},s.record);o.protectionCode&&o.protectionCode.length>0&&(o.protectionCode=V(o.protectionCode)),yield d(f({},o))}})),h=k(()=>r(e)?"编辑":"新增");function y(s=0){return g(this,null,function*(){try{const o=yield m();a({confirmLoading:!0}),o.protectionCode&&(o.protectionCode=T(o.protectionCode));const u=yield U(o,e.value);o.id&&j(A.DRAG_CACHE_PREFIX+o.id),i(),t("success",s===1?u:null)}finally{a({confirmLoading:!1})}})}return(s,o)=>{const u=I("a-button");return S(),x(r(O),E(s.$attrs,{onRegister:r(l),okText:"保存",title:h.value,onOk:y,width:700,destroyOnClose:""}),{appendFooter:b(()=>[v(u,{type:"primary",onClick:o[0]||(o[0]=N=>y(1))},{default:b(()=>[R("保存并设计")]),_:1})]),default:b(()=>[v(r(L),{onRegister:r(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"])}}}),ee=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{ee as P,J as _,Z as s};
