import{ac as p,ad as y,ae as x}from"./index-fde9c72f.js";import{j as m}from"./jeecg-online-vendor-bf2efbcb.js";import{I as v,k as w,u as r,t as k,g as b}from"./vue-c7e3516e.js";import"./lodash-es-vendor-42c8d3d4.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const W=Symbol("watermark-dom");function D(c=w(document.body)){const d=x(function(){const e=r(c);if(!e)return;const{clientHeight:t,clientWidth:i}=e;l({height:t,width:i})}),a=W.toString(),o=v(),f=()=>{const e=r(o);o.value=void 0;const t=r(c);!t||(e&&t.removeChild(e),p(t,d))};function u(e){const t=document.createElement("canvas"),i=300,s=240;Object.assign(t,{width:i,height:s});const n=t.getContext("2d");return n&&(n.rotate(-20*Math.PI/120),n.font="15px Vedana",n.fillStyle="rgba(0, 0, 0, 0.15)",n.textAlign="left",n.textBaseline="middle",n.fillText(e,i/20,s)),t.toDataURL("image/png")}function l(e={}){const t=r(o);!t||(m(e.width)&&(t.style.width=`${e.width}px`),m(e.height)&&(t.style.height=`${e.height}px`),m(e.str)&&(t.style.background=`url(${u(e.str)}) left top repeat`))}const h=e=>{if(r(o))return l({str:e}),a;const t=document.createElement("div");o.value=t,t.id=a,t.style.pointerEvents="none",t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.zIndex="100000";const i=r(c);if(!i)return a;const{clientHeight:s,clientWidth:n}=i;return l({str:e,width:n,height:s}),i.appendChild(t),a};function g(e){h(e),y(document.documentElement,d),b()&&k(()=>{f()})}return{setWatermark:g,clear:f}}export{D as useWatermark};
