import{d as J,l as b,w as M,V as f,a7 as r,ac as T,aa as s,ad as e,v as N,B as V,f as u,E as c,a8 as t,ae as l,W as _,u as w,ak as P}from"./vue-86253b15.js";import X from"./CommonList-aaa63f3f.js";import{a as Y,s as Z}from"./Am.api-a009ccd3.js";import{r as i}from"./index-4de4eaa0.js";import"./jeecg-online-vendor-bc5d810e.js";import"./antd-vue-vendor-371529c2.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";const m={key:0},aa={key:1},na={key:0},sa={key:1},oa={key:0},la={key:1},ra={key:0},ua={key:1},ca={key:0},ea={key:0},ta={key:0},da={key:1},_a={key:0,class:"font-light text-sm text-gray-500"},Ta=J({__name:"AmDataList",emits:["handleEdit"],setup(pa,{expose:Q,emit:R}){const{hasPermission:v}=i(),E=b(),B=b(),U=(n,k)=>{n.valid=k,Z(n,!0).then(()=>{})},y=b("0"),F=n=>(n==null?void 0:n.type)===6?"c.taojingling.cn/d/"+(n==null?void 0:n.code):"c.taojingling.cn/c/"+(n==null?void 0:n.code),h=b(0);M(B,()=>{var n,k;h.value=0,(k=(n=B.value)==null?void 0:n.records)==null||k.forEach(o=>{o.valid===-1&&(o.status===-1||o.status===-2)&&++h.value,o.showOperate=(o==null?void 0:o.valid)!==-1&&(o==null?void 0:o.status)>-1&&(o==null?void 0:o.status)<4})});const H=n=>{switch(n=Number.parseInt(n),n){case 0:case 1:case 2:return"processing";case 3:return"cyan";case 4:return"success";case-1:case-2:return"error"}},W=n=>{R("handleEdit",n)},L=b(!1);return Q({startQuery:(n={})=>{y.value=n==null?void 0:n.status,E.value.execQuery(Y,n)},changeAdvanced:()=>{L.value=!L.value},changeActiveKey:n=>{y.value=n}}),(n,k)=>{const o=f("a-typography-text"),q=f("a-typography-link"),z=f("a-button"),A=f("a-menu-item"),G=f("a-menu"),p=f("a-tag");return r(),T(X,{ref_key:"CommonListRef",ref:E},{header:s(()=>[e("span",null,[N(u(o,{mark:""},{default:s(()=>[c("已打开验证页面，但还没点击开始验证")]),_:1},512),[[V,y.value==="1"]]),N(u(o,{mark:""},{default:s(()=>[c("所有状态：已打开+已开始+已关闭+退款等")]),_:1},512),[[V,y.value==="0"]]),N(u(o,{mark:""},{default:s(()=>[c("验证结束后，系统关闭教程及页面至空白")]),_:1},512),[[V,y.value==="2"]]),N(u(o,{mark:""},{default:s(()=>{var a,d;return[((a=B.value)==null?void 0:a.total)===0?(r(),t("span",m,"买家申请退款，记得销毁验证页面")):(r(),t("span",aa,[e("span",null,"管理员关闭"+l(((d=B.value)==null?void 0:d.total)-h.value)+"条",1),h.value>0?(r(),t("span",na,"+买家主动退款"+l(h.value)+"条",1)):(r(),t("span",sa,"买家主动退款"))]))]}),_:1},512),[[V,y.value==="4"]])])]),shelter:s(({item:a})=>[a.verifyCount>0?(r(),t("span",oa,"|"+l(a.verifyCount),1)):_("",!0),c(),w(v)("link:switch")&&(a==null?void 0:a.type)===6?(r(),t("span",la,"[尊]")):_("",!0)]),left:s(({item:a})=>{var d,g;return[e("div",null,[u(o,{copyable:{text:F(a)}},{default:s(()=>[e("span",{class:P(["",(a==null?void 0:a.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},l(a==null?void 0:a.code),3)]),_:2},1032,["copyable"])]),w(v)("link:switch")&&((d=a==null?void 0:a.link)==null?void 0:d.length)>3?(r(),t("div",ra,[u(q,{copyable:{text:a==null?void 0:a.link}},{default:s(()=>{var x,C;return[c(l((C=a==null?void 0:a.link)==null?void 0:C.substring(((x=a==null?void 0:a.link)==null?void 0:x.length)-4)),1)]}),_:2},1032,["copyable"])])):_("",!0),w(v)("link:switch")&&((g=a==null?void 0:a.remark)==null?void 0:g.length)>0?(r(),t("div",ua,[u(o,{copyable:{text:a==null?void 0:a.remark},mark:""},{default:s(()=>[c(" 注:"+l(a==null?void 0:a.remark),1)]),_:2},1032,["copyable"])])):_("",!0)]}),operate:s(({item:a})=>[u(G,null,{default:s(()=>[a?(r(),T(A,{key:0,onClick:d=>W(a)},{default:s(()=>[w(v)("link:switch")?(r(),T(z,{key:0,type:"link",size:"small"},{default:s(()=>[c("编辑 ")]),_:1})):_("",!0)]),_:2},1032,["onClick"])):_("",!0),u(A,null,{default:s(()=>[_("",!0),u(z,{type:"link",size:"small",danger:"",onClick:d=>U(a,-1)},{default:s(()=>[c(" 销毁验证 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),top:s(({item:a})=>{var d,g,x,C,O,S,$,D,j,I,K;return[e("div",null,l(((d=a==null?void 0:a.country)==null?void 0:d.indexOf("中国"))>-1||((x=(g=a==null?void 0:a.country)==null?void 0:g.toUpperCase())==null?void 0:x.indexOf("CHINA"))>-1?"":a.country)+" "+l(a.province)+l(a.city)+l(a.county)+" | "+l(a.browser),1),e("div",null,l(a.operator)+" | "+l(a.model)+" | "+l(a.system),1),e("div",null,[u(p,null,{default:s(()=>[c("打开时间")]),_:1}),c(" "+l((C=a==null?void 0:a.visitTime)==null?void 0:C.substring(5)),1)]),e("div",null,[u(p,null,{default:s(()=>[c("验证时间")]),_:1}),((O=a==null?void 0:a.verifyTime)==null?void 0:O.length)>0?(r(),t("span",ca,l((S=a==null?void 0:a.verifyTime)==null?void 0:S.substring(5)),1)):(r(),T(p,{key:1,color:"error",plain:"",plainFill:""},{default:s(()=>[c(" 未开始")]),_:1}))]),e("div",null,[u(p,null,{default:s(()=>[c("最后访问")]),_:1}),(($=a==null?void 0:a.updateTime)==null?void 0:$.length)>0?(r(),t("span",ea,l((D=a==null?void 0:a.updateTime)==null?void 0:D.substring(5)),1)):_("",!0)]),((j=a==null?void 0:a.refundTime)==null?void 0:j.length)>0?(r(),t("div",ta,[u(p,{color:"error"},{default:s(()=>[c("买家退款")]),_:1}),e("span",null,l((I=a==null?void 0:a.refundTime)==null?void 0:I.substring(5)),1)])):_("",!0),w(v)("link:switch")&&((K=a==null?void 0:a.createBy)==null?void 0:K.length)>0?(r(),t("div",da,[u(p,null,{default:s(()=>[c("创建人")]),_:1}),e("span",null,l(a==null?void 0:a.createBy),1)])):_("",!0)]}),right:s(({item:a})=>[e("div",null,[e("div",null,[u(p,{color:H(a.status)},{default:s(()=>[e("text",{class:P((a==null?void 0:a.valid)===-1?"line-through":"")},l(a.statusName),3)]),_:2},1032,["color"])]),(a==null?void 0:a.valid)!==-1&&(a==null?void 0:a.status)>-1&&(a==null?void 0:a.status)<4?_("",!0):(r(),t("div",_a," 页面空白 "))])]),_:1},512)}}});export{Ta as default};
