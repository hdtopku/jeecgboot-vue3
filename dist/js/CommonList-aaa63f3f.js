import{d as K,l as _,e as X,V as r,a7 as v,a8 as h,ad as i,f as a,aa as t,E as m,ae as p,v as I,B as L,as as Y,R as f,u as Z,ac as M,W as ee,F as oe,g as te}from"./vue-86253b15.js";import{cL as le}from"./antd-vue-vendor-371529c2.js";import"./jeecg-online-vendor-bc5d810e.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";const ae={class:"border-solid rounded"},ne={class:"ant-dropdown-link"},se={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},re={key:0},ue={key:1},me=K({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0},buttonColor:{type:String,default:"primary"}},emits:["queryList","changeAdvanced","confirmCopy"],setup(b,{expose:T,emit:H}){const $=b,u=_(1),y=_(!1),B=()=>{y.value=!0,H("confirmCopy",{count:u.value})},g=_(!1),C=_(!1),e=_(),N=_(),F=_(),S=(o,c,d=!1)=>{N.value=o,F.value=c,d?C.value=!0:(g.value=!0,c.pageNo=1),o(c).then(s=>{if(c.pageNo=s.current+1,s.current>1&&d){e.value.records.push(...s.records);return}e.value=s}).catch(s=>{}).finally(()=>{g.value=!1,C.value=!1})},O=()=>{S(N.value,F.value,!0)},P=X(()=>{var o,c,d,s;return((o=e==null?void 0:e.value)==null?void 0:o.total)===0||((d=(c=e==null?void 0:e.value)==null?void 0:c.records)==null?void 0:d.length)>=((s=e==null?void 0:e.value)==null?void 0:s.total)}),{proxy:k}=te();return T({execQuery:S,queryFinish:(o=null)=>{o==null?k.tool.error("复制失败"):u.value===1?k.tool.copy(o,o+"已复制"):k.tool.copy(o,u.value+"条已复制"),y.value=!1}}),(o,c)=>{var V;const d=r("a-typography-title"),s=r("a-col"),Q=r("a-slider"),w=r("a-button"),R=r("a-popconfirm"),U=r("a-row"),W=r("a-dropdown"),j=r("a-list-item-meta"),z=r("a-list-item"),G=r("a-spin"),J=r("a-list");return v(),h(oe,null,[i("div",null,[a(U,{class:""},{default:t(()=>[a(s,{span:4},{default:t(()=>[a(d,{level:5},{default:t(()=>{var l,n;return[m("共"+p((n=(l=e.value)==null?void 0:l.total)!=null?n:0)+"条",1)]}),_:1})]),_:1}),a(s,{span:14},{default:t(()=>[a(Q,{style:{display:"inline-block"},value:u.value,"onUpdate:value":c[0]||(c[0]=l=>u.value=l),min:1,max:500},null,8,["value"])]),_:1}),a(s,{class:"text-center",span:6},{default:t(()=>[I(a(w,{loading:y.value,type:$.buttonColor,onClick:B},{default:t(()=>[m("复制"+p(u.value)+"条 ",1)]),_:1},8,["loading","type"]),[[L,u.value===1]]),a(R,{title:`确定复制${u.value}条吗?`,"ok-text":"确定","cancel-text":"取消",onConfirm:B},{default:t(()=>[I(a(w,{type:$.buttonColor,loading:y.value},{default:t(()=>[m("复制"+p(u.value)+"条 ",1)]),_:1},8,["type","loading"]),[[L,u.value>1]])]),_:1},8,["title"])]),_:1})]),_:1})]),a(J,{loading:g.value,"data-source":(V=e.value)==null?void 0:V.records},{renderItem:t(({item:l,index:n})=>[a(z,null,{default:t(()=>[a(j,null,Y({title:t(()=>[i("span",null,[f(o.$slots,"top",{item:l,index:n})])]),description:t(()=>[f(o.$slots,"bottom",{item:l,index:n})]),_:2},[b.showLeft?{name:"avatar",fn:t(()=>[i("div",null,[i("span",ae,"#"+p(n+1),1),i("span",null,[f(o.$slots,"shelter",{item:l,index:n})])]),a(W,null,{overlay:t(()=>[i("span",null,[f(o.$slots,"operate",{item:l,index:n})])]),default:t(()=>[i("a",ne,[m(" 操作 "),a(Z(le))])]),_:2},1024),i("span",null,[f(o.$slots,"left",{style:"position: relative",item:l,index:n})])]),key:"0"}:void 0]),1024),i("span",null,[f(o.$slots,"right",{item:l,index:n})])]),_:2},1024)]),loadMore:t(()=>{var l,n,q,x;return[((l=e.value)==null?void 0:l.total)>0?(v(),h("div",se,[P.value?(v(),h("span",re,"加载完成("+p((q=(n=e.value)==null?void 0:n.records)==null?void 0:q.length)+"/"+p((x=e.value)==null?void 0:x.total)+")",1)):(v(),h("span",ue,[C.value?(v(),M(G,{key:0})):(v(),M(w,{key:1,onClick:O},{default:t(()=>{var D,A,E;return[m("加载更多("+p((A=(D=e.value)==null?void 0:D.records)==null?void 0:A.length)+"/"+p((E=e.value)==null?void 0:E.total)+")",1)]}),_:1}))]))])):ee("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{me as default};
