var y=(c,g,r)=>new Promise((u,p)=>{var e=n=>{try{d(r.next(n))}catch(m){p(m)}},v=n=>{try{d(r.throw(n))}catch(m){p(m)}},d=n=>n.done?u(n.value):Promise.resolve(n.value).then(e,v);d((r=r.apply(c,g)).next())});import{u as A,C as V}from"./upload-dbda28ff.js";import{g as Y,t as F,u as R,D as H}from"./jeecg-online-vendor-885afdd4.js";import{h as O}from"./header-55b09394.js";import{z as j,g as q}from"./index-4b015b65.js";import{c as P,d as $}from"./antd-vue-vendor-a78909e6.js";import{a as G,g as J}from"./UserSetting.api-50be9b89.js";import{_ as K}from"./UserAccountModal.vue_vue_type_script_setup_true_lang-d3d7cabb.js";import"./index-9d0047d3.js";import{d as L,k as b,e as Q,o as W,V as x,a5 as D,a6 as I,aa as t,f,u as T,ab as l,a7 as X,E as Z,F as tt,ap as et,aq as st}from"./vue-bcbaddf9.js";import"./base64Conver-fa2fe1af.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-9edfd3ae.js";import"./lodash-es-vendor-9b741fb8.js";import"./echarts-vendor-6c8e2159.js";import"./BasicForm-cb329d14.js";import"./componentMap-b7e1d2b2.js";import"./useFormItem-4c9e708e.js";import"./JUpload.vue_vue_type_style_index_0_lang-4988a4ba.js";import"./BasicModal-5ab8e0d9.js";import"./useWindowSizeFn-e9ba77b6.js";import"./download-19743191.js";import"./index-9331928c.js";import"./index-8e8b432a.js";import"./useCountdown-4ab5c024.js";import"./JAddInput-63b4f847.js";import"./areaDataUtil-661e31ab.js";import"./JSelectUser-43dfc55e.js";import"./props-53502c55.js";import"./JSelectBiz-fda4a398.js";import"./index-d096c39b.js";import"./codemirror-vendor-611c4582.js";import"./index-b8c8f01c.js";import"./bem-2f6fe1be.js";import"./props-c7c3390f.js";import"./useContextMenu-790e41ea.js";import"./depart.api-6f5abe31.js";import"./JSelectDept-3f191bfb.js";import"./JPopup-99598936.js";import"./cron-parser-vendor-658b8fec.js";import"./index-ae3db9b9.js";import"./BasicForm.vue_vue_type_style_index_0_lang-7b6f7701.js";import"./useForm-fd714c19.js";const i=c=>(et("data-v-6673b8e2"),c=c(),st(),c),ot={class:"account-padding"},at={class:"user-setting-top"},nt={class:"account-avatar"},it={class:"account-right"},rt={key:0},lt={class:"font-size-17 account-name"},ct={key:1},pt={class:"use-day"},ut={class:"account-data"},dt={class:"account-detail"},mt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"详细资料",-1)),_t={class:"margin-bottom-10 font-size-13"},ft=i(()=>t("span",{class:"gray-75 item-label"},"生日",-1)),vt={class:"gray-3"},gt={class:"margin-bottom-10 font-size-13"},ht=i(()=>t("span",{class:"gray-75 item-label"},"性别",-1)),yt={class:"gray-3"},bt={class:"margin-bottom-10 nowarp font-size-13"},xt=i(()=>t("span",{class:"gray-75 item-label"},"职位",-1)),Dt={class:"gray-3"},It=i(()=>t("span",{class:"item-label"},null,-1)),Tt={class:"account-info"},zt=i(()=>t("div",{class:"font-size-15 font-bold font-color-gray",style:{"margin-bottom":"16px"}},"联系信息",-1)),Mt={class:"margin-bottom-10 font-size-13"},St=i(()=>t("span",{class:"gray-75 item-label"},"邮箱",-1)),Bt={class:"gray-3"},Ct={class:"margin-bottom-10 font-size-13"},kt=i(()=>t("span",{class:"gray-75 item-label"},"手机",-1)),wt={class:"gray-3"},Ut=L({__name:"BaseSetting",setup(c){const g=Y("sex")||[{text:"男",value:"1"},{text:"女",value:"2"}],{createMessage:r}=R(),u=F(),p=b(!1),e=b({}),v=b(),[d,{openModal:n}]=j(),m=Q(()=>q(e.value.avatar)||O);function S(s,o){const a=u.getUserInfo;a.avatar=o,u.setUserInfo(a),o&&z({avatar:o,id:a.id})}function z(s){G(s).then(o=>{o.success||r.warn(o.message)})}function B(){p.value=!0,setTimeout(()=>{v.value.focus()},100)}function C(){e.value.realname?(z({realname:e.value.realname,id:e.value.id}),u.setUserInfo(e.value)):r.warn("请输入姓名"),p.value=!1}function k(s){return s?$(s).format("YYYY-MM-DD"):"未填写"}function w(s){let o=g.find(_=>parseInt(_.value)===s),a="未填写";return o&&(a=o.text),a}function U(){let s=P(e.value);n(!0,{record:s})}function M(){J().then(s=>y(this,null,function*(){s.success&&(s.result?(s.result.sexText=w(s.result.sex),s.result.birthday=k(s.result.birthday),s.result.createTimeText=E(s.result.createTime),e.value=s.result):e.value={})}))}function E(s){let o,a,_=Date.parse(s),h=new Date().getTime();return a=Math.abs(h-_),o=Math.floor(a/(1e3*3600*24)),o+" 天"}return W(()=>y(this,null,function*(){M()})),(s,o)=>{const a=x("Icon"),_=x("a-tooltip"),h=x("a-input");return D(),I(tt,null,[t("div",ot,[t("div",at,[t("div",nt,[f(T(V),{uploadApi:T(A),showBtn:!1,value:m.value,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:S,width:"80"},null,8,["uploadApi","value"]),t("div",it,[p.value?(D(),I("div",ct,[f(h,{ref_key:"accountNameEdit",ref:v,maxlength:100,value:e.value.realname,"onUpdate:value":o[0]||(o[0]=N=>e.value.realname=N),onBlur:C},null,8,["value"])])):(D(),I("div",rt,[t("span",lt,l(e.value.realname),1),f(_,{content:"编辑姓名"},{default:X(()=>[f(a,{class:"pointer font-size-17 gray-bd account-icon",icon:"ant-design:edit-outlined",onClick:B})]),_:1})])),t("div",pt,[Z(" 使用："),t("span",null,l(e.value.createTimeText),1)])])])]),t("div",ut,[t("div",dt,[mt,t("div",_t,[ft,t("span",vt,l(e.value.birthday),1)]),t("div",gt,[ht,t("span",yt,l(e.value.sexText),1)]),t("div",bt,[xt,t("span",Dt,l(e.value.postText?e.value.postText:"未填写"),1)]),t("div",{class:"font-size-13"},[It,t("span",{class:"item-label pointer",style:{color:"#1e88e5"},onClick:U},"编辑")])]),t("div",Tt,[zt,t("div",Mt,[St,t("span",Bt,l(e.value.email?e.value.email:"未填写"),1)]),t("div",Ct,[kt,t("span",wt,l(e.value.phone?e.value.phone:"未填写"),1)])])])]),f(K,{onRegister:T(d),onSuccess:M},null,8,["onRegister"])],64)}}});const De=H(Ut,[["__scopeId","data-v-6673b8e2"]]);export{De as default};
