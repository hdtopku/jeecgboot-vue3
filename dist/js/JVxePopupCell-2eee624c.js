var Ce=Object.defineProperty,ve=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var U=(e,o,a)=>o in e?Ce(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,H=(e,o)=>{for(var a in o||(o={}))ye.call(o,a)&&U(e,a,o[a]);if(G)for(var a of G(o))we.call(o,a)&&U(e,a,o[a]);return e},W=(e,o)=>ve(e,_e(o));import{au as X,D as Y,ab as oe,b8 as be,l as ae,_ as A,aa as Ee}from"./jeecg-online-vendor-bf2efbcb.js";import{B as ke}from"./index-8cf3aabb.js";import{A as Re,p as u,E as Ie,aF as Se,aG as Pe,aH as Fe,aI as Oe}from"./index-fde9c72f.js";import{d as D,r as Z,k as E,e as O,u as i,w as F,s as Be,U as c,aV as b,as as S,f as r,bi as p,bz as Ve,F as x,a_ as $e,v as Me,ar as J,A as Te,at as ee,E as q,ag as qe,V as ne,aQ as j,o as Je}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const Ae=D({name:"JPopupOnlReportModal",components:{BasicModal:ke,SearchFormItem:X(()=>Y(()=>import("./SearchFormItem-28a3afbc.js"),["js/SearchFormItem-28a3afbc.js","js/vue-c7e3516e.js","js/JAddInput-2cbbbde9.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/areaDataUtil-b2642a1f.js","js/useFormItem-4a12ff45.js","js/index-8cf3aabb.js","js/BasicModal-ff8f2086.js","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/useSelectBiz-c744cf20.js","js/props-8e8dbf4f.js","js/index-d4783a30.js","js/bem-deccd0b6.js","js/props-c3781b9d.js","js/useContextMenu-c0be0b5c.js","assets/useContextMenu.6fcaad79.css","assets/index.a95e0833.css","js/useTreeBiz-faf9875a.js","js/index-63ed9c18.js","js/depart.api-25dc3d39.js","assets/JAddInput.b4406d8f.css","js/BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js","js/componentMap-a6d21ad6.js","js/JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js","assets/JUpload.ffbeea34.css","js/download-c8889ed9.js","js/base64Conver-4e359726.js","js/index-ee020524.js","assets/index.399aa0e3.css","js/index-53e807bd.js","js/useCountdown-473e4dcc.js","assets/index.15cc10f8.css","js/index-ed4be6fa.js","assets/index.600d2c21.css","assets/componentMap.524c5264.css","assets/BasicForm.384f4697.css","assets/SearchFormItem.b13c918a.css"]),{loading:!1}),BasicTable:X(()=>Y(()=>import("./BasicTable-29c6504d.js"),["js/BasicTable-29c6504d.js","js/BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js","js/vue-c7e3516e.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/BasicForm-83ba9c88.js","js/BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js","js/componentMap-a6d21ad6.js","js/useFormItem-4a12ff45.js","js/index-8cf3aabb.js","js/BasicModal-ff8f2086.js","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js","assets/JUpload.ffbeea34.css","js/download-c8889ed9.js","js/base64Conver-4e359726.js","js/index-ee020524.js","assets/index.399aa0e3.css","js/index-53e807bd.js","js/useCountdown-473e4dcc.js","assets/index.15cc10f8.css","js/JAddInput-2cbbbde9.js","js/areaDataUtil-b2642a1f.js","js/useSelectBiz-c744cf20.js","js/props-8e8dbf4f.js","js/index-d4783a30.js","js/bem-deccd0b6.js","js/props-c3781b9d.js","js/useContextMenu-c0be0b5c.js","assets/useContextMenu.6fcaad79.css","assets/index.a95e0833.css","js/useTreeBiz-faf9875a.js","js/index-63ed9c18.js","js/depart.api-25dc3d39.js","assets/JAddInput.b4406d8f.css","js/index-ed4be6fa.js","assets/index.600d2c21.css","assets/componentMap.524c5264.css","assets/BasicForm.384f4697.css","js/useForm-fa63344e.js","js/injectionKey-5da932b3.js","assets/BasicTable.d7493b42.css"]),{loading:!0})},props:["multi","code","sorter","groupId","param"],emits:["ok","register"],setup(e,{emit:o,refs:a}){const{createMessage:n}=ae(),y=Z({xs:{span:24},sm:{span:6}}),g=Z({xs:{span:24},sm:{span:18}}),[t,{closeModal:l}]=Re(),h=E(),s=E(),d=E(!1),f=oe(),w=E({x:!0}),k=O(()=>Object.assign({},i(e),i(f))),[{visibleChange:C,loadColumnsInfo:m,dynamicParamHandler:B,loadData:v,handleChangeInTable:P,combineRowKey:V,clickThenCheck:R,filterUnuseSelect:te,getOkSelectRows:re},{visible:se,rowSelection:le,checkedKeys:K,selectRows:I,pagination:N,dataSource:ue,columns:L,loading:ie,title:ce,iSorter:$,queryInfo:M,queryParam:Q,dictOptions:de}]=be(k,s),pe=O(()=>i(M)&&i(M).length>0);F(()=>e.code,()=>{m()}),F(()=>e.param,()=>{se&&(B(),v())}),Be(()=>{if(e.sorter){let _=e.sorter.split("=");_.length===2&&["asc","desc"].includes(_[1].toLowerCase())&&($.value={column:_[0],order:_[1].toLowerCase()},i(L).forEach(T=>{T.dataIndex===i($).column?T.sortOrder=i($).order==="asc"?"ascend":"descend":T.sortOrder=!1}))}}),F(()=>N.current,_=>{_&&s.value.setPagination({current:_})});function fe(){d.value=!i(d)}function z(){l(),K.value=[],I.value=[]}function me(){if(te(),!e.multi&&i(I)&&i(I).length>1)return n.warning("\u53EA\u80FD\u9009\u62E9\u4E00\u6761\u8BB0\u5F55"),!1;if(!i(I)||i(I).length==0)return n.warning("\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u8BB0\u5F55"),!1;let _=re();o("ok",_),z()}function ge(){v(1)}function he(){Q.value={},v(1)}return{attrs:f,register:t,tableScroll:w,dataSource:ue,pagination:N,columns:L,rowSelection:le,checkedKeys:K,loading:ie,title:ce,handleCancel:z,handleSubmit:me,clickThenCheck:R,loadData:v,combineRowKey:V,handleChangeInTable:P,visibleChange:C,queryInfo:M,queryParam:Q,tableRef:s,formRef:h,labelCol:y,wrapperCol:g,dictOptions:de,showSearchFlag:pe,toggleSearchStatus:d,handleToggleSearch:fe,searchQuery:ge,searchReset:he}}});const De={key:0,class:"jeecg-basic-table-form-container"},je={style:{float:"left",overflow:"hidden"},class:"table-page-search-submitButtons"};function Ke(e,o,a,n,y,g){const t=c("SearchFormItem"),l=c("a-col"),h=c("a-button"),s=c("Icon"),d=c("a-row"),f=c("a-form"),w=c("BasicTable"),k=c("BasicModal");return b(),S("div",null,[r(k,j(e.$attrs,{onRegister:e.register,title:e.title,width:1200,onOk:e.handleSubmit,onCancel:e.handleCancel,cancelText:"\u5173\u95ED",wrapClassName:"j-popup-modal",onVisibleChange:e.visibleChange}),{default:p(()=>[e.showSearchFlag?(b(),S("div",De,[r(f,{ref:"formRef",model:e.queryParam,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,onKeyup:Ve(e.searchQuery,["enter","native"])},{default:p(()=>[r(d,{gutter:24},{default:p(()=>[(b(!0),S(x,null,$e(e.queryInfo,(C,m)=>(b(),S(x,null,[C.hidden==="1"?Me((b(),J(l,{md:8,sm:24,key:"query"+m},{default:p(()=>[r(t,{formElRef:e.formRef,queryParam:e.queryParam,item:C,dictOptions:e.dictOptions},null,8,["formElRef","queryParam","item","dictOptions"])]),_:2},1024)),[[Te,e.toggleSearchStatus]]):(b(),J(l,{md:8,sm:24,key:"query"+m},{default:p(()=>[r(t,{formElRef:e.formRef,queryParam:e.queryParam,item:C,dictOptions:e.dictOptions},null,8,["formElRef","queryParam","item","dictOptions"])]),_:2},1024))],64))),256)),r(l,{md:8,sm:8},{default:p(()=>[ee("span",je,[r(l,{lg:6},{default:p(()=>[r(h,{type:"primary",preIcon:"ant-design:reload-outlined",onClick:e.searchReset},{default:p(()=>[q("\u91CD\u7F6E")]),_:1},8,["onClick"]),r(h,{type:"primary",preIcon:"ant-design:search-outlined",onClick:e.searchQuery,style:{"margin-left":"8px"}},{default:p(()=>[q("\u67E5\u8BE2")]),_:1},8,["onClick"]),ee("a",{onClick:o[0]||(o[0]=(...C)=>e.handleToggleSearch&&e.handleToggleSearch(...C)),style:{"margin-left":"8px"}},[q(qe(e.toggleSearchStatus?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),r(s,{icon:e.toggleSearchStatus?"ant-design:up-outlined":"ant-design:down-outlined"},null,8,["icon"])])]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","onKeyup"])])):ne("",!0),r(w,{ref:"tableRef",canResize:!1,bordered:!0,loading:e.loading,rowKey:e.combineRowKey,columns:e.columns,showIndexColumn:!1,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,onRowClick:e.clickThenCheck,onChange:e.handleChangeInTable},{tableTitle:p(()=>[]),_:1},8,["loading","rowKey","columns","dataSource","pagination","rowSelection","onRowClick","onChange"])]),_:1},16,["onRegister","title","onOk","onCancel","onVisibleChange"])])}const Ne=A(Ae,[["render",Ke],["__scopeId","data-v-70daae03"]]),Le=D({name:"JPopup",components:{JPopupOnlReportModal:Ne},inheritAttrs:!1,props:{code:u.string.def(""),value:u.string.def(""),sorter:u.string.def(""),width:u.number.def(1200),placeholder:u.string.def("\u8BF7\u9009\u62E9"),multi:u.bool.def(!1),param:u.object.def({}),spliter:u.string.def(","),groupId:u.string.def(""),formElRef:u.object,setFieldsValue:u.func,getContainer:u.func,fieldConfig:{type:Array,default:()=>[]}},emits:["update:value","register","change","focus"],setup(e,{emit:o,refs:a}){const{createMessage:n}=ae(),y=oe(),g=E(!0),t=E(""),[l,{openModal:h}]=Ie();let{code:s,fieldConfig:d}=e;const f=O(()=>e.groupId?`${e.groupId}_${s}_${d[0].source}_${d[0].target}`:"");Je(()=>{e.fieldConfig.length==0&&(n.error("popup\u53C2\u6570\u672A\u6B63\u786E\u914D\u7F6E!"),g.value=!1)}),F(()=>e.value,m=>{t.value=m&&m.length>0?m.split(e.spliter).join(","):""},{immediate:!0});function w(){o("focus"),!e.disabled&&h(!0)}function k(){t.value=""}function C(m){let{fieldConfig:B}=e,v={};for(let P of B){let V=m.map(R=>R[P.source]).join(",");P.target.split(",").forEach(R=>{v[R]=V})}e.formElRef&&e.formElRef.setFieldsValue(v),e.setFieldsValue&&e.setFieldsValue(v),o("change",v)}return{showText:t,avalid:g,uniqGroupId:f,attrs:y,regModal:l,handleOpen:w,handleEmpty:k,callBack:C}}});const Qe={key:0,class:"components-input-demo-presuffix"};function ze(e,o,a,n,y,g){const t=c("Icon"),l=c("a-input"),h=c("JPopupOnlReportModal");return e.avalid?(b(),S("div",Qe,[r(l,j({onClick:e.handleOpen,value:e.showText,"onUpdate:value":o[0]||(o[0]=s=>e.showText=s),placeholder:e.placeholder,readOnly:""},e.attrs),{prefix:p(()=>[r(t,{icon:"ant-design:cluster-outlined"})]),_:1},16,["onClick","value","placeholder"]),r(h,{onRegister:e.regModal,code:e.code,multi:e.multi,sorter:e.sorter,groupId:e.uniqGroupId,param:e.param,onOk:e.callBack,getContainer:e.getContainer},null,8,["onRegister","code","multi","sorter","groupId","param","onOk","getContainer"])])):ne("",!0)}const Ge=A(Le,[["render",ze],["__scopeId","data-v-7e6ae98f"]]),Ue=D({name:"JVxePopupCell",components:{JPopup:Ge},props:Se(),setup(e){const{innerValue:o,row:a,originColumn:n,cellProps:y,handleChangeCommon:g}=Pe(e),t=E("j-vxe-popup"),l=O(()=>W(H({},y),{value:o.value,field:n.value.field||n.value.key,code:n.value.popupCode,fieldConfig:n.value.fieldConfig,groupId:t.value,param:n.value.params,sorter:n.value.sorter,setFieldsValue:s=>{if(!Ee(s)){let d="";Object.keys(s).forEach(f=>{let w=s[f];f===n.value.key?d=w:Fe(w,a,f)}),g(d)}}}));return{handleFocus:()=>{t.value=""},popupProps:l}},enhanced:{aopEvents:{editActived({$event:e}){Oe({$event:e,props:this.props,className:".ant-input",isClick:!0})}}}});function He(e,o,a,n,y,g){const t=c("JPopup");return b(),J(t,j(e.popupProps,{onFocus:e.handleFocus}),null,16,["onFocus"])}const io=A(Ue,[["render",He]]);export{io as default};
