var r=(d,p,a)=>new Promise((f,i)=>{var c=e=>{try{o(a.next(e))}catch(s){i(s)}},m=e=>{try{o(a.throw(e))}catch(s){i(s)}},o=e=>e.done?f(e.value):Promise.resolve(e.value).then(c,m);o((a=a.apply(d,p)).next())});import{B as S}from"./index-9c776ac3.js";import{u as T,c as B}from"./tenant.data-014ba0d5.js";import{b as M,l as g}from"./tenant.api-5c2aaec8.js";import{useListPage as R}from"./useListPage-2d6ddbd7.js";import L from"./BasicTable-d7a55d3a.js";import{Q as P}from"./componentMap-49086925.js";import"./useTable-5917148d.js";import{B as V}from"./index-ea73cedc.js";import{d as N,k as O,U,a5 as _,a9 as b,a7 as l,f as h,u as n,E as j,V as F,ag as K}from"./vue-705b7309.js";const A="成员",Z=N({__name:"TenantUserModal",emits:["register","success"],setup(d,{emit:p}){const a=O(0),{prefixCls:f,tableContext:i}=R({designScope:"tenant-template",tableProps:{api:M,columns:T,immediate:!1,formConfig:{schemas:B,labelCol:{span:8},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8}},beforeFetch:t=>Object.assign(t,{userTenantId:n(a)})}}),[c,{reload:m},{rowSelection:o,selectedRowKeys:e}]=i,[s,{setModalProps:E,closeModal:C}]=V(t=>r(this,null,function*(){a.value=t.id,u()}));function x(t){return r(this,null,function*(){C()})}function y(t){return[{label:"请离",onClick:v.bind(null,t.id)}]}function u(){(e.value=[])&&m()}function v(t){return r(this,null,function*(){yield g({userIds:t,tenantId:n(a)},u)})}function w(){return r(this,null,function*(){yield g({userIds:e.value.join(","),tenantId:n(a)},u)})}return(t,Q)=>{const I=U("a-button");return _(),b(n(S),K(t.$attrs,{onRegister:n(s),title:A,onOk:x,width:"800px"}),{default:l(()=>[h(n(L),{onRegister:n(c),rowSelection:n(o)},{tableTitle:l(()=>[n(e).length>0?(_(),b(I,{key:0,preIcon:"ant-design:delete-outlined",type:"primary",onClick:w,style:{"margin-right":"5px"}},{default:l(()=>[j("批量请离")]),_:1})):F("",!0)]),action:l(({record:k})=>[h(n(P),{actions:y(k)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"])]),_:1},16,["onRegister"])}}});export{Z as _};
