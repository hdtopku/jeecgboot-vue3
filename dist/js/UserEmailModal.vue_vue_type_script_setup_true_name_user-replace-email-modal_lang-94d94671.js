var F=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var y=(s,a,e)=>a in s?F(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e,p=(s,a)=>{for(var e in a||(a={}))z.call(a,e)&&y(s,e,a[e]);if(k)for(var e of k(a))N.call(a,e)&&y(s,e,a[e]);return s},B=(s,a)=>V(s,E(a));var _=(s,a,e)=>new Promise((o,r)=>{var d=t=>{try{n(e.next(t))}catch(m){r(m)}},u=t=>{try{n(e.throw(t))}catch(m){r(m)}},n=t=>t.done?o(t.value):Promise.resolve(t.value).then(d,u);n((e=e.apply(s,a)).next())});import{B as O}from"./BasicModal-ad16c7dc.js";import{t as P,u as S}from"./jeecg-online-vendor-c39424cc.js";import"./index-9793b37c.js";import{B as U}from"./index-a9a5a3b3.js";import{rules as $}from"./validator-bf07e139.js";import{a as j}from"./UserSetting.api-9438dbc1.js";import{$ as q}from"./antd-vue-vendor-a78909e6.js";import{d as h,r as I,k as M,V as f,a5 as L,a9 as T,a7 as i,f as c,E as A,ag as D,u as G}from"./vue-bcbaddf9.js";const H=h({name:"user-replace-email-modal"}),se=h(B(p({},H),{emits:["register","success"],setup(s,{emit:a}){P();const{createMessage:e}=S(),o=I({email:""}),r=M(),d={email:[p({},$.duplicateCheckRule("sys_user","email",o,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]};q.useForm;const u=M(""),[n,{setModalProps:t,closeModal:m}]=U(l=>_(this,null,function*(){r.value.resetFields(),r.value.clearValidate(),t({confirmLoading:!1}),u.value="修改邮箱",l.record.smscode="",Object.assign(o,l.record)}));function w(){return _(this,null,function*(){yield r.value.validateFields(),j(o).then(l=>{l.success?(e.success("修改邮箱成功"),a("success"),m()):e.warning(l.message)})})}return(l,g)=>{const C=f("a-input"),v=f("a-form-item"),R=f("a-button"),b=f("a-form");return L(),T(O,D(l.$attrs,{onRegister:G(n),width:"500px",title:u.value,showCancelBtn:!1,showOkBtn:!1}),{default:i(()=>[c(b,{class:"antd-modal-form",ref_key:"formRef",ref:r,model:o,rules:d},{default:i(()=>[c(v,{name:"email"},{default:i(()=>[c(C,{size:"large",value:o.email,"onUpdate:value":g[0]||(g[0]=x=>o.email=x),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),c(v,null,{default:i(()=>[c(R,{size:"large",type:"primary",block:"",onClick:w},{default:i(()=>[A(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{se as _};
