var O=(t,a,n)=>new Promise((M,p)=>{var g=e=>{try{u(n.next(e))}catch(i){p(i)}},s=e=>{try{u(n.throw(e))}catch(i){p(i)}},u=e=>e.done?M(e.value):Promise.resolve(e.value).then(g,s);u((n=n.apply(t,a)).next())});import{B as j}from"./index-5effa088.js";import{s as y}from"./jvxetable.api-eab29103.js";import{o as A,a as T}from"./api-bfd411bf.js";import{B as w}from"./index-0f5326ee.js";import{d as U,k as F,r as k,u as L,e as E,V as d,a5 as Y,a9 as R,a7 as r,f as o,E as D,ag as $}from"./vue-5a09445c.js";import{D as H}from"./jeecg-online-vendor-a80da268.js";import"./BasicModal-588c46fe.js";import"./antd-vue-vendor-04f0af1d.js";import"./tinymce-vendor-e2919cb0.js";import"./useWindowSizeFn-31e0259d.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-70833b4a.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";const h=U({name:"OneToOneModal",components:{BasicModal:j},emits:["success","register"],setup(t,{emit:a}){const n=F(!0),M=F(""),p=F(),g=k({xs:{span:24},sm:{span:5}}),s=k({xs:{span:24},sm:{span:16}}),u={orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},e=k({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:{name:"",telphone:""},jeecgOrderTicketList:{ticketCode:"",tickectDate:""}}),[i,{setModalProps:f,closeModal:v}]=w(c=>O(this,null,function*(){if(f({confirmLoading:!1}),_(),n.value=!!(c!=null&&c.isUpdate),L(n)){M.value=c.record.id,Object.assign(e,c.record);let B={id:e.id};const l=yield A(B);e.jeecgOrderCustomerList=l[0]?l[0]:{};const b=yield T(B);e.jeecgOrderTicketList=b[0]?b[0]:{}}})),m=E(()=>L(n)?"编辑":"新增");function _(){e.id=null,e.orderCode="",e.orderMoney="",e.orderDate=null,e.ctype="",e.content="",e.jeecgOrderCustomerList={},e.jeecgOrderTicketList={}}function C(){return O(this,null,function*(){p.value.validate().then(()=>O(this,null,function*(){try{f({confirmLoading:!0}),e.jeecgOrderCustomerList=Object.keys(e.jeecgOrderCustomerList).length>0?[e.jeecgOrderCustomerList]:[],e.jeecgOrderTicketList=Object.keys(e.jeecgOrderTicketList).length>0?[e.jeecgOrderTicketList]:[],yield y(e,L(n)),v(),a("success")}finally{f({confirmLoading:!1})}})).catch(c=>{})})}return{formRef:p,validatorRules:u,orderMainModel:e,registerModal:i,getTitle:m,labelCol:g,wrapperCol:s,handleSubmit:C}}});function I(t,a,n,M,p,g){const s=d("a-input"),u=d("a-form-item"),e=d("a-col"),i=d("a-select-option"),f=d("a-select"),v=d("a-date-picker"),m=d("a-row"),_=d("a-tab-pane"),C=d("a-tabs"),c=d("a-form"),B=d("BasicModal");return Y(),R(B,$(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit,width:"70%"}),{default:r(()=>[o(c,{ref:"formRef",model:t.orderMainModel,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.validatorRules},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(u,{label:"订单号",name:"orderCode"},{default:r(()=>[o(s,{value:t.orderMainModel.orderCode,"onUpdate:value":a[0]||(a[0]=l=>t.orderMainModel.orderCode=l),placeholder:"请输入订单号"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(u,{label:"订单类型"},{default:r(()=>[o(f,{placeholder:"请选择订单类型",value:t.orderMainModel.ctype,"onUpdate:value":a[1]||(a[1]=l=>t.orderMainModel.ctype=l)},{default:r(()=>[o(i,{value:"1"},{default:r(()=>[D("国内订单")]),_:1}),o(i,{value:"2"},{default:r(()=>[D("国际订单")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(u,{label:"订单日期"},{default:r(()=>[o(v,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:t.orderMainModel.orderDate,"onUpdate:value":a[2]||(a[2]=l=>t.orderMainModel.orderDate=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(u,{label:"订单金额"},{default:r(()=>[o(s,{value:t.orderMainModel.orderMoney,"onUpdate:value":a[3]||(a[3]=l=>t.orderMainModel.orderMoney=l),placeholder:"请输入订单金额"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(u,{label:"订单备注"},{default:r(()=>[o(s,{value:t.orderMainModel.content,"onUpdate:value":a[4]||(a[4]=l=>t.orderMainModel.content=l),placeholder:"请输入订单备注"},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(C,{defaultActiveKey:"1"},{default:r(()=>[o(_,{tab:"客户信息",key:"1"},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(u,{label:"客户姓名"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderCustomerList.name,"onUpdate:value":a[5]||(a[5]=l=>t.orderMainModel.jeecgOrderCustomerList.name=l),placeholder:"请输入客户姓名"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(u,{label:"手机号"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderCustomerList.telphone,"onUpdate:value":a[6]||(a[6]=l=>t.orderMainModel.jeecgOrderCustomerList.telphone=l),placeholder:"请输入手机号"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),o(_,{tab:"机票信息",key:"2",forceRender:""},{default:r(()=>[o(m,{class:"form-row",gutter:16},{default:r(()=>[o(e,{lg:8},{default:r(()=>[o(u,{label:"航班号"},{default:r(()=>[o(s,{value:t.orderMainModel.jeecgOrderTicketList.ticketCode,"onUpdate:value":a[7]||(a[7]=l=>t.orderMainModel.jeecgOrderTicketList.ticketCode=l),placeholder:"请输入航班号"},null,8,["value"])]),_:1})]),_:1}),o(e,{lg:8},{default:r(()=>[o(u,{label:"起飞时间"},{default:r(()=>[o(v,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:t.orderMainModel.jeecgOrderTicketList.tickectDate,"onUpdate:value":a[8]||(a[8]=l=>t.orderMainModel.jeecgOrderTicketList.tickectDate=l)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const oe=H(h,[["render",I],["__scopeId","data-v-5a8c4a23"]]);export{oe as default};
