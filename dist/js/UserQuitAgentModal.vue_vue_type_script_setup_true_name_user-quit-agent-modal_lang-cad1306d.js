var L=Object.defineProperty,A=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var Y=(s,r,t)=>r in s?L(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,g=(s,r)=>{for(var t in r||(r={}))N.call(r,t)&&Y(s,t,r[t]);if(w)for(var t of w(r))R.call(r,t)&&Y(s,t,r[t]);return s},h=(s,r)=>A(s,I(r));var M=(s,r,t)=>new Promise((p,n)=>{var d=o=>{try{i(t.next(o))}catch(a){n(a)}},_=o=>{try{i(t.throw(o))}catch(a){n(a)}},i=o=>o.done?p(o.value):Promise.resolve(o.value).then(d,_);i((t=t.apply(s,r)).next())});import{B as T}from"./index-0d8c6dee.js";import{B as k}from"./BasicForm-ac34d48e.js";import"./componentMap-ba94d61e.js";import{u as x}from"./useForm-a39fb19e.js";import"./JAddInput-ff8a2196.js";import"./JSelectUser-d28baf37.js";import"./JSelectDept-6a5d3f49.js";import"./JPopup-03bf28d5.js";import{B as P}from"./index-23d562e3.js";import"./cron-parser-vendor-c9873295.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-eaa23dad.js";import{a as S}from"./user.data-99f81bbd.js";import{f as U,u as V}from"./user.api-2e564f12.js";import{d as m}from"./antd-vue-vendor-04f0af1d.js";import{d as B,a5 as v,a9 as C,a7 as Q,f as b,u as f,ag as j}from"./vue-5a09445c.js";const q=B({name:"user-quit-agent-modal"}),ie=B(h(g({},q),{emits:["success","register"],setup(s,{emit:r}){const[t,{resetFields:p,setFieldsValue:n,validate:d,clearValidate:_,updateSchema:i}]=x({schemas:S,showActionButtonGroup:!1}),[o,{setModalProps:a,closeModal:D}]=P(e=>M(this,null,function*(){yield p(),a({confirmLoading:!0});let l=e.userId;const u=yield U({userName:e.userName});e=u.result?u.result:e;let c=new Date;e.startTime||(e.startTime=m(c).format("YYYY-MM-DD HH:mm:ss")),e.endTime||(e.endTime=F(c)),yield i([{field:"agentUserName",componentProps:{excludeUserIdList:[l]}}]),yield n(g({},e)),a({confirmLoading:!1})}));function y(){return M(this,null,function*(){try{const e=yield d();a({confirmLoading:!0}),yield V(e),D(),r("success")}finally{a({confirmLoading:!1})}})}function F(e){let l=e.getFullYear()+30,u=m(e).format("MM"),c=m(e).format("DD"),H=m(e).format("HH:mm:ss");return m(l+"-"+u+"-"+c+" "+H).format("YYYY-MM-DD HH:mm:ss")}return(e,l)=>(v(),C(f(T),j(e.$attrs,{onRegister:f(o),width:800,title:"离职交接",onOk:y}),{default:Q(()=>[b(f(k),{onRegister:f(t)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}}));export{ie as _};
