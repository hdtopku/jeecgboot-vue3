import{_ as I}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-f50327c9.js";import{t as Q,I as w,K as y,q as T,R as L,T as b}from"./jeecg-online-vendor-231813f7.js";import"./index-ebe32d90.js";import{Q as q}from"./index-56e36757.js";import{bA as B,bz as E}from"./antd-vue-vendor-e4fda4cf.js";import{d as N,k as f,e as g,u as t,w as V,a5 as D,a6 as F,f as s,aa as j,a7 as _,E as p,ab as v,F as z,W as R}from"./vue-5a09445c.js";const U={class:"enter-x min-w-64 min-h-64"},J=N({__name:"QrCodeForm",setup(A){const c=f("");let a;const{t:n}=T(),k=Q(),{handleBackLogin:C,getLoginState:h}=w(),o=f("0"),i=g(()=>t(h)===y.QR_CODE),x=g(()=>t(o)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){o.value="0",L().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){b({qrcodeId:e}).then(r=>{let d=r.token;d=="-2"&&(l(),clearInterval(a)),r.success&&(o.value="2",clearInterval(a),setTimeout(()=>{k.qrCodeLogin(d)},500))})}function S(e){u(e),m(),a=setInterval(()=>{u(e)},1500)}function m(){a&&clearInterval(a)}return V(i,e=>{e?l():m()}),(e,r)=>i.value?(D(),F(z,{key:0},[s(I,{class:"enter-x"}),j("div",U,[s(t(q),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),s(t(B),{class:"enter-x"},{default:_(()=>[p(v(x.value),1)]),_:1}),s(t(E),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(C)},{default:_(()=>[p(v(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):R("",!0)}});export{J as _};
