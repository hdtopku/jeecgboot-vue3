var b=Object.defineProperty;var d=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(s,o,e)=>o in s?b(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,g=(s,o)=>{for(var e in o||(o={}))B.call(o,e)&&h(s,e,o[e]);if(d)for(var e of d(o))M.call(o,e)&&h(s,e,o[e]);return s};var f=(s,o,e)=>new Promise((a,i)=>{var m=r=>{try{l(e.next(r))}catch(c){i(c)}},u=r=>{try{l(e.throw(r))}catch(c){i(c)}},l=r=>r.done?a(r.value):Promise.resolve(r.value).then(m,u);l((e=e.apply(s,o)).next())});import{B as _}from"./index-52485b3e.js";import{B as I}from"./BasicForm-12308286.js";import"./componentMap-16bb9f01.js";import{u as k}from"./useForm-50206d26.js";import"./JAddInput-5b0ff6af.js";import"./JSelectUser-330432be.js";import"./JSelectDept-9f1e1608.js";import"./JPopup-e4c0b990.js";import{B as P}from"./index-f3247ba0.js";import{g as y}from"./Idea.api-e3baedf2.js";import{k as v,d as L,u as n,e as S,a5 as C,a9 as R,a7 as T,f as U,ag as Y}from"./vue-249e5fad.js";import{s as x}from"./IdeaMember.api-ffcfc235.js";const D=[{label:"",field:"id",component:"Input",show:!1},{label:"用户标识(手机号/微信号/qq/邮箱等)",field:"identity",component:"Input",rules:[{message:"请输入用户名"}]},{label:"有效期至",field:"invalidTime",component:"DatePicker",componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD hh:mm:ss"},rules:[{message:"请选择有效截至日期"}]},{label:"备注",field:"remark",component:"InputTextArea"},{label:"选择账号",field:"ideaId",component:"Select",componentProps:({})=>{const s=v([]);return y({pageSize:1e3,status:1}).then(o=>{var e;(e=o==null?void 0:o.records)==null||e.forEach(a=>{var i;s.value.push({label:((i=a==null?void 0:a.invalidTime)==null?void 0:i.substring(0,10))+"👉"+a.account,value:a.id})})}),{options:s.value,showSearch:!0,placeholder:"请选择账号",onChange:o=>{},optionLabelProp:"label"}}}],K=L({__name:"IdeaMemberModal",emits:["register","success"],setup(s,{emit:o}){const e=v(!0),[a,{resetFields:i,setFieldsValue:m,validate:u}]=k({labelWidth:150,schemas:D,showActionButtonGroup:!1,autoFocusFirstItem:!0}),[l,{setModalProps:r,closeModal:c}]=P(t=>f(this,null,function*(){yield i(),r({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),n(e)&&(yield m(g({},t.record)))})),w=S(()=>n(e)?"编辑":"新增");function F(t){return f(this,null,function*(){try{let p=yield u();r({confirmLoading:!0}),yield x(p,e.value),c(),o("success",{isUpdate:e.value,values:p})}finally{r({confirmLoading:!1})}})}return(t,p)=>(C(),R(n(_),Y(t.$attrs,{onRegister:n(l),title:w.value,onOk:F,width:"96%",defaultFullscreen:""}),{default:T(()=>[U(n(I),{onRegister:n(a),autoFocusFirstItem:""},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{K as _};
