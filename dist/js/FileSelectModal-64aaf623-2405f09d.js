import{Q as B,b as p}from"./jeecg-online-vendor-885afdd4.js";import{B as D}from"./index-9d0047d3.js";import{B as C}from"./index-4b015b65.js";import{d as S,k as d,V as f,a5 as k,a9 as w,a7 as h,f as v}from"./vue-bcbaddf9.js";import"./antd-vue-vendor-a78909e6.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-9edfd3ae.js";import"./lodash-es-vendor-9b741fb8.js";import"./BasicModal-5ab8e0d9.js";import"./useWindowSizeFn-e9ba77b6.js";import"./echarts-vendor-6c8e2159.js";var m=(t,u,a)=>new Promise((n,o)=>{var c=e=>{try{l(a.next(e))}catch(i){o(i)}},r=e=>{try{l(a.throw(e))}catch(i){o(i)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(c,r);l((a=a.apply(t,u)).next())});const R=S({name:"FileSelectModal",components:{BasicModal:D},emits:["select","register"],setup(t,{emit:u}){const a=d(!0),n=d([]),o=d(""),[c,{closeModal:r}]=C(()=>m(this,null,function*(){o.value="",n.value.length===0&&i()}));function l(){u("select",o.value),r()}function e(){r()}function i(){return m(this,null,function*(){a.value=!0,n.value=yield p.get({url:"/online/cgform/head/rootFile"}).finally(()=>{a.value=!1})})}function g(s){return m(this,null,function*(){if(s.dataRef.children)return;let y={parentPath:s.dataRef.key};s.dataRef.children=yield p.get({url:"/online/cgform/head/fileTree",params:y}),n.value=[...n.value]})}function M(s){o.value=s[0]}return{loading:a,treeData:n,onLoadData:g,onSelect:M,onSubmit:l,onCancel:e,registerModal:c}}});function x(t,u,a,n,o,c){const r=f("a-directory-tree"),l=f("a-spin"),e=f("BasicModal");return k(),w(e,{onRegister:t.registerModal,title:"选择目录",width:500,onOk:t.onSubmit,onCancel:t.onCancel},{default:h(()=>[v(l,{spinning:t.loading},{default:h(()=>[v(r,{treeData:t.treeData,loadData:t.onLoadData,onSelect:t.onSelect},null,8,["treeData","loadData","onSelect"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}const Q=B(R,[["render",x]]);export{Q as default};
