var P=Object.defineProperty;var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var R=(e,t,l)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,I=(e,t)=>{for(var l in t||(t={}))b.call(t,l)&&R(e,l,t[l]);if(g)for(var l of g(t))w.call(t,l)&&R(e,l,t[l]);return e};var h=(e,t,l)=>new Promise((a,o)=>{var d=r=>{try{c(l.next(r))}catch(p){o(p)}},n=r=>{try{c(l.throw(r))}catch(p){o(p)}},c=r=>r.done?a(r.value):Promise.resolve(r.value).then(d,n);c((l=l.apply(e,t)).next())});import{B as _}from"./index-04fa66a8.js";import{B as x}from"./BasicForm-1b000152.js";import"./componentMap-a38e30ba.js";import{u as C}from"./useForm-885eeddc.js";import"./JAddInput-93656682.js";import"./JSelectUser-88891e09.js";import"./JSelectDept-62570e8c.js";import"./JPopup-0d64514d.js";import{B}from"./index-bd4a6237.js";import{d as M}from"./user.api-d1bb1fbd.js";import{b as u}from"./jeecg-online-vendor-7e3ae2e6.js";import{M as k}from"./antd-vue-vendor-31afcf32.js";import{d as N,e as T,u as i,k as U,a5 as V,a9 as v,a7 as L,f as q,ag as O}from"./vue-249e5fad.js";const le=[{title:"规则名称",dataIndex:"ruleName",width:200,align:"center"},{title:"规则编码",dataIndex:"ruleCode",width:200,align:"center"},{title:"规则实现类",dataIndex:"ruleClass",width:300,align:"center"},{title:"规则参数",dataIndex:"ruleParams",width:200,align:"center"}],te=[{field:"ruleName",label:"规则名称",component:"Input",colProps:{span:6}},{field:"ruleCode",label:"规则编码",component:"Input",colProps:{span:6}}],S=[{label:"",field:"id",component:"Input",show:!1},{field:"ruleName",label:"规则名称",component:"Input",required:!0,colProps:{span:24}},{field:"ruleCode",label:"规则编码",component:"Input",colProps:{span:24},dynamicDisabled:({values:e})=>!!e.id,dynamicRules:({model:e})=>[{required:!0,validator:(t,l)=>new Promise((a,o)=>{if(!l)return o("请输入规则编码！");let d={tableName:"sys_fill_rule",fieldName:"rule_code",fieldVal:l,dataId:e.id};M(d).then(n=>{n.success?a():o("规则编码已存在!")}).catch(n=>{o(n.message||"校验失败")})})}]},{field:"ruleClass",label:"规则实现类",component:"Input",required:!0,colProps:{span:24}},{field:"ruleParams",label:"规则参数",colProps:{span:24},component:"JAddInput",componentProps:{min:0}}],se="/sys/fillRule/exportXls",re="/sys/fillRule/importExcel",ae=e=>u.get({url:"/sys/fillRule/list",params:e}),oe=(e,t)=>u.delete({url:"/sys/fillRule/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),ne=(e,t)=>{k.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>u.delete({url:"/sys/fillRule/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},ie=e=>u.get({url:"/sys/fillRule/testFillRule",params:e},{isTransformResponse:!1}),A=e=>u.post({url:"/sys/fillRule/add",params:e}),D=e=>u.put({url:"/sys/fillRule/edit",params:e}),ue=N({__name:"FillRuleModal",emits:["register","success"],setup(e,{emit:t}){const l=T(()=>i(a)?"编辑":"新增"),a=U(!0),[o,{resetFields:d,setFieldsValue:n,validate:c,getFieldsValue:r}]=C({schemas:S,showActionButtonGroup:!1,baseColProps:{span:12}}),[p,{setModalProps:m,closeModal:y}]=B(s=>h(this,null,function*(){yield d(),m({confirmLoading:!1}),a.value=!!(s!=null&&s.isUpdate),i(a)&&(yield n(I({},s.record)))}));function F(){return h(this,null,function*(){try{let s=yield c();if(m({confirmLoading:!0}),a.value){let f=r();!s.parentId&&f.parentId&&(s.parentId=f.parentId),yield D(s)}else yield A(s);y(),t("success")}finally{m({confirmLoading:!1})}})}return(s,f)=>(V(),v(i(_),O(s.$attrs,{onRegister:i(p),title:l.value,onOk:F,width:800,destroyOnClose:""}),{default:L(()=>[q(i(x),{onRegister:i(o)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ue as _,ne as b,le as c,oe as d,se as e,ae as g,ie as h,re as i,te as s};
