import{d as M,l as B,V as x,a7 as c,a8 as C,f as e,aa as a,v as w,B as $,E as o,ad as s,ae as r,ac as h,W as k,ak as z,F as W}from"./vue-50733b77.js";import G from"./CommonList-b4a333c3.js";import{a as J,s as S}from"./IdeaMember.api-f0d6467a.js";import X from"./IdeaSysIpInfo-4b52a0c2.js";import"./jeecg-online-vendor-d3e1865b.js";import"./antd-vue-vendor-c5335947.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-058e2396.js";import"./vxe-table-vendor-838914b0.js";const Y={key:0},Z={key:0},m={class:"text-red-500"},ll={key:1},al={key:0},el={key:0},nl={key:0},ol={key:0},sl={key:1},ul={style:{color:"#dc2626"}},rl=["onClick"],dl=["onClick"],Cl=M({__name:"IdeaMemberDataList",emits:["queryList","handleEdit"],setup(tl,{expose:U,emit:L}){const I=B(!1),T=B(!1),j=()=>{T.value=!1},q=(n,p)=>`账【${n}】
密【${p}】`,N=n=>"c.taojingling.cn/j/"+n,O=n=>{if(n.valid===-1)return"error";if(n.valid===-2)return"default";switch(Number.parseInt(n.status)){case 1:return"processing";case 2:return"success";case 0:return"error"}},v=B(),V=(n,p=!1)=>{v.value=n,v.value.showIp=p,T.value=!0},i=(n,p)=>{n.valid=p,S(n,!0).then(()=>{L("queryList")})},g=B("0"),R=n=>{L("handleEdit",n)},F=n=>{S({id:n},!0).then(()=>{L("queryList")})},A=B(),P=n=>{var p,d,_,f;if(((p=n==null?void 0:n.sysIps)==null?void 0:p.length)>0){let t=n==null?void 0:n.sysIps[0];return(((d=t==null?void 0:t.country)==null?void 0:d.indexOf("中国"))>-1||((f=(_=t==null?void 0:t.country)==null?void 0:_.toUpperCase())==null?void 0:f.indexOf("CHINA"))>-1?"":t==null?void 0:t.country)+t.province+t.city+t.county+" | "+t.browser}return""},Q=n=>{var p;if(((p=n==null?void 0:n.sysIps)==null?void 0:p.length)>0){let d=n==null?void 0:n.sysIps[0];return d.operator+" | "+d.model+" | "+d.system}return""};return U({startQuery:(n={})=>{g.value=n==null?void 0:n.status,A.value.execQuery(J,n)},changeAdvanced:()=>{I.value=!I.value}}),(n,p)=>{const d=x("a-typography-text"),_=x("a-tag"),f=x("a-button"),t=x("a-menu-item"),H=x("a-menu"),K=x("a-drawer");return c(),C(W,null,[e(G,{ref_key:"CommonListRef",ref:A},{header:a(()=>[w(e(d,{mark:""},{default:a(()=>[o("关黑屋，激活码会失效")]),_:1},512),[[$,g.value==="-100"]]),w(e(d,{mark:""},{default:a(()=>[o("重点观察，激活码不会失效")]),_:1},512),[[$,g.value==="-90"]]),w(e(d,{mark:""},{default:a(()=>[o("激活码会失效")]),_:1},512),[[$,g.value==="-10"]]),w(e(d,{mark:""},{default:a(()=>[o("按提取次数倒排")]),_:1},512),[[$,g.value==="90"]]),w(e(d,{mark:""},{default:a(()=>[o(" 按更新时间倒排 ")]),_:1},512),[[$,g.value!=="-100"&&g.value!=="-90"&&g.value!=="-10"&&g.value!=="90"]])]),top:a(({item:l})=>{var y,u;return[s("div",null,r(P(l)),1),s("div",null,r(Q(l)),1),s("div",null,[e(_,{color:"processing"},{default:a(()=>[e(d,null,{default:a(()=>[o("标识")]),_:1})]),_:1}),(l==null?void 0:l.identity.length)>0?(c(),C("span",Y,[e(d,{copyable:""},{default:a(()=>[o(r(l.identity),1)]),_:2},1024)])):(c(),h(_,{key:1,color:"error"},{default:a(()=>[o("未绑定")]),_:1}))]),((u=(y=l==null?void 0:l.remark)==null?void 0:y.trim())==null?void 0:u.length)>0?(c(),C("div",Z,[e(_,{color:"error"},{default:a(()=>[o(" 备注")]),_:1}),s("span",m,r(l==null?void 0:l.remark),1)])):k("",!0),(l==null?void 0:l.valid)===1?(c(),C("div",ll,[e(_,{color:"warning"},{default:a(()=>[o(" 重点观察中")]),_:1})])):k("",!0)]}),bottom:a(({item:l})=>{var y,u,b,D,E;return[l.status===0||l.status===1?(c(),C("div",al,[e(_,null,{default:a(()=>[o("打开")]),_:1}),((y=l==null?void 0:l.openTime)==null?void 0:y.length)>0?(c(),C("span",el,r(l==null?void 0:l.openTime),1)):(c(),h(_,{key:1,color:"error"},{default:a(()=>[o("未打开")]),_:1}))])):k("",!0),s("div",null,[e(_,null,{default:a(()=>[o("激活")]),_:1}),o(" "+r(l==null?void 0:l.activeTime),1)]),s("div",null,[e(_,null,{default:a(()=>[o("截止")]),_:1}),o(" "+r(l==null?void 0:l.invalidTime),1)]),s("div",null,[(l==null?void 0:l.status)===2&&(l==null?void 0:l.ideaStatus)!=null?(c(),C("span",nl,[e(d,{delete:(l==null?void 0:l.ideaStatus)===-1,copyable:I.value?{text:q(l.ideaAccount,l.ideaPassword)}:!1},{default:a(()=>[s("div",null,[e(_,null,{default:a(()=>[e(d,null,{default:a(()=>[o("账密")]),_:1})]),_:1}),e(d,{copyable:I.value},{default:a(()=>[o(r(l.ideaAccount),1)]),_:2},1032,["copyable"])]),e(d,{copyable:I.value},{default:a(()=>[o(r(l.ideaPassword),1)]),_:2},1032,["copyable"])]),_:2},1032,["delete","copyable"]),w(s("div",null,[s("div",null," 售后至："+r((u=l==null?void 0:l.ideaInvalidTime)==null?void 0:u.substring(0,10)),1),s("div",null," 失效："+r((b=l==null?void 0:l.ideaRealInvalidTime)==null?void 0:b.substring(0,10)),1),s("div",null,[e(_,null,{default:a(()=>[o("更新")]),_:1}),o(" "+r(l==null?void 0:l.updateTime),1)])],512),[[$,I.value]])])):(c(),h(_,{key:1,color:"error"},{default:a(()=>[o("未关联")]),_:1}))]),s("div",null,[((D=l==null?void 0:l.createBy)==null?void 0:D.length)>0?(c(),C("span",ol," 创建："+r(l==null?void 0:l.createBy),1)):k("",!0),((E=l==null?void 0:l.updateBy)==null?void 0:E.length)>0?(c(),C("span",sl,"，更新："+r(l==null?void 0:l.updateBy),1)):k("",!0)])]}),left:a(({item:l,index:y})=>[s("div",null,[e(d,{copyable:{text:N(l==null?void 0:l.code)}},{default:a(()=>[s("span",{class:z(["",(l==null?void 0:l.valid)<0?"text-gray-500 line-through":"text-purple-900 font-medium"])},r(l==null?void 0:l.code),3)]),_:2},1032,["copyable"])]),s("div",ul,[s("div",null,[s("a",{href:"javascript:;",onClick:u=>V(l)},r(l==null?void 0:l.sysIps.length)+"个设备",9,rl)]),s("div",null,[s("a",{href:"javascript:;",onClick:u=>V(l,!0)},r(l==null?void 0:l.ideaUsages.length)+"个账号",9,dl)]),o(" 总"+r(l==null?void 0:l.count)+"次提取 ",1)])]),operate:a(({item:l,index:y})=>[e(H,null,{default:a(()=>[e(t,{onClick:u=>F(l.id)},{default:a(()=>[e(f,{type:"warning",ghost:"",size:"small"},{default:a(()=>[o("置顶")]),_:1})]),_:2},1032,["onClick"]),e(t,{onClick:u=>R(l)},{default:a(()=>[e(f,{type:"link",size:"small"},{default:a(()=>[o("编辑")]),_:1})]),_:2},1032,["onClick"]),l.valid!==-1?(c(),h(t,{key:0,onClick:u=>i(l,-1)},{default:a(()=>[e(f,{type:"link",size:"small",danger:""},{default:a(()=>[o("删除")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid!==-2?(c(),h(t,{key:1,onClick:u=>i(l,-2)},{default:a(()=>[e(f,{type:"link",size:"small",danger:""},{default:a(()=>[o("拉黑")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid===-1||l.valid===-2?(c(),h(t,{key:2,onClick:u=>i(l,0)},{default:a(()=>[e(f,{type:"link",size:"small"},{default:a(()=>[o(" 恢复")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid!==1?(c(),h(t,{key:3,onClick:u=>i(l,1)},{default:a(()=>[e(f,{type:"warning",size:"small"},{default:a(()=>[o(" 重点观察")]),_:1})]),_:2},1032,["onClick"])):k("",!0),l.valid===1?(c(),h(t,{key:4,onClick:u=>i(l,0)},{default:a(()=>[e(f,{type:"warning",size:"small",ghost:""},{default:a(()=>[o(" 取消重点")]),_:1})]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),right:a(({item:l})=>[e(_,{color:O(l)},{default:a(()=>[s("text",{class:z((l==null?void 0:l.valid)<0?"line-through":"")},r(l.statusName),3)]),_:2},1032,["color"])]),_:1},512),e(K,{placement:"bottom",closable:"",visible:T.value,onClose:j},{title:a(()=>{var l,y;return[s("div",null,[e(_,null,{default:a(()=>{var u;return[o("总次数："+r((u=v.value)!=null&&u.showIp?v.value.totalUseCount:v.value.totalVisitCount),1)]}),_:1}),e(d,{copyable:{text:N((l=v.value)==null?void 0:l.code)}},{default:a(()=>{var u,b;return[s("span",{class:z(["",((u=v.value)==null?void 0:u.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},r((b=v.value)==null?void 0:b.code),3)]}),_:1},8,["copyable"])]),s("div",null,[e(_,null,{default:a(()=>{var u,b;return[o("总条数："+r((u=v.value)!=null&&u.showIp?v.value.ideaUsages.length:(b=v.value)==null?void 0:b.sysIps.length),1)]}),_:1}),((y=v.value)==null?void 0:y.identity.length)>0?(c(),h(d,{key:0,copyable:""},{default:a(()=>[s("span",null,r(v.value.identity),1)]),_:1})):(c(),h(_,{key:1,color:"error"},{default:a(()=>[o("未绑定")]),_:1}))])]}),default:a(()=>[e(X,{ipIdeaItem:v.value},null,8,["ipIdeaItem"])]),_:1},8,["visible"])],64)}}});export{Cl as default};
