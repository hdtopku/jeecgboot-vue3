var K=Object.defineProperty,G=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(e,t,a)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,B=(e,t)=>{for(var a in t||(t={}))N.call(t,a)&&D(e,a,t[a]);if(U)for(var a of U(t))H.call(t,a)&&D(e,a,t[a]);return e},V=(e,t)=>G(e,L(t));import{au as Q,D as W,ab as E,_ as x,aa as q,f as X,i as Y}from"./jeecg-online-vendor-bf2efbcb.js";import{B as Z}from"./index-8cf3aabb.js";import{A as ee,L as P,p as I,E as te,aF as ae,aG as ne,aI as se}from"./index-fde9c72f.js";import{u as le}from"./useSelectBiz-c744cf20.js";import{s as oe}from"./props-8e8dbf4f.js";import{d as O,k as f,u as S,U as m,aV as J,as as T,f as c,bi as g,aQ as h,at as re,r as ie,p as R,s as ue,w as ce,e as $,ad as de}from"./vue-c7e3516e.js";import{J as pe}from"./JSelectBiz-b9d8b069.js";import{useRuleFormItem as me}from"./useFormItem-4a12ff45.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const fe=O({name:"UserSelectModal",components:{BasicModal:Z,BasicTable:Q(()=>W(()=>import("./BasicTable-29c6504d.js"),["js/BasicTable-29c6504d.js","js/BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js","js/vue-c7e3516e.js","js/jeecg-online-vendor-bf2efbcb.js","js/antd-vue-vendor-1561c1ba.js","js/tinymce-vendor-40778af9.js","js/lodash-es-vendor-42c8d3d4.js","assets/jeecg-online-vendor.905c285c.css","js/index-fde9c72f.js","js/codemirror-vendor-96aab763.js","js/echarts-vendor-b30c7238.js","js/html2canvas-vendor-654dcb8a.js","js/vxe-table-vendor-8bace23a.js","assets/index.0487b660.css","js/BasicForm-83ba9c88.js","js/BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js","js/componentMap-a6d21ad6.js","js/useFormItem-4a12ff45.js","js/index-8cf3aabb.js","js/BasicModal-ff8f2086.js","js/useWindowSizeFn-e5cad7ae.js","assets/BasicModal.1e1b2ed9.css","assets/index.361bf2db.css","js/JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js","assets/JUpload.ffbeea34.css","js/download-c8889ed9.js","js/base64Conver-4e359726.js","js/index-ee020524.js","assets/index.399aa0e3.css","js/index-53e807bd.js","js/useCountdown-473e4dcc.js","assets/index.15cc10f8.css","js/JAddInput-2cbbbde9.js","js/areaDataUtil-b2642a1f.js","js/useSelectBiz-c744cf20.js","js/props-8e8dbf4f.js","js/index-d4783a30.js","js/bem-deccd0b6.js","js/props-c3781b9d.js","js/useContextMenu-c0be0b5c.js","assets/useContextMenu.6fcaad79.css","assets/index.a95e0833.css","js/useTreeBiz-faf9875a.js","js/index-63ed9c18.js","js/depart.api-25dc3d39.js","assets/JAddInput.b4406d8f.css","js/index-ed4be6fa.js","assets/index.600d2c21.css","assets/componentMap.524c5264.css","assets/BasicForm.384f4697.css","js/useForm-fa63344e.js","js/injectionKey-5da932b3.js","assets/BasicTable.d7493b42.css"]),{loading:!0})},props:V(B({},oe),{modalTitle:{type:String,default:"\u9009\u62E9\u7528\u6237"}}),emits:["register","getSelectResult"],setup(e,{emit:t,refs:a}){const i=f({x:!1}),u=f(),[r,{closeModal:l}]=ee(()=>{window.innerWidth<900?i.value={x:900}:i.value={x:!1},setTimeout(()=>{u.value&&u.value.setSelectedRowKeys(_.value||[])},800)}),s=E(),p={canResize:!1,bordered:!0,size:"small"},d=Object.assign({},S(e),S(s),p),[{rowSelection:n,visibleChange:v,selectValues:_,indexColumnProps:w,getSelectResult:b,handleDeleteSelected:y,selectRows:o}]=le(P,d),C=f(e.params),M={baseColProps:{xs:24,sm:8,md:6,lg:8,xl:6,xxl:6},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8},schemas:[{label:"\u8D26\u53F7",field:"username",component:"JInput"},{label:"\u59D3\u540D",field:"realname",component:"JInput"}]},k=[{title:"\u7528\u6237\u8D26\u53F7",dataIndex:"username",width:120,align:"left"},{title:"\u7528\u6237\u59D3\u540D",dataIndex:"realname",width:120},{title:"\u6027\u522B",dataIndex:"sex_dictText",width:50},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"phone",width:120},{title:"\u90AE\u7BB1",dataIndex:"email"},{title:"\u72B6\u6001",dataIndex:"status_dictText",width:80}],A={pagination:!1,showIndexColumn:!1,scroll:{y:390},size:"small",canResize:!1,bordered:!0,rowKey:"id",columns:[{title:"\u7528\u6237\u59D3\u540D",dataIndex:"realname",width:40},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",width:40,slots:{customRender:"action"}}]};function z(){b((F,j)=>{t("getSelectResult",F,j),l()})}return{handleOk:z,searchInfo:C,register:r,indexColumnProps:w,visibleChange:v,getBindValue:d,getUserList:P,formConfig:M,columns:k,rowSelection:n,selectRows:o,selectedTable:A,handleDeleteSelected:y,tableScroll:i,tableRef:u}}}),ge=["onClick"];function he(e,t,a,i,u,r){const l=m("BasicTable"),s=m("a-col"),p=m("Icon"),d=m("a-row"),n=m("BasicModal");return J(),T("div",null,[c(n,h(e.$attrs,{onRegister:e.register,title:e.modalTitle,width:"900px",wrapClassName:"j-user-select-modal",onOk:e.handleOk,destroyOnClose:"",onVisibleChange:e.visibleChange}),{default:g(()=>[c(d,null,{default:g(()=>[c(s,{span:e.showSelected?18:24},{default:g(()=>[c(l,h({ref:"tableRef",columns:e.columns,scroll:e.tableScroll},e.getBindValue,{useSearchForm:!0,formConfig:e.formConfig,api:e.getUserList,searchInfo:e.searchInfo,rowSelection:e.rowSelection,indexColumnProps:e.indexColumnProps}),{tableTitle:g(()=>[]),_:1},16,["columns","scroll","formConfig","api","searchInfo","rowSelection","indexColumnProps"])]),_:1},8,["span"]),c(s,{span:e.showSelected?6:0},{default:g(()=>[c(l,h(e.selectedTable,{dataSource:e.selectRows,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,baseRowStyle:{minHeight:"40px"}}}),{action:g(({record:v})=>[re("a",{href:"javascript:void(0)",onClick:_=>e.handleDeleteSelected(v)},[c(p,{icon:"ant-design:delete-outlined"})],8,ge)]),_:1},16,["dataSource"])]),_:1},8,["span"])]),_:1})]),_:1},16,["onRegister","title","onOk","onVisibleChange"])])}const ve=x(fe,[["render",he]]),Ce=O({name:"JSelectUser",components:{UserSelectModal:ve,JSelectBiz:pe},inheritAttrs:!1,props:{value:I.oneOfType([I.string,I.array]),labelKey:{type:String,default:"realname"},rowKey:{type:String,default:"username"},params:{type:Object,default:()=>{}}},emits:["options-change","change","update:value"],setup(e,{emit:t}){const a=f(),[i,{openModal:u}]=te(),[r]=me(e,"value","change",a),l=f([]);let s=ie({value:[],change:!1});const p=f(!1);R("selectOptions",l),R("selectValues",s),R("loadingEcho",p);const d=f(!1),n=E();ue(()=>{e.value&&_(),e.value||(s.value=[])}),ce(s,()=>{s&&(r.value=s.value)});function v(){d.value=!0,u(!0,{isUpdate:!1})}function _(){let o=e.value?e.value:[];o&&typeof o=="string"&&o!="null"&&o!="undefined"?(r.value=o.split(","),s.value=o.split(",")):s.value=o}function w(o,C){l.value=o,r.value=C,s.value=C,t("update:value",C.join(","))}const b=Object.assign({},S(e),S(n));function y(o){t("update:value",o)}return{state:r,attrs:n,selectOptions:l,getBindValue:b,selectValues:s,loadingEcho:p,tag:d,regModal:i,setValue:w,handleOpen:v,handleChange:y}}});function _e(e,t,a,i,u,r){const l=m("JSelectBiz"),s=m("UserSelectModal");return J(),T("div",null,[c(l,h({onChange:e.handleChange,onHandleOpen:e.handleOpen,loading:e.loadingEcho},e.attrs),null,16,["onChange","onHandleOpen","loading"]),c(s,h({rowKey:e.rowKey,onRegister:e.regModal,onGetSelectResult:e.setValue},e.getBindValue),null,16,["rowKey","onRegister","onGetSelectResult"])])}const Se=x(Ce,[["render",_e],["__scopeId","data-v-3cd748ec"]]),we=O({name:"JVxeUserSelectCell",components:{JSelectUser:Se},props:ae(),setup(e){const{innerValue:t,cellProps:a,handleChangeCommon:i,useCellDesign:u}=ne(e),{prefixCls:r}=u("user-select"),l=$(()=>{let n=t.value;return n==null?n:q(n)?[]:X(n)?n:Y(n)?n.split(","):[n]}),s=$(()=>a.value.multi!=!1),p=$(()=>V(B({},a.value),{value:l.value,showButton:!1,showSearch:!1,maxTagCount:1,maxTagPlaceholder:({length:n})=>"+"+n}));function d(n){i(n.join(","))}return{prefixCls:r,selectedValue:l,multiple:s,cellProps:a,getProps:p,handleChange:d}},enhanced:{switches:{visible:!0},translate:{enabled:!1},aopEvents:{editActived({$event:e}){se({$event:e,props:this.props,className:".ant-select .ant-select-selection-search-input",isClick:!0})}}}});function be(e,t,a,i,u,r){const l=m("JSelectUser");return J(),T("div",{class:de([e.prefixCls])},[c(l,h(e.getProps,{onChange:e.handleChange}),null,16,["onChange"])],2)}const Fe=x(we,[["render",be]]);export{Fe as default};
