var v=Object.defineProperty;var d=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var h=(t,s,e)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,g=(t,s)=>{for(var e in s||(s={}))F.call(s,e)&&h(t,e,s[e]);if(d)for(var e of d(s))B.call(s,e)&&h(t,e,s[e]);return t};var f=(t,s,e)=>new Promise((u,m)=>{var n=r=>{try{i(e.next(r))}catch(l){m(l)}},c=r=>{try{i(e.throw(r))}catch(l){m(l)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(n,c);i((e=e.apply(t,s)).next())});import{B as D}from"./index-465fff25.js";import{B as b}from"./BasicForm-2f1a8584.js";import"./componentMap-da21b34e.js";import{u as I}from"./useForm-d3b54d9c.js";import"./JAddInput-5dab1a67.js";import"./JSelectUser-5289e428.js";import"./JSelectDept-085a989c.js";import"./JPopup-347128c1.js";import{B as _}from"./index-7711d1b4.js";import"./cron-parser-vendor-15f47fa7.js";import{s as k}from"./Idea.api-03d1d1cd.js";import{d as w}from"./antd-vue-vendor-a78909e6.js";import{d as H,k as y,u as a,e as T,a5 as P,a9 as O,a7 as R,f as U,ag as q}from"./vue-bcbaddf9.js";const x=[{label:"",field:"id",component:"Input",show:!1},{label:"账号",field:"account",component:"Input",rules:[{required:!0,message:"请输入账号"}]},{label:"密码",field:"password",component:"Input",rules:[{required:!0,message:"请输入密码"}]},{label:"账号售后截至",helpMessage:"默认为激活时间+1年，账号不一定失效",field:"invalidTime",component:"DatePicker",componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD HH:mm:ss"}},{label:"账号失效时间",helpMessage:"默认为激活时间+1年，账号的真实失效时间",field:"realInvalidTime",component:"DatePicker",componentProps:{showTime:!1,valueFormat:"YYYY-MM-DD HH:mm:ss"}},{label:"备注",field:"remark",component:"InputTextArea",rules:[{required:!1}]}],Q=H({__name:"IdeaModal",emits:["register","success"],setup(t,{emit:s}){const e=y(!0),[u,{resetFields:m,setFieldsValue:n,validate:c}]=I({labelWidth:150,schemas:x,showActionButtonGroup:!1,autoFocusFirstItem:!0,autoSubmitOnEnter:!0}),[i,{setModalProps:r,closeModal:l}]=_(o=>f(this,null,function*(){yield m(),r({confirmLoading:!1,showCancelBtn:o==null?void 0:o.showFooter,showOkBtn:o==null?void 0:o.showFooter}),e.value=!!(o!=null&&o.isUpdate),a(e)?yield n(g({},o.record)):yield n({invalidTime:w().add(364,"days").format("YYYY-MM-DD HH:mm:ss"),realInvalidTime:w().add(364,"days").format("YYYY-MM-DD HH:mm:ss")})})),M=T(()=>a(e)?"编辑":"新增");function Y(o){return f(this,null,function*(){try{let p=yield c();r({confirmLoading:!0}),yield k(p,e.value),l(),s("success",{isUpdate:e.value,values:p})}finally{r({confirmLoading:!1})}})}return(o,p)=>(P(),O(a(D),q(o.$attrs,{onRegister:a(i),title:M.value,onOk:Y,width:"96%"}),{default:R(()=>[U(a(b),{onRegister:a(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Q as _};
