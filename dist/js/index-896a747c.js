var ie=Object.defineProperty,re=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var v=(a,o,i)=>o in a?ie(a,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[o]=i,F=(a,o)=>{for(var i in o||(o={}))se.call(o,i)&&v(a,i,o[i]);if(A)for(var i of A(o))le.call(o,i)&&v(a,i,o[i]);return a},I=(a,o)=>re(a,ae(o));var c=(a,o,i)=>new Promise((S,C)=>{var f=m=>{try{g(i.next(m))}catch(_){C(_)}},k=m=>{try{g(i.throw(m))}catch(_){C(_)}},g=m=>m.done?S(m.value):Promise.resolve(m.value).then(f,k);g((i=i.apply(a,o)).next())});import{d as $,V as d,a7 as T,a8 as me,f as n,aa as r,E as u,u as t,ac as ue,W as ce}from"./vue-50733b77.js";import"./index-f191817e.js";import pe from"./UserDrawer-65d9b10a.js";import de from"./UserRecycleBinModal-8f48f5ab.js";import fe from"./PasswordModal-108e43e5.js";import ge from"./UserAgentModal-b1f7a518.js";import _e from"./UserQuitAgentModal-c1630a5d.js";import we from"./UserQuitModal-462141e1.js";import{a as be}from"./index-52f25951.js";import{useListPage as Ce}from"./useListPage-4f9607d2.js";import"./index-f7d688aa.js";import{q as he}from"./jeecg-online-vendor-d3e1865b.js";import{e as ye,s as Se}from"./user.data-b2f5a286.js";import{r as ke,t as Me,v as Re,w as De,x as xe,y as U}from"./user.api-c252cb60.js";import{r as Ae,F as b}from"./index-b34ff7bc.js";import{Q as ve}from"./componentMap-5c02cfaf.js";import Fe from"./BasicTable-ca5b2c76.js";import"./antd-vue-vendor-c5335947.js";import"./tinymce-vendor-7c917b36.js";import"./index-fa22fec6.js";import"./index-7e7a94e9.js";import"./useForm-14ceb529.js";import"./lodash-es-vendor-058e2396.js";import"./BasicModal-064024e0.js";import"./useWindowSizeFn-34cbae37.js";import"./vxe-table-vendor-838914b0.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./JAddInput-9c2385b5.js";import"./areaDataUtil-5dfcdadb.js";import"./useFormItem-915d7f1b.js";import"./JSelectUser-99e618da.js";import"./props-2079d80b.js";import"./JSelectBiz-f98b6288.js";import"./index-95220aa0.js";import"./index-7963a080.js";import"./bem-e62027cc.js";import"./props-12d3a914.js";import"./useContextMenu-e6153f12.js";import"./depart.api-1967d2cb.js";import"./JSelectDept-0fd43050.js";import"./JPopup-8bd4163b.js";import"./JEllipsis-66e02300.js";import"./useAdaptiveWidth-25e65b0e.js";import"./download-49b89a1a.js";import"./base64Conver-fa2fe1af.js";import"./index-54db12ae.js";import"./index-f3acc26c.js";import"./useCountdown-9338ec9a.js";import"./useFormItemSingle-37938520.js";import"./cron-parser-vendor-19ac00ef.js";import"./JUpload-c8630cc9.js";import"./index-665aeeac.js";import"./index-1ac4dcff.js";import"./validator-0e75b328.js";import"./renderUtils-74a3a0ef.js";import"./injectionKey-69710956.js";const Ie=$({name:"system-user"}),Nt=$(I(F({},Ie),{setup(a){const{createMessage:o,createConfirm:i}=he(),{isDisabledAuth:S}=Ae(),[C,{openDrawer:f}]=be(),[k,{openModal:g}]=b(),[m,{openModal:_}]=b(),[Q,{openModal:P}]=b(),[E,{openModal:j}]=b(),[z,{openModal:Te}]=b(),{prefixCls:Ue,tableContext:B,onExportXls:N,onImportXls:V}=Ce({designScope:"user-list",tableProps:{title:"用户列表",api:ke,columns:ye,size:"small",formConfig:{schemas:Se},actionColumn:{width:120},beforeFetch:e=>Object.assign({column:"createTime",order:"desc"},e)},exportConfig:{name:"用户列表",url:Me},importConfig:{url:Re}}),[K,{reload:l,updateTableDataRecord:$e},{rowSelection:O,selectedRows:R,selectedRowKeys:h}]=B;function X(){f(!0,{isUpdate:!1,showFooter:!0,tenantSaas:!1})}function q(e){return c(this,null,function*(){f(!0,{record:e,isUpdate:!0,showFooter:!0,tenantSaas:!1})})}function H(e){return c(this,null,function*(){f(!0,{record:e,isUpdate:!0,showFooter:!1,tenantSaas:!1})})}function L(e){return c(this,null,function*(){if(e.username=="admin"){o.warning("管理员账号不允许此操作！");return}yield De({id:e.id},l)})}function W(){return c(this,null,function*(){let e=t(R).filter(s=>s.username=="admin");if(t(e).length>0){o.warning("管理员账号不允许此操作！");return}yield xe({ids:h.value},()=>{h.value=[],l()})})}function G(){l()}function J(e){_(!0,{username:e})}function Y(e){P(!0,{userName:e})}function D(e,s){return c(this,null,function*(){if(e.username=="admin"){o.warning("管理员账号不允许此操作！");return}yield U({ids:e.id,status:s},l)})}function x(e){let s=R.value.filter(p=>p.username=="admin");if(t(s).length>0){o.warning("管理员账号不允许此操作！");return}i({iconType:"warning",title:"确认操作",content:"是否"+(e==1?"解冻":"冻结")+"选中账号?",onOk:()=>c(this,null,function*(){yield U({ids:t(h).join(","),status:e},l)})})}function Qe({isToLocal:e}){e&&l()}function Z(e){return[{label:"编辑",onClick:q.bind(null,e)}]}function ee(e){return[{label:"详情",onClick:H.bind(null,e)},{label:"密码",onClick:J.bind(null,e.username)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:L.bind(null,e)}},{label:"冻结",ifShow:e.status==1,popConfirm:{title:"确定冻结吗?",confirm:D.bind(null,e,2)}},{label:"解冻",ifShow:e.status==2,popConfirm:{title:"确定解冻吗?",confirm:D.bind(null,e,1)}},{label:"代理人",onClick:Y.bind(null,e.username)}]}function Pe(e){j(!0,{userName:e})}return(e,s)=>{const p=d("a-button"),te=d("j-upload-button"),y=d("Icon"),M=d("a-menu-item"),ne=d("a-menu"),oe=d("a-dropdown");return T(),me("div",null,[n(t(Fe),{onRegister:t(K),rowSelection:t(O)},{tableTitle:r(()=>[n(p,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:X},{default:r(()=>[u(" 新增")]),_:1}),n(p,{type:"primary",preIcon:"ant-design:export-outlined",onClick:t(N),disabled:t(S)("system:user:export")},{default:r(()=>[u(" 导出")]),_:1},8,["onClick","disabled"]),n(te,{type:"primary",preIcon:"ant-design:import-outlined",onClick:t(V)},{default:r(()=>[u("导入")]),_:1},8,["onClick"]),n(p,{type:"primary",onClick:s[0]||(s[0]=w=>t(g)(!0,{})),preIcon:"ant-design:hdd-outlined"},{default:r(()=>[u(" 回收站")]),_:1}),t(h).length>0?(T(),ue(oe,{key:0},{overlay:r(()=>[n(ne,null,{default:r(()=>[n(M,{key:"1",onClick:W},{default:r(()=>[n(y,{icon:"ant-design:delete-outlined"}),u(" 删除 ")]),_:1}),n(M,{key:"2",onClick:s[1]||(s[1]=w=>x(2))},{default:r(()=>[n(y,{icon:"ant-design:lock-outlined"}),u(" 冻结 ")]),_:1}),n(M,{key:"3",onClick:s[2]||(s[2]=w=>x(1))},{default:r(()=>[n(y,{icon:"ant-design:unlock-outlined"}),u(" 解冻 ")]),_:1})]),_:1})]),default:r(()=>[n(p,null,{default:r(()=>[u("批量操作 "),n(y,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):ce("",!0)]),action:r(({record:w})=>[n(t(ve),{actions:Z(w),dropDownActions:ee(w)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),n(pe,{onRegister:t(C),onSuccess:G},null,8,["onRegister"]),n(fe,{onRegister:t(m),onSuccess:t(l)},null,8,["onRegister","onSuccess"]),n(ge,{onRegister:t(Q),onSuccess:t(l)},null,8,["onRegister","onSuccess"]),n(de,{onRegister:t(k),onSuccess:t(l)},null,8,["onRegister","onSuccess"]),n(_e,{onRegister:t(E),onSuccess:t(l)},null,8,["onRegister","onSuccess"]),n(we,{onRegister:t(z),onSuccess:t(l)},null,8,["onRegister","onSuccess"])])}}}));export{Nt as default};
