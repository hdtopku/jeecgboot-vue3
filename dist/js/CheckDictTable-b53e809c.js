var U=Object.defineProperty,z=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var O=(e,t,u)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,b=(e,t)=>{for(var u in t||(t={}))Q.call(t,u)&&O(e,u,t[u]);if(R)for(var u of R(t))W.call(t,u)&&O(e,u,t[u]);return e},I=(e,t)=>z(e,G(t));var y=(e,t,u)=>new Promise((d,r)=>{var s=n=>{try{p(u.next(n))}catch(m){r(m)}},a=n=>{try{p(u.throw(n))}catch(m){r(m)}},p=n=>n.done?d(n.value):Promise.resolve(n.value).then(s,a);p((u=u.apply(e,t)).next())});import{d as J,k as B,e as P,u as M,o as K,n as L,U as f,aV as H,ar as j,bi as g,f as v,ae as X,aI as Y,at as E,m as $,ad as x,v as Z,A as ee,aQ as te}from"./vue-c7e3516e.js";import{U as ue,l as oe,aj as _}from"./index-fde9c72f.js";import{u as ae}from"./useTableSync-9b111e9e.js";import{_ as ne,at as le,bW as ie,l as re}from"./jeecg-online-vendor-bf2efbcb.js";import{B as se}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as pe}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{a9 as ce,ac as de,ce as me,cm as fe}from"./antd-vue-vendor-1561c1ba.js";import"./pick-51214243.js";import"./_flatRest-34ab130c.js";import"./isArray-b183d537.js";import"./toString-8deea73b.js";import"./_arrayPush-ae8b790e.js";import"./lodash-es-vendor-42c8d3d4.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./cgform.data-e49498ca.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./index-8cf3aabb.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./useFormItem-4a12ff45.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./index-ed4be6fa.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";const ve=J({name:"JPrompt",components:{Modal:ce,Spin:de,Input:me,BasicForm:se,ConfigProvider:fe},emits:["register"],setup(e,{emit:t}){const u=B(),{getAntdLocale:d}=ue(),r=B(!1),s=B(!1),a=B({}),p=P(()=>{var c;return(c=a.value.placeholder)!=null?c:"\u8BF7\u8F93\u5165\u5185\u5BB9"}),[n,{clearValidate:m,setFieldsValue:l,validate:o,updateSchema:i}]=pe({compact:!0,wrapperCol:{span:24},schemas:[{label:"",field:"input",component:"Input",slot:"customInput"}],showActionButtonGroup:!1}),h=P(()=>{var D,T;let c=a.value,F={width:(D=c.width)!=null?D:500,title:(T=c.title)!=null?T:"prompt",visible:M(r),confirmLoading:M(s)};return I(b(b(b({},F),e),c),{onOk:k,onCancel(){typeof a.value.onCancel=="function"&&a.value.onCancel(),A()}})});K(()=>{t("register",{openModal:V,setLoading:w,getVisible:r})});function V(c){return y(this,null,function*(){var F,C;document.body.focus(),a.value=c,r.value=!0,yield L(),yield i({field:"input",required:a.value.required,rules:a.value.rules,dynamicRules:a.value.dynamicRules}),yield l({input:(F=a.value.defaultValue)!=null?F:""}),yield m(),(C=u.value)==null||C.focus()})}function A(){r.value=!1}function q(){o()}function k(){return y(this,null,function*(){try{const{onOk:c}=a.value;let F=yield o();w(!0),typeof c=="function"?(yield c(F.input))!==!1&&A():A()}finally{w(!1)}})}function w(c){s.value=c}return{inputRef:u,getProps:h,loading:s,options:a,placeholder:p,getAntdLocale:d,onChange:q,onSubmit:k,registerForm:n}}}),ge={style:{padding:"20px"}},Fe=["innerHTML"];function _e(e,t,u,d,r,s){const a=f("Input"),p=f("BasicForm"),n=f("Spin"),m=f("Modal"),l=f("ConfigProvider");return H(),j(l,{locale:e.getAntdLocale},{default:g(()=>[v(m,X(Y(e.getProps)),{default:g(()=>[v(n,{spinning:e.loading},{default:g(()=>[E("div",ge,[E("div",{innerHTML:e.options.content,style:{"margin-bottom":"8px"}},null,8,Fe),v(p,{onRegister:e.registerForm},{customInput:g(({model:o,field:i})=>[v(a,{ref:"inputRef",value:o[i],"onUpdate:value":h=>o[i]=h,placeholder:e.placeholder,onPressEnter:e.onSubmit,onInput:e.onChange},null,8,["value","onUpdate:value","placeholder","onPressEnter","onInput"])]),_:1},8,["onRegister"])])]),_:1},8,["spinning"])]),_:1},16)]),_:1},8,["locale"])}const Be=ne(ve,[["render",_e]]);function he(){function e(t){let u=null;const d=document.createElement("div"),r=v(Be,{onRegister(l){return y(this,null,function*(){u=l,yield L(),l.openModal(t)})},afterClose(){$(null,d),document.body.removeChild(d)}});$(r,d),document.body.appendChild(d);function s(){return u==null&&le("useJPrompt instance is undefined!"),u}function a(l){var o;(o=s())==null||o.updateModal(l)}function p(){var l;(l=s())==null||l.closeModal()}function n(l){var o;(o=s())==null||o.setLoading(l)}return{closeModal:p,updateModal:a,setLoading:n}}return{createJPrompt:e}}var Ce=Object.defineProperty,be=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,N=(e,t,u)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,we=(e,t)=>{for(var u in t||(t={}))Ee.call(t,u)&&N(e,u,t[u]);if(S)for(var u of S(t))Ae.call(t,u)&&N(e,u,t[u]);return e},Pe=(e,t)=>be(e,ye(t));const Ve=J({name:"CheckDictTable",components:{VNodes:(e,{attrs:t})=>t.vnodes},setup(){const{prefixCls:e}=oe("cgform-check-dict-table"),{createMessage:t}=re(),u=B([{title:"\u5B57\u6BB5\u540D\u79F0",key:"dbFieldName",width:100},{title:"\u5B57\u6BB5\u5907\u6CE8",key:"dbFieldTxt",width:100},{title:"\u5B57\u6BB5Href",key:"fieldHref",width:130,type:_.input,defaultValue:""},{title:"\u9A8C\u8BC1\u89C4\u5219",key:"fieldValidType",width:170,type:_.slot,slotName:"fieldValidType",allowInput:!0,defaultValue:"",placeholder:"\u7A7A"},{title:"\u6821\u9A8C\u5FC5\u586B",key:"fieldMustInput",width:80,type:_.checkbox,align:"center",customValue:["1","0"],defaultChecked:!1},{title:"\u5B57\u5178Table",key:"dictTable",width:280,type:_.textarea,defaultValue:""},{title:"\u5B57\u5178Code",key:"dictField",width:280,type:_.input,defaultValue:""},{title:"\u5B57\u5178Text",key:"dictText",width:280,type:_.input,defaultValue:""}]),d=ae(u),r=B([{label:"\u7A7A",value:""},{label:"\u552F\u4E00\u6821\u9A8C",value:"only"},{label:"6\u523016\u4F4D\u6570\u5B57",value:"n6-16"},{label:"6\u523018\u4F4D\u5B57\u6BCD",value:"s6-18"},{label:"6\u523016\u4F4D\u4EFB\u610F\u5B57\u7B26",value:"*6-16"},{label:"\u7F51\u5740",value:"url"},{label:"\u7535\u5B50\u90AE\u4EF6",value:"e"},{label:"\u624B\u673A\u53F7\u7801",value:"m"},{label:"\u90AE\u653F\u7F16\u7801",value:"p"},{label:"\u5B57\u6BCD",value:"s"},{label:"\u6570\u5B57",value:"n"},{label:"\u6574\u6570",value:"z"},{label:"\u975E\u7A7A",value:"*"},{label:"\u91D1\u989D",value:"money"}]),s=P(()=>r.value.map(o=>o.value)),{createJPrompt:a}=he();function p(o){return o!=null&&!s.value.includes(o)}function n(o){a({title:"\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F",rules:[{required:!0,message:"\u6B63\u5219\u8868\u8FBE\u5F0F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:l}],onOk:i=>{o.triggerChange(i),t.success("\u6DFB\u52A0\u6210\u529F")}})}function m(o){a({title:"\u4FEE\u6539\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F",defaultValue:o.value,placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u8868\u8FBE\u5F0F",rules:[{required:!0,message:"\u6B63\u5219\u8868\u8FBE\u5F0F\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{validator:l}],onOk:i=>{o.triggerChange(i),i!==o.value&&t.success("\u4FEE\u6539\u6210\u529F")}})}function l(o,i){return p(i)?Promise.resolve():Promise.reject("\u5F53\u524D\u6821\u9A8C\u5DF2\u5B58\u5728")}return Pe(we({},d),{prefixCls:e,columns:u,isCustomRegexp:p,validTypeOptions:r,validTypeValues:s,onAddCustomRegexp:n,onChangeCustomRegexp:m})}}),ke={class:"custom-option-list rc-virtual-list-holder-inner",style:{"border-top":"1px solid #dfdfdf"}},De=["onClick"];function Te(e,t,u,d,r,s){const a=f("VNodes"),p=f("a-select"),n=f("a-col"),m=f("a-button"),l=f("a-row"),o=f("JVxeTable");return H(),j(o,te({ref:"tableRef",rowNumber:"",keyboardEdit:"",class:[e.prefixCls],maxHeight:e.tableHeight.noToolbar,loading:e.loading,columns:e.columns,dataSource:e.dataSource,disabledRows:{dbFieldName:["id","has_child"]}},e.tableProps),{fieldValidType:g(i=>[v(l,{type:"flex",class:x(["row-valid-type",{full:!e.isCustomRegexp(i.value)}])},{default:g(()=>[v(n,{class:x(["left"])},{default:g(()=>[v(p,{value:i.value,options:e.validTypeOptions,placeholder:"\u7A7A",style:{width:"100%"},onChange:i.triggerChange},{dropdownRender:g(({menuNode:h})=>[v(a,{vnodes:h},null,8,["vnodes"]),Z(E("div",ke,[E("div",{class:"ant-select-item ant-select-item-option",title:"\u4F7F\u7528\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\u4F5C\u4E3A\u6821\u9A8C\u89C4\u5219",onClick:V=>e.onAddCustomRegexp(i)}," \u6B63\u5219\u8868\u8FBE\u5F0F ",8,De)],512),[[ee,!e.isCustomRegexp(i.value)]])]),_:2},1032,["value","options","onChange"])]),_:2},1024),v(n,{class:"right",title:"\u4FEE\u6539\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F"},{default:g(()=>[v(m,{preIcon:"ant-design:edit",onClick:()=>e.onChangeCustomRegexp(i)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:1},16,["class","maxHeight","loading","columns","dataSource"])}var bt=ie(Ve,[["render",Te],["__scopeId","data-v-68f6d466"]]);export{bt as default};
