import{d as x,l as n,V as r,a7 as S,ac as R,aa as V,ad as y,f as k}from"./vue-86253b15.js";import{ap as C,q as E}from"./jeecg-online-vendor-bc5d810e.js";import{ak as e}from"./index-4de4eaa0.js";import"./antd-vue-vendor-371529c2.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";const B={style:{"margin-bottom":"8px"}},D=y("span",null,"启用数据变动特效：",-1);const L=x({__name:"SocketReload",setup(N){const{createMessage:p}=E(),u=n(),c=n(!0),d=n(!1),m=n([]),_=n([{key:"num",title:"序号",width:80},{key:"enabled",title:"启用",width:80,type:e.checkbox},{key:"ship_name",title:"船名",width:180,type:e.input},{key:"call",title:"呼叫",width:80,type:e.input},{key:"len",title:"长",width:80,type:e.input},{key:"ton",title:"吨",width:120,type:e.input},{key:"payer",title:"付款方",width:120,type:e.input},{key:"count",title:"数",width:40},{key:"company",title:"公司",minWidth:180,type:e.input},{key:"trend",title:"动向",width:120,type:e.input}]);w();function w(){d.value=!0,C.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:200}}).then(t=>{m.value=t.records}).finally(()=>{d.value=!1})}function g(t){switch(t.type){case e.radio:case e.checkbox:f(t);break}}function v(t){f(t)}function f(t){let{$table:a,row:o,column:l}=t,i=l.property;a.isUpdateByRow(o,i)&&a.validate(o).then(s=>{if(!s){let b=p.loading(`正在保存"${l.title}"`,0);setTimeout(()=>{var h;b(),p.success(`"${l.title}"保存成功！`),a.reloadRow(o,null,i),(h=u.value)==null||h.socketSendUpdateRow(o)},555)}})}return(t,a)=>{const o=r("a-switch"),l=r("JVxeTable"),i=r("a-card");return S(),R(i,{title:"无痕刷新示例",bordered:!1},{default:V(()=>[y("div",B,[D,k(o,{checked:c.value,"onUpdate:checked":a[0]||(a[0]=s=>c.value=s)},null,8,["checked"])]),k(l,{ref_key:"tableRef",ref:u,rowNumber:"",rowSelection:"",keepSource:"",socketReload:"",socketKey:"demo-socket-reload",reloadEffect:c.value,height:340,loading:d.value,columns:_.value,dataSource:m.value,onValueChange:g,onEditClosed:v},null,8,["reloadEffect","loading","columns","dataSource"])]),_:1})}}});export{L as default};
