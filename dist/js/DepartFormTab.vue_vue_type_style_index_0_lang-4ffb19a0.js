var I=Object.defineProperty;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var F=(o,t,e)=>t in o?I(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))V.call(t,e)&&F(o,e,t[e]);if(D)for(var e of D(t))P.call(t,e)&&F(o,e,t[e]);return o};var c=(o,t,e)=>new Promise((p,n)=>{var d=s=>{try{u(e.next(s))}catch(i){n(i)}},r=s=>{try{u(e.throw(s))}catch(i){n(i)}},u=s=>s.done?p(s.value):Promise.resolve(s.value).then(d,r);u((e=e.apply(o,t)).next())});import{B as S}from"./BasicForm-030e7c21.js";import"./componentMap-90ab712d.js";import{u as N}from"./useForm-ae9e1cbd.js";import"./JAddInput-dff0b84f.js";import{l as R}from"./index-6916e394.js";import{b as U}from"./depart.api-de6ffddd.js";import{o as h,u as A}from"./depart.data-ab9ac8cf.js";import{d as E,k as _,e as z,o as G,w as b,u as l,U as w,aV as M,ar as $,bi as y,f as g,at as x,ad as q,E as B}from"./vue-c7e3516e.js";const H={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},ae=E({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:t}){const e=o,{prefixCls:p}=R("j-depart-form-content"),n=_(!1),d=_(!0),r=_({}),[u,{resetFields:s,setFieldsValue:i,validate:j,updateSchema:m}]=N({schemas:A().basicFormSchema,showActionButtonGroup:!1}),v=z(()=>{var a;return(a=e==null?void 0:e.data)!=null&&a.parentId?h.child:h.root});G(()=>{m([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),b(()=>e.data,()=>c(this,null,function*(){let a=l(e.data);typeof a!="object"&&(a={}),r.value=a,yield s(),yield i(f({},a))}),{deep:!0,immediate:!0}),b(()=>e.rootTreeData,()=>c(this,null,function*(){m([{field:"parentId",componentProps:{treeData:e.rootTreeData}}])}),{deep:!0,immediate:!0}),b(v,()=>c(this,null,function*(){m([{field:"orgCategory",componentProps:{options:v.value}}])}),{immediate:!0})});function O(){return c(this,null,function*(){yield s(),yield i(f({},r.value))})}function T(){return c(this,null,function*(){try{n.value=!0;let a=yield j();a=Object.assign({},r.value,a),yield U(a,d.value),t("success"),Object.assign(r.value,a)}finally{n.value=!1}})}return(a,J)=>{const C=w("a-button"),k=w("a-spin");return M(),$(k,{spinning:n.value},{default:y(()=>[g(l(S),{onRegister:l(u)},null,8,["onRegister"]),x("div",H,[x("div",{class:q(["j-box-bottom-button-float",[`${l(p)}`]])},[g(C,{preIcon:"ant-design:sync-outlined",onClick:O},{default:y(()=>[B("\u91CD\u7F6E")]),_:1}),g(C,{type:"primary",preIcon:"ant-design:save-filled",onClick:T},{default:y(()=>[B("\u4FDD\u5B58")]),_:1})],2)])]),_:1},8,["spinning"])}}});export{ae as _};
