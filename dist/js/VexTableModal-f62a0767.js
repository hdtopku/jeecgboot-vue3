var w=(o,a,s)=>new Promise((m,f)=>{var B=l=>{try{d(s.next(l))}catch(i){f(i)}},p=l=>{try{d(s.throw(l))}catch(i){f(i)}},d=l=>l.done?m(l.value):Promise.resolve(l.value).then(B,p);d((s=s.apply(o,a)).next())});import{B as $}from"./index-8cf3aabb.js";import{A as L}from"./index-fde9c72f.js";import{d as R,k as M,r as E,u as T,e as U,U as r,aV as V,ar as h,bi as t,f as e,E as A,aQ as x}from"./vue-c7e3516e.js";import{_ as O}from"./jeecg-online-vendor-bf2efbcb.js";import"./BasicModal-ff8f2086.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./useWindowSizeFn-e5cad7ae.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const j=R({name:"VexTableModal",components:{BasicModal:$},emits:["success","register"],setup(o,{emit:a}){const s=M(!0),m=M({}),f=M(""),B=M(),p=E({xs:{span:24},sm:{span:5}}),d=E({xs:{span:24},sm:{span:16}}),l=M([{label:"",value:""},{label:"\u7537",value:"1"},{label:"\u5973",value:"2"}]),i={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},_=E({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[F,{setModalProps:v,closeModal:g}]=L(n=>w(this,null,function*(){_.orderCode="",v({confirmLoading:!1}),s.value=!!(n!=null&&n.isUpdate),T(s)&&(f.value=n.record.id,_.orderCode=n.record.orderCode)})),y=M([]),c=U(()=>T(s)?"\u7F16\u8F91":"\u65B0\u589E");function D(n){return w(this,null,function*(){const b=m.value,k={name:"",sex:"1",idcard:"",telphone:""},{row:u}=yield b.insertAt(k,n);yield b.setActiveCell(u,"sex")})}function C(){return w(this,null,function*(){B.value.validate().then(()=>{try{const n=m.value,{fullData:b}=n.getTableData();_.jeecgOrderCustomerList=b,v({confirmLoading:!0}),g(),a("success",{isUpdate:T(s),values:{id:f.value}})}finally{v({confirmLoading:!1})}}).catch(n=>{})})}return{xTable:m,tableData:y,sexList:l,formRef:B,validatorRules:i,orderMainModel:_,registerModal:F,getTitle:c,labelCol:p,wrapperCol:d,insertEvent:D,handleSubmit:C}}});function Y(o,a,s,m,f,B){const p=r("a-input"),d=r("a-form-item"),l=r("a-col"),i=r("a-select-option"),_=r("a-select"),F=r("a-date-picker"),v=r("a-row"),g=r("vxe-button"),y=r("vxe-toolbar"),c=r("vxe-column"),D=r("vxe-table"),C=r("a-tab-pane"),n=r("a-tabs"),b=r("a-form"),k=r("BasicModal");return V(),h(k,x(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit,width:"70%"}),{default:t(()=>[e(b,{ref:"formRef",model:o.orderMainModel,"label-col":o.labelCol,"wrapper-col":o.wrapperCol,rules:o.validatorRules},{default:t(()=>[e(v,{class:"form-row",gutter:16},{default:t(()=>[e(l,{lg:8},{default:t(()=>[e(d,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:t(()=>[e(p,{value:o.orderMainModel.orderCode,"onUpdate:value":a[0]||(a[0]=u=>o.orderMainModel.orderCode=u),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"\u8BA2\u5355\u7C7B\u578B"},{default:t(()=>[e(_,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:o.orderMainModel.ctype,"onUpdate:value":a[1]||(a[1]=u=>o.orderMainModel.ctype=u)},{default:t(()=>[e(i,{value:"1"},{default:t(()=>[A("\u56FD\u5185\u8BA2\u5355")]),_:1}),e(i,{value:"2"},{default:t(()=>[A("\u56FD\u9645\u8BA2\u5355")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"\u8BA2\u5355\u65E5\u671F"},{default:t(()=>[e(F,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:o.orderMainModel.orderDate,"onUpdate:value":a[2]||(a[2]=u=>o.orderMainModel.orderDate=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(v,{class:"form-row",gutter:16},{default:t(()=>[e(l,{lg:8},{default:t(()=>[e(d,{label:"\u8BA2\u5355\u91D1\u989D"},{default:t(()=>[e(p,{value:o.orderMainModel.orderMoney,"onUpdate:value":a[3]||(a[3]=u=>o.orderMainModel.orderMoney=u),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"\u8BA2\u5355\u5907\u6CE8"},{default:t(()=>[e(p,{value:o.orderMainModel.content,"onUpdate:value":a[4]||(a[4]=u=>o.orderMainModel.content=u),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(n,{defaultActiveKey:"1"},{default:t(()=>[e(C,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"1"},{default:t(()=>[e(y,null,{buttons:t(()=>[e(g,{icon:"fa fa-plus",onClick:a[5]||(a[5]=u=>o.insertEvent())},{default:t(()=>[A("\u65B0\u589E")]),_:1}),e(g,{onClick:a[6]||(a[6]=u=>o.$refs.xTable.removeCheckboxRow())},{default:t(()=>[A("\u5220\u9664\u9009\u4E2D")]),_:1})]),_:1}),e(D,{border:"","show-overflow":"","keep-source":"",ref:"xTable","max-height":"400",data:o.orderMainModel.jeecgOrderCustomerList,"edit-config":{trigger:"click",mode:"row",icon:"fa fa-pencil",showStatus:!0}},{default:t(()=>[e(c,{type:"checkbox",width:"60",align:"center"}),e(c,{type:"seq",width:"60",align:"center"}),e(c,{field:"name",title:"\u5BA2\u6237\u540D",sortable:"","edit-render":{name:"input",defaultValue:""}}),e(c,{field:"sex",title:"\u6027\u522B","edit-render":{name:"$select",options:o.sexList}},null,8,["edit-render"]),e(c,{field:"idcard",title:"\u8EAB\u4EFD\u8BC1",sortable:"","edit-render":{name:"input",defaultValue:""}}),e(c,{field:"telphone",title:"\u624B\u673A",sortable:"","edit-render":{name:"input",defaultValue:""}})]),_:1},8,["data"])]),_:1}),e(C,{tab:"\u673A\u7968\u4FE1\u606F",key:"2",forceRender:""})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const ee=O(j,[["render",Y],["__scopeId","data-v-22eadcc5"]]);export{ee as default};
