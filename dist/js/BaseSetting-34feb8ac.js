var _=(o,e,r)=>new Promise((c,i)=>{var l=t=>{try{s(r.next(t))}catch(a){i(a)}},m=t=>{try{s(r.throw(t))}catch(a){i(a)}},s=t=>t.done?c(t.value):Promise.resolve(t.value).then(l,m);s((r=r.apply(o,e)).next())});import{c as C,ad as f,l as h,_ as B}from"./jeecg-online-vendor-bf2efbcb.js";import{ap as F,g as I}from"./index-fde9c72f.js";import{B as b}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as A}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{C as U,u as S}from"./upload-f965e67f.js";import{h as w}from"./header-102ede9c.js";import{b as y}from"./data-94fa8612.js";import{d as E,o as V,e as k,U as n,aV as R,ar as $,bi as u,f as p,at as g,E as x,aX as M,aW as N}from"./vue-c7e3516e.js";import{cn as T,cT as H,cU as W}from"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./index-8cf3aabb.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./useFormItem-4a12ff45.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./index-ed4be6fa.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";import"./validator-4a4216c7.js";import"./user.api-dd1b3184.js";const j=E({components:{BasicForm:b,CollapseContainer:F,Button:T,ARow:H,ACol:W,CropperAvatar:U},setup(){const{createMessage:o}=h(),e=C(),[r,{setFieldsValue:c,validate:i}]=A({labelWidth:120,schemas:y,showActionButtonGroup:!1});V(()=>_(this,null,function*(){const t=e.getUserInfo;c(t)}));const l=k(()=>{const{avatar:t}=e.getUserInfo;return I(t)||w});function m(t,a){const d=e.getUserInfo;d.avatar=a,e.setUserInfo(d),a&&f.post({url:"/sys/user/appEdit",params:{avatar:a}})}function s(){return _(this,null,function*(){try{let t=yield i();t.avatar=e.getUserInfo.avatar,f.post({url:"/sys/user/appEdit",params:t});const a=e.getUserInfo;Object.assign(a,t),e.setUserInfo(a),o.success("\u66F4\u65B0\u6210\u529F")}catch(t){}})}return{avatar:l,register:r,uploadImg:S,updateAvatar:m,handleSubmit:s}}});const G=o=>(M("data-v-1e4d7ab9"),o=o(),N(),o),O={class:"change-avatar"},P=G(()=>g("div",{class:"mb-2"}," \u5934\u50CF ",-1));function X(o,e,r,c,i,l){const m=n("BasicForm"),s=n("a-col"),t=n("CropperAvatar"),a=n("a-row"),d=n("Button"),v=n("CollapseContainer");return R(),$(v,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:u(()=>[p(a,{gutter:24},{default:u(()=>[p(s,{span:14},{default:u(()=>[p(m,{onRegister:o.register},null,8,["onRegister"])]),_:1}),p(s,{span:10},{default:u(()=>[g("div",O,[P,p(t,{uploadApi:o.uploadImg,value:o.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:o.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1}),p(d,{type:"primary",onClick:o.handleSubmit},{default:u(()=>[x(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}const $t=B(j,[["render",X],["__scopeId","data-v-1e4d7ab9"]]);export{$t as default};
