var x=Object.defineProperty;var g=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var b=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&b(e,r,t[r]);if(g)for(var r of g(t))q.call(t,r)&&b(e,r,t[r]);return e};var f=(e,t,r)=>new Promise((p,c)=>{var m=o=>{try{l(r.next(o))}catch(i){c(i)}},d=o=>{try{l(r.throw(o))}catch(i){c(i)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(m,d);l((r=r.apply(e,t)).next())});import{B as T}from"./index-9c776ac3.js";import{B as I}from"./BasicForm-af127472.js";import"./componentMap-49086925.js";import{u as C}from"./useForm-027be146.js";import"./JAddInput-f981b8f0.js";import"./JSelectUser-2142310a.js";import"./JSelectDept-89a20b68.js";import"./JPopup-c3fe6e18.js";import{B as _}from"./index-ea73cedc.js";import{render as y}from"./renderUtils-c0f74cc7.js";import{b as a,aL as v}from"./jeecg-online-vendor-e26fc0e5.js";import"./BasicForm.vue_vue_type_style_index_0_lang-e085be35.js";import{ab as S}from"./antd-vue-vendor-cce59da1.js";import{J as B}from"./validator-d4b6f7d1.js";import{d as j,k as P,u as n,e as M,a5 as N,a9 as U,a7 as k,f as F,ag as E}from"./vue-705b7309.js";const se=[{title:"任务类名",dataIndex:"jobClassName",width:200,align:"left"},{title:"Cron表达式",dataIndex:"cronExpression",width:200},{title:"参数",dataIndex:"parameter",width:200},{title:"描述",dataIndex:"description",width:200},{title:"状态",dataIndex:"status",width:100,customRender:({text:e})=>{const t=e=="0"?"green":e=="-1"?"red":"gray";return y.renderTag(y.renderDict(e,"quartz_status"),t)}}],ae=[{field:"jobClassName",label:"任务类名",component:"Input",colProps:{span:8}},{field:"status",label:"任务状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",stringToNumber:!0},colProps:{span:8}}],L=[{field:"id",label:"id",component:"Input",show:!1},{field:"jobClassName",label:"任务类名",component:"Input",required:!0},{field:"cronExpression",label:"Cron表达式",component:"JEasyCron",defaultValue:"* * * * * ? *",rules:[{required:!0,message:"请输入Cron表达式"},{validator:B}]},{field:"paramterType",label:"参数类型",component:"Select",defaultValue:"string",componentProps:{options:[{label:"字符串",value:"string"},{label:"JSON对象",value:"json"}]}},{field:"parameter",label:"参数",component:"InputTextArea",ifShow:({values:e})=>e.paramterType=="string"},{field:"parameter",label:"参数",component:"JAddInput",helpMessage:"键值对形式填写",ifShow:({values:e})=>e.paramterType=="json"},{field:"status",label:"状态",component:"JDictSelectTag",componentProps:{dictCode:"quartz_status",type:"radioButton",stringToNumber:!0,dropdownStyle:{maxHeight:"6vh"}}},{field:"description",label:"描述",component:"InputTextArea"}],ne="/sys/quartzJob/exportXls",le="/sys/quartzJob/importExcel",ie=e=>a.get({url:"/sys/quartzJob/list",params:e}),O=(e,t)=>{let r=t?"/sys/quartzJob/edit":"/sys/quartzJob/add";return a.post({url:r,params:e})},ue=(e,t)=>a.delete({url:"/sys/quartzJob/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),ce=(e,t)=>a.get({url:"/sys/quartzJob/resume",params:e}).then(()=>{t()}),pe=(e,t)=>a.get({url:"/sys/quartzJob/pause",params:e}).then(()=>{t()}),me=(e,t)=>a.get({url:"/sys/quartzJob/execute",params:e}).then(()=>{t()}),de=(e,t)=>{S.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>a.delete({url:"/sys/quartzJob/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},fe=j({__name:"QuartzModal",emits:["register","success"],setup(e,{emit:t}){const r=P(!0),[p,{resetFields:c,setFieldsValue:m,validate:d}]=C({schemas:L,showActionButtonGroup:!1}),[l,{setModalProps:o,closeModal:i}]=_(s=>f(this,null,function*(){var u;if(yield c(),o({confirmLoading:!1}),r.value=!!(s!=null&&s.isUpdate),n(r)){try{s.record.paramterType=v((u=s==null?void 0:s.record)==null?void 0:u.parameter)?"json":"string"}catch(Q){}yield m(h({},s.record))}})),J=M(()=>n(r)?"编辑任务":"新增任务");function z(s){return f(this,null,function*(){try{let u=yield d();o({confirmLoading:!0}),yield O(u,r.value),i(),t("success")}finally{o({confirmLoading:!1})}})}return(s,u)=>(N(),U(n(T),E(s.$attrs,{onRegister:n(l),title:J.value,onOk:z,width:"40%"}),{default:k(()=>[F(n(I),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{fe as _,ne as a,le as b,se as c,ue as d,me as e,de as f,ie as g,pe as p,ce as r,ae as s};
