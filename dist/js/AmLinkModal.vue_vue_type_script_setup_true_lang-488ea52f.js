var B=Object.defineProperty;var d=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var h=(r,o,e)=>o in r?B(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,g=(r,o)=>{for(var e in o||(o={}))_.call(o,e)&&h(r,e,o[e]);if(d)for(var e of d(o))b.call(o,e)&&h(r,e,o[e]);return r};var f=(r,o,e)=>new Promise((p,a)=>{var m=s=>{try{i(e.next(s))}catch(l){a(l)}},c=s=>{try{i(e.throw(s))}catch(l){a(l)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(m,c);i((e=e.apply(r,o)).next())});import{B as v}from"./index-9ca8f863.js";import{B as x}from"./BasicForm-e7d3537f.js";import"./componentMap-42aebfee.js";import{u as A}from"./useForm-b8bb8b05.js";import"./JAddInput-6e8b52df.js";import"./JSelectUser-9d666511.js";import"./JSelectDept-113b0470.js";import"./JPopup-746d3c0b.js";import{B as F}from"./index-26fb0584.js";import"./cron-parser-vendor-b0ab0fe2.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-8153fc9b.js";import{s as I}from"./AmLink.api-b74a0c6a.js";import{d as P,k as y,u as n,e as L,a5 as M,a9 as T,a7 as R,f as U,ag as C}from"./vue-5a09445c.js";const O=[{label:"",field:"id",component:"Input",show:!1},{label:"激活链",field:"link",component:"InputTextArea",componentProps:{placeholder:"短链、或https://itunes.apple.com..."}},{label:"预存",field:"email",component:"InputTextArea",componentProps:{placeholder:"可复制，如邮箱、短链、激活链等"}},{label:"长链接",field:"longLink",component:"InputTextArea",componentProps:{placeholder:"https://email.myunidays.uk..."}},{label:"备注",field:"remark",component:"InputTextArea",componentProps:{placeholder:"重要的信息"}},{label:"预存",field:"thirdLink",component:"InputTextArea",componentProps:{placeholder:"可复制，如邮箱、短链、激活链等"}}],Q=P({__name:"AmLinkModal",emits:["register","success"],setup(r,{emit:o}){const e=y(!0),[p,{resetFields:a,setFieldsValue:m,validate:c}]=A({labelWidth:150,schemas:O,showActionButtonGroup:!1}),[i,{setModalProps:s,closeModal:l}]=F(t=>f(this,null,function*(){yield a(),s({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),n(e)&&(yield m(g({},t.record)))})),w=L(()=>n(e)?"编辑":"新增");function k(t){return f(this,null,function*(){try{let u=yield c();s({confirmLoading:!0}),yield I(u,e.value),l(),o("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(t,u)=>(M(),T(n(v),C(t.$attrs,{onRegister:n(i),title:w.value,onOk:k,width:"96%"}),{default:R(()=>[U(n(x),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Q as _};
