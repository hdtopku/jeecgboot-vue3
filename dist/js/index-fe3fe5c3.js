var Z=Object.defineProperty,tt=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var A=(n,e,o)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,E=(n,e)=>{for(var o in e||(e={}))ot.call(e,o)&&A(n,o,e[o]);if(y)for(var o of y(e))nt.call(e,o)&&A(n,o,e[o]);return n},k=(n,e)=>tt(n,et(e));var d=(n,e,o)=>new Promise((_,f)=>{var F=a=>{try{s(o.next(a))}catch(c){f(c)}},g=a=>{try{s(o.throw(a))}catch(c){f(c)}},s=a=>a.done?_(a.value):Promise.resolve(a.value).then(F,g);s((o=o.apply(n,e)).next())});import ut from"./BasicTable-29c6504d.js";import{T as it}from"./componentMap-a6d21ad6.js";import"./BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js";import"./useTable-7e303edd.js";import"./index-8cf3aabb.js";import{useListPage as at}from"./useListPage-5049b37a.js";import{_ as rt}from"./TemplateModal.vue_vue_type_script_setup_true_lang-84fe417f.js";import{_ as st}from"./TemplateTestModal.vue_vue_type_script_setup_true_lang-d3bbf8fb.js";import{l as lt,c as pt,d as mt,A as S,s as x,e as ct}from"./template.api-772ab1de.js";import{l as dt}from"./jeecg-online-vendor-bf2efbcb.js";import{E as v}from"./index-fde9c72f.js";import{d as T,e as ft,U as m,aV as R,as as _t,f as u,bi as r,E as B,u as i,ar as Ft,V as gt,ad as Ct,at as M,J as wt}from"./vue-c7e3516e.js";import"./lodash-es-vendor-42c8d3d4.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm-83ba9c88.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./useFormItem-4a12ff45.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./JAddInput-2cbbbde9.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";import"./index-ed4be6fa.js";import"./useForm-fa63344e.js";import"./injectionKey-5da932b3.js";import"./validator-4a4216c7.js";import"./user.api-dd1b3184.js";const Bt=M("span",null,"\u5220\u9664",-1),bt=M("span",null,"\u6279\u91CF\u64CD\u4F5C",-1),Dt=T({name:"message-template"}),Fe=T(k(E({},Dt),{setup(n){const{createMessage:e}=dt(),{prefixCls:o,onExportXls:_,onImportXls:f,tableContext:F}=at({designScope:"message-template",tableProps:{title:"\u6D88\u606F\u4E2D\u5FC3\u6A21\u677F\u5217\u8868\u6570\u636E",api:lt,columns:pt,formConfig:{schemas:mt}},exportConfig:{url:S.exportXls,name:"\u6D88\u606F\u4E2D\u5FC3\u6A21\u677F\u5217\u8868"},importConfig:{url:S.importXls,success:()=>s()}}),[g,{reload:s,setLoading:a},{rowSelection:c,selectedRowKeys:C,selectedRows:U}]=F,[I,{openModal:w}]=v(),[V,N]=v(),X=ft(()=>C.value.length>0);function j(){w(!0,{title:"\u65B0\u589E\u6D88\u606F\u6A21\u677F",isUpdate:!1,showFooter:!0,record:{}})}function L(t){if(t.useStatus==="1"){e.warning("\u6B64\u6A21\u677F\u5DF2\u88AB\u5E94\u7528\uFF0C\u7981\u6B62\u7F16\u8F91!");return}w(!0,{title:"\u4FEE\u6539\u6D88\u606F\u6A21\u677F",isUpdate:!0,record:t,showFooter:!0})}function P(t){if(t){if(t.useStatus=="1"){e.warning("\u8BE5\u6A21\u677F\u5DF2\u88AB\u5E94\u7528\u7981\u6B62\u5220\u9664!");return}b([t.id],!1)}}function b(t,p=!0){return d(this,null,function*(){const l=i(t);if(l.length>0)try{a(!0),yield ct({ids:l.join(",")},p),yield s()}finally{a(!1)}})}function $(){return d(this,null,function*(){try{if(wt(U.value).filter(l=>l.useStatus=="1").length>0){e.warning("\u9009\u4E2D\u7684\u6A21\u677F\u5DF2\u88AB\u5E94\u7528\u7981\u6B62\u5220\u9664!");return}yield b(C),C.value=[]}finally{}})}function z(t){N.openModal(!0,{record:t})}function J(t){return[{label:"\u67E5\u770B",onClick:G.bind(null,t)},{label:"\u7F16\u8F91",onClick:L.bind(null,t)}]}function K(t){return[{label:"\u5E94\u7528",onClick:O.bind(null,t)},{label:"\u505C\u7528",onClick:q.bind(null,t)},{label:"\u53D1\u9001\u6D4B\u8BD5",onClick:z.bind(null,t)},{label:"\u5220\u9664",color:"error",popConfirm:{title:"\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F",confirm:P.bind(null,t)}}]}function O(t){return d(this,null,function*(){let p={id:t.id,useStatus:"1"};yield x(p,!0),yield s()})}function q(t){return d(this,null,function*(){let p={id:t.id,useStatus:"0"};yield x(p,!0),yield s()})}function G(t){w(!0,{isUpdate:!0,showFooter:!1,record:t})}return(t,p)=>{const l=m("a-button"),H=m("j-upload-button"),D=m("Icon"),Q=m("a-menu-item"),W=m("a-menu"),Y=m("a-dropdown");return R(),_t("div",{class:Ct(i(o))},[u(i(ut),{onRegister:i(g),rowSelection:i(c)},{tableTitle:r(()=>[u(l,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:j},{default:r(()=>[B("\u65B0\u589E")]),_:1}),u(l,{type:"primary",preIcon:"ant-design:export-outlined",onClick:i(_)},{default:r(()=>[B(" \u5BFC\u51FA")]),_:1},8,["onClick"]),u(H,{type:"primary",preIcon:"ant-design:import-outlined",onClick:i(f)},{default:r(()=>[B("\u5BFC\u5165")]),_:1},8,["onClick"]),X.value?(R(),Ft(Y,{key:0},{overlay:r(()=>[u(W,null,{default:r(()=>[u(Q,{key:"1",onClick:$},{default:r(()=>[u(D,{icon:"ant-design:delete-outlined"}),Bt]),_:1})]),_:1})]),default:r(()=>[u(l,null,{default:r(()=>[bt,u(D,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):gt("",!0)]),action:r(({record:h})=>[u(i(it),{actions:J(h),dropDownActions:K(h)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),u(rt,{onRegister:i(I),onSuccess:i(s)},null,8,["onRegister","onSuccess"]),u(st,{onRegister:i(V)},null,8,["onRegister"])],2)}}}));export{Fe as default};
