var x=(v,f,c)=>new Promise((u,s)=>{var n=t=>{try{r(c.next(t))}catch(i){s(i)}},p=t=>{try{r(c.throw(t))}catch(i){s(i)}},r=t=>t.done?u(t.value):Promise.resolve(t.value).then(n,p);r((c=c.apply(v,f)).next())});import{d as I,c as A,l,V as g,a7 as d,a8 as k,f as B,aa as N,u as o,F as P,ac as w,W as M,a5 as G,a6 as H,n as D}from"./vue-50733b77.js";import{q as V,_ as q}from"./jeecg-online-vendor-d3e1865b.js";import{_ as F}from"./index-7963a080.js";import{l as L,s as R}from"./depart.user.api-453a0c9a.js";import"./antd-vue-vendor-c5335947.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-058e2396.js";import"./vxe-table-vendor-838914b0.js";import"./index-b34ff7bc.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./bem-e62027cc.js";import"./props-12d3a914.js";import"./useContextMenu-e6153f12.js";const W={class:"bg-white m-4 mr-0 overflow-hidden"},j=I({__name:"DepartTree",emits:["select"],setup(v,{emit:f}){const c=A("prefixCls"),{createMessage:u}=V();let s=l(!1),n=l([]),p=l([]),r=l([]),t=l(!0),i=l("2"),_=l(!1);function h(){s.value=!0,n.value=[],L().then(e=>{e.success?Array.isArray(e.result)&&(n.value=e.result,i.value=e.message,E()):u.warning(e.message)}).finally(()=>s.value=!1)}h();function E(){let e=[];n.value.forEach((a,y)=>{a.children&&a.children.length>0&&e.push(a.key),y===0&&m(a.id,a)}),e.length>0&&(S(),p.value=e)}function S(){return x(this,null,function*(){yield D(),_.value=!0,yield D(),_.value=!1})}function m(e,a){r.value=[e],a&&f("select",a)}function T(e){e?(s.value=!0,R({keyWord:e,myDeptSearch:"1"}).then(a=>{Array.isArray(a)?n.value=a:(u.warning("未查询到部门信息"),n.value=[])}).finally(()=>s.value=!1)):h()}function C(e,a){e.length>0&&r.value[0]!==e[0]?m(e[0],a.selectedNodes[0]):m(r.value[0])}function K(e){p.value=e,t.value=!1}return(e,a)=>{const y=g("a-empty"),b=g("a-spin");return d(),k("div",W,[B(b,{spinning:o(s)},{default:N(()=>[o(i)==="2"?(d(),k(P,{key:0},[o(_)?M("",!0):(d(),w(o(F),{key:0,title:"部门列表",toolbar:"",search:"",showLine:"",checkStrictly:!0,clickRowToExpand:!1,treeData:o(n),selectedKeys:o(r),expandedKeys:o(p),autoExpandParent:o(t),onSelect:C,onExpand:K,onSearch:T},null,8,["treeData","selectedKeys","expandedKeys","autoExpandParent"]))],64)):(d(),w(y,{key:1,description:"普通员工无此权限"}))]),_:1},8,["spinning"])])}}});const oe=q(j,[["__scopeId","data-v-892b3d18"]]);export{oe as default};
