var u=(h,r,s)=>new Promise((p,c)=>{var m=t=>{try{l(s.next(t))}catch(o){c(o)}},w=t=>{try{l(s.throw(t))}catch(o){c(o)}},l=t=>t.done?p(t.value):Promise.resolve(t.value).then(m,w);l((s=s.apply(h,r)).next())});import F from"./BasicTable-e1645a10.js";import{Q as N}from"./componentMap-a38e30ba.js";import"./useTable-4c1b444a.js";import{i as y,u as U}from"./jeecg-online-vendor-7e3ae2e6.js";import{_ as D}from"./JeecgOrderTicketModal.vue_vue_type_script_setup_true_lang-3386a867.js";import{useListPage as O}from"./useListPage-d0a57df4.js";import"./index-04fa66a8.js";import{t as P,f as $,g as j,h as A}from"./erplist.api-a0655331.js";import{z as H}from"./index-bd4a6237.js";import{d as J,c as Q,e as q,w as G,u as a,U as d,a5 as C,a6 as W,f as n,a7 as i,E as g,a9 as X,V as Y}from"./vue-249e5fad.js";const ue=J({__name:"JeecgOrderTicketList",setup(h){const r=Q("orderId",q(()=>"")),s=U(),[p,{openModal:c}]=H(),m={},{prefixCls:w,tableContext:l}=O({tableProps:{api:T,tableSetting:{cacheKey:"ticket"},columns:P,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[t,{reload:o,setSelectedRowKeys:S},{rowSelection:I,selectedRowKeys:f}]=l;G(r,()=>{m.orderId=a(r),o(),S([])});function T(e){return u(this,null,function*(){let{orderId:_}=e;return _==null||y(_)?[]:yield $(e)})}function R(){if(y(a(r))){s.createMessage.warning("请选择一个订单信息");return}c(!0,{isUpdate:!1,showFooter:!0})}function v(e){return u(this,null,function*(){c(!0,{record:e,isUpdate:!0,showFooter:!0})})}function x(e){return u(this,null,function*(){yield A({id:e.id},o)})}function M(){return u(this,null,function*(){yield j({ids:f.value},()=>{f.value=[],o()})})}function z(){o()}function B(e){return[{label:"编辑",onClick:v.bind(null,e)},{label:"删除",popConfirm:{title:"是否确认删除",confirm:x.bind(null,e)}}]}return(e,_)=>{const k=d("a-button"),b=d("Icon"),E=d("a-menu-item"),K=d("a-menu"),L=d("a-dropdown");return C(),W("div",null,[n(a(F),{onRegister:a(t),rowSelection:a(I),searchInfo:m},{tableTitle:i(()=>[n(k,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:R},{default:i(()=>[g(" 新增")]),_:1}),a(f).length>0?(C(),X(L,{key:0},{overlay:i(()=>[n(K,null,{default:i(()=>[n(E,{key:"1",onClick:M},{default:i(()=>[n(b,{icon:"ant-design:delete-outlined"}),g(" 删除 ")]),_:1})]),_:1})]),default:i(()=>[n(k,null,{default:i(()=>[g("批量操作 "),n(b,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Y("",!0)]),action:i(({record:V})=>[n(a(N),{actions:B(V)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),n(D,{onRegister:a(p),onSuccess:z},null,8,["onRegister"])])}}});export{ue as _};
