var K=Object.defineProperty,L=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var S=(r,t,n)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,O=(r,t)=>{for(var n in t||(t={}))z.call(t,n)&&S(r,n,t[n]);if(B)for(var n of B(t))X.call(t,n)&&S(r,n,t[n]);return r},V=(r,t)=>L(r,Q(t));var E=(r,t,n)=>new Promise((o,g)=>{var U=s=>{try{y(n.next(s))}catch(m){g(m)}},d=s=>{try{y(n.throw(s))}catch(m){g(m)}},y=s=>s.done?o(s.value):Promise.resolve(s.value).then(U,d);y((n=n.apply(r,t)).next())});import{q as Y,v as Z,S as ss,Q as es,u as os,D as is}from"./jeecg-online-vendor-231813f7.js";import{a as as}from"./jeecg_ad_text-1683a714.js";import{d as G,k as h,r as ns,V as I,a5 as f,a6 as _,aa as e,u as i,f as l,a7 as v,ab as k,W as $,J as ls}from"./vue-5a09445c.js";import"./antd-vue-vendor-e4fda4cf.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-3f622b6f.js";const D="/assets/icon-eye-k-62c61241.png",F="/assets/icon-eye-g-a35cc0c0.png",ts={class:"aui-content"},cs={class:"aui-container"},rs={class:"aui-form"},us={class:"aui-image"},ds={class:"aui-image-text"},ms=["src"],ps={class:"aui-formBox"},fs={class:"aui-formWell"},_s={class:"aui-flex aui-form-nav aui-clear-left",style:{"padding-bottom":"21px"}},vs={class:"aui-flex-box activeNav on"},gs={class:"aui-form-box"},ys={class:"aui-account aui-account-line"},ws={class:"aui-input-line"},xs={class:"aui-input-line"},hs={class:"aui-input-line"},ks={key:1,class:"aui-code-line"},bs={class:"aui-input-line"},Cs={class:"aui-eye"},Is=["src"],Ps=["src"],Ts={class:"aui-input-line"},Ms={class:"aui-eye"},Es=["src"],Us=["src"],Ns={class:"aui-flex"},Rs={class:"aui-flex-box"},Bs={class:"aui-choice"},Ss={style:{color:"#1b90ff","margin-left":"4px"}},Os={class:"aui-formButton"},Vs={class:"aui-flex"},$s={class:"aui-flex"},Ds=G({name:"mini-register"}),Fs=G(V(O({},Ds),{emits:["go-back","success","register"],setup(r,{expose:t,emit:n}){const{t:o}=Y(),{notification:g,createErrorModal:U,createMessage:d}=os(),y=h(),s=ns({username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),m=h(!0),w=h(60),p=h(null),P=h("close"),T=h("close");function H(){n("go-back"),M()}function W(){return E(this,null,function*(){if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}(yield Z({mobile:s.mobile,smsmode:ss.REGISTER}))&&(i(p)||(w.value=60,m.value=!1,p.value=setInterval(()=>{i(w)>0&&i(w)<=60?w.value=w.value-1:(m.value=!0,clearInterval(i(p)),p.value=null)},1e3)))})}function j(){if(!s.username){d.warn(o("sys.login.accountPlaceholder"));return}if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}if(!s.smscode){d.warn(o("sys.login.smsPlaceholder"));return}if(!s.password){d.warn(o("sys.login.passwordPlaceholder"));return}if(!s.confirmPassword){d.warn(o("sys.login.confirmPassword"));return}if(s.password!==s.confirmPassword){d.warn(o("sys.login.diffPwd"));return}if(!s.policy){d.warn(o("sys.login.policyPlaceholder"));return}q()}function q(){return E(this,null,function*(){try{const u=yield es(ls({username:s.username,password:s.password,phone:s.mobile,smscode:s.smscode}));u&&u.data.success?(g.success({description:u.data.message||o("sys.api.registerMsg"),duration:3}),n("success",{username:s.username,password:s.password}),M()):g.warning({message:o("sys.api.errorTip"),description:u.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(u){g.error({message:o("sys.api.errorTip"),description:u.message||o("sys.api.networkExceptionMsg"),duration:3})}})}function M(){Object.assign(s,{username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),i(p)||(m.value=!0,clearInterval(i(p)),p.value=null),y.value.resetFields()}function N(u){P.value=u}function R(u){T.value=u}return t({initForm:M}),(u,a)=>{const b=I("Icon"),C=I("a-input"),x=I("a-form-item"),A=I("a-checkbox"),J=I("a-form");return f(),_("div",ts,[e("div",cs,[e("div",rs,[e("div",us,[e("div",ds,[e("img",{src:i(as),alt:""},null,8,ms)])]),e("div",ps,[e("div",fs,[l(J,{ref_key:"formRef",ref:y,model:s},{default:v(()=>[e("div",_s,[e("div",vs,k(i(o)("sys.login.signUpFormTitle")),1)]),e("div",gs,[e("div",ys,[l(x,null,{default:v(()=>[e("div",ws,[l(b,{class:"aui-icon",icon:"ant-design:user-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.userName"),value:s.username,"onUpdate:value":a[0]||(a[0]=c=>s.username=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",xs,[l(b,{class:"aui-icon",icon:"ant-design:mobile-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.mobile"),value:s.mobile,"onUpdate:value":a[1]||(a[1]=c=>s.mobile=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",hs,[l(b,{class:"aui-icon",icon:"ant-design:mail-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.smsCode"),value:s.smscode,"onUpdate:value":a[2]||(a[2]=c=>s.smscode=c)},null,8,["placeholder","value"]),m.value?(f(),_("div",{key:0,class:"aui-code-line",onClick:W},k(i(o)("component.countdown.normalText")),1)):(f(),_("div",ks,k(i(o)("component.countdown.sendText",[i(w.value)])),1))])]),_:1}),l(x,null,{default:v(()=>[e("div",bs,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:P.value==="close"?"password":"text",placeholder:i(o)("sys.login.password"),value:s.password,"onUpdate:value":a[3]||(a[3]=c=>s.password=c)},null,8,["type","placeholder","value"]),e("div",Cs,[P.value==="open"?(f(),_("img",{key:0,src:i(D),alt:"开启",onClick:a[4]||(a[4]=c=>N("close"))},null,8,Is)):P.value==="close"?(f(),_("img",{key:1,src:i(F),alt:"关闭",onClick:a[5]||(a[5]=c=>N("open"))},null,8,Ps)):$("",!0)])])]),_:1}),l(x,null,{default:v(()=>[e("div",Ts,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:T.value==="close"?"password":"text",placeholder:i(o)("sys.login.confirmPassword"),value:s.confirmPassword,"onUpdate:value":a[6]||(a[6]=c=>s.confirmPassword=c)},null,8,["type","placeholder","value"]),e("div",Ms,[T.value==="open"?(f(),_("img",{key:0,src:i(D),alt:"开启",onClick:a[7]||(a[7]=c=>R("close"))},null,8,Es)):T.value==="close"?(f(),_("img",{key:1,src:i(F),alt:"关闭",onClick:a[8]||(a[8]=c=>R("open"))},null,8,Us)):$("",!0)])])]),_:1}),l(x,{name:"policy"},{default:v(()=>[e("div",Ns,[e("div",Rs,[e("div",Bs,[l(A,{checked:s.policy,"onUpdate:checked":a[9]||(a[9]=c=>s.policy=c)},null,8,["checked"]),e("span",Ss,k(i(o)("sys.login.policy")),1)])])])]),_:1})])]),e("div",Os,[e("div",Vs,[e("a",{class:"aui-link-login aui-flex-box",onClick:j},k(i(o)("sys.login.registerButton")),1)]),e("div",$s,[e("a",{class:"aui-linek-code aui-flex-box",onClick:H},k(i(o)("sys.login.backSignIn")),1)])])]),_:1},8,["model"])])])])])])}}}));const Ls=is(Fs,[["__scopeId","data-v-dcdb3616"]]);export{Ls as default};
