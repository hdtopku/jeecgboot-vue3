var k=Object.defineProperty;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var v=(s,o,e)=>o in s?k(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,w=(s,o)=>{for(var e in o||(o={}))D.call(o,e)&&v(s,e,o[e]);if(y)for(var e of y(o))b.call(o,e)&&v(s,e,o[e]);return s};var d=(s,o,e)=>new Promise((l,p)=>{var u=t=>{try{n(e.next(t))}catch(c){p(c)}},f=t=>{try{n(e.throw(t))}catch(c){p(c)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(u,f);n((e=e.apply(s,o)).next())});import{B as P}from"./BasicForm-202637f7.js";import"./componentMap-d4bccc5b.js";import{u as R}from"./useForm-b308f6ee.js";import"./JAddInput-b2310633.js";import"./JSelectUser-71a05f8d.js";import"./JSelectDept-1f595344.js";import"./JPopup-2fd87e0d.js";import{B as j}from"./index-ebe32d90.js";import"./cron-parser-vendor-f28c5d73.js";import{B as x}from"./index-156cafb7.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-b03a3f81.js";import{a as S}from"./depart.api-125ba91d.js";import{u as U,o as B}from"./depart.data-400b56fa.js";import{d as A,c as I,k as C,e as L,u as a,a5 as T,a9 as V,a7 as G,f as N,ag as $}from"./vue-5a09445c.js";const te=A({__name:"DepartFormModal",props:{rootTreeData:{type:Array,default:()=>[]}},emits:["success","register"],setup(s,{emit:o}){const e=s;I("prefixCls");const l=C(!1),p=C({}),u=L(()=>l.value?"编辑":"新增"),[f,{resetFields:n,setFieldsValue:t,validate:c,updateSchema:F}]=R({schemas:U().basicFormSchema,showActionButtonGroup:!1}),[O,{setModalProps:g,closeModal:_}]=j(r=>d(this,null,function*(){yield n(),l.value=a(r==null?void 0:r.isUpdate);let m=a(r==null?void 0:r.isChild),h=m?B.child:B.root;F([{field:"parentId",show:m,componentProps:{disabled:m,treeData:e.rootTreeData}},{field:"orgCode",show:!1},{field:"orgCategory",componentProps:{options:h}}]);let i=a(r==null?void 0:r.record);typeof i!="object"&&(i={}),i=Object.assign({departOrder:0,orgCategory:h[0].value},i),p.value=i,yield t(w({},i))}));function M(){return d(this,null,function*(){try{g({confirmLoading:!0});let r=yield c();yield S(r,l.value),_(),o("success")}finally{g({confirmLoading:!1})}})}return(r,m)=>(T(),V(a(x),$({title:u.value,width:800},r.$attrs,{onOk:M,onRegister:a(O)}),{default:G(()=>[N(a(P),{onRegister:a(f)},null,8,["onRegister"])]),_:1},16,["title","onRegister"]))}});export{te as _};
