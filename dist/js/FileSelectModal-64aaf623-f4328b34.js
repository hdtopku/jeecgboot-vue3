import{d as B,l as d,V as m,a7 as D,ac as C,aa as p,f as h}from"./vue-86253b15.js";import{ap as v,bB as S}from"./jeecg-online-vendor-bc5d810e.js";import{B as k}from"./index-5f3b36bb.js";import{E as w}from"./index-4de4eaa0.js";import"./antd-vue-vendor-371529c2.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-04a44d0a.js";import"./vxe-table-vendor-6a8d95c4.js";import"./BasicModal-8033a6fa.js";import"./useWindowSizeFn-0b39b13a.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";var f=(t,c,a)=>new Promise((n,o)=>{var u=e=>{try{l(a.next(e))}catch(i){o(i)}},r=e=>{try{l(a.throw(e))}catch(i){o(i)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(u,r);l((a=a.apply(t,c)).next())});const R=B({name:"FileSelectModal",components:{BasicModal:k},emits:["select","register"],setup(t,{emit:c}){const a=d(!0),n=d([]),o=d(""),[u,{closeModal:r}]=w(()=>f(this,null,function*(){o.value="",n.value.length===0&&i()}));function l(){c("select",o.value),r()}function e(){r()}function i(){return f(this,null,function*(){a.value=!0,n.value=yield v.get({url:"/online/cgform/head/rootFile"}).finally(()=>{a.value=!1})})}function g(s){return f(this,null,function*(){if(s.dataRef.children)return;let y={parentPath:s.dataRef.key};s.dataRef.children=yield v.get({url:"/online/cgform/head/fileTree",params:y}),n.value=[...n.value]})}function M(s){o.value=s[0]}return{loading:a,treeData:n,onLoadData:g,onSelect:M,onSubmit:l,onCancel:e,registerModal:u}}});function x(t,c,a,n,o,u){const r=m("a-directory-tree"),l=m("a-spin"),e=m("BasicModal");return D(),C(e,{onRegister:t.registerModal,title:"选择目录",width:500,onOk:t.onSubmit,onCancel:t.onCancel},{default:p(()=>[h(l,{spinning:t.loading},{default:p(()=>[h(r,{treeData:t.treeData,loadData:t.onLoadData,onSelect:t.onSelect},null,8,["treeData","loadData","onSelect"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}const T=S(R,[["render",x]]);export{T as default};
