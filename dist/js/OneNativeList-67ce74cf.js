var re=Object.defineProperty;var V=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var A=(d,i,t)=>i in d?re(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t,U=(d,i)=>{for(var t in i||(i={}))ce.call(i,t)&&A(d,t,i[t]);if(V)for(var t of V(i))ue.call(i,t)&&A(d,t,i[t]);return d};var $=(d,i,t)=>new Promise((c,m)=>{var k=a=>{try{g(t.next(a))}catch(u){m(u)}},y=a=>{try{g(t.throw(a))}catch(u){m(u)}},g=a=>a.done?c(a.value):Promise.resolve(a.value).then(k,y);g((t=t.apply(d,i)).next())});import{B as de,f as b,b as D,af as T,u as me}from"./jeecg-online-vendor-e26fc0e5.js";import{_ as pe}from"./OneNativeModal.vue_vue_type_script_setup_true_lang-f2907b63.js";import{g as fe,aa as _e,n as ve}from"./index-ea73cedc.js";import{downloadFile as ge}from"./renderUtils-c0f74cc7.js";import{cj as he,ab as ye}from"./antd-vue-vendor-cce59da1.js";import{d as ke,k as l,r as xe,o as we,U as f,a5 as _,a9 as z,a7 as n,aa as p,f as o,E as v,V as K,ab as be,a6 as h,F as N,u as Q}from"./vue-705b7309.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./OneNativeForm-83f75c79.js";import"./JAddInput-f981b8f0.js";import"./areaDataUtil-213a6b13.js";import"./useFormItem-701320d6.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-cc7eb3b4.js";import"./index-9c776ac3.js";import"./BasicModal-706c423f.js";import"./useWindowSizeFn-5fa808c9.js";import"./JSelectUser-2142310a.js";import"./props-d916a2a4.js";import"./JSelectBiz-52839998.js";import"./index-f4a08334.js";import"./index-b7f613fe.js";import"./bem-f204c89d.js";import"./props-dec3c169.js";import"./useContextMenu-cafc8f96.js";import"./depart.api-35875297.js";import"./JUpload.vue_vue_type_style_index_0_lang-fca6de33.js";import"./JPopup-c3fe6e18.js";import"./JSelectDept-89a20b68.js";const Ce={class:"table-operator"},Ie={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},Se=p("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),je={style:{"font-weight":"600"}},De={key:0,style:{"font-size":"12px","font-style":"italic"}},Te=["src","preview"],ze={key:0,style:{"font-size":"12px","font-style":"italic"}},Ne=["onClick"],Oe={class:"ant-dropdown-link"},Re=["onClick"],Ee=p("a",null,"删除",-1),mt=ke({__name:"OneNativeList",setup(d){l(!1);const i=l({}),t=l(!1),c=l([]),m=l();de();const k=l([{title:"文本",align:"center",dataIndex:"name"},{title:"字典下拉",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?b(c.value.xiala,e):""},{title:"字典单选",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?b(c.value.danxuan,e):""},{title:"字典多选",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?b(c.value.duoxuan,e):""},{title:"开关",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?b(c.value.kaiguan,e):""},{title:"日期",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"年月日时分秒",align:"center",dataIndex:"nyrsfm"},{title:"时间",align:"center",dataIndex:"shijian"},{title:"文件",align:"center",dataIndex:"wenjian"},{title:"图片",align:"center",dataIndex:"tupian"},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147}]),y=xe({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),g=l([]);l(!1);const a=l({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,s)=>s[0]+"-"+s[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0,total:0}),u=l([]),C=l([]),O=l({column:"createTime",order:"desc"}),R=l({}),{createMessage:X}=me();function q(e,s){u.value=e,C.value=s}function H({pagination:e,filters:s,sorter:r}){a.value=e,O.value=r,R.value=U({},s)}function J(){m.value.disableSubmit=!1,m.value.add()}function L(){u.value=[],C.value=[]}function G(){ye.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>{D.delete({url:y.delete,data:{ids:u.value}},{joinParamsToUrl:!0}).then(()=>{I()})}})}function W(){let e=Object.assign(i.value,O.value,R.value);return e.field=Y(),e.pageNo=a.value.current,e.pageSize=a.value.pageSize,ve(e)}function Y(){let e="id,";return k.value.forEach(function(s){e+=","+s.dataIndex}),e}function E(e){e===1&&(a.value.current=1),t.value=!0;let s=W();D.get({url:y.list,params:s},{isTransformResponse:!1}).then(r=>{r.success?(g.value=r.result.records,r.result&&r.result.total?a.value.total=r.result.total:a.value.total=0):X.warning(r.message)}).finally(()=>{t.value=!1})}function Z(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),fe(e)}function ee(e){m.value.disableSubmit=!1,m.value.edit(e)}function te(e){m.value.disableSubmit=!0,m.value.edit(e)}function ae(e){D.delete({url:y.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(s=>{I()})}function ne(){return $(this,null,function*(){c.value.flzds=yield _e({code:"B01"}),c.value.xiala=yield T("sex"),c.value.danxuan=yield T("sex"),c.value.duoxuan=yield T("urgent_level")})}function I(){u.value=[],C.value=[],E(1)}return we(()=>{c.value.kaiguan=[{text:"是",value:"1"},{text:"否",value:"2"}],E(),ne()}),(e,s)=>{const r=f("a-button"),M=f("Icon"),S=f("a-menu-item"),P=f("a-menu"),B=f("a-dropdown"),oe=f("a-divider"),ie=f("a-icon"),le=f("a-table"),se=f("a-card");return _(),z(se,{bordered:!1},{default:n(()=>[p("div",Ce,[o(r,{onClick:J,type:"primary",preIcon:"ant-design:plus"},{default:n(()=>[v("新增")]),_:1}),u.value.length>0?(_(),z(B,{key:0},{overlay:n(()=>[o(P,null,{default:n(()=>[o(S,{key:"1",onClick:G},{default:n(()=>[o(M,{icon:"ant-design:delete-outlined"}),v(" 删除 ")]),_:1})]),_:1})]),default:n(()=>[o(r,null,{default:n(()=>[v("批量操作 "),o(M,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):K("",!0)]),p("div",null,[p("div",Ie,[Se,v(" 已选择 "),p("a",je,be(u.value.length),1),v("项 "),p("a",{style:{"margin-left":"24px"},onClick:L},"清空")]),o(le,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:k.value,dataSource:g.value,pagination:a.value,loading:t.value,rowSelection:{selectedRowKeys:u.value,onChange:q},onChange:H},{bodyCell:n(({column:j,text:x,record:w})=>[j.dataIndex==="tupian"?(_(),h(N,{key:0},[x?(_(),h("img",{key:1,src:Z(x),preview:w.id,alt:"",class:"anty-img-wrap"},null,8,Te)):(_(),h("span",De,"无图片"))],64)):j.dataIndex==="wenjian"?(_(),h(N,{key:1},[x?(_(),z(r,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:F=>Q(ge)(x)},{default:n(()=>[v(" 下载 ")]),_:2},1032,["onClick"])):(_(),h("span",ze,"无文件"))],64)):j.dataIndex==="action"?(_(),h(N,{key:2},[p("a",{onClick:F=>ee(w)},"编辑",8,Ne),o(oe,{type:"vertical"}),o(B,null,{overlay:n(()=>[o(P,{class:"antd-more"},{default:n(()=>[o(S,null,{default:n(()=>[p("a",{onClick:F=>te(w)},"详情",8,Re)]),_:2},1024),o(S,null,{default:n(()=>[o(Q(he),{title:"确定删除吗?",onConfirm:()=>ae(w.id)},{default:n(()=>[Ee]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[p("a",Oe,[v("更多 "),o(ie,{type:"down"})])]),_:2},1024)],64)):K("",!0)]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(pe,{ref_key:"oneProtogenesisModal",ref:m,onOk:I},null,512)]),_:1})}}});export{mt as default};
