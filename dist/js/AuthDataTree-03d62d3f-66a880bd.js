import{Q as B,u as M}from"./jeecg-online-vendor-ecddc31b.js";import{d as S,A as V,C as _}from"./auth.api-d3a6c4b3-f2c34e5d.js";import{d as z,k as c,e as T,w as q,V as h,a5 as f,a6 as x,a9 as g,F as A,aa as F,f as v,a7 as I,E as C}from"./vue-bcbaddf9.js";import"./antd-vue-vendor-a78909e6.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-9edfd3ae.js";import"./lodash-es-vendor-9b741fb8.js";var y=(e,d,t)=>new Promise((u,s)=>{var i=a=>{try{o(t.next(a))}catch(r){s(r)}},n=a=>{try{o(t.throw(a))}catch(r){s(r)}},o=a=>a.done?u(a.value):Promise.resolve(a.value).then(i,n);o((t=t.apply(e,d)).next())});const J=z({name:"AuthDataTree",props:{cgformId:{type:String,required:!0}},setup(e){const{createMessage:d}=M(),t=c(""),u=c(3),s=c(!0),i=c([]),n=c([]),o=c([]),a=c(""),r=T(()=>!t.value);q(()=>e.cgformId,m,{immediate:!0});function m(){return y(this,null,function*(){if(!e.cgformId)return;let l=yield S(e.cgformId,u.value);o.value=l.map(p=>({key:p.id,title:p.ruleName}))})}function k(l,p){return y(this,null,function*(){t.value=l,a.value=p,n.value=[],yield m();let w=yield V({roleId:l,cgformId:e.cgformId,type:u.value,authMode:p});n.value=w.map(N=>N.authId)})}function K(){t.value="",m()}function E(){m(),k(t.value,a.value)}function b(){return y(this,null,function*(){yield _(t.value,e.cgformId,{authId:JSON.stringify(n.value),authMode:a.value}),d.success("保存成功")})}function D(l){i.value=l,s.value=!1}function P(){t.value="",n.value=[]}return{loadChecked:k,clear:P,expandedKeys:i,autoExpandParent:s,checkedKeys:n,treeData:o,disabled:r,onSave:b,onExpand:D,onRefresh:E,clearChecked:K}}}),R={class:"onl-auth-tree-btns"};function $(e,d,t,u,s,i){const n=h("a-empty"),o=h("a-button"),a=h("a-tree");return f(),x("div",null,[e.disabled?(f(),g(n,{key:0,description:"请先选中左侧角色/部门/用户"})):e.treeData.length===0?(f(),g(n,{key:1,description:"无权限信息"})):(f(),x(A,{key:2},[F("div",R,[v(o,{onClick:e.onRefresh,size:"small",type:"primary",preIcon:"ant-design:redo",ghost:""},{default:I(()=>[C("刷新")]),_:1},8,["onClick"]),v(o,{onClick:e.onSave,size:"small",type:"primary",preIcon:"ant-design:save",ghost:""},{default:I(()=>[C("保存")]),_:1},8,["onClick"])]),v(a,{checkable:"",checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":d[0]||(d[0]=r=>e.checkedKeys=r),expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData,onExpand:e.onExpand},null,8,["checkedKeys","expandedKeys","autoExpandParent","treeData","onExpand"])],64))])}const L=B(J,[["render",$],["__scopeId","data-v-c6be2157"]]);export{L as default};
