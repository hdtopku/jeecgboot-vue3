var x=(v,i,u)=>new Promise((o,d)=>{var g=l=>{try{f(u.next(l))}catch(m){d(m)}},p=l=>{try{f(u.throw(l))}catch(m){d(m)}},f=l=>l.done?o(l.value):Promise.resolve(l.value).then(g,p);f((u=u.apply(v,i)).next())});import{d as F,l as k,r as _,e as P,u as e,a7 as B,a8 as M,f as a,aa as n,E as y,ae as b,F as T,W as U,J as L}from"./vue-ebecda47.js";import N from"./LoginFormTitle-bc614cb9.js";import{bo as w,bH as V,bz as C,c2 as h}from"./antd-vue-vendor-b75e8c06.js";import"./index-85cfc899.js";import{bl as D,bm as G,br as A,B as H,C as J,bn as W,bt as $,b9 as j,bp as q}from"./jeecg-online-vendor-cfb58502.js";import{S as K}from"./index-96e99de8.js";import{C as O}from"./index-118a05d7.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-cd7703c8.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-4aae63bf.js";import"./useCountdown-00a25cd7.js";import"./useFormItemSingle-36e25e6f.js";const ce=F({__name:"RegisterForm",setup(v){const i=h.Item,u=w.Password,{t:o}=H(),{handleBackLogin:d,getLoginState:g}=D(),{notification:p,createErrorModal:f}=J(),l=k(),m=k(!1),t=_({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:E}=G(t),{validForm:R}=W(l),S=P(()=>e(g)===A.REGISTER);function I(){return x(this,null,function*(){const c=yield R();if(c)try{m.value=!0;const s=yield $(L({username:c.account,password:c.password,phone:c.mobile,smscode:c.sms}));s&&s.data.success?(p.success({description:s.data.message||o("sys.api.registerMsg"),duration:3}),d()):p.warning({message:o("sys.api.errorTip"),description:s.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(s){p.error({message:o("sys.api.errorTip"),description:s.message||o("sys.api.networkExceptionMsg"),duration:3})}finally{m.value=!1}})}function z(){return j({mobile:t.mobile,smsmode:q.REGISTER})}return(c,s)=>S.value?(B(),M(T,{key:0},[a(N,{class:"enter-x"}),a(e(h),{class:"p-4 enter-x",model:t,rules:e(E),ref_key:"formRef",ref:l},{default:n(()=>[a(e(i),{name:"account",class:"enter-x"},{default:n(()=>[a(e(w),{class:"fix-auto-fill",size:"large",value:t.account,"onUpdate:value":s[0]||(s[0]=r=>t.account=r),placeholder:e(o)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"mobile",class:"enter-x"},{default:n(()=>[a(e(w),{size:"large",value:t.mobile,"onUpdate:value":s[1]||(s[1]=r=>t.mobile=r),placeholder:e(o)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"sms",class:"enter-x"},{default:n(()=>[a(e(O),{size:"large",class:"fix-auto-fill",value:t.sms,"onUpdate:value":s[2]||(s[2]=r=>t.sms=r),placeholder:e(o)("sys.login.smsCode"),sendCodeApi:z},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password",class:"enter-x"},{default:n(()=>[a(e(K),{size:"large",value:t.password,"onUpdate:value":s[3]||(s[3]=r=>t.password=r),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"confirmPassword",class:"enter-x"},{default:n(()=>[a(e(u),{size:"large",visibilityToggle:"",value:t.confirmPassword,"onUpdate:value":s[4]||(s[4]=r=>t.confirmPassword=r),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),a(e(i),{class:"enter-x",name:"policy"},{default:n(()=>[a(e(V),{checked:t.policy,"onUpdate:checked":s[5]||(s[5]=r=>t.policy=r),size:"small"},{default:n(()=>[y(b(e(o)("sys.login.policy")),1)]),_:1},8,["checked"])]),_:1}),a(e(C),{type:"primary",class:"enter-x",size:"large",block:"",onClick:I,loading:m.value},{default:n(()=>[y(b(e(o)("sys.login.registerButton")),1)]),_:1},8,["loading"]),a(e(C),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(d)},{default:n(()=>[y(b(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):U("",!0)}});export{ce as default};
