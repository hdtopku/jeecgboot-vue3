var x=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(o,t,e)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,b=(o,t)=>{for(var e in t||(t={}))w.call(t,e)&&k(o,e,t[e]);if(h)for(var e of h(t))B.call(t,e)&&k(o,e,t[e]);return o};var f=(o,t,e)=>new Promise((c,a)=>{var p=s=>{try{r(e.next(s))}catch(i){a(i)}},d=s=>{try{r(e.throw(s))}catch(i){a(i)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(p,d);r((e=e.apply(o,t)).next())});import{B as L}from"./index-abefda79.js";import{B as v}from"./BasicForm-21b7ac92.js";import"./componentMap-8ca03aee.js";import{u as _}from"./useForm-69b31c99.js";import"./JAddInput-b8d2ab38.js";import"./JSelectUser-d2cfe039.js";import"./JSelectDept-f59102d9.js";import"./JPopup-78bf3f5d.js";import{B as F}from"./index-0d179770.js";import"./cron-parser-vendor-7c1c3251.js";import{b as m}from"./jeecg-online-vendor-658239c9.js";import{M}from"./antd-vue-vendor-a78909e6.js";import{d as U,k as y,u as l,e as T,a5 as C,a9 as O,a7 as N,f as P,ag as R}from"./vue-bcbaddf9.js";const Y=[{title:"短链接码",dataIndex:"code"},{title:"链接",dataIndex:"link"},{title:"备注",dataIndex:"remark"},{title:"访问次数",dataIndex:"visitCount"},{title:"手机是否可以访问(0-可以,-1-不可以)",dataIndex:"mobile"},{title:"电脑是否可以访问(0-可以,-1-不可以)",dataIndex:"pc"},{title:"状态(0：正常，-1:失效)",dataIndex:"status"},{title:"链接类型:1-agiso订单",dataIndex:"linkType"}],Z=[{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"}],S=[{label:"",field:"id",component:"Input",show:!1},{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"},{label:"备注",field:"remark",component:"Input"},{label:"访问次数",field:"visitCount",component:"InputNumber"},{label:"手机是否可以访问(0-可以,-1-不可以)",field:"mobile",component:"InputNumber"},{label:"电脑是否可以访问(0-可以,-1-不可以)",field:"pc",component:"InputNumber"},{label:"状态(0：正常，-1:失效)",field:"status",component:"Input"},{label:"链接类型:1-agiso订单",field:"linkType",component:"Input"}],ee="/pms/shortLink/exportXls",te="/pms/shortLink/importExcel",oe=o=>m.get({url:"/pms/shortLink/list",params:o}),ne=(o,t)=>m.delete({url:"/pms/shortLink/delete",params:o},{joinParamsToUrl:!0}).then(()=>{t()}),se=(o,t)=>{M.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>m.delete({url:"/pms/shortLink/deleteBatch",data:o},{joinParamsToUrl:!0}).then(()=>{t()})})},j=(o,t)=>{let e=t?"/pms/shortLink/edit":"/pms/shortLink/add";return m.post({url:e,params:o})},le=U({__name:"ShortLinkModal",emits:["register","success"],setup(o,{emit:t}){const e=y(!0),[c,{resetFields:a,setFieldsValue:p,validate:d}]=_({labelWidth:150,schemas:S,showActionButtonGroup:!1}),[r,{setModalProps:s,closeModal:i}]=F(n=>f(this,null,function*(){yield a(),s({confirmLoading:!1,showCancelBtn:n==null?void 0:n.showFooter,showOkBtn:n==null?void 0:n.showFooter}),e.value=!!(n!=null&&n.isUpdate),l(e)&&(yield p(b({},n.record)))})),I=T(()=>l(e)?"编辑":"新增");function g(n){return f(this,null,function*(){try{let u=yield d();s({confirmLoading:!0}),yield j(u,e.value),i(),t("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(n,u)=>(C(),O(l(L),R(n.$attrs,{onRegister:l(r),title:I.value,onOk:g,width:"60%"}),{default:N(()=>[P(l(v),{onRegister:l(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{le as _,te as a,se as b,Y as c,ne as d,ee as g,oe as l,Z as s};
