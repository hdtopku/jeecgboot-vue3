var _=(o,e,r)=>new Promise((c,i)=>{var l=t=>{try{s(r.next(t))}catch(a){i(a)}},m=t=>{try{s(r.throw(t))}catch(a){i(a)}},s=t=>t.done?c(t.value):Promise.resolve(t.value).then(l,m);s((r=r.apply(o,e)).next())});import{c as C,ad as f,l as h,_ as B}from"./jeecg-online-vendor-12004772.js";import{ap as F,g as I}from"./index-6916e394.js";import{B as b}from"./BasicForm-030e7c21.js";import"./componentMap-90ab712d.js";import{u as A}from"./useForm-ae9e1cbd.js";import"./JAddInput-dff0b84f.js";import{C as U,u as S}from"./upload-42d618be.js";import{h as w}from"./header-102ede9c.js";import{b as y}from"./data-69cf86b5.js";import{d as E,o as V,e as k,U as n,aV as R,ar as $,bi as u,f as p,at as g,E as x,aX as M,aW as N}from"./vue-c7e3516e.js";import{cn as T,cT as H,cU as W}from"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm.vue_vue_type_style_index_0_lang-8cb333b2.js";import"./index-a882524d.js";import"./BasicModal-b901e352.js";import"./useWindowSizeFn-581ed1a8.js";import"./useFormItem-cc50e63d.js";import"./JUpload.vue_vue_type_style_index_0_lang-5851070a.js";import"./download-fc124faf.js";import"./base64Conver-4e359726.js";import"./index-d83c9bcd.js";import"./index-6d615beb.js";import"./useCountdown-61c82faf.js";import"./index-fcc2460e.js";import"./areaDataUtil-13d415af.js";import"./useSelectBiz-f95680cd.js";import"./props-18305405.js";import"./index-3ce15f67.js";import"./bem-2be191b9.js";import"./props-c3781b9d.js";import"./useContextMenu-1b1215cd.js";import"./useTreeBiz-cda2af6e.js";import"./index-c5567c31.js";import"./depart.api-de6ffddd.js";import"./validator-a64fcad8.js";import"./user.api-ea86029c.js";const j=E({components:{BasicForm:b,CollapseContainer:F,Button:T,ARow:H,ACol:W,CropperAvatar:U},setup(){const{createMessage:o}=h(),e=C(),[r,{setFieldsValue:c,validate:i}]=A({labelWidth:120,schemas:y,showActionButtonGroup:!1});V(()=>_(this,null,function*(){const t=e.getUserInfo;c(t)}));const l=k(()=>{const{avatar:t}=e.getUserInfo;return I(t)||w});function m(t,a){const d=e.getUserInfo;d.avatar=a,e.setUserInfo(d),a&&f.post({url:"/sys/user/appEdit",params:{avatar:a}})}function s(){return _(this,null,function*(){try{let t=yield i();t.avatar=e.getUserInfo.avatar,f.post({url:"/sys/user/appEdit",params:t});const a=e.getUserInfo;Object.assign(a,t),e.setUserInfo(a),o.success("\u66F4\u65B0\u6210\u529F")}catch(t){}})}return{avatar:l,register:r,uploadImg:S,updateAvatar:m,handleSubmit:s}}});const G=o=>(M("data-v-1e4d7ab9"),o=o(),N(),o),O={class:"change-avatar"},P=G(()=>g("div",{class:"mb-2"}," \u5934\u50CF ",-1));function X(o,e,r,c,i,l){const m=n("BasicForm"),s=n("a-col"),t=n("CropperAvatar"),a=n("a-row"),d=n("Button"),v=n("CollapseContainer");return R(),$(v,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:u(()=>[p(a,{gutter:24},{default:u(()=>[p(s,{span:14},{default:u(()=>[p(m,{onRegister:o.register},null,8,["onRegister"])]),_:1}),p(s,{span:10},{default:u(()=>[g("div",O,[P,p(t,{uploadApi:o.uploadImg,value:o.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:o.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1}),p(d,{type:"primary",onClick:o.handleSubmit},{default:u(()=>[x(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}const $t=B(j,[["render",X],["__scopeId","data-v-1e4d7ab9"]]);export{$t as default};
