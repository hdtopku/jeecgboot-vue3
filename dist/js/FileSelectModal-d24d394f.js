import{bW as M,ad as m}from"./jeecg-online-vendor-bf2efbcb.js";import{B as D}from"./index-8cf3aabb.js";import{A as S}from"./index-fde9c72f.js";import{d as C,k as d,U as p,aV as k,ar as B,bi as v,f as h}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";var f=(t,c,a)=>new Promise((n,o)=>{var u=e=>{try{l(a.next(e))}catch(i){o(i)}},r=e=>{try{l(a.throw(e))}catch(i){o(i)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(u,r);l((a=a.apply(t,c)).next())});const R=C({name:"FileSelectModal",components:{BasicModal:D},emits:["select","register"],setup(t,{emit:c}){const a=d(!0),n=d([]),o=d(""),[u,{closeModal:r}]=S(()=>f(this,null,function*(){o.value="",n.value.length===0&&i()}));function l(){c("select",o.value),r()}function e(){r()}function i(){return f(this,null,function*(){a.value=!0,n.value=yield m.get({url:"/online/cgform/head/rootFile"}).finally(()=>{a.value=!1})})}function _(s){return f(this,null,function*(){if(s.dataRef.children)return;let y={parentPath:s.dataRef.key};s.dataRef.children=yield m.get({url:"/online/cgform/head/fileTree",params:y}),n.value=[...n.value]})}function g(s){o.value=s[0]}return{loading:a,treeData:n,onLoadData:_,onSelect:g,onSubmit:l,onCancel:e,registerModal:u}}});function b(t,c,a,n,o,u){const r=p("a-directory-tree"),l=p("a-spin"),e=p("BasicModal");return k(),B(e,{onRegister:t.registerModal,title:"\u9009\u62E9\u76EE\u5F55",width:500,onOk:t.onSubmit,onCancel:t.onCancel},{default:v(()=>[h(l,{spinning:t.loading},{default:v(()=>[h(r,{treeData:t.treeData,loadData:t.onLoadData,onSelect:t.onSelect},null,8,["treeData","loadData","onSelect"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}var U=M(R,[["render",b]]);export{U as default};
