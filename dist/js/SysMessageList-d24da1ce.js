import{u as B,a as H}from"./useSysMessage-b4f75a89.js";import{C as E,ay as O,az as R,aA as V,aB as A,aC as N,aD as w}from"./jeecg-online-vendor-ef755ff7.js";import{ax as I}from"./antd-vue-vendor-31afcf32.js";import{U as l,a5 as o,a9 as r,a7 as e,a6 as c,f as s,E as F,V as z,aa as m,ab as D,F as f}from"./vue-249e5fad.js";import"./index-12df1add.js";import"./lodash-es-vendor-c1987ca1.js";import"./tinymce-vendor-676f8393.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-0b109a77.js";const U={name:"SysMessageList",components:{FilterOutlined:O,CloseOutlined:I,BellFilled:R,ExclamationOutlined:V,MailOutlined:A,InteractionOutlined:N,AlertOutlined:w},props:{star:{type:Boolean,default:!1}},emits:["close","detail"],setup(C,{emit:k}){const{messageList:L,loadEndStatus:t,loadingMoreStatus:S,onLoadMore:T,noRead:b,getMsgCategory:x,searchParams:d,reset:g,loadData:i,updateStarMessage:_}=B();function u(n){let{fromUser:M,rangeDateKey:a,rangeDate:v}=n;d.fromUser=M||"",d.rangeDateKey=a||"",d.rangeDate=v||[],C.star===!0?d.starFlag="1":d.starFlag="",g(),i()}function p(n){_(n),n.starFlag=="1"?n.starFlag="0":n.starFlag="1"}const{goPage:y}=H(k);function h(n){n.readFlag="1",y(n),k("close",n.id)}return{messageList:L,loadEndStatus:t,loadingMoreStatus:S,onLoadMore:T,noRead:b,getMsgCategory:x,reload:u,clickStar:p,showMessageDetail:h}}},K={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},P={key:1,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},j={style:{position:"relative"}},q=["innerHTML"],G=["innerHTML"],J=["onClick"];function Q(C,k,L,t,S,T){const b=l("a-button"),x=l("a-rate"),d=l("a-tooltip"),g=l("mail-outlined"),i=l("a-avatar"),_=l("a-badge"),u=l("interaction-outlined"),p=l("alert-outlined"),y=l("bell-filled"),h=l("a-list-item-meta"),n=l("a-list-item"),M=l("a-list");return o(),r(M,{"item-layout":"horizontal","data-source":t.messageList},{loadMore:e(()=>[t.messageList&&t.messageList.length>0&&!t.loadEndStatus&&!t.loadingMoreStatus?(o(),c("div",K,[s(b,{onClick:t.onLoadMore},{default:e(()=>[F("加载更多")]),_:1},8,["onClick"])])):z("",!0),t.messageList&&t.messageList.length>0&&t.loadEndStatus?(o(),c("div",P," 没有更多了 ")):z("",!0)]),renderItem:e(({item:a})=>[s(n,null,{actions:e(()=>[s(x,{value:a.starFlag=="1"?1:0,count:1,onClick:v=>t.clickStar(a),style:{cursor:"pointer"},disabled:""},null,8,["value","onClick"])]),default:e(()=>[s(h,{description:a.createTime},{title:e(()=>[m("div",j,[m("span",null,D(t.getMsgCategory(a)),1),a.busType=="bpm"?(o(),c("span",{key:0,class:"bpm-cuiban-content",innerHTML:a.msgContent},null,8,q)):(o(),r(d,{key:1},{title:e(()=>[m("div",{innerHTML:a.msgContent},null,8,G)]),default:e(()=>[F(" "+D(a.titile),1)]),_:2},1024)),m("a",{onClick:v=>t.showMessageDetail(a),style:{"margin-left":"16px"}},"查看详情",8,J)])]),avatar:e(()=>[a.busType=="email"?(o(),c(f,{key:0},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(g,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm_task"?(o(),c(f,{key:1},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(u,{style:{"font-size":"16px"}})]),_:1}))],64)):a.busType=="bpm"?(o(),c(f,{key:2},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(p,{style:{"font-size":"16px"}})]),_:1}))],64)):(o(),c(f,{key:3},[t.noRead(a)?(o(),r(_,{key:0,dot:"",class:"msg-no-read"},{default:e(()=>[s(i,{style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"},title:"未读消息"})]),_:1})]),_:1})):(o(),r(i,{key:1,style:{background:"#79919d"}},{default:e(()=>[s(y,{style:{"font-size":"16px"}})]),_:1}))],64))]),_:2},1032,["description"])]),_:2},1024)]),_:1},8,["data-source"])}const se=E(U,[["render",Q],["__scopeId","data-v-61c483dc"]]);export{se as default};
