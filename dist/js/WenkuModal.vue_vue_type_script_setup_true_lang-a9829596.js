var g=Object.defineProperty;var d=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(i,o,e)=>o in i?g(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e,w=(i,o)=>{for(var e in o||(o={}))k.call(o,e)&&h(i,e,o[e]);if(d)for(var e of d(o))M.call(o,e)&&h(i,e,o[e]);return i};var f=(i,o,e)=>new Promise((a,m)=>{var p=s=>{try{n(e.next(s))}catch(l){m(l)}},c=s=>{try{n(e.throw(s))}catch(l){m(l)}},n=s=>s.done?a(s.value):Promise.resolve(s.value).then(p,c);n((e=e.apply(i,o)).next())});import{B as Y}from"./index-9ca8f863.js";import{B}from"./BasicForm-e7d3537f.js";import"./componentMap-42aebfee.js";import{u as F}from"./useForm-b8bb8b05.js";import"./JAddInput-6e8b52df.js";import"./JSelectUser-9d666511.js";import"./JSelectDept-113b0470.js";import"./JPopup-746d3c0b.js";import{B as D}from"./index-26fb0584.js";import"./cron-parser-vendor-b0ab0fe2.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-8153fc9b.js";import{s as _}from"./Wenku.api-e4e73ea6.js";import{d as I,k as P,u as r,e as y,a5 as T,a9 as R,a7 as U,f as C,ag as L}from"./vue-5a09445c.js";const O=[{label:"",field:"id",component:"Input",show:!1},{label:"链接key",field:"code",component:"Input"},{label:"激活码状态(0-正常,-1-失效)",field:"valid",component:"Input"},{label:"验证状态(-1-已退款,0-未使用,1-已打开,2-已提交,4-已发送)",field:"status",component:"Input"},{label:"文库下载地址",field:"link",component:"Input"},{label:"邮箱地址",field:"email",component:"Input"},{label:"备注",field:"remark",component:"Input"},{label:"客户首次访问的时间",field:"visitTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}},{label:"客户开始验证的时间",field:"verifyTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}},{label:"买家申请退款时间",field:"refundTime",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss"}}],K=I({__name:"WenkuModal",emits:["register","success"],setup(i,{emit:o}){const e=P(!0),[a,{resetFields:m,setFieldsValue:p,validate:c}]=F({labelWidth:150,schemas:O,showActionButtonGroup:!1}),[n,{setModalProps:s,closeModal:l}]=D(t=>f(this,null,function*(){yield m(),s({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),r(e)&&(yield p(w({},t.record)))})),v=y(()=>r(e)?"编辑":"新增");function b(t){return f(this,null,function*(){try{let u=yield c();s({confirmLoading:!0}),yield _(u,e.value),l(),o("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(t,u)=>(T(),R(r(Y),L(t.$attrs,{onRegister:r(n),title:v.value,onOk:b,width:"96%"}),{default:U(()=>[C(r(B),{onRegister:r(a)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{K as _};
