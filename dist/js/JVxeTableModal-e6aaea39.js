var H=Object.defineProperty,q=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var V=(e,t,l)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,$=(e,t)=>{for(var l in t||(t={}))Y.call(t,l)&&V(e,l,t[l]);if(T)for(var l of T(t))z.call(t,l)&&V(e,l,t[l]);return e},A=(e,t)=>q(e,N(t));var S=(e,t,l)=>new Promise((p,f)=>{var v=r=>{try{d(l.next(r))}catch(c){f(c)}},m=r=>{try{d(l.throw(r))}catch(c){f(c)}},d=r=>r.done?p(r.value):Promise.resolve(r.value).then(v,m);d((l=l.apply(e,t)).next())});import{B as I}from"./index-5e1edea3.js";import{J as M,a3 as P,B as X}from"./index-797f995b.js";import"./vxe-table-vendor-c5aaa9d2.js";import{D as G}from"./jeecg-online-vendor-a84f26e2.js";import{o as Q,a as W,s as Z}from"./jvxetable.api-3cd2c7e5.js";import{useJvxeMethod as x}from"./useJvxeMethods-929c815f.js";import{d as ee,k as g,r as h,u as R,e as te,V as i,a5 as ae,a9 as oe,a7 as o,f as a,aa as le,E as O,ag as re}from"./vue-5a09445c.js";import"./BasicModal-02606f87.js";import"./antd-vue-vendor-04f0af1d.js";import"./tinymce-vendor-e2919cb0.js";import"./useWindowSizeFn-76d4329b.js";import"./lodash-es-vendor-70833b4a.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./vxeUtils-1ef9da64.js";const ne=[{title:"客户名",key:"name",width:180,type:M.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"性别",key:"sex",width:180,type:M.select,options:[{title:"男",value:"1"},{title:"女",value:"2"}],defaultValue:"",placeholder:"请选择${title}"},{title:"身份证号",key:"idcard",width:180,type:M.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}格式不正确"}]},{title:"手机号",key:"telphone",width:180,type:M.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^1[3456789]\\d{9}$",message:"${title}格式不正确"}]}],ue=[{title:"航班号",key:"ticketCode",width:180,type:M.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"航班时间",key:"tickectDate",width:180,type:M.date,placeholder:"请选择${title}",defaultValue:""}],de=ee({name:"JVexTableModal",components:{BasicModal:I,JVxeTable:P},emits:["success","register"],setup(e,{emit:t}){const l=g(300),p=g(!0),f=g(),v=g(),m=g(["tableRef1","tableRef2"]),d=g("tableRef1"),r={tableRef1:f,tableRef2:v},c=h({xs:{span:24},sm:{span:5}}),k=h({xs:{span:24},sm:{span:16}}),y=h({loading:!1,dataSource:[],columns:ne}),b=h({loading:!1,dataSource:[],columns:ue}),n=h({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[B,w,C,F]=x(K,j,r,d,m),[u,{setModalProps:D,closeModal:L}]=X(s=>S(this,null,function*(){if(D({confirmLoading:!1}),J(),p.value=!!(s!=null&&s.isUpdate),R(p)){Object.assign(n,s.record);let _={id:n.id};C(Q,_,y),C(W,_,b)}})),E={orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},U=te(()=>R(p)?"编辑":"新增");function j(s){let _=Object.assign(n,s.formValue);return A($({},_),{jeecgOrderCustomerList:s.tablesValue[0].tableData,jeecgOrderTicketList:s.tablesValue[1].tableData})}function J(){n.id=null,n.orderCode="",n.orderMoney="",n.orderDate=null,n.ctype="",n.content="",n.jeecgOrderCustomerList=[],n.jeecgOrderTicketList=[],y.dataSource=[],b.dataSource=[]}function K(s){return S(this,null,function*(){D({confirmLoading:!0}),yield Z(s,R(p)),L(),t("success")})}return{formRef:F,activeKey:d,table1:y,table2:b,tableRef1:f,tableRef2:v,getTitle:U,labelCol:c,wrapperCol:k,validatorRules:E,orderMainModel:n,registerModal:u,handleChangeTabs:B,handleSubmit:w,handleFullScreen:s=>{l.value=s?document.documentElement.clientHeight-387:300},tableH:l}}}),se={style:{"overflow-x":"hidden"}};function ie(e,t,l,p,f,v){const m=i("a-input"),d=i("a-form-item"),r=i("a-col"),c=i("a-select-option"),k=i("a-select"),y=i("a-date-picker"),b=i("a-row"),n=i("JVxeTable"),B=i("a-tab-pane"),w=i("a-tabs"),C=i("a-form"),F=i("BasicModal");return ae(),oe(F,re(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%",onFullScreen:e.handleFullScreen}),{default:o(()=>[a(C,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:o(()=>[le("div",se,[a(b,{class:"form-row",gutter:16},{default:o(()=>[a(r,{lg:8},{default:o(()=>[a(d,{label:"订单号",name:"orderCode"},{default:o(()=>[a(m,{value:e.orderMainModel.orderCode,"onUpdate:value":t[0]||(t[0]=u=>e.orderMainModel.orderCode=u),placeholder:"请输入订单号"},null,8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:o(()=>[a(d,{label:"订单类型",name:"ctype"},{default:o(()=>[a(k,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":t[1]||(t[1]=u=>e.orderMainModel.ctype=u)},{default:o(()=>[a(c,{value:"1"},{default:o(()=>[O("国内订单")]),_:1}),a(c,{value:"2"},{default:o(()=>[O("国际订单")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:o(()=>[a(d,{label:"订单日期",name:"orderDate"},{default:o(()=>[a(y,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":t[2]||(t[2]=u=>e.orderMainModel.orderDate=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(b,{class:"form-row",gutter:16},{default:o(()=>[a(r,{lg:8},{default:o(()=>[a(d,{label:"订单金额",name:"orderMoney"},{default:o(()=>[a(m,{value:e.orderMainModel.orderMoney,"onUpdate:value":t[3]||(t[3]=u=>e.orderMainModel.orderMoney=u),placeholder:"请输入订单金额"},null,8,["value"])]),_:1})]),_:1}),a(r,{lg:8},{default:o(()=>[a(d,{label:"订单备注",name:"content"},{default:o(()=>[a(m,{value:e.orderMainModel.content,"onUpdate:value":t[4]||(t[4]=u=>e.orderMainModel.content=u),placeholder:"请输入订单备注"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),a(w,{activeKey:e.activeKey,"onUpdate:activeKey":t[5]||(t[5]=u=>e.activeKey=u),onChange:e.handleChangeTabs},{default:o(()=>[a(B,{tab:"客户信息",key:"tableRef1"},{default:o(()=>[a(n,{ref:"tableRef1",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",height:e.tableH,"checkbox-config":{range:!0},loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource},null,8,["height","loading","columns","dataSource"])]),_:1}),a(B,{tab:"机票信息",key:"tableRef2",forceRender:""},{default:o(()=>[a(n,{ref:"tableRef2",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",height:e.tableH,"checkbox-config":{range:!0},loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource},null,8,["height","loading","columns","dataSource"])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk","onFullScreen"])}const Re=G(de,[["render",ie]]);export{Re as default};
