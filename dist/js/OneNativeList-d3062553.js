var re=Object.defineProperty;var B=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var A=(d,i,t)=>i in d?re(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t,$=(d,i)=>{for(var t in i||(i={}))ce.call(i,t)&&A(d,t,i[t]);if(B)for(var t of B(i))ue.call(i,t)&&A(d,t,i[t]);return d};var K=(d,i,t)=>new Promise((c,m)=>{var k=a=>{try{g(t.next(a))}catch(u){m(u)}},y=a=>{try{g(t.throw(a))}catch(u){m(u)}},g=a=>a.done?c(a.value):Promise.resolve(a.value).then(k,y);g((t=t.apply(d,i)).next())});import{C as de,f as b,b as T,a1 as j,u as me}from"./jeecg-online-vendor-00671d17.js";import{_ as pe}from"./OneNativeModal.vue_vue_type_script_setup_true_lang-dfff3401.js";import{g as fe,a9 as _e,n as ve}from"./index-92811877.js";import{downloadFile as ge}from"./renderUtils-591b945e.js";import{a7 as he,M as ye}from"./antd-vue-vendor-a78909e6.js";import{d as ke,k as l,r as xe,o as we,V as f,a5 as _,a9 as z,a7 as n,aa as p,f as o,E as v,W as Q,ab as be,a6 as h,F as N,u as U}from"./vue-bcbaddf9.js";import"./tinymce-vendor-676f8393.js";import"./vxe-table-vendor-9edfd3ae.js";import"./lodash-es-vendor-9b741fb8.js";import"./OneNativeForm-43374d7c.js";import"./JAddInput-6b7ccad8.js";import"./areaDataUtil-661e31ab.js";import"./useFormItem-abe9ede2.js";import"./echarts-vendor-6c8e2159.js";import"./index-32f277d2.js";import"./BasicModal-1cadc5ea.js";import"./useWindowSizeFn-4237c8d5.js";import"./JSelectUser-acf556b2.js";import"./props-d8943ba3.js";import"./JSelectBiz-293c9f98.js";import"./index-135dbfab.js";import"./codemirror-vendor-611c4582.js";import"./index-c0e274b6.js";import"./bem-83fa3f8d.js";import"./props-c7c3390f.js";import"./useContextMenu-14663a38.js";import"./depart.api-caf6fd8d.js";import"./JUpload.vue_vue_type_style_index_0_lang-f1676f4d.js";import"./JPopup-65fb74cb.js";import"./JSelectDept-6809f298.js";const Ce={class:"table-operator"},Ie={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},Se=p("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),De={style:{"font-weight":"600"}},Te={key:0,style:{"font-size":"12px","font-style":"italic"}},je=["src","preview"],ze={key:0,style:{"font-size":"12px","font-style":"italic"}},Ne=["onClick"],Oe={class:"ant-dropdown-link"},Re=["onClick"],Me=p("a",null,"删除",-1),mt=ke({__name:"OneNativeList",setup(d){l(!1);const i=l({}),t=l(!1),c=l([]),m=l();de();const k=l([{title:"文本",align:"center",dataIndex:"name"},{title:"字典下拉",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?b(c.value.xiala,e):""},{title:"字典单选",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?b(c.value.danxuan,e):""},{title:"字典多选",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?b(c.value.duoxuan,e):""},{title:"开关",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?b(c.value.kaiguan,e):""},{title:"日期",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"年月日时分秒",align:"center",dataIndex:"nyrsfm"},{title:"时间",align:"center",dataIndex:"shijian"},{title:"文件",align:"center",dataIndex:"wenjian"},{title:"图片",align:"center",dataIndex:"tupian"},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147}]),y=xe({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),g=l([]);l(!1);const a=l({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,s)=>s[0]+"-"+s[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0,total:0}),u=l([]),C=l([]),O=l({column:"createTime",order:"desc"}),R=l({}),{createMessage:X}=me();function q(e,s){u.value=e,C.value=s}function H({pagination:e,filters:s,sorter:r}){a.value=e,O.value=r,R.value=$({},s)}function J(){m.value.disableSubmit=!1,m.value.add()}function L(){u.value=[],C.value=[]}function W(){ye.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>{T.delete({url:y.delete,data:{ids:u.value}},{joinParamsToUrl:!0}).then(()=>{I()})}})}function G(){let e=Object.assign(i.value,O.value,R.value);return e.field=Y(),e.pageNo=a.value.current,e.pageSize=a.value.pageSize,ve(e)}function Y(){let e="id,";return k.value.forEach(function(s){e+=","+s.dataIndex}),e}function M(e){e===1&&(a.value.current=1),t.value=!0;let s=G();T.get({url:y.list,params:s},{isTransformResponse:!1}).then(r=>{r.success?(g.value=r.result.records,r.result&&r.result.total?a.value.total=r.result.total:a.value.total=0):X.warning(r.message)}).finally(()=>{t.value=!1})}function Z(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),fe(e)}function ee(e){m.value.disableSubmit=!1,m.value.edit(e)}function te(e){m.value.disableSubmit=!0,m.value.edit(e)}function ae(e){T.delete({url:y.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(s=>{I()})}function ne(){return K(this,null,function*(){c.value.flzds=yield _e({code:"B01"}),c.value.xiala=yield j("sex"),c.value.danxuan=yield j("sex"),c.value.duoxuan=yield j("urgent_level")})}function I(){u.value=[],C.value=[],M(1)}return we(()=>{c.value.kaiguan=[{text:"是",value:"1"},{text:"否",value:"2"}],M(),ne()}),(e,s)=>{const r=f("a-button"),E=f("Icon"),S=f("a-menu-item"),P=f("a-menu"),F=f("a-dropdown"),oe=f("a-divider"),ie=f("a-icon"),le=f("a-table"),se=f("a-card");return _(),z(se,{bordered:!1},{default:n(()=>[p("div",Ce,[o(r,{onClick:J,type:"primary",preIcon:"ant-design:plus"},{default:n(()=>[v("新增")]),_:1}),u.value.length>0?(_(),z(F,{key:0},{overlay:n(()=>[o(P,null,{default:n(()=>[o(S,{key:"1",onClick:W},{default:n(()=>[o(E,{icon:"ant-design:delete-outlined"}),v(" 删除 ")]),_:1})]),_:1})]),default:n(()=>[o(r,null,{default:n(()=>[v("批量操作 "),o(E,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Q("",!0)]),p("div",null,[p("div",Ie,[Se,v(" 已选择 "),p("a",De,be(u.value.length),1),v("项 "),p("a",{style:{"margin-left":"24px"},onClick:L},"清空")]),o(le,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:k.value,dataSource:g.value,pagination:a.value,loading:t.value,rowSelection:{selectedRowKeys:u.value,onChange:q},onChange:H},{bodyCell:n(({column:D,text:x,record:w})=>[D.dataIndex==="tupian"?(_(),h(N,{key:0},[x?(_(),h("img",{key:1,src:Z(x),preview:w.id,alt:"",class:"anty-img-wrap"},null,8,je)):(_(),h("span",Te,"无图片"))],64)):D.dataIndex==="wenjian"?(_(),h(N,{key:1},[x?(_(),z(r,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:V=>U(ge)(x)},{default:n(()=>[v(" 下载 ")]),_:2},1032,["onClick"])):(_(),h("span",ze,"无文件"))],64)):D.dataIndex==="action"?(_(),h(N,{key:2},[p("a",{onClick:V=>ee(w)},"编辑",8,Ne),o(oe,{type:"vertical"}),o(F,null,{overlay:n(()=>[o(P,{class:"antd-more"},{default:n(()=>[o(S,null,{default:n(()=>[p("a",{onClick:V=>te(w)},"详情",8,Re)]),_:2},1024),o(S,null,{default:n(()=>[o(U(he),{title:"确定删除吗?",onConfirm:()=>ae(w.id)},{default:n(()=>[Me]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:n(()=>[p("a",Oe,[v("更多 "),o(ie,{type:"down"})])]),_:2},1024)],64)):Q("",!0)]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(pe,{ref_key:"oneProtogenesisModal",ref:m,onOk:I},null,512)]),_:1})}}});export{mt as default};
