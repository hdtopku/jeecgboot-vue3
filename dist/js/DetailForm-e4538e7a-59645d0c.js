import{p as T,Q as te,R as ie,T as le,g as ne}from"./index-26fb0584.js";import{V as ae,f as D,g as re,a6 as $,b as oe,a0 as se,u as de}from"./jeecg-online-vendor-9cc54e36.js";import{L as ue,i as pe}from"./useExtendComponent-48d37d9b-e97967f5.js";import{c as ce}from"./JUpload.vue_vue_type_style_index_0_lang-5ac4f8ef.js";import"./componentMap-42aebfee.js";import"./index-9ca8f863.js";import"./BasicForm.vue_vue_type_style_index_0_lang-9ae993bd.js";import{bY as me,bZ as fe,b_ as ge}from"./antd-vue-vendor-04f0af1d.js";import"./JAddInput-6e8b52df.js";import"./JSelectUser-9d666511.js";import"./JSelectDept-113b0470.js";import"./JPopup-746d3c0b.js";import"./cron-parser-vendor-b0ab0fe2.js";import"./JEllipsis.vue_vue_type_script_setup_true_lang-8153fc9b.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-e33179dd.js";import"./BasicTable.vue_vue_type_style_index_0_lang-04f23e46.js";import"./useTable-c1b0a869.js";import"./LinkTableListPiece-34266919-5eeff459.js";import{d as he,k as ye,e as ve,w as be,V as F,a5 as p,a6 as m,f as I,a7 as H,F as P,a8 as N,a9 as J,aa as u,am as M,ab as V}from"./vue-5a09445c.js";import"./lodash-es-vendor-70833b4a.js";import"./tinymce-vendor-e2919cb0.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./BasicForm-e7d3537f.js";import"./BasicModal-d2e0602d.js";import"./useWindowSizeFn-cfb01db5.js";import"./useForm-b8bb8b05.js";import"./user.api-0a40541d.js";import"./customExpression-62f5afd1.js";import"./BasicTable-b1f7a2ba.js";import"./useFormItem-43cba0e8.js";/* empty css              */import"./download-1219b967.js";import"./base64Conver-fa2fe1af.js";import"./index-f43a5105.js";import"./index-89a04c4e.js";import"./useCountdown-82ecfbb7.js";import"./useFormItemSingle-8ecd3b0e.js";import"./areaDataUtil-1ddb02e1.js";import"./props-c570bc09.js";import"./JSelectBiz-292f2b27.js";import"./index-84c48248.js";import"./index-93698215.js";import"./bem-2217b93d.js";import"./props-17f0c5eb.js";import"./useContextMenu-73027fbb.js";import"./depart.api-8a5b83ee.js";import"./index-a0d17b33.js";import"./index-88d76987.js";import"./injectionKey-69710956.js";import"./useListPage-2f6289a5.js";import"./OnlineSelectCascade-c7baf52b-260451fd.js";import"./JModalTip-abe1515a-6fa065a0.js";var Ce=Object.defineProperty,U=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,W=(a,r,s)=>r in a?Ce(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,Fe=(a,r)=>{for(var s in r||(r={}))we.call(r,s)&&W(a,s,r[s]);if(U)for(var s of U(r))ke.call(r,s)&&W(a,s,r[s]);return a},g=(a,r,s)=>new Promise((y,b)=>{var k=c=>{try{h(s.next(c))}catch(w){b(w)}},C=c=>{try{h(s.throw(c))}catch(w){b(w)}},h=c=>c.done?y(c.value):Promise.resolve(c.value).then(k,C);h((s=s.apply(a,r)).next())});function xe(a){const r={},s=[],y=ye({}),{createMessage:b}=de(),k=ve(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");be(()=>a.data,e=>g(this,null,function*(){if(e){let n=a.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield C(i)}catch(o){}}y.value=l}}),{deep:!0,immediate:!0});function C(e){return g(this,null,function*(){let n=a.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield h(e,n);else if(t=="sel_search")i=yield w(e,n);else if(t=="cat_tree")i=yield _(e,n);else if(t=="link_table")i=yield G(e,n);else if(t=="sel_depart")i=yield L(e,n);else if(t=="sel_user")i=yield d(e,n);else if(t=="pca")i=pe(l);else if(t=="link_down")i=yield v(e,n);else if(t=="sel_tree")i=yield O(e,n);else if(t=="switch")i=yield A(e,n);else if(t=="image"||t=="file")i=K(e,n);else if(s.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(i=D(o,l))}return i}return""})}function h(e,n){return g(this,null,function*(){let l=c(e),i=n[e.field];if(!l)return i;let t=re(l);if(t&&t.length>0)return D(t,i);{let o=[];if(r[l]?o=r[l]:o=(yield $(l))||[],o&&o.length>0)return r[l]=o,D(o,i)}return""})}function c(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function w(e,n){return g(this,null,function*(){let l=c(e),i=n[e.field];if(!i)return"";let t=[];return r[l+i]?t=r[l+i]:t=(yield oe.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(r[l+i]=t,t.join(",")):""})}function _(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield te({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function L(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e).store||"id",t=(yield ie({ids:l,primaryKey:i}))||[];if(t&&t.length>0){let o=[];for(let f of t)o.push(f.title);return o.join(",")}return""})}function d(e,n){return g(this,null,function*(){let l=n[e.field];if(!l)return"";let i=x(e),t={[i.store||"username"]:l},o=((yield le(t))||{}).records||[];if(o&&o.length>0){let f=[],j=i.text||"realname";for(let S of o)f.push(S[j]);return f.join(",")}return""})}function x(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=Fe({},i)}catch(i){}return n}function v(e,n){return g(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(r[i])t=r[i];else if(l){let o=JSON.parse(l);if(o){let{table:f,txt:j,key:S,linkField:E}=o,X=`${f},${j},${S}`;if(t=[...(yield $(X))||[]],t&&t.length>0&&(r[i]=t,E)){let ee=E.split(",");for(let B of ee)r[B]=t,s.push(B)}}}if(t&&t.length>0){let o=n[i];return D(t,o)}return""})}function O(e,n){return g(this,null,function*(){let{dict:l,field:i}=e,t=[];if(r[i]?t=r[i]:l&&(t=yield $(l)),t&&t.length>0){let o=n[i];return D(t,o)}return""})}function A(e,n){return g(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"是"},{value:t[1],text:"否"},{value:t[0]+"",text:"是"},{value:t[1]+"",text:"否"}],f=n[i];return se(o,f)})}function z(e){return e.span?e.span:a.span}function K(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let f=ne(o)||"";f&&t.push(f)}return t}function R(e){e&&window.open(e)}function Y(e){let n=y.value[e];if(!n||n.length==0){b.warning("无图片!");return}ce({imageList:n})}function q(e){return e?e.substring(e.lastIndexOf("/")+1):""}const Q=["file","image","markdown","umeditor"];function Z(e){return Q.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function G(e,n){return g(this,null,function*(){let l=n[e.field];return x(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:k,detailFormData:y,getItemSpan:z,handleDownloadFile:R,handleViewImage:Y,getFilename:q,getLabelWidthClass:Z}}const De=he({name:"DetailForm",components:{DownloadOutlined:me,EyeOutlined:fe,PaperClipOutlined:ge,LinkTableCard:ue},props:{span:T.number.def(24),schemas:T.array.def([]),data:T.object.def({}),containerClass:T.string.def("")},setup(a){const{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:b,handleViewImage:k,getFilename:C,getLabelWidthClass:h}=xe(a);return{formContainerClass:r,detailFormData:s,getItemSpan:y,handleDownloadFile:b,handleViewImage:k,getFilename:C,getLabelWidthClass:h}}}),Ie={class:"detail-item"},Oe=["title"],Te=["innerHTML"],_e={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},Le={key:0},je={key:2,class:"item-content"},Se={class:"ant-upload-list ant-upload-list-picture-card"},$e={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Pe={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Ne={class:"ant-upload-list-item-info"},Ve=["src"],Ee={class:"ant-upload-list-item-actions"},Be={key:3,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Je={class:""},Me={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Ue={class:"ant-upload-list-item-info"},We={class:"ant-upload-span"},Ae={class:"ant-upload-text-icon"},ze=["href"],Ke={class:"ant-upload-list-item-card-actions"},Re={key:4,class:"item-content"};function Ye(a,r,s,y,b,k){const C=F("link-table-card"),h=F("download-outlined"),c=F("eye-outlined"),w=F("paper-clip-outlined"),_=F("a-col"),L=F("a-row");return p(),m("div",{class:M(a.formContainerClass)},[I(L,null,{default:H(()=>[(p(!0),m(P,null,N(a.schemas,(d,x)=>(p(),J(_,{key:x,span:a.getItemSpan(d)},{default:H(()=>[u("div",Ie,[u("div",{class:M(["item-title",a.getLabelWidthClass(d)]),title:d.label},V(d.label)+"： ",11,Oe),d.isHtml?(p(),m("div",{key:0,class:"item-content",innerHTML:a.detailFormData[d.field]},null,8,Te)):d.isCard?(p(),m("div",_e,[a.detailFormData[d.field]?(p(),J(C,{key:1,disabled:"",detail:"",value:a.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(p(),m("span",Le))])):d.isImage?(p(),m("div",je,[u("div",Se,[(p(!0),m(P,null,N(a.detailFormData[d.field],v=>(p(),m("div",$e,[u("span",null,[u("div",Pe,[u("div",Ne,[u("img",{src:v,alt:"图片不存在",class:"ant-upload-list-item-image"},null,8,Ve)]),u("span",Ee,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"]),I(c,{onClick:O=>a.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(p(),m("div",Be,[u("div",He,[(p(!0),m(P,null,N(a.detailFormData[d.field],v=>(p(),m("div",Je,[u("span",null,[u("div",Me,[u("div",Ue,[u("span",We,[u("div",Ae,[I(w)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},V(a.getFilename(v)),9,ze),u("span",Ke,[I(h,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(p(),m("div",Re,V(a.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}const qt=ae(De,[["render",Ye],["__scopeId","data-v-fd1939fd"]]);export{qt as default};
