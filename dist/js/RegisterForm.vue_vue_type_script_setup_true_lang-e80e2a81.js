var b=(x,i,c)=>new Promise((o,d)=>{var g=r=>{try{f(c.next(r))}catch(u){d(u)}},p=r=>{try{f(c.throw(r))}catch(u){d(u)}},f=r=>r.done?o(r.value):Promise.resolve(r.value).then(g,p);f((c=c.apply(x,i)).next())});import{_ as z}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-ede4c6dc.js";import{I as F,J as P,K as M,q as T,Q as U,v as B,S as L,u as N,O as V}from"./jeecg-online-vendor-9cc54e36.js";import"./index-26fb0584.js";import{S as D}from"./index-f43a5105.js";import{C as G}from"./index-89a04c4e.js";import{bo as k,bw as y,by as J,bz as C}from"./antd-vue-vendor-04f0af1d.js";import{d as q,k as S,r as A,e as K,u as e,a5 as O,a6 as Q,f as a,a7 as n,E as w,ab as v,F as W,W as $,J as j}from"./vue-5a09445c.js";const le=q({__name:"RegisterForm",setup(x){const i=k.Item,c=y.Password,{t:o}=T(),{handleBackLogin:d,getLoginState:g}=F(),{notification:p,createErrorModal:f}=N(),r=S(),u=S(!1),l=A({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:h}=P(l),{validForm:E}=V(r),I=K(()=>e(g)===M.REGISTER);function R(){return b(this,null,function*(){const m=yield E();if(m)try{u.value=!0;const s=yield U(j({username:m.account,password:m.password,phone:m.mobile,smscode:m.sms}));s&&s.data.success?(p.success({description:s.data.message||o("sys.api.registerMsg"),duration:3}),d()):p.warning({message:o("sys.api.errorTip"),description:s.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(s){p.error({message:o("sys.api.errorTip"),description:s.message||o("sys.api.networkExceptionMsg"),duration:3})}finally{u.value=!1}})}function _(){return B({mobile:l.mobile,smsmode:L.REGISTER})}return(m,s)=>I.value?(O(),Q(W,{key:0},[a(z,{class:"enter-x"}),a(e(k),{class:"p-4 enter-x",model:l,rules:e(h),ref_key:"formRef",ref:r},{default:n(()=>[a(e(i),{name:"account",class:"enter-x"},{default:n(()=>[a(e(y),{class:"fix-auto-fill",size:"large",value:l.account,"onUpdate:value":s[0]||(s[0]=t=>l.account=t),placeholder:e(o)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"mobile",class:"enter-x"},{default:n(()=>[a(e(y),{size:"large",value:l.mobile,"onUpdate:value":s[1]||(s[1]=t=>l.mobile=t),placeholder:e(o)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"sms",class:"enter-x"},{default:n(()=>[a(e(G),{size:"large",class:"fix-auto-fill",value:l.sms,"onUpdate:value":s[2]||(s[2]=t=>l.sms=t),placeholder:e(o)("sys.login.smsCode"),sendCodeApi:_},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password",class:"enter-x"},{default:n(()=>[a(e(D),{size:"large",value:l.password,"onUpdate:value":s[3]||(s[3]=t=>l.password=t),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"confirmPassword",class:"enter-x"},{default:n(()=>[a(e(c),{size:"large",visibilityToggle:"",value:l.confirmPassword,"onUpdate:value":s[4]||(s[4]=t=>l.confirmPassword=t),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),a(e(i),{class:"enter-x",name:"policy"},{default:n(()=>[a(e(J),{checked:l.policy,"onUpdate:checked":s[5]||(s[5]=t=>l.policy=t),size:"small"},{default:n(()=>[w(v(e(o)("sys.login.policy")),1)]),_:1},8,["checked"])]),_:1}),a(e(C),{type:"primary",class:"enter-x",size:"large",block:"",onClick:R,loading:u.value},{default:n(()=>[w(v(e(o)("sys.login.registerButton")),1)]),_:1},8,["loading"]),a(e(C),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(d)},{default:n(()=>[w(v(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):$("",!0)}});export{le as _};
