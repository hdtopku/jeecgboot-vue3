import{b as x,u as S}from"./jeecg-online-vendor-5792e8a1.js";import{J as e}from"./index-f3247ba0.js";import{d as R,k as n,U as r,a5 as C,a9 as V,a7 as E,aa as k,f as y}from"./vue-249e5fad.js";import"./antd-vue-vendor-31afcf32.js";import"./tinymce-vendor-676f8393.js";import"./lodash-es-vendor-c1987ca1.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-0b109a77.js";const U={style:{"margin-bottom":"8px"}},B=k("span",null,"启用数据变动特效：",-1),L=R({__name:"SocketReload",setup(J){const{createMessage:p}=S(),u=n(),c=n(!0),s=n(!1),m=n([]),_=n([{key:"num",title:"序号",width:80},{key:"enabled",title:"启用",width:80,type:e.checkbox},{key:"ship_name",title:"船名",width:180,type:e.input},{key:"call",title:"呼叫",width:80,type:e.input},{key:"len",title:"长",width:80,type:e.input},{key:"ton",title:"吨",width:120,type:e.input},{key:"payer",title:"付款方",width:120,type:e.input},{key:"count",title:"数",width:40},{key:"company",title:"公司",minWidth:180,type:e.input},{key:"trend",title:"动向",width:120,type:e.input}]);w();function w(){s.value=!0,x.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:200}}).then(t=>{m.value=t.records}).finally(()=>{s.value=!1})}function g(t){switch(t.type){case e.radio:case e.checkbox:f(t);break}}function b(t){f(t)}function f(t){let{$table:o,row:a,column:l}=t,i=l.property;o.isUpdateByRow(a,i)&&o.validate(a).then(d=>{if(!d){let v=p.loading(`正在保存"${l.title}"`,0);setTimeout(()=>{var h;v(),p.success(`"${l.title}"保存成功！`),o.reloadRow(a,null,i),(h=u.value)==null||h.socketSendUpdateRow(a)},555)}})}return(t,o)=>{const a=r("a-switch"),l=r("JVxeTable"),i=r("a-card");return C(),V(i,{title:"无痕刷新示例",bordered:!1},{default:E(()=>[k("div",U,[B,y(a,{checked:c.value,"onUpdate:checked":o[0]||(o[0]=d=>c.value=d)},null,8,["checked"])]),y(l,{ref_key:"tableRef",ref:u,rowNumber:"",rowSelection:"",keepSource:"",socketReload:"",socketKey:"demo-socket-reload",reloadEffect:c.value,height:340,loading:s.value,columns:_.value,dataSource:m.value,onValueChange:g,onEditClosed:b},null,8,["reloadEffect","loading","columns","dataSource"])]),_:1})}}});export{L as default};
