import{p as $,a0 as te,R as le,L as ie,g as ne}from"./index-fde9c72f.js";import{bW as ae,aF as b,av as re,aq as E,ad as oe,ap as se,l as de}from"./jeecg-online-vendor-bf2efbcb.js";import{L as ue,i as ce}from"./useExtendComponent-f3ffbcdf.js";import{c as pe}from"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./componentMap-a6d21ad6.js";import"./index-8cf3aabb.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import{v as fe,H as me,S as _e}from"./antd-vue-vendor-1561c1ba.js";import"./JAddInput-2cbbbde9.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang-0a69d004.js";import"./pick-51214243.js";import"./_flatRest-34ab130c.js";import"./isArray-b183d537.js";import"./toString-8deea73b.js";import"./_arrayPush-ae8b790e.js";import"./BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js";import"./useTable-7e303edd.js";import"./LinkTableListPiece-50f8f8cc.js";import"./OnlineSelectCascade-dee0bae8.js";import{d as he,k as ge,e as ve,w as ye,U as x,aV as c,as as f,f as T,bi as M,F as P,a_ as N,ar as U,at as u,ad as A,ag as V}from"./vue-c7e3516e.js";import"./lodash-es-vendor-42c8d3d4.js";import"./tinymce-vendor-40778af9.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm-83ba9c88.js";import"./useForm-fa63344e.js";import"./user.api-dd1b3184.js";import"./_commonjsHelpers-938fab4e.js";import"./customExpression-e22f3cce.js";import"./BasicTable-29c6504d.js";import"./useFormItem-4a12ff45.js";import"./BasicModal-ff8f2086.js";import"./useWindowSizeFn-e5cad7ae.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";import"./index-ed4be6fa.js";import"./injectionKey-5da932b3.js";import"./useListPage-5049b37a.js";import"./JModalTip-b651c0e6.js";var Fe=Object.defineProperty,J=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,R=(a,r,s)=>r in a?Fe(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,we=(a,r)=>{for(var s in r||(r={}))De.call(r,s)&&R(a,s,r[s]);if(J)for(var s of J(r))Ce.call(r,s)&&R(a,s,r[s]);return a},m=(a,r,s)=>new Promise((g,y)=>{var w=p=>{try{_(s.next(p))}catch(D){y(D)}},F=p=>{try{_(s.throw(p))}catch(D){y(D)}},_=p=>p.done?g(p.value):Promise.resolve(p.value).then(w,F);_((s=s.apply(a,r)).next())});function xe(a){const r={},s=[],g=ge({}),{createMessage:y}=de(),w=ve(()=>a.containerClass?`jeecg-detail-form ${a.containerClass}`:"jeecg-detail-form");ye(()=>a.data,e=>m(this,null,function*(){if(e){let n=a.schemas,i={};if(n&&n.length>0)for(let l of n){let t=l.field;try{i[t]=yield F(l)}catch(o){}}g.value=i}}),{deep:!0,immediate:!0});function F(e){return m(this,null,function*(){let n=a.data;if(n){let i=n[e.field];if(!i&&i!=="0"&&i!==0)return"";let l=i,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")l=yield _(e,n);else if(t=="sel_search")l=yield D(e,n);else if(t=="cat_tree")l=yield S(e,n);else if(t=="link_table")l=yield Z(e,n);else if(t=="sel_depart")l=yield j(e,n);else if(t=="sel_user")l=yield d(e,n);else if(t=="pca")l=ce(i);else if(t=="link_down")l=yield v(e,n);else if(t=="sel_tree")l=yield O(e,n);else if(t=="switch")l=yield W(e,n);else if(t=="image"||t=="file")l=z(e,n);else if(s.indexOf(e.field)>=0){let o=r[e.field];o&&o.length>0&&(l=b(o,i))}return l}return""})}function _(e,n){return m(this,null,function*(){let i=p(e),l=n[e.field];if(!i)return l;let t=re(i);if(t&&t.length>0)return b(t,l);{let o=[];if(r[i]?o=r[i]:o=(yield E(i))||[],o&&o.length>0)return r[i]=o,b(o,l)}return""})}function p(e){let n="",{dictCode:i,dictTable:l,dictText:t}=e;return l?n=encodeURI(`${l},${t},${i}`):n=i,n}function D(e,n){return m(this,null,function*(){let i=p(e),l=n[e.field];if(!l)return"";let t=[];return r[i+l]?t=r[i+l]:t=(yield oe.get({url:`/sys/dict/loadDictItem/${i}`,params:{key:l}}))||[],t&&t.length>0?(r[i+l]=t,t.join(",")):""})}function S(e,n){return m(this,null,function*(){let i=n[e.field];if(!i)return"";let l=(yield te({ids:i}))||[];return l&&l.length>0?l.join(","):""})}function j(e,n){return m(this,null,function*(){let i=n[e.field];if(!i)return"";let t=k(e).store||"id",o=(yield le({ids:i,primaryKey:t}))||[];if(o&&o.length>0){let h=[];for(let C of o)h.push(C.title);return h.join(",")}return""})}function d(e,n){return m(this,null,function*(){let i=n[e.field];if(!i)return"";let l=k(e),o={[l.store||"username"]:i},C=((yield ie(o))||{}).records||[];if(C&&C.length>0){let I=[],L=l.text||"realname";for(let B of C)I.push(B[L]);return I.join(",")}return""})}function k(e){let n={},{fieldExtendJson:i}=e;if(i&&typeof i=="string")try{let l=JSON.parse(i);n=we({},l)}catch(l){}return n}function v(e,n){return m(this,null,function*(){let{dictTable:i,field:l}=e,t=[];if(r[l])t=r[l];else if(i){let o=JSON.parse(i);if(o){let{table:h,txt:C,key:I,linkField:L}=o,B=`${h},${C},${I}`;if(t=[...(yield E(B))||[]],t&&t.length>0&&(r[l]=t,L)){let ee=L.split(",");for(let H of ee)r[H]=t,s.push(H)}}}if(t&&t.length>0){let o=n[l];return b(t,o)}return""})}function O(e,n){return m(this,null,function*(){let{dict:i,field:l}=e,t=[];if(r[l]?t=r[l]:i&&(t=yield E(i)),t&&t.length>0){let o=n[l];return b(t,o)}return""})}function W(e,n){return m(this,null,function*(){let{fieldExtendJson:i,field:l}=e,t=["Y","N"];i&&(t=JSON.parse(i));let o=[{value:t[0],text:"\u662F"},{value:t[1],text:"\u5426"},{value:t[0]+"",text:"\u662F"},{value:t[1]+"",text:"\u5426"}],h=n[l];return se(o,h)})}function q(e){return e.span?e.span:a.span}function z(e,n){let i=n[e.field];if(!i)return[];let l=i.split(","),t=[];for(let o of l){let h=ne(o)||"";h&&t.push(h)}return t}function K(e){e&&window.open(e)}function Y(e){let n=g.value[e];if(!n||n.length==0){y.warning("\u65E0\u56FE\u7247!");return}pe({imageList:n})}function G(e){return e?e.substring(e.lastIndexOf("/")+1):""}const Q=["file","image","markdown","umeditor"];function X(e){return Q.indexOf(e.view)>=0?a.span==12?"span12":a.span==8?"span8":a.span==6?"span6":"span24":""}function Z(e,n){return m(this,null,function*(){let i=n[e.field];return k(e).showType=="select"?i?n[e.field+"_dictText"]:"":i?n[e.field]:""})}return{formContainerClass:w,detailFormData:g,getItemSpan:q,handleDownloadFile:K,handleViewImage:Y,getFilename:G,getLabelWidthClass:X}}const ke=he({name:"DetailForm",components:{DownloadOutlined:fe,EyeOutlined:me,PaperClipOutlined:_e,LinkTableCard:ue},props:{span:$.number.def(24),schemas:$.array.def([]),data:$.object.def({}),containerClass:$.string.def("")},setup(a){const{formContainerClass:r,detailFormData:s,getItemSpan:g,handleDownloadFile:y,handleViewImage:w,getFilename:F,getLabelWidthClass:_}=xe(a);return{formContainerClass:r,detailFormData:s,getItemSpan:g,handleDownloadFile:y,handleViewImage:w,getFilename:F,getLabelWidthClass:_}}}),be={class:"detail-item"},Te=["title"],Oe=["innerHTML"],Ie={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},Le={key:0},$e={key:2,class:"item-content"},Se={class:"ant-upload-list ant-upload-list-picture-card"},je={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Be={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Ee={class:"ant-upload-list-item-info"},Pe=["src"],Ne={class:"ant-upload-list-item-actions"},Ve={key:3,class:"item-content"},He={class:"ant-upload-list ant-upload-list-text"},Me={class:""},Ue={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Ae={class:"ant-upload-list-item-info"},Je={class:"ant-upload-span"},Re={class:"ant-upload-text-icon"},We=["href"],qe={class:"ant-upload-list-item-card-actions"},ze={key:4,class:"item-content"};function Ke(a,r,s,g,y,w){const F=x("link-table-card"),_=x("download-outlined"),p=x("eye-outlined"),D=x("paper-clip-outlined"),S=x("a-col"),j=x("a-row");return c(),f("div",{class:A(a.formContainerClass)},[T(j,null,{default:M(()=>[(c(!0),f(P,null,N(a.schemas,(d,k)=>(c(),U(S,{key:k,span:a.getItemSpan(d)},{default:M(()=>[u("div",be,[u("div",{class:A(["item-title",a.getLabelWidthClass(d)]),title:d.label},V(d.label)+"\uFF1A ",11,Te),d.isHtml?(c(),f("div",{key:0,class:"item-content",innerHTML:a.detailFormData[d.field]},null,8,Oe)):d.isCard?(c(),f("div",Ie,[a.detailFormData[d.field]?(c(),U(F,{key:1,disabled:"",detail:"",value:a.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(c(),f("span",Le))])):d.isImage?(c(),f("div",$e,[u("div",Se,[(c(!0),f(P,null,N(a.detailFormData[d.field],v=>(c(),f("div",je,[u("span",null,[u("div",Be,[u("div",Ee,[u("img",{src:v,alt:"\u56FE\u7247\u4E0D\u5B58\u5728",class:"ant-upload-list-item-image"},null,8,Pe)]),u("span",Ne,[T(_,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"]),T(p,{onClick:O=>a.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(c(),f("div",Ve,[u("div",He,[(c(!0),f(P,null,N(a.detailFormData[d.field],v=>(c(),f("div",Me,[u("span",null,[u("div",Ue,[u("div",Ae,[u("span",Je,[u("div",Re,[T(D)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},V(a.getFilename(v)),9,We),u("span",qe,[T(_,{onClick:O=>a.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(c(),f("div",ze,V(a.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}var Gt=ae(ke,[["render",Ke],["__scopeId","data-v-47915cc7"]]);export{Gt as default};
