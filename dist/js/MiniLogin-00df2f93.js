var me=Object.defineProperty,ge=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var X=(c,r,n)=>r in c?me(c,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[r]=n,Y=(c,r)=>{for(var n in r||(r={}))_e.call(r,n)&&X(c,n,r[n]);if(Q)for(var n of Q(r))fe.call(r,n)&&X(c,n,r[n]);return c},Z=(c,r)=>ge(c,pe(r));var L=(c,r,n)=>new Promise((C,v)=>{var M=u=>{try{R(n.next(u))}catch(b){v(b)}},s=u=>{try{R(n.throw(u))}catch(b){v(b)}},R=u=>u.done?C(u.value):Promise.resolve(u.value).then(M,s);R((n=n.apply(c,r)).next())});import{d as se,r as O,k as g,o as ve,V as D,a5 as f,a6 as y,f as t,u as o,aa as e,v as K,A as U,am as x,ab as p,a9 as ee,a7 as k,ac as A,E as he,J as ye,ap as xe,aq as ke}from"./vue-5a09445c.js";import{t as Ce,q as be,aw as we,N as Se,v as Ie,S as Te,u as Le,D as Me}from"./jeecg-online-vendor-231813f7.js";import{c as Re}from"./checkcode-5ec5fe8f.js";import Be from"./ThirdModal-03b5f3e9.js";import Fe from"./MiniForgotpad-0026dc0d.js";import $e from"./MiniRegister-fb7adb09.js";import De from"./MiniCodelogin-384aa7ed.js";import{a as Ke}from"./jeecg_ad_text-1683a714.js";import{m as Ue,as as Ne,a8 as Ee,a9 as Pe}from"./index-ebe32d90.js";import{bx as qe,bB as je,bC as Oe,bD as Ae}from"./antd-vue-vendor-e4fda4cf.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-3f622b6f.js";import"./index-3e837de3.js";import"./useCountdown-1a556b94.js";import"./useFormItemSingle-2e069e0c.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./useThirdLogin-0eb8bdd1.js";import"./index-56e36757.js";import"./download-b10715e6.js";import"./base64Conver-fa2fe1af.js";const oe="/assets/jeecg_logo-f622e7d4.png",G=c=>(xe("data-v-9a3c7ccc"),c=c(),ke(),c),Ge={key:0,class:"aui-logo"},He=["src"],Ve={key:1,class:"aui-phone-logo"},We=["src"],ze={class:"aui-content"},Je={class:"aui-container"},Qe={class:"aui-form"},Xe={class:"aui-image"},Ye={class:"aui-image-text"},Ze=["src"],eo={class:"aui-formBox"},oo={class:"aui-formWell"},so={class:"aui-flex aui-form-nav investment_title"},io={class:"aui-form-box",style:{height:"180px"}},no={class:"aui-account"},to={class:"aui-inputClear"},ao=G(()=>e("i",{class:"icon icon-code"},null,-1)),lo={class:"aui-inputClear"},co=G(()=>e("i",{class:"icon icon-password"},null,-1)),ro={class:"aui-inputClear"},uo=G(()=>e("i",{class:"icon icon-code"},null,-1)),mo={class:"aui-code"},go=["src"],po=["src"],_o={class:"aui-flex"},fo={class:"aui-flex-box"},vo={class:"aui-choice"},ho={style:{"margin-left":"5px"}},yo={class:"aui-forget"},xo={class:"aui-account phone"},ko={class:"aui-inputClear phoneClear"},Co={class:"aui-inputClear"},bo={key:1,class:"aui-code"},wo={class:"aui-get-code code-shape"},So={class:"aui-formButton"},Io={class:"aui-flex"},To={class:"aui-flex"},Lo={class:"aui-flex"},Mo={class:"aui-flex aui-third-text"},Ro={class:"aui-flex-box aui-third-border"},Bo={class:"aui-flex-box"},Fo={class:"aui-third-login"},$o={class:"aui-flex-box"},Do={class:"aui-third-login"},Ko={class:"aui-flex-box"},Uo={class:"aui-third-login"},No={class:"aui-flex-box"},Eo={class:"aui-third-login"},Po=se({name:"login-mini"}),qo=se(Z(Y({},Po),{props:{sessionTimeout:{type:Boolean}},setup(c){const r=qe({scriptUrl:"//at.alicdn.com/t/font_2316098_umqusozousr.js"}),{prefixCls:n}=Ue("mini-login"),{notification:C,createMessage:v}=Le(),M=Ce(),{t:s}=be();we().getShowPicker;const u=O({randCodeImage:"",requestCodeSuccess:!1,checkKey:null}),b=g("0"),h=g("accountLogin"),_=g("login"),d=O({inputCode:"",username:"admin",password:"123456"}),m=O({mobile:"",smscode:""}),ie=g(),H=g(),V=g(),N=g(!0),w=g(60),B=g(null),W=g(),z=g(),I=g(!1),{getIsMobile:ne}=Ne();function T(){d.inputCode="",u.checkKey=1629428467008,Se(u.checkKey).then(a=>{u.randCodeImage=a,u.requestCodeSuccess=!0})}function J(a){h.value=a}function F(){return L(this,null,function*(){o(h)==="accountLogin"?te():ae()})}function te(){return L(this,null,function*(){if(!d.username){v.warn(s("sys.login.accountPlaceholder"));return}if(!d.password){v.warn(s("sys.login.passwordPlaceholder"));return}try{I.value=!0;const{userInfo:a}=yield M.login(ye({password:d.password,username:d.username,captcha:d.inputCode,checkKey:u.checkKey,mode:"none"}));a&&C.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){C.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3}),T()}finally{I.value=!1}})}function ae(){return L(this,null,function*(){if(!m.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}if(!m.smscode){v.warn(s("sys.login.smsPlaceholder"));return}try{I.value=!0;const{userInfo:a}=yield M.phoneLogin({mobile:m.mobile,captcha:m.smscode,mode:"none"});a&&C.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){C.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3})}finally{I.value=!1}})}function le(){return L(this,null,function*(){if(!m.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}(yield Ie({mobile:m.mobile,smsmode:Te.FORGET_PASSWORD}))&&(o(B)||(w.value=60,N.value=!1,B.value=setInterval(()=>{o(w)>0&&o(w)<=60?w.value=w.value-1:(N.value=!0,clearInterval(o(B)),B.value=null)},1e3)))})}function $(a){H.value.onThirdLogin(a)}function ce(){_.value="forgot",setTimeout(()=>{W.value.initForm()},300)}function E(){h.value="accountLogin",_.value="login"}function P(a){Object.assign(d,a),Object.assign(m,{mobile:"",smscode:""}),_.value="login",h.value="accountLogin",T()}function re(){_.value="register",setTimeout(()=>{z.value.initForm()},300)}function ue(){_.value="codeLogin",setTimeout(()=>{V.value.initFrom()},300)}return ve(()=>{T()}),(a,i)=>{const S=D("a-input"),q=D("a-form-item"),j=D("a-form"),de=D("a-button");return f(),y("div",{class:x([o(n),"login-background-img"])},[t(o(Ee),{class:"absolute top-4 right-4 enter-x xl:text-gray-600",showText:!1}),t(o(Pe),{class:"absolute top-3 right-7 enter-x"}),o(ne)?(f(),y("div",Ve,[e("img",{src:o(oe),alt:"jeecg"},null,8,We)])):(f(),y("div",Ge,[e("div",null,[e("h3",null,[e("img",{src:o(oe),alt:"jeecg"},null,8,He)])])])),K(e("div",null,[e("div",ze,[e("div",Je,[e("div",Qe,[e("div",Xe,[e("div",Ye,[e("img",{src:o(Ke)},null,8,Ze)])]),e("div",eo,[e("div",oo,[e("div",so,[e("div",{class:x(["aui-flex-box",h.value==="accountLogin"?"activeNav on":""]),onClick:i[0]||(i[0]=l=>J("accountLogin"))},p(o(s)("sys.login.signInFormTitle")),3),e("div",{class:x(["aui-flex-box",h.value==="phoneLogin"?"activeNav on":""]),onClick:i[1]||(i[1]=l=>J("phoneLogin"))},p(o(s)("sys.login.mobileSignInFormTitle")),3)]),e("div",io,[h.value==="accountLogin"?(f(),ee(j,{key:0,ref_key:"loginRef",ref:ie,model:d,onKeyup:A(F,["enter","native"])},{default:k(()=>[e("div",no,[e("div",to,[ao,t(q,null,{default:k(()=>[t(S,{class:"fix-auto-fill",placeholder:o(s)("sys.login.userName"),value:d.username,"onUpdate:value":i[2]||(i[2]=l=>d.username=l)},null,8,["placeholder","value"])]),_:1})]),e("div",lo,[co,t(q,null,{default:k(()=>[t(S,{class:"fix-auto-fill",type:"password",placeholder:o(s)("sys.login.password"),value:d.password,"onUpdate:value":i[3]||(i[3]=l=>d.password=l)},null,8,["placeholder","value"])]),_:1})]),e("div",ro,[uo,t(q,null,{default:k(()=>[t(S,{class:"fix-auto-fill",type:"text",placeholder:o(s)("sys.login.inputCode"),value:d.inputCode,"onUpdate:value":i[4]||(i[4]=l=>d.inputCode=l)},null,8,["placeholder","value"])]),_:1}),e("div",mo,[u.requestCodeSuccess?(f(),y("img",{key:0,src:u.randCodeImage,onClick:T},null,8,go)):(f(),y("img",{key:1,style:{"margin-top":"2px","max-width":"initial"},src:o(Re),onClick:T},null,8,po))])]),e("div",_o,[e("div",fo,[e("div",vo,[t(S,{class:"fix-auto-fill",type:"checkbox",value:b.value,"onUpdate:value":i[5]||(i[5]=l=>b.value=l)},null,8,["value"]),e("span",ho,p(o(s)("sys.login.rememberMe")),1)])]),e("div",yo,[e("a",{onClick:ce},p(o(s)("sys.login.forgetPassword")),1)])])])]),_:1},8,["model","onKeyup"])):(f(),ee(j,{key:1,ref:"phoneFormRef",model:m,onKeyup:A(F,["enter","native"])},{default:k(()=>[e("div",xo,[e("div",ko,[t(S,{class:"fix-auto-fill",placeholder:o(s)("sys.login.mobile"),value:m.mobile,"onUpdate:value":i[6]||(i[6]=l=>m.mobile=l)},null,8,["placeholder","value"])]),e("div",Co,[t(S,{class:"fix-auto-fill",maxlength:6,placeholder:o(s)("sys.login.smsCode"),value:m.smscode,"onUpdate:value":i[7]||(i[7]=l=>m.smscode=l)},null,8,["placeholder","value"]),N.value?(f(),y("div",{key:0,class:"aui-code",onClick:le},[e("a",null,p(o(s)("component.countdown.normalText")),1)])):(f(),y("div",bo,[e("span",wo,p(o(s)("component.countdown.sendText",[o(w.value)])),1)]))])])]),_:1},8,["model","onKeyup"]))]),e("div",So,[e("div",Io,[t(de,{loading:I.value,class:"aui-link-login aui-flex-box",type:"primary",onClick:F},{default:k(()=>[he(p(o(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),e("div",To,[e("a",{class:"aui-linek-code aui-flex-box",onClick:ue},p(o(s)("sys.login.qrSignInFormTitle")),1)]),e("div",Lo,[e("a",{class:"aui-linek-code aui-flex-box",onClick:re},p(o(s)("sys.login.registerButton")),1)])])]),t(j,{onKeyup:A(F,["enter","native"])},{default:k(()=>[e("div",Mo,[e("div",Ro,[e("span",null,p(o(s)("sys.login.otherSignIn")),1)])]),e("div",{class:x(["aui-flex",`${o(n)}-sign-in-way`])},[e("div",Bo,[e("div",Fo,[e("a",{title:"github",onClick:i[8]||(i[8]=l=>$("github"))},[t(o(je))])])]),e("div",$o,[e("div",Do,[e("a",{title:"企业微信",onClick:i[9]||(i[9]=l=>$("wechat_enterprise"))},[t(o(r),{class:"item-icon",type:"icon-qiyeweixin3"})])])]),e("div",Ko,[e("div",Uo,[e("a",{title:"钉钉",onClick:i[10]||(i[10]=l=>$("dingtalk"))},[t(o(Oe))])])]),e("div",No,[e("div",Eo,[e("a",{title:"微信",onClick:i[11]||(i[11]=l=>$("wechat_open"))},[t(o(Ae))])])])],2)]),_:1},8,["onKeyup"])])])])])],512),[[U,_.value==="login"]]),K(e("div",{class:x(`${o(n)}-form`)},[t(Fe,{ref_key:"forgotRef",ref:W,onGoBack:E,onSuccess:P},null,512)],2),[[U,_.value==="forgot"]]),K(e("div",{class:x(`${o(n)}-form`)},[t($e,{ref_key:"registerRef",ref:z,onGoBack:E,onSuccess:P},null,512)],2),[[U,_.value==="register"]]),K(e("div",{class:x(`${o(n)}-form`)},[t(De,{ref_key:"codeRef",ref:V,onGoBack:E,onSuccess:P},null,512)],2),[[U,_.value==="codeLogin"]]),t(Be,{ref_key:"thirdModalRef",ref:H},null,512)],2)}}}));const us=Me(qo,[["__scopeId","data-v-9a3c7ccc"]]);export{us as default};
