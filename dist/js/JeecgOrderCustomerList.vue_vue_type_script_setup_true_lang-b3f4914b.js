var l=(C,u,r)=>new Promise((p,i)=>{var m=t=>{try{c(r.next(t))}catch(n){i(n)}},w=t=>{try{c(r.throw(t))}catch(n){i(n)}},c=t=>t.done?p(t.value):Promise.resolve(t.value).then(m,w);c((r=r.apply(C,u)).next())});import z from"./BasicTable-29c6504d.js";import{T as D}from"./componentMap-a6d21ad6.js";import"./BasicTable.vue_vue_type_style_index_0_lang-b7d11241.js";import"./useTable-7e303edd.js";import{aa as y,l as K}from"./jeecg-online-vendor-bf2efbcb.js";import{_ as N}from"./JeecgOrderCustomerModal.vue_vue_type_script_setup_true_lang-297b6f9e.js";import{useListPage as U}from"./useListPage-5049b37a.js";import"./index-8cf3aabb.js";import{c as O,a as P,d as $,b as j}from"./erplist.api-2ed0a772.js";import{E as H}from"./index-fde9c72f.js";import{d as J,c as q,e as G,w as Q,u as a,U as d,aV as E,as as W,f as o,bi as s,E as g,ar as X,V as Y}from"./vue-c7e3516e.js";const de=J({__name:"JeecgOrderCustomerList",setup(C){const u=q("orderId",G(()=>"")),r=K(),[p,{openModal:i}]=H(),m={},{prefixCls:w,tableContext:c}=U({tableProps:{api:B,tableSetting:{cacheKey:"customer"},columns:O,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[t,{reload:n,setSelectedRowKeys:F},{rowSelection:S,selectedRowKeys:f}]=c;Q(u,()=>{m.orderId=a(u),n(),F([])});function B(e){return l(this,null,function*(){let{orderId:_}=e;return _==null||y(_)?[]:yield P(e)})}function I(){if(y(a(u))){r.createMessage.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u8BA2\u5355\u4FE1\u606F");return}i(!0,{isUpdate:!1,showFooter:!0})}function k(e){return l(this,null,function*(){i(!0,{record:e,isUpdate:!0,showFooter:!0})})}function R(e){return l(this,null,function*(){yield j({id:e.id},n)})}function T(){return l(this,null,function*(){yield $({ids:f.value},()=>{f.value=[],n()})})}function v(){n()}function x(e){return[{label:"\u7F16\u8F91",onClick:k.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:R.bind(null,e)}}]}return(e,_)=>{const b=d("a-button"),h=d("Icon"),A=d("a-menu-item"),M=d("a-menu"),V=d("a-dropdown");return E(),W("div",null,[o(a(z),{onRegister:a(t),rowSelection:a(S),searchInfo:m},{tableTitle:s(()=>[o(b,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:I},{default:s(()=>[g(" \u65B0\u589E")]),_:1}),a(f).length>0?(E(),X(V,{key:0},{overlay:s(()=>[o(M,null,{default:s(()=>[o(A,{key:"1",onClick:T},{default:s(()=>[o(h,{icon:"ant-design:delete-outlined"}),g(" \u5220\u9664 ")]),_:1})]),_:1})]),default:s(()=>[o(b,null,{default:s(()=>[g("\u6279\u91CF\u64CD\u4F5C "),o(h,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Y("",!0)]),action:s(({record:L})=>[o(a(D),{actions:x(L)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),o(N,{onRegister:a(p),onSuccess:v},null,8,["onRegister"])])}}});export{de as _};
