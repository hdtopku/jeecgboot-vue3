var F=Object.defineProperty,E=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(s,a,e)=>a in s?F(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e,p=(s,a)=>{for(var e in a||(a={}))V.call(a,e)&&y(s,e,a[e]);if(k)for(var e of k(a))z.call(a,e)&&y(s,e,a[e]);return s},B=(s,a)=>E(s,U(a));var _=(s,a,e)=>new Promise((t,r)=>{var d=o=>{try{n(e.next(o))}catch(m){r(m)}},u=o=>{try{n(e.throw(o))}catch(m){r(m)}},n=o=>o.done?t(o.value):Promise.resolve(o.value).then(d,u);n((e=e.apply(s,a)).next())});import{B as N}from"./BasicModal-e883c144.js";import{s as O,u as P}from"./jeecg-online-vendor-5792e8a1.js";import"./index-52485b3e.js";import{B as S}from"./index-f3247ba0.js";import{rules as j}from"./validator-2dc9fc94.js";import{a as q}from"./UserSetting.api-412da8c8.js";import{a5 as I}from"./antd-vue-vendor-31afcf32.js";import{d as h,r as L,k as M,U as f,a5 as T,a9 as $,a7 as i,f as c,E as A,ag as D,u as G}from"./vue-249e5fad.js";const H=h({name:"user-replace-email-modal"}),se=h(B(p({},H),{emits:["register","success"],setup(s,{emit:a}){O();const{createMessage:e}=P(),t=L({email:""}),r=M(),d={email:[p({},j.duplicateCheckRule("sys_user","email",t,{label:"邮箱"})[0]),{required:!0,type:"email",message:"邮箱格式不正确"}]};I.useForm;const u=M(""),[n,{setModalProps:o,closeModal:m}]=S(l=>_(this,null,function*(){r.value.resetFields(),r.value.clearValidate(),o({confirmLoading:!1}),u.value="修改邮箱",l.record.smscode="",Object.assign(t,l.record)}));function w(){return _(this,null,function*(){yield r.value.validateFields(),q(t).then(l=>{l.success?(e.success("修改邮箱成功"),a("success"),m()):e.warning(l.message)})})}return(l,g)=>{const C=f("a-input"),v=f("a-form-item"),R=f("a-button"),b=f("a-form");return T(),$(N,D(l.$attrs,{onRegister:G(n),width:"500px",title:u.value,showCancelBtn:!1,showOkBtn:!1}),{default:i(()=>[c(b,{class:"antd-modal-form",ref_key:"formRef",ref:r,model:t,rules:d},{default:i(()=>[c(v,{name:"email"},{default:i(()=>[c(C,{size:"large",value:t.email,"onUpdate:value":g[0]||(g[0]=x=>t.email=x),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),c(v,null,{default:i(()=>[c(R,{size:"large",type:"primary",block:"",onClick:w},{default:i(()=>[A(" 确认 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{se as _};
