var W=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var F=(r,t,n)=>t in r?W(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,V=(r,t)=>{for(var n in t||(t={}))Q.call(t,n)&&F(r,n,t[n]);if(B)for(var n of B(t))X.call(t,n)&&F(r,n,t[n]);return r},D=(r,t)=>q(r,z(t));var M=(r,t,n)=>new Promise((o,g)=>{var U=s=>{try{y(n.next(s))}catch(m){g(m)}},d=s=>{try{y(n.throw(s))}catch(m){g(m)}},y=s=>s.done?o(s.value):Promise.resolve(s.value).then(U,d);y((n=n.apply(r,t)).next())});import{k as Y,bj as Z,bH as ss,l as es,_ as os}from"./jeecg-online-vendor-bf2efbcb.js";import{aw as is}from"./index-fde9c72f.js";import{a as as}from"./jeecg_ad_text-44d8f745.js";import{d as H,k as h,r as ns,U as I,aV as f,as as _,at as e,u as i,f as l,bi as v,ag as k,V as O,J as ls}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const S="/assets/icon-eye-k.62c61241.png",$="/assets/icon-eye-g.a35cc0c0.png",ts={class:"aui-content"},cs={class:"aui-container"},rs={class:"aui-form"},us={class:"aui-image"},ds={class:"aui-image-text"},ms=["src"],ps={class:"aui-formBox"},fs={class:"aui-formWell"},_s={class:"aui-flex aui-form-nav aui-clear-left",style:{"padding-bottom":"21px"}},vs={class:"aui-flex-box activeNav on"},gs={class:"aui-form-box"},ys={class:"aui-account aui-account-line"},ws={class:"aui-input-line"},xs={class:"aui-input-line"},hs={class:"aui-input-line"},ks={key:1,class:"aui-code-line"},bs={class:"aui-input-line"},Cs={class:"aui-eye"},Is=["src"],Ps=["src"],Ts={class:"aui-input-line"},Es={class:"aui-eye"},Ms=["src"],Us=["src"],Ns={class:"aui-flex"},Rs={class:"aui-flex-box"},Bs={class:"aui-choice"},Fs={style:{color:"#1b90ff","margin-left":"4px"}},Vs={class:"aui-formButton"},Ds={class:"aui-flex"},Os={class:"aui-flex"},Ss=H({name:"mini-register"}),$s=H(D(V({},Ss),{emits:["go-back","success","register"],setup(r,{expose:t,emit:n}){const{t:o}=Y(),{notification:g,createErrorModal:U,createMessage:d}=es(),y=h(),s=ns({username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),m=h(!0),w=h(60),p=h(null),P=h("close"),T=h("close");function j(){n("go-back"),E()}function G(){return M(this,null,function*(){if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}(yield Z({mobile:s.mobile,smsmode:is.REGISTER}))&&(i(p)||(w.value=60,m.value=!1,p.value=setInterval(()=>{i(w)>0&&i(w)<=60?w.value=w.value-1:(m.value=!0,clearInterval(i(p)),p.value=null)},1e3)))})}function A(){if(!s.username){d.warn(o("sys.login.accountPlaceholder"));return}if(!s.mobile){d.warn(o("sys.login.mobilePlaceholder"));return}if(!s.smscode){d.warn(o("sys.login.smsPlaceholder"));return}if(!s.password){d.warn(o("sys.login.passwordPlaceholder"));return}if(!s.confirmPassword){d.warn(o("sys.login.confirmPassword"));return}if(s.password!==s.confirmPassword){d.warn(o("sys.login.diffPwd"));return}if(!s.policy){d.warn(o("sys.login.policyPlaceholder"));return}J()}function J(){return M(this,null,function*(){try{const u=yield ss(ls({username:s.username,password:s.password,phone:s.mobile,smscode:s.smscode}));u&&u.data.success?(g.success({description:u.data.message||o("sys.api.registerMsg"),duration:3}),n("success",{username:s.username,password:s.password}),E()):g.warning({message:o("sys.api.errorTip"),description:u.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(u){g.error({message:o("sys.api.errorTip"),description:u.message||o("sys.api.networkExceptionMsg"),duration:3})}})}function E(){Object.assign(s,{username:"",mobile:"",smscode:"",password:"",confirmPassword:"",policy:!1}),i(p)||(m.value=!0,clearInterval(i(p)),p.value=null),y.value.resetFields()}function N(u){P.value=u}function R(u){T.value=u}return t({initForm:E}),(u,a)=>{const b=I("Icon"),C=I("a-input"),x=I("a-form-item"),K=I("a-checkbox"),L=I("a-form");return f(),_("div",ts,[e("div",cs,[e("div",rs,[e("div",us,[e("div",ds,[e("img",{src:i(as),alt:""},null,8,ms)])]),e("div",ps,[e("div",fs,[l(L,{ref_key:"formRef",ref:y,model:s},{default:v(()=>[e("div",_s,[e("div",vs,k(i(o)("sys.login.signUpFormTitle")),1)]),e("div",gs,[e("div",ys,[l(x,null,{default:v(()=>[e("div",ws,[l(b,{class:"aui-icon",icon:"ant-design:user-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.userName"),value:s.username,"onUpdate:value":a[0]||(a[0]=c=>s.username=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",xs,[l(b,{class:"aui-icon",icon:"ant-design:mobile-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.mobile"),value:s.mobile,"onUpdate:value":a[1]||(a[1]=c=>s.mobile=c)},null,8,["placeholder","value"])])]),_:1}),l(x,null,{default:v(()=>[e("div",hs,[l(b,{class:"aui-icon",icon:"ant-design:mail-outlined"}),l(C,{class:"fix-auto-fill",type:"text",placeholder:i(o)("sys.login.smsCode"),value:s.smscode,"onUpdate:value":a[2]||(a[2]=c=>s.smscode=c)},null,8,["placeholder","value"]),m.value?(f(),_("div",{key:0,class:"aui-code-line",onClick:G},k(i(o)("component.countdown.normalText")),1)):(f(),_("div",ks,k(i(o)("component.countdown.sendText",[i(w.value)])),1))])]),_:1}),l(x,null,{default:v(()=>[e("div",bs,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:P.value==="close"?"password":"text",placeholder:i(o)("sys.login.password"),value:s.password,"onUpdate:value":a[3]||(a[3]=c=>s.password=c)},null,8,["type","placeholder","value"]),e("div",Cs,[P.value==="open"?(f(),_("img",{key:0,src:i(S),alt:"\u5F00\u542F",onClick:a[4]||(a[4]=c=>N("close"))},null,8,Is)):P.value==="close"?(f(),_("img",{key:1,src:i($),alt:"\u5173\u95ED",onClick:a[5]||(a[5]=c=>N("open"))},null,8,Ps)):O("",!0)])])]),_:1}),l(x,null,{default:v(()=>[e("div",Ts,[l(b,{class:"aui-icon",icon:"ant-design:lock-outlined"}),l(C,{class:"fix-auto-fill",type:T.value==="close"?"password":"text",placeholder:i(o)("sys.login.confirmPassword"),value:s.confirmPassword,"onUpdate:value":a[6]||(a[6]=c=>s.confirmPassword=c)},null,8,["type","placeholder","value"]),e("div",Es,[T.value==="open"?(f(),_("img",{key:0,src:i(S),alt:"\u5F00\u542F",onClick:a[7]||(a[7]=c=>R("close"))},null,8,Ms)):T.value==="close"?(f(),_("img",{key:1,src:i($),alt:"\u5173\u95ED",onClick:a[8]||(a[8]=c=>R("open"))},null,8,Us)):O("",!0)])])]),_:1}),l(x,{name:"policy"},{default:v(()=>[e("div",Ns,[e("div",Rs,[e("div",Bs,[l(K,{checked:s.policy,"onUpdate:checked":a[9]||(a[9]=c=>s.policy=c)},null,8,["checked"]),e("span",Fs,k(i(o)("sys.login.policy")),1)])])])]),_:1})])]),e("div",Vs,[e("div",Ds,[e("a",{class:"aui-link-login aui-flex-box",onClick:A},k(i(o)("sys.login.registerButton")),1)]),e("div",Os,[e("a",{class:"aui-linek-code aui-flex-box",onClick:j},k(i(o)("sys.login.backSignIn")),1)])])]),_:1},8,["model"])])])])])])}}}));const Ys=os($s,[["__scopeId","data-v-dcdb3616"]]);export{Ys as default};
