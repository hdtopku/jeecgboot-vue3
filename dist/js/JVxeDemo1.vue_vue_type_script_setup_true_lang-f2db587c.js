var T=(V,u,n)=>new Promise((d,_)=>{var C=s=>{try{v(n.next(s))}catch(h){_(h)}},k=s=>{try{v(n.throw(s))}catch(h){_(h)}},v=s=>s.done?d(s.value):Promise.resolve(s.value).then(C,k);v((n=n.apply(V,u)).next())});import{u as L}from"./jeecg-online-vendor-59c8fbe3.js";import{J as i,C as U,D as X}from"./index-7711d1b4.js";import{a7 as Z,d as W}from"./antd-vue-vendor-a78909e6.js";import{r}from"./lodash-es-vendor-9b741fb8.js";import{d as z,k as y,V as w,a5 as K,a6 as Q,f as o,a7 as l,E as c,aa as x,ab as ee,u as te,F as le}from"./vue-bcbaddf9.js";const ae={style:{padding:"20px"}},oe=["onClick"],ne=x("a",null,"删除",-1),fe=z({__name:"JVxeDemo1",setup(V){const{createMessage:u}=L(),n=y(),d=y(!1),_=y(!1),C=y([{title:"ID",key:"id",type:i.hidden},{title:"不可编辑",key:"noEdit",type:i.normal,width:180,defaultValue:"noEdit-new"},{title:"单行文本",key:"input",type:i.input,width:180,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"请输入${title}"},{pattern:/^[a-z|A-Z][a-z|A-Z\d_-]*$/,message:"必须以字母开头，可包含数字、下划线、横杠"},{unique:!0,message:"${title}不能重复"},{handler({cellValue:e,row:a,column:t},b,f){e==="abc"?b(!1,"${title}不能是abc"):b(!0)},message:"${title}默认提示"}]},{title:"多行文本",key:"textarea",type:i.textarea,width:200},{title:"数字",key:"number",type:i.inputNumber,width:80,defaultValue:32,statistics:["sum","average"]},{title:"下拉框",key:"select",type:i.select,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],allowSearch:!0,placeholder:"请选择"},{title:"下拉框_字典",key:"select_dict",type:i.select,width:180,options:[],dictCode:"sex",placeholder:"请选择"},{title:"下拉框_多选",key:"select_multiple",type:i.selectMultiple,width:205,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],defaultValue:["int","boolean"],placeholder:"多选"},{title:"下拉框_搜索",key:"select_search",type:i.selectSearch,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}]},{title:"日期时间",key:"datetime",type:i.datetime,width:200,defaultValue:"2019-04-30 14:52:22",placeholder:"请选择"},{title:"时间",key:"time",type:i.time,width:200,defaultValue:"14:52:22",placeholder:"请选择"},{title:"复选框",key:"checkbox",type:i.checkbox,width:100,customValue:["Y","N"],defaultChecked:!1},{title:"操作",key:"action",type:i.slot,fixed:"right",minWidth:100,align:"center",slotName:"myAction"}]),k=y([]);function v(e,a,t=!1){t&&(d.value=!0);let b=()=>{let p=r(1e3,9999999999999);return W(new Date(p)).format("YYYY-MM-DD HH:mm:ss")},f=(e-1)*a,g=["string","int","double","boolean"],D=Date.now(),m=[];for(let p=0;p<a;p++)m.push({id:U(),noEdit:`noEdit-${f+p+1}`,input:`text-${f+p+1}`,textarea:`textarea-${f+p+1}`,number:r(0,233),select:g[r(0,3)],select_dict:r(1,2).toString(),select_multiple:(()=>{let G=r(1,4),$=[];for(let N=0;N<G;N++)X($,g[r(0,3)]);return $.join(",")})(),select_search:g[r(0,3)],datetime:b(),checkbox:["Y","N"][r(0,1)]});k.value=m;let R=Date.now()-D;t&&R<a&&setTimeout(()=>d.value=!1,a-R)}v(0,20,!0);function s(e){u.success("请在控制台查看输出")}function h(e){return T(this,null,function*(){var t;const a=yield(t=n.value)==null?void 0:t.removeRows(e.row);a&&a.rows.length>0&&u.success("删除成功")})}function B(e){}function E(e){}function j(){n.value.validateTable().then(e=>{e?u.error("验证未通过，请在控制台查看详细"):u.success("验证通过")})}function A(){n.value.getTableData(),u.success("获取值成功，请看控制台输出")}function I(){v(1,1e3,!0)}function J(){const a=n.value.getXTable().getTableData().fullData[0];n.value.removeRows(a)}function M(){n.value.getXTable().removeCheckboxRow()}function Y(){u.info("请看控制台")}function F(){n.value.clearSelection()}function H(){d.value=!d.value}function O(){_.value=!_.value}function P(e){return new Promise(a=>{Object.prototype.toString.call(e)==="[object Array]"?e.map(t=>t.id):e.id,setTimeout(()=>a(!0),1500)})}function q(e){return T(this,null,function*(){const a=u.loading("删除中…",0);try{(yield P(e.deleteRows))?(yield n.value.removeSelection(),u.success("删除成功！")):u.warn("删除失败！")}finally{a()}})}return(e,a)=>{const t=w("a-button"),b=w("a-space"),f=w("a-tooltip"),g=w("a-divider"),D=w("JVxeTable");return K(),Q(le,null,[o(b,null,{default:l(()=>[o(t,{onClick:H},{default:l(()=>[c("切换加载")]),_:1}),o(t,{onClick:O},{default:l(()=>[c("切换禁用")]),_:1})]),_:1}),o(D,{ref_key:"tableRef",ref:n,stripe:"",toolbar:"",rowNumber:"",rowSelection:"",rowExpand:"",resizable:"",asyncRemove:"",clickSelectRow:"",height:480,checkboxConfig:{range:!0},disabledRows:{input:["text--16","text--18"]},loading:d.value,disabled:_.value,columns:C.value,dataSource:k.value,onRemoved:q,onValueChange:B,onBlur:E},{toolbarSuffix:l(()=>[o(t,{onClick:j},{default:l(()=>[c("表单验证")]),_:1}),o(f,{placement:"top",title:"获取值，忽略表单验证",autoAdjustOverflow:!0},{default:l(()=>[o(t,{onClick:A},{default:l(()=>[c("获取数据")]),_:1})]),_:1}),o(f,{placement:"top",title:"模拟加载1000条数据",autoAdjustOverflow:!0},{default:l(()=>[o(t,{onClick:I},{default:l(()=>[c("设置值")]),_:1})]),_:1}),o(t,{onClick:Y},{default:l(()=>[c("获取选中数据")]),_:1}),o(t,{onClick:F},{default:l(()=>[c("清空选中")]),_:1}),o(t,{onClick:J},{default:l(()=>[c("删除第一行数据")]),_:1}),o(t,{onClick:M},{default:l(()=>[c("删除选中数据")]),_:1})]),expandContent:l(m=>[x("div",ae,[x("span",null,"Hello! My name is: "+ee(m.row.input)+"!",1)])]),myAction:l(m=>[x("a",{onClick:S=>s(m)},"查看",8,oe),o(g,{type:"vertical"}),o(te(Z),{title:"确定删除吗？",onConfirm:S=>h(m)},{default:l(()=>[ne]),_:2},1032,["onConfirm"])]),_:1},8,["loading","disabled","columns","dataSource"])],64)}}});export{fe as _};
