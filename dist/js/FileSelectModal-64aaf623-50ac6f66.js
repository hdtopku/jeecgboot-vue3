import{U as B,b as p}from"./jeecg-online-vendor-88d7be55.js";import{B as D}from"./index-378f1f74.js";import{B as C}from"./index-b6e19f4a.js";import{d as S,k as d,U as m,a5 as k,a9 as w,a7 as h,f as v}from"./vue-705b7309.js";import"./antd-vue-vendor-cce59da1.js";import"./tinymce-vendor-6e169cb2.js";import"./lodash-es-vendor-5fc8fca4.js";import"./BasicModal-93f24ffc.js";import"./useWindowSizeFn-b9945b41.js";import"./codemirror-vendor-3f45d0f3.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-60c6a8c7.js";var f=(t,u,a)=>new Promise((n,o)=>{var c=e=>{try{l(a.next(e))}catch(i){o(i)}},r=e=>{try{l(a.throw(e))}catch(i){o(i)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(c,r);l((a=a.apply(t,u)).next())});const R=S({name:"FileSelectModal",components:{BasicModal:D},emits:["select","register"],setup(t,{emit:u}){const a=d(!0),n=d([]),o=d(""),[c,{closeModal:r}]=C(()=>f(this,null,function*(){o.value="",n.value.length===0&&i()}));function l(){u("select",o.value),r()}function e(){r()}function i(){return f(this,null,function*(){a.value=!0,n.value=yield p.get({url:"/online/cgform/head/rootFile"}).finally(()=>{a.value=!1})})}function g(s){return f(this,null,function*(){if(s.dataRef.children)return;let y={parentPath:s.dataRef.key};s.dataRef.children=yield p.get({url:"/online/cgform/head/fileTree",params:y}),n.value=[...n.value]})}function M(s){o.value=s[0]}return{loading:a,treeData:n,onLoadData:g,onSelect:M,onSubmit:l,onCancel:e,registerModal:c}}});function x(t,u,a,n,o,c){const r=m("a-directory-tree"),l=m("a-spin"),e=m("BasicModal");return k(),w(e,{onRegister:t.registerModal,title:"选择目录",width:500,onOk:t.onSubmit,onCancel:t.onCancel},{default:h(()=>[v(l,{spinning:t.loading},{default:h(()=>[v(r,{treeData:t.treeData,loadData:t.onLoadData,onSelect:t.onSelect},null,8,["treeData","loadData","onSelect"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}const V=B(R,[["render",x]]);export{V as default};
