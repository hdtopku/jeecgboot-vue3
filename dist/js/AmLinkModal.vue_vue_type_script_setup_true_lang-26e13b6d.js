var B=Object.defineProperty;var d=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var h=(r,o,e)=>o in r?B(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e,g=(r,o)=>{for(var e in o||(o={}))_.call(o,e)&&h(r,e,o[e]);if(d)for(var e of d(o))b.call(o,e)&&h(r,e,o[e]);return r};var f=(r,o,e)=>new Promise((p,a)=>{var m=s=>{try{l(e.next(s))}catch(i){a(i)}},c=s=>{try{l(e.throw(s))}catch(i){a(i)}},l=s=>s.done?p(s.value):Promise.resolve(s.value).then(m,c);l((e=e.apply(r,o)).next())});import{B as v}from"./index-1c1dc92f.js";import{B as x}from"./BasicForm-16b0dbe3.js";import"./componentMap-954cd91c.js";import{u as A}from"./useForm-a6f4b45a.js";import"./JAddInput-0d73042c.js";import"./JSelectUser-ef2d6619.js";import"./JSelectDept-3b235dbd.js";import"./JPopup-10c26cf4.js";import{B as F}from"./index-12df1add.js";import{s as I}from"./AmLink.api-b7f590fb.js";import{d as P,k as y,u as n,e as L,a5 as M,a9 as T,a7 as R,f as U,ag as C}from"./vue-249e5fad.js";const O=[{label:"",field:"id",component:"Input",show:!1},{label:"激活链",field:"link",component:"InputTextArea",componentProps:{placeholder:"短链、或https://itunes.apple.com..."}},{label:"预存",field:"email",component:"InputTextArea",componentProps:{placeholder:"可复制，如邮箱、短链、激活链等"}},{label:"长链接",field:"longLink",component:"InputTextArea",componentProps:{placeholder:"https://email.myunidays.uk..."}},{label:"备注",field:"remark",component:"InputTextArea",componentProps:{placeholder:"重要的信息"}},{label:"预存",field:"thirdLink",component:"InputTextArea",componentProps:{placeholder:"可复制，如邮箱、短链、激活链等"}}],J=P({__name:"AmLinkModal",emits:["register","success"],setup(r,{emit:o}){const e=y(!0),[p,{resetFields:a,setFieldsValue:m,validate:c}]=A({labelWidth:150,schemas:O,showActionButtonGroup:!1}),[l,{setModalProps:s,closeModal:i}]=F(t=>f(this,null,function*(){yield a(),s({confirmLoading:!1,showCancelBtn:t==null?void 0:t.showFooter,showOkBtn:t==null?void 0:t.showFooter}),e.value=!!(t!=null&&t.isUpdate),n(e)&&(yield m(g({},t.record)))})),w=L(()=>n(e)?"编辑":"新增");function k(t){return f(this,null,function*(){try{let u=yield c();s({confirmLoading:!0}),yield I(u,e.value),i(),o("success",{isUpdate:e.value,values:u})}finally{s({confirmLoading:!1})}})}return(t,u)=>(M(),T(n(v),C(t.$attrs,{onRegister:n(l),title:w.value,onOk:k,width:"96%"}),{default:R(()=>[U(n(x),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{J as _};
