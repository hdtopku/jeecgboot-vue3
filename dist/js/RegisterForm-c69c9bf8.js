var x=(v,i,u)=>new Promise((o,d)=>{var g=l=>{try{f(u.next(l))}catch(m){d(m)}},p=l=>{try{f(u.throw(l))}catch(m){d(m)}},f=l=>l.done?o(l.value):Promise.resolve(l.value).then(g,p);f((u=u.apply(v,i)).next())});import{d as F,l as k,r as _,e as P,u as e,a7 as M,a8 as T,f as a,aa as n,E as y,ae as b,F as U,W as B,J as L}from"./vue-50733b77.js";import N from"./LoginFormTitle-f1a9bc23.js";import{bo as w,bH as V,bz as C,c2 as h}from"./antd-vue-vendor-c5335947.js";import"./index-b34ff7bc.js";import{bl as D,bm as G,br as q,o as A,q as H,bn as J,bt as W,b9 as $,bp as j}from"./jeecg-online-vendor-d3e1865b.js";import{S as K}from"./index-54db12ae.js";import{C as O}from"./index-f3acc26c.js";import"./tinymce-vendor-7c917b36.js";import"./lodash-es-vendor-058e2396.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-838914b0.js";import"./useCountdown-9338ec9a.js";import"./useFormItemSingle-37938520.js";const ce=F({__name:"RegisterForm",setup(v){const i=h.Item,u=w.Password,{t:o}=A(),{handleBackLogin:d,getLoginState:g}=D(),{notification:p,createErrorModal:f}=H(),l=k(),m=k(!1),t=_({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:E}=G(t),{validForm:R}=J(l),S=P(()=>e(g)===q.REGISTER);function I(){return x(this,null,function*(){const c=yield R();if(c)try{m.value=!0;const s=yield W(L({username:c.account,password:c.password,phone:c.mobile,smscode:c.sms}));s&&s.data.success?(p.success({description:s.data.message||o("sys.api.registerMsg"),duration:3}),d()):p.warning({message:o("sys.api.errorTip"),description:s.data.message||o("sys.api.networkExceptionMsg"),duration:3})}catch(s){p.error({message:o("sys.api.errorTip"),description:s.message||o("sys.api.networkExceptionMsg"),duration:3})}finally{m.value=!1}})}function z(){return $({mobile:t.mobile,smsmode:j.REGISTER})}return(c,s)=>S.value?(M(),T(U,{key:0},[a(N,{class:"enter-x"}),a(e(h),{class:"p-4 enter-x",model:t,rules:e(E),ref_key:"formRef",ref:l},{default:n(()=>[a(e(i),{name:"account",class:"enter-x"},{default:n(()=>[a(e(w),{class:"fix-auto-fill",size:"large",value:t.account,"onUpdate:value":s[0]||(s[0]=r=>t.account=r),placeholder:e(o)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"mobile",class:"enter-x"},{default:n(()=>[a(e(w),{size:"large",value:t.mobile,"onUpdate:value":s[1]||(s[1]=r=>t.mobile=r),placeholder:e(o)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"sms",class:"enter-x"},{default:n(()=>[a(e(O),{size:"large",class:"fix-auto-fill",value:t.sms,"onUpdate:value":s[2]||(s[2]=r=>t.sms=r),placeholder:e(o)("sys.login.smsCode"),sendCodeApi:z},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"password",class:"enter-x"},{default:n(()=>[a(e(K),{size:"large",value:t.password,"onUpdate:value":s[3]||(s[3]=r=>t.password=r),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),a(e(i),{name:"confirmPassword",class:"enter-x"},{default:n(()=>[a(e(u),{size:"large",visibilityToggle:"",value:t.confirmPassword,"onUpdate:value":s[4]||(s[4]=r=>t.confirmPassword=r),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),a(e(i),{class:"enter-x",name:"policy"},{default:n(()=>[a(e(V),{checked:t.policy,"onUpdate:checked":s[5]||(s[5]=r=>t.policy=r),size:"small"},{default:n(()=>[y(b(e(o)("sys.login.policy")),1)]),_:1},8,["checked"])]),_:1}),a(e(C),{type:"primary",class:"enter-x",size:"large",block:"",onClick:I,loading:m.value},{default:n(()=>[y(b(e(o)("sys.login.registerButton")),1)]),_:1},8,["loading"]),a(e(C),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(d)},{default:n(()=>[y(b(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):B("",!0)}});export{ce as default};
