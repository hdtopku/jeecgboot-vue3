var z=Object.defineProperty,G=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var S=(e,t,o)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,P=(e,t)=>{for(var o in t||(t={}))K.call(t,o)&&S(e,o,t[o]);if(F)for(var o of F(t))W.call(t,o)&&S(e,o,t[o]);return e},B=(e,t)=>G(e,U(t));var k=(e,t,o)=>new Promise((d,s)=>{var u=n=>{try{p(o.next(n))}catch(m){s(m)}},l=n=>{try{p(o.throw(n))}catch(m){s(m)}},p=n=>n.done?d(n.value):Promise.resolve(n.value).then(u,l);p((o=o.apply(e,t)).next())});import{d as q,l as y,e as T,u as L,o as Q,n as A,V as f,a7 as E,ac as D,aa as g,f as v,ai as X,aj as Y,ad as x,q as j,af as Z,ak as N,v as ee,B as te}from"./vue-50733b77.js";import{W as oe,m as ae,ak as h}from"./index-b34ff7bc.js";import{L as le}from"./useTableSync-dc333087-aa9cfc58.js";import{_ as ne,aC as ie,q as re,bB as se}from"./jeecg-online-vendor-d3e1865b.js";import"./index-7e7a94e9.js";import{M as ue,S as pe,bo as ce,bx as de}from"./antd-vue-vendor-c5335947.js";import{B as me,u as fe}from"./useForm-14ceb529.js";import"./cgform.data-cbdd88c3-fb588da1.js";import"./lodash-es-vendor-058e2396.js";import"./tinymce-vendor-7c917b36.js";import"./codemirror-vendor-9b2dceac.js";import"./echarts-vendor-ba343549.js";import"./vxe-table-vendor-838914b0.js";import"./componentMap-5c02cfaf.js";import"./useFormItem-915d7f1b.js";import"./index-f7d688aa.js";import"./BasicModal-064024e0.js";import"./useWindowSizeFn-34cbae37.js";import"./index-fa22fec6.js";import"./download-49b89a1a.js";import"./base64Conver-fa2fe1af.js";import"./index-54db12ae.js";import"./index-f3acc26c.js";import"./useCountdown-9338ec9a.js";import"./useFormItemSingle-37938520.js";import"./JAddInput-9c2385b5.js";import"./areaDataUtil-5dfcdadb.js";import"./JSelectUser-99e618da.js";import"./props-2079d80b.js";import"./JSelectBiz-f98b6288.js";import"./index-95220aa0.js";import"./index-7963a080.js";import"./bem-e62027cc.js";import"./props-12d3a914.js";import"./useContextMenu-e6153f12.js";import"./depart.api-1967d2cb.js";import"./JSelectDept-0fd43050.js";import"./JPopup-8bd4163b.js";import"./cron-parser-vendor-19ac00ef.js";import"./JEllipsis-66e02300.js";import"./JUpload-c8630cc9.js";import"./index-665aeeac.js";import"./index-1ac4dcff.js";const ve=q({name:"JPrompt",components:{Modal:ue,Spin:pe,Input:ce,BasicForm:me,ConfigProvider:de},emits:["register"],setup(e,{emit:t}){const o=y(),{getAntdLocale:d}=oe(),s=y(!1),u=y(!1),l=y({}),p=T(()=>{var c;return(c=l.value.placeholder)!=null?c:"请输入内容"}),[n,{clearValidate:m,setFieldsValue:i,validate:a,updateSchema:r}]=fe({compact:!0,wrapperCol:{span:24},schemas:[{label:"",field:"input",component:"Input",slot:"customInput"}],showActionButtonGroup:!1}),C=T(()=>{var O,I;let c=l.value,b={width:(O=c.width)!=null?O:500,title:(I=c.title)!=null?I:"prompt",visible:L(s),confirmLoading:L(u)};return B(P(P(P({},b),e),c),{onOk:M,onCancel(){typeof l.value.onCancel=="function"&&l.value.onCancel(),V()}})});Q(()=>{t("register",{openModal:w,setLoading:R,getVisible:s})});function w(c){return k(this,null,function*(){var b,_;document.body.focus(),l.value=c,s.value=!0,yield A(),yield r({field:"input",required:l.value.required,rules:l.value.rules,dynamicRules:l.value.dynamicRules}),yield i({input:(b=l.value.defaultValue)!=null?b:""}),yield m(),(_=o.value)==null||_.focus()})}function V(){s.value=!1}function $(){a()}function M(){return k(this,null,function*(){try{const{onOk:c}=l.value;let b=yield a();R(!0),typeof c=="function"?(yield c(b.input))!==!1&&V():V()}finally{R(!1)}})}function R(c){u.value=c}return{inputRef:o,getProps:C,loading:u,options:l,placeholder:p,getAntdLocale:d,onChange:$,onSubmit:M,registerForm:n}}}),ge={style:{padding:"20px"}},be=["innerHTML"];function he(e,t,o,d,s,u){const l=f("Input"),p=f("BasicForm"),n=f("Spin"),m=f("Modal"),i=f("ConfigProvider");return E(),D(i,{locale:e.getAntdLocale},{default:g(()=>[v(m,X(Y(e.getProps)),{default:g(()=>[v(n,{spinning:e.loading},{default:g(()=>[x("div",ge,[x("div",{innerHTML:e.options.content,style:{"margin-bottom":"8px"}},null,8,be),v(p,{onRegister:e.registerForm},{customInput:g(({model:a,field:r})=>[v(l,{ref:"inputRef",value:a[r],"onUpdate:value":C=>a[r]=C,placeholder:e.placeholder,onPressEnter:e.onSubmit,onInput:e.onChange},null,8,["value","onUpdate:value","placeholder","onPressEnter","onInput"])]),_:1},8,["onRegister"])])]),_:1},8,["spinning"])]),_:1},16)]),_:1},8,["locale"])}const ye=ne(ve,[["render",he]]);function Ce(){function e(t){let o=null;const d=document.createElement("div"),s=v(ye,{onRegister(i){return k(this,null,function*(){o=i,yield A(),i.openModal(t)})},afterClose(){j(null,d),document.body.removeChild(d)}});j(s,d),document.body.appendChild(d);function u(){return o==null&&ie("useJPrompt instance is undefined!"),o}function l(i){var a;(a=u())==null||a.updateModal(i)}function p(){var i;(i=u())==null||i.closeModal()}function n(i){var a;(a=u())==null||a.setLoading(i)}return{closeModal:p,updateModal:l,setLoading:n}}return{createJPrompt:e}}var we=Object.defineProperty,_e=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,H=(e,t,o)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Ve=(e,t)=>{for(var o in t||(t={}))ke.call(t,o)&&H(e,o,t[o]);if(J)for(var o of J(t))xe.call(t,o)&&H(e,o,t[o]);return e},Re=(e,t)=>_e(e,Pe(t));const Te=q({name:"CheckDictTable",components:{VNodes:(e,{attrs:t})=>t.vnodes},setup(){const{prefixCls:e}=ae("cgform-check-dict-table"),{createMessage:t}=re(),o=y([{title:"字段名称",key:"dbFieldName",width:100},{title:"字段备注",key:"dbFieldTxt",width:100},{title:"字段Href",key:"fieldHref",width:130,type:h.input,defaultValue:""},{title:"验证规则",key:"fieldValidType",width:170,type:h.slot,slotName:"fieldValidType",allowInput:!0,defaultValue:"",placeholder:"空"},{title:"校验必填",key:"fieldMustInput",width:80,type:h.checkbox,align:"center",customValue:["1","0"],defaultChecked:!1},{title:"字典Table",key:"dictTable",width:280,type:h.textarea,defaultValue:""},{title:"字典Code",key:"dictField",width:280,type:h.input,defaultValue:""},{title:"字典Text",key:"dictText",width:280,type:h.input,defaultValue:""}]),d=le(o),s=y([{label:"空",value:""},{label:"唯一校验",value:"only"},{label:"6到16位数字",value:"n6-16"},{label:"6到18位字母",value:"s6-18"},{label:"6到16位任意字符",value:"*6-16"},{label:"网址",value:"url"},{label:"电子邮件",value:"e"},{label:"手机号码",value:"m"},{label:"邮政编码",value:"p"},{label:"字母",value:"s"},{label:"数字",value:"n"},{label:"整数",value:"z"},{label:"非空",value:"*"},{label:"金额",value:"money"}]),u=T(()=>s.value.map(a=>a.value)),{createJPrompt:l}=Ce();function p(a){return a!=null&&!u.value.includes(a)}function n(a){l({title:"自定义正则表达式",placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:i}],onOk:r=>{a.triggerChange(r),t.success("添加成功")}})}function m(a){l({title:"修改自定义正则表达式",defaultValue:a.value,placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:i}],onOk:r=>{a.triggerChange(r),r!==a.value&&t.success("修改成功")}})}function i(a,r){return p(r)?Promise.resolve():Promise.reject("当前校验已存在")}return Re(Ve({},d),{prefixCls:e,columns:o,isCustomRegexp:p,validTypeOptions:s,validTypeValues:u,onAddCustomRegexp:n,onChangeCustomRegexp:m})}}),Me={class:"custom-option-list rc-virtual-list-holder-inner",style:{"border-top":"1px solid #dfdfdf"}},Oe=["onClick"];function Ie(e,t,o,d,s,u){const l=f("VNodes"),p=f("a-select"),n=f("a-col"),m=f("a-button"),i=f("a-row"),a=f("JVxeTable");return E(),D(a,Z({ref:"tableRef",rowNumber:"",keyboardEdit:"",class:[e.prefixCls],maxHeight:e.tableHeight.noToolbar,loading:e.loading,columns:e.columns,dataSource:e.dataSource,disabledRows:{dbFieldName:["id","has_child"]}},e.tableProps),{fieldValidType:g(r=>[v(i,{type:"flex",class:N(["row-valid-type",{full:!e.isCustomRegexp(r.value)}])},{default:g(()=>[v(n,{class:N(["left"])},{default:g(()=>[v(p,{value:r.value,options:e.validTypeOptions,placeholder:"空",style:{width:"100%"},onChange:r.triggerChange},{dropdownRender:g(({menuNode:C})=>[v(l,{vnodes:C},null,8,["vnodes"]),ee(x("div",Me,[x("div",{class:"ant-select-item ant-select-item-option",title:"使用自定义正则表达式作为校验规则",onClick:w=>e.onAddCustomRegexp(r),onMousedown:t[0]||(t[0]=w=>w.preventDefault())}," 正则表达式 ",40,Oe)],512),[[te,!e.isCustomRegexp(r.value)]])]),_:2},1032,["value","options","onChange"])]),_:2},1024),v(n,{class:"right",title:"修改自定义正则表达式"},{default:g(()=>[v(m,{preIcon:"ant-design:edit",onClick:()=>e.onChangeCustomRegexp(r)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:1},16,["class","maxHeight","loading","columns","dataSource"])}const _t=se(Te,[["render",Ie],["__scopeId","data-v-7693eace"]]);export{_t as default};
