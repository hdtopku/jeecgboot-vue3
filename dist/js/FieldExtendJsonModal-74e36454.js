import{B as O}from"./index-8cf3aabb.js";import{B as C}from"./BasicForm-83ba9c88.js";import"./componentMap-a6d21ad6.js";import{u as R}from"./useForm-fa63344e.js";import"./JAddInput-2cbbbde9.js";import{A as j}from"./index-fde9c72f.js";import{bW as L}from"./jeecg-online-vendor-bf2efbcb.js";import{p as M}from"./pick-51214243.js";import"./_flatRest-34ab130c.js";import"./isArray-b183d537.js";import"./toString-8deea73b.js";import"./_arrayPush-ae8b790e.js";import{d as x,k as f,r as D,H as I,J as k,U as v,aV as V,ar as N,bi as h,f as g,aQ as $}from"./vue-c7e3516e.js";import"./BasicModal-ff8f2086.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./useWindowSizeFn-e5cad7ae.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";import"./BasicForm.vue_vue_type_style_index_0_lang-aeaafe88.js";import"./useFormItem-4a12ff45.js";import"./JUpload.vue_vue_type_style_index_0_lang-3f4c90f3.js";import"./download-c8889ed9.js";import"./base64Conver-4e359726.js";import"./index-ee020524.js";import"./index-53e807bd.js";import"./useCountdown-473e4dcc.js";import"./index-ed4be6fa.js";import"./areaDataUtil-b2642a1f.js";import"./useSelectBiz-c744cf20.js";import"./props-8e8dbf4f.js";import"./index-d4783a30.js";import"./bem-deccd0b6.js";import"./props-c3781b9d.js";import"./useContextMenu-c0be0b5c.js";import"./useTreeBiz-faf9875a.js";import"./index-63ed9c18.js";import"./depart.api-25dc3d39.js";var K=Object.defineProperty,G=Object.defineProperties,J=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,_=(o,t,r)=>t in o?K(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,w=(o,t)=>{for(var r in t||(t={}))T.call(t,r)&&_(o,r,t[r]);if(b)for(var r of b(t))W.call(t,r)&&_(o,r,t[r]);return o},H=(o,t)=>G(o,J(t)),F=(o,t,r)=>new Promise((c,l)=>{var u=n=>{try{i(r.next(n))}catch(m){l(m)}},p=n=>{try{i(r.throw(n))}catch(m){l(m)}},i=n=>n.done?c(n.value):Promise.resolve(n.value).then(u,p);i((r=r.apply(o,t)).next())});const Q=x({name:"FieldExtendJsonModal",components:{BasicModal:O,BasicForm:C},emits:["success","register"],setup(o,{emit:t}){const r=f(!1);function c(){l.uploadnum=0,l.showLength="",l.popupMulti=!0,l.multiSelect=!0,l.store="",l.text="",l.orderRule="",l.validateError="",l.labelLength=4}const l=D({uploadnum:0,showLength:"",popupMulti:!0,store:"",text:"",multiSelect:!0,orderRule:"",validateError:"",labelLength:4}),u=f(""),p=f(""),i=f("0"),n=[{label:"rowKey",field:"rowKey",component:"Input",show:!1},{label:"\u6587\u4EF6\u4E0A\u4F20\u6570\u91CF",field:"uploadnum",component:"InputNumber",componentProps:{style:{width:"100%"}},ifShow:()=>u.value==="file"||u.value==="image"},{label:"\u662F\u5426\u591A\u9009",field:"popupMulti",component:"RadioGroup",defaultValue:!0,componentProps:{options:[{label:"\u5426",value:!1},{label:"\u662F",value:!0}]},ifShow:()=>u.value==="popup"},{label:"\u662F\u5426\u591A\u9009",field:"multiSelect",component:"RadioGroup",defaultValue:!0,componentProps:{options:[{label:"\u5426",value:!1},{label:"\u662F",value:!0}]},ifShow:()=>u.value==="sel_user"||u.value==="sel_depart"},{label:"\u5B58\u50A8\u5B57\u6BB5",field:"store",component:"Input",ifShow:()=>u.value==="sel_user"||u.value==="sel_depart"},{label:"\u5C55\u793A\u5B57\u6BB5",field:"text",component:"Input",ifShow:()=>u.value==="sel_user"||u.value==="sel_depart"},{label:"\u9ED8\u8BA4\u6392\u5E8F",field:"orderRule",component:"RadioGroup",defaultValue:"",componentProps:{options:[{label:"\u964D\u5E8F",value:"desc"},{label:"\u5347\u5E8F",value:"asc"},{label:"\u4E0D\u9ED8\u8BA4\u6392\u5E8F",value:""}]},ifShow:()=>i.value==="1"},{label:"\u6821\u9A8C\u63D0\u793A",field:"validateError",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6821\u9A8C\u63D0\u793A\u6587\u672C"}},{label:"label\u957F\u5EA6",field:"labelLength",component:"InputNumber",componentProps:{placeholder:"\u8BF7\u8F93\u5165label\u957F\u5EA6"}}],[m,{validate:y,setFieldsValue:E,resetFields:B}]=R({schemas:n,showActionButtonGroup:!1,labelAlign:"right",labelWidth:100}),[P,{closeModal:S}]=j(e=>F(this,null,function*(){if(c(),e.jsonStr){let a=JSON.parse(e.jsonStr);Object.keys(a).map(d=>{l[d]=a[d]})}u.value=e.fieldShowType,p.value=e.id,i.value=e.sortFlag;let s=k(l);yield B(),yield E(H(w({},s),{rowKey:e.id}))}));function A(){return F(this,null,function*(){let e=yield y(),s=u.value,a={};s==="file"||s==="image"?e.uploadnum&&e.uploadnum>0&&(a.uploadnum=e.uploadnum):s==="textarea"||s==="text"?e.showLength&&e.showLength>0&&(a.showLength=e.showLength):s==="sel_user"||s==="sel_depart"?a=M(e,"store","text","multiSelect"):s==="popup"&&(a.popupMulti=e.popupMulti),i.value==="1"&&e.orderRule&&(a.orderRule=e.orderRule),e.validateError&&(a.validateError=e.validateError),e.labelLength&&(a.labelLength=e.labelLength);for(let d in a)a[d]===""&&delete a[d];t("success",a,e.rowKey),S()})}return w({spinningLoading:r,registerModal:P,registerForm:m,fieldShowType:u,rowKey:p,handleSubmit:A},I(l))}});function U(o,t,r,c,l,u){const p=v("BasicForm"),i=v("a-spin"),n=v("BasicModal");return V(),N(n,$({wrapClassName:"field-extend-config-modal"},o.$attrs,{title:"\u6269\u5C55\u53C2\u6570\u914D\u7F6E",onRegister:o.registerModal,keyboard:"",canFullscreen:!1,cancelText:"\u5173\u95ED",onOk:o.handleSubmit}),{default:h(()=>[g(i,{spinning:o.spinningLoading},{default:h(()=>[g(p,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},8,["spinning"])]),_:1},16,["onRegister","onOk"])}var Ie=L(Q,[["render",U]]);export{Ie as default};
