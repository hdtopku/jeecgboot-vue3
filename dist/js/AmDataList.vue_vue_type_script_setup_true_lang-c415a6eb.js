import{d as M,k as b,w as W,U as f,a5 as r,a9 as B,a7 as s,aa as e,v as N,f as u,E as c,A as V,a6 as d,ab as l,V as _,u as w,am as K}from"./vue-705b7309.js";import{_ as X}from"./CommonList.vue_vue_type_script_setup_true_lang-efa28f6b.js";import{a as Y,s as Z}from"./Am.api-230c1e5f.js";import{A as i}from"./index-ea73cedc.js";const m={key:0},aa={key:1},na={key:0},sa={key:1},oa={key:0},la={key:1},ra={key:0},ua={key:1},ca={key:0},ea={key:0},da={key:0},ta={key:1},_a={key:0,class:"font-light text-sm text-gray-500"},ka=M({__name:"AmDataList",emits:["handleEdit"],setup(pa,{expose:P,emit:Q}){const{hasPermission:v}=i(),A=b(),T=b(),R=(n,k)=>{n.valid=k,Z(n,!0).then(()=>{})},y=b("0"),F=n=>(n==null?void 0:n.type)===6?"c.taojingling.cn/d/"+(n==null?void 0:n.code):"c.taojingling.cn/c/"+(n==null?void 0:n.code),h=b(0);W(T,()=>{var n,k;h.value=0,(k=(n=T.value)==null?void 0:n.records)==null||k.forEach(o=>{o.valid===-1&&(o.status===-1||o.status===-2)&&++h.value,o.showOperate=(o==null?void 0:o.valid)!==-1&&(o==null?void 0:o.status)>-1&&(o==null?void 0:o.status)<4})});const H=n=>{switch(n=Number.parseInt(n),n){case 0:case 1:case 2:return"processing";case 3:return"cyan";case 4:return"success";case-1:case-2:return"error"}},q=n=>{Q("handleEdit",n)},E=b(!1);return P({startQuery:(n={})=>{y.value=n==null?void 0:n.status,A.value.execQuery(Y,n)},changeAdvanced:()=>{E.value=!E.value},changeActiveKey:n=>{y.value=n}}),(n,k)=>{const o=f("a-typography-text"),G=f("a-typography-link"),L=f("a-button"),z=f("a-menu-item"),J=f("a-menu"),p=f("a-tag");return r(),B(X,{ref_key:"CommonListRef",ref:A},{header:s(()=>[e("span",null,[N(u(o,{mark:""},{default:s(()=>[c("已打开验证页面，但还没点击开始验证")]),_:1},512),[[V,y.value==="1"]]),N(u(o,{mark:""},{default:s(()=>[c("所有状态：已打开+已开始+已关闭+退款等")]),_:1},512),[[V,y.value==="0"]]),N(u(o,{mark:""},{default:s(()=>[c("验证结束后，系统关闭教程及页面至空白")]),_:1},512),[[V,y.value==="2"]]),N(u(o,{mark:""},{default:s(()=>{var a,t;return[((a=T.value)==null?void 0:a.total)===0?(r(),d("span",m,"买家申请退款，记得销毁验证页面")):(r(),d("span",aa,[e("span",null,"管理员关闭"+l(((t=T.value)==null?void 0:t.total)-h.value)+"条",1),h.value>0?(r(),d("span",na,"+买家主动退款"+l(h.value)+"条",1)):(r(),d("span",sa,"买家主动退款"))]))]}),_:1},512),[[V,y.value==="4"]])])]),shelter:s(({item:a})=>[a.verifyCount>0?(r(),d("span",oa,"|"+l(a.verifyCount),1)):_("",!0),c(),w(v)("link:switch")&&(a==null?void 0:a.type)===6?(r(),d("span",la,"[尊]")):_("",!0)]),left:s(({item:a})=>{var t,g;return[e("div",null,[u(o,{copyable:{text:F(a)}},{default:s(()=>[e("span",{class:K(["",(a==null?void 0:a.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},l(a==null?void 0:a.code),3)]),_:2},1032,["copyable"])]),w(v)("link:switch")&&((t=a==null?void 0:a.link)==null?void 0:t.length)>3?(r(),d("div",ra,[u(G,{copyable:{text:a==null?void 0:a.link}},{default:s(()=>{var x,C;return[c(l((C=a==null?void 0:a.link)==null?void 0:C.substring(((x=a==null?void 0:a.link)==null?void 0:x.length)-4)),1)]}),_:2},1032,["copyable"])])):_("",!0),w(v)("link:switch")&&((g=a==null?void 0:a.remark)==null?void 0:g.length)>0?(r(),d("div",ua,[u(o,{copyable:{text:a==null?void 0:a.remark},mark:""},{default:s(()=>[c(" 注:"+l(a==null?void 0:a.remark),1)]),_:2},1032,["copyable"])])):_("",!0)]}),operate:s(({item:a})=>[u(J,null,{default:s(()=>[a?(r(),B(z,{key:0,onClick:t=>q(a)},{default:s(()=>[w(v)("link:switch")?(r(),B(L,{key:0,type:"link",size:"small"},{default:s(()=>[c("编辑 ")]),_:1})):_("",!0)]),_:2},1032,["onClick"])):_("",!0),u(z,null,{default:s(()=>[_("",!0),u(L,{type:"link",size:"small",danger:"",onClick:t=>R(a,-1)},{default:s(()=>[c(" 销毁验证 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),top:s(({item:a})=>{var t,g,x,C,O,S,$,D,U,j,I;return[e("div",null,l(((t=a==null?void 0:a.country)==null?void 0:t.indexOf("中国"))>-1||((x=(g=a==null?void 0:a.country)==null?void 0:g.toUpperCase())==null?void 0:x.indexOf("CHINA"))>-1?"":a.country)+" "+l(a.province)+l(a.city)+l(a.county)+" | "+l(a.browser),1),e("div",null,l(a.operator)+" | "+l(a.model)+" | "+l(a.system),1),e("div",null,[u(p,null,{default:s(()=>[c("打开时间")]),_:1}),c(" "+l((C=a==null?void 0:a.visitTime)==null?void 0:C.substring(5)),1)]),e("div",null,[u(p,null,{default:s(()=>[c("验证时间")]),_:1}),((O=a==null?void 0:a.verifyTime)==null?void 0:O.length)>0?(r(),d("span",ca,l((S=a==null?void 0:a.verifyTime)==null?void 0:S.substring(5)),1)):(r(),B(p,{key:1,color:"error",plain:"",plainFill:""},{default:s(()=>[c(" 未开始")]),_:1}))]),e("div",null,[u(p,null,{default:s(()=>[c("最后访问")]),_:1}),(($=a==null?void 0:a.updateTime)==null?void 0:$.length)>0?(r(),d("span",ea,l((D=a==null?void 0:a.updateTime)==null?void 0:D.substring(5)),1)):_("",!0)]),((U=a==null?void 0:a.refundTime)==null?void 0:U.length)>0?(r(),d("div",da,[u(p,{color:"error"},{default:s(()=>[c("买家退款")]),_:1}),e("span",null,l((j=a==null?void 0:a.refundTime)==null?void 0:j.substring(5)),1)])):_("",!0),w(v)("link:switch")&&((I=a==null?void 0:a.createBy)==null?void 0:I.length)>0?(r(),d("div",ta,[u(p,null,{default:s(()=>[c("创建人")]),_:1}),e("span",null,l(a==null?void 0:a.createBy),1)])):_("",!0)]}),right:s(({item:a})=>[e("div",null,[e("div",null,[u(p,{color:H(a.status)},{default:s(()=>[e("text",{class:K((a==null?void 0:a.valid)===-1?"line-through":"")},l(a.statusName),3)]),_:2},1032,["color"])]),(a==null?void 0:a.valid)!==-1&&(a==null?void 0:a.status)>-1&&(a==null?void 0:a.status)<4?_("",!0):(r(),d("div",_a," 页面空白 "))])]),_:1},512)}}});export{ka as _};
