import{d as W,k as _,e as X,U as s,aV as v,as as h,at as i,f as a,bi as t,E as m,ag as p,v as I,A as M,ax as Y,R as f,u as Z,ar as T,V as ee,F as oe,g as te}from"./vue-c7e3516e.js";import{t as le}from"./antd-vue-vendor-1561c1ba.js";const ae={class:"border-solid rounded"},ne={class:"ant-dropdown-link"},ue={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},se={key:0},re={key:1},de=W({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0},buttonColor:{type:String,default:"primary"}},emits:["queryList","changeAdvanced","confirmCopy"],setup(w,{expose:U,emit:H}){const F=w,r=_(1),y=_(!1),b=()=>{y.value=!0,H("confirmCopy",{count:r.value})},g=_(!1),C=_(!1),e=_(),A=_(),B=_(),$=(o,c,d=!1)=>{A.value=o,B.value=c,d?C.value=!0:(g.value=!0,c.pageNo=1),o(c).then(u=>{if(c.pageNo=u.current+1,u.current>1&&d){e.value.records.push(...u.records);return}e.value=u}).catch(u=>{}).finally(()=>{g.value=!1,C.value=!1})},L=()=>{$(A.value,B.value,!0)},O=X(()=>{var o,c,d,u;return((o=e==null?void 0:e.value)==null?void 0:o.total)===0||((d=(c=e==null?void 0:e.value)==null?void 0:c.records)==null?void 0:d.length)>=((u=e==null?void 0:e.value)==null?void 0:u.total)}),{proxy:D}=te();return U({execQuery:$,queryFinish:(o=null)=>{o==null?D.tool.error("\u590D\u5236\u5931\u8D25"):r.value===1?D.tool.copy(o,o+"\u5DF2\u590D\u5236"):D.tool.copy(o,r.value+"\u6761\u5DF2\u590D\u5236"),y.value=!1}}),(o,c)=>{var N;const d=s("a-typography-title"),u=s("a-col"),P=s("a-slider"),k=s("a-button"),Q=s("a-popconfirm"),R=s("a-row"),j=s("a-dropdown"),z=s("a-list-item-meta"),G=s("a-list-item"),J=s("a-spin"),K=s("a-list");return v(),h(oe,null,[i("div",null,[a(R,{class:""},{default:t(()=>[a(u,{span:4},{default:t(()=>[a(d,{level:5},{default:t(()=>{var l,n;return[m("\u5171"+p((n=(l=e.value)==null?void 0:l.total)!=null?n:0)+"\u6761",1)]}),_:1})]),_:1}),a(u,{span:14},{default:t(()=>[a(P,{style:{display:"inline-block"},value:r.value,"onUpdate:value":c[0]||(c[0]=l=>r.value=l),min:1,max:500},null,8,["value"])]),_:1}),a(u,{class:"text-center",span:6},{default:t(()=>[I(a(k,{loading:y.value,type:F.buttonColor,onClick:b},{default:t(()=>[m("\u590D\u5236"+p(r.value)+"\u6761 ",1)]),_:1},8,["loading","type"]),[[M,r.value===1]]),a(Q,{title:`\u786E\u5B9A\u590D\u5236${r.value}\u6761\u5417?`,"ok-text":"\u786E\u5B9A","cancel-text":"\u53D6\u6D88",onConfirm:b},{default:t(()=>[I(a(k,{type:F.buttonColor,loading:y.value},{default:t(()=>[m("\u590D\u5236"+p(r.value)+"\u6761 ",1)]),_:1},8,["type","loading"]),[[M,r.value>1]])]),_:1},8,["title"])]),_:1})]),_:1})]),a(K,{loading:g.value,"data-source":(N=e.value)==null?void 0:N.records},{renderItem:t(({item:l,index:n})=>[a(G,null,{default:t(()=>[a(z,null,Y({title:t(()=>[i("span",null,[f(o.$slots,"top",{item:l,index:n})])]),description:t(()=>[f(o.$slots,"bottom",{item:l,index:n})]),_:2},[w.showLeft?{name:"avatar",fn:t(()=>[i("div",null,[i("span",ae,"#"+p(n+1),1),i("span",null,[f(o.$slots,"shelter",{item:l,index:n})])]),a(j,null,{overlay:t(()=>[i("span",null,[f(o.$slots,"operate",{item:l,index:n})])]),default:t(()=>[i("a",ne,[m(" \u64CD\u4F5C "),a(Z(le))])]),_:2},1024),i("span",null,[f(o.$slots,"left",{style:"position: relative",item:l,index:n})])]),key:"0"}:void 0]),1024),i("span",null,[f(o.$slots,"right",{item:l,index:n})])]),_:2},1024)]),loadMore:t(()=>{var l,n,V,S;return[((l=e.value)==null?void 0:l.total)>0?(v(),h("div",ue,[O.value?(v(),h("span",se,"\u52A0\u8F7D\u5B8C\u6210("+p((V=(n=e.value)==null?void 0:n.records)==null?void 0:V.length)+"/"+p((S=e.value)==null?void 0:S.total)+")",1)):(v(),h("span",re,[C.value?(v(),T(J,{key:0})):(v(),T(k,{key:1,onClick:L},{default:t(()=>{var q,x,E;return[m("\u52A0\u8F7D\u66F4\u591A("+p((x=(q=e.value)==null?void 0:q.records)==null?void 0:x.length)+"/"+p((E=e.value)==null?void 0:E.total)+")",1)]}),_:1}))]))])):ee("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{de as _};
