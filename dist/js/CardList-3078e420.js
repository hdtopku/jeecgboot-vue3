var de=Object.defineProperty,ue=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var D=(n,t,s)=>t in n?de(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,F=(n,t)=>{for(var s in t||(t={}))fe.call(t,s)&&D(n,s,t[s]);if(B)for(var s of B(t))ge.call(t,s)&&D(n,s,t[s]);return n},$=(n,t)=>ue(n,me(t));var c=(n,t,s)=>new Promise((h,d)=>{var x=p=>{try{C(s.next(p))}catch(u){d(u)}},z=p=>{try{C(s.throw(p))}catch(u){d(u)}},C=p=>p.done?h(p.value):Promise.resolve(p.value).then(x,z);C((s=s.apply(n,t)).next())});import{k as v,d as ve,ar as he,e as M,o as _e,U as A,a5 as S,a6 as O,aa as r,f as i,u as l,a7 as o,R as U,ag as Ce,E,V as ye,ab as xe,a9 as W,ap as be,aq as ke}from"./vue-249e5fad.js";import{p as V,A as we,aj as Se,ao as ze,g as Te}from"./index-679980cc.js";import{Z as Ie,aV as Fe,aS as Me,aW as Ae,u as Ve,C as Le}from"./jeecg-online-vendor-216a3b98.js";import{B as Ne}from"./BasicForm-e402ba31.js";import"./componentMap-a7b11ac1.js";import{u as Pe}from"./useForm-b140653f.js";import"./JAddInput-448c30de.js";import"./JSelectUser-6445886b.js";import"./JSelectDept-a510196a.js";import"./JPopup-17610371.js";import"./index-d3bb5676.js";import{aa as H,a3 as L,aQ as Re,a9 as je,as as Be}from"./antd-vue-vendor-31afcf32.js";import"./lodash-es-vendor-c1987ca1.js";import"./tinymce-vendor-676f8393.js";import"./echarts-vendor-6c8e2159.js";import"./vxe-table-vendor-0b109a77.js";import"./BasicForm.vue_vue_type_style_index_0_lang-4a18cb84.js";import"./BasicModal-9db7feac.js";import"./useWindowSizeFn-be58341e.js";import"./useFormItem-ffb99f3a.js";import"./JUpload.vue_vue_type_style_index_0_lang-bb1d589f.js";import"./download-e75f2be2.js";import"./base64Conver-fa2fe1af.js";import"./index-373123f1.js";import"./index-a84832ad.js";import"./useCountdown-4c58e3fd.js";import"./index-cab72147.js";import"./areaDataUtil-ce3f5a88.js";import"./props-cfc852e3.js";import"./JSelectBiz-75d5549c.js";import"./index-729d20ee.js";import"./codemirror-vendor-611c4582.js";import"./index-45c71305.js";import"./bem-d0082e60.js";import"./props-7b44416e.js";import"./useContextMenu-46301301.js";import"./depart.api-a2e1c84a.js";v(12);const De=(n=6,t=12)=>({min:n,max:t,marks:(()=>{const h={};for(let d=n;d<t+1;d++)h[d]={style:{color:"#fff"},label:d};return h})(),step:1}),Q=n=>(be("data-v-87eac9cf"),n=n(),ke(),n),$e={class:"p-2"},Oe={class:"bg-white mb-2 p-4"},Ue={class:"bg-white p-2"},Ee={class:"flex justify-start space-x-2"},We=Q(()=>r("div",{class:"w-50"},"每行显示数量",-1)),He=Q(()=>r("em",{class:"aui-tag"},[r("div",{class:"aui-tag-re"}),r("div",{class:"aui-tag-ye"}),r("div",{class:"aui-tag-bl"})],-1)),Qe={key:0,class:"lock-to-right"},qe={class:"title-div ellipsis"},Je=["onClick"],Ze=["src"],Ge={class:"image-mask"},Ke="https://jeecgdev.oss-cn-beijing.aliyuncs.com/temp/designCover_1655434422024.png",Xe=ve({__name:"CardList",props:{params:V.object.def({}),api:V.func,searchFormSchema:V.object.def([])},emits:["getMethod","delete","edit","view","design","add","copy"],setup(n,{emit:t}){const s=n;he(e=>({"1d04bc9c":Z.value,"69c3dd11":J.value}));const{hasPermission:h}=we(),d=H.Item,{createMessage:x}=Ve(),{clipboardRef:z,copiedRef:C}=Se(),p=v(!1),u=v(5),q=M(()=>De(4,7)),N=v([]),J=M(()=>`${200-u.value*8}px`),Z=M(()=>{let e=u.value;return e==4?"360px":e==6?"230px":e==7?"190px":"280px"}),[G,{validate:b}]=Pe({schemas:s.searchFormSchema,labelWidth:80,baseColProps:{span:6},actionColOptions:{xs:24,sm:12,md:12,lg:8,xl:8,xxl:6,style:{textAlign:"left"}},autoSubmitOnEnter:!0,submitFunc:K,resetFunc:X});function K(){return c(this,null,function*(){const e=yield b();k.value=1,yield m(e)})}function X(){return c(this,null,function*(){yield m()})}function Y(e){return c(this,null,function*(){y.value=e*3;const a=yield b();m(a)})}_e(()=>{m(),t("getMethod",m)});function m(){return c(this,arguments,function*(e={}){p.value=!0;const{api:a,params:f}=s;if(a&&Ie(a)){const _=yield a(F($(F({},f),{pageNo:k.value,pageSize:y.value}),e));N.value=_.records,P.value=_.total}p.value=!1})}const k=v(1),y=v(15),P=v(0),ee=v({showSizeChanger:!1,showQuickJumper:!0,pageSize:y,pageNo:k,total:P,showTotal:e=>`总 ${e} 条`,onChange:te,onShowSizeChange:ae});function te(e,a){return c(this,null,function*(){k.value=e,y.value=a;const f=yield b();m(f)})}function ae(e,a){return c(this,null,function*(){y.value=a;const f=yield b();m(f)})}function ne(e){return e?Te(e):Ke}function se(e){if(s.params.izTemplate==="1"){let a=[];return w()?a=[{text:"编辑",event:"1",onClick:R.bind(null,e)},{text:"复制面板",event:"2",onClick:T.bind(null,e.id)},{text:"取消模板",event:"6",onClick:I.bind(null,e,"0")}]:a=[{text:"复制面板",event:"2",onClick:T.bind(null,e.id)}],a}else{let a=[{text:"编辑",event:"1",onClick:R.bind(null,e)},{text:"复制面板",event:"2",onClick:T.bind(null,e.id)},{text:"复制路由",event:"3",onClick:oe.bind(null,e.path)}];return w()&&(e.izTemplate=="1"?a.push({text:"取消模板",event:"6",onClick:I.bind(null,e,"0")}):a.push({text:"收藏模板",event:"5",onClick:I.bind(null,e,"1")})),ie(e)?a.push({text:"删除",event:"4",onClick:j.bind(null,e)}):a.push({text:"删除",event:"4",popConfirm:{title:"是否确认删除",confirm:j.bind(null,e)}}),a}}function w(){return h("drag:template:edit")}function ie(e){return e.protectionCode&&e.protectionCode.length>0}function T(e){t("copy",e)}function oe(e){return c(this,null,function*(){e?(z.value=e,l(C)&&x.success("复制成功！")):x.warning("复制失败，请检查路径！")})}function R(e){return c(this,null,function*(){t("edit",e)})}function j(e){return c(this,null,function*(){t("delete",e)})}function le(e){return c(this,null,function*(){t("view",e)})}function ce(e){return c(this,null,function*(){s.params.izTemplate==="1"&&!w()?t("view",e.id):t("design",e)})}function I(e,a){return c(this,null,function*(){t("template",e.id,a)})}return(e,a)=>{const f=A("a-button"),_=A("Icon"),re=A("a-spin");return S(),O("div",$e,[r("div",Oe,[i(l(Ne),{onRegister:l(G)},null,8,["onRegister"])]),i(re,{spinning:p.value},{default:o(()=>[r("div",Ue,[U(e.$slots,"cardTitle",{},void 0,!0),i(l(H),{grid:{gutter:5,xs:1,sm:2,md:3,lg:3,xl:4,xxl:u.value},size:"small","data-source":N.value,pagination:ee.value},{header:o(()=>[r("div",Ee,[U(e.$slots,"header",{},void 0,!0),i(l(L),null,{title:o(()=>[We,i(l(Re),Ce({id:"slider"},q.value,{value:u.value,"onUpdate:value":a[0]||(a[0]=g=>u.value=g),onChange:Y}),null,16,["value"])]),default:o(()=>[i(f,{type:"primary",style:{"min-width":"80px"}},{default:o(()=>[i(l(Fe))]),_:1})]),_:1}),i(l(L),null,{title:o(()=>[E("刷新")]),default:o(()=>[i(f,{onClick:m},{default:o(()=>[i(l(Me))]),_:1})]),_:1})])]),renderItem:o(({item:g,index:Ye})=>[i(l(d),{style:{"margin-top":"10px"}},{default:o(()=>[i(l(je),{class:"cardItem",size:"small",headStyle:{textAlign:"left",fontWeight:"500",background:"#efefef",minHeight:"20px"},bodyStyle:{display:"none"}},{title:o(()=>[He,g.protectionCode?(S(),O("span",Qe,[i(_,{icon:"ant-design:lock-filled",size:15,style:{margin:"5px"}})])):ye("",!0)]),cover:o(()=>[r("div",qe,xe(g.name),1),r("div",{class:"image-div",onClick:pe=>ce(g)},[r("img",{src:ne(g.coverUrl)},null,8,Ze),r("div",Ge,[n.params.izTemplate==="1"&&!w()?(S(),W(_,{key:0,icon:"ant-design:eye-outlined",size:60})):(S(),W(_,{key:1,icon:"ri:drag-drop-fill",size:60}))])],8,Je)]),actions:o(()=>[i(l(L),null,{title:o(()=>[E("预览")]),default:o(()=>[i(l(Be),{key:"view",style:{"font-size":"20px"},onClick:pe=>le(g.id)},null,8,["onClick"])]),_:2},1024),i(l(ze),{trigger:["hover"],dropMenuList:se(g),popconfirm:""},{default:o(()=>[i(l(Ae),{key:"set",style:{"font-size":"20px"}})]),_:2},1032,["dropMenuList"])]),_:2},1024)]),_:2},1024)]),_:3},8,["grid","data-source","pagination"])])]),_:3},8,["spinning"])])}}});const Bt=Le(Xe,[["__scopeId","data-v-87eac9cf"]]);export{Bt as default};
