var v=(g,r,s)=>new Promise((o,l)=>{var d=t=>{try{c(s.next(t))}catch(p){l(p)}},m=t=>{try{c(s.throw(t))}catch(p){l(p)}},c=t=>t.done?o(t.value):Promise.resolve(t.value).then(d,m);c((s=s.apply(g,r)).next())});import{ad as h,l as B}from"./jeecg-online-vendor-bf2efbcb.js";import{aj as u}from"./index-fde9c72f.js";import{d as R,r as w,k as f,U as S,aV as x,ar as E,bi as T,f as V}from"./vue-c7e3516e.js";import"./antd-vue-vendor-1561c1ba.js";import"./tinymce-vendor-40778af9.js";import"./lodash-es-vendor-42c8d3d4.js";import"./codemirror-vendor-96aab763.js";import"./echarts-vendor-b30c7238.js";import"./html2canvas-vendor-654dcb8a.js";import"./vxe-table-vendor-8bace23a.js";const W=R({__name:"JSBCDemo",setup(g){const{createMessage:r}=B(),s=w({btn:["add","save","remove","clearSelection"]}),o=f(!1),l=w({current:1,pageSize:200,pageSizeOptions:["10","20","30","100","200"],total:0}),d=f([]),m=f([]),c=f([{key:"num",title:"\u5E8F\u53F7",width:80,type:u.normal},{key:"ship_name",title:"\u8239\u540D",width:180,type:u.input},{key:"call",title:"\u547C\u53EB",width:80,type:u.input},{key:"len",title:"\u957F",width:80,type:u.input},{key:"ton",title:"\u5428",width:120,defaultValue:233,type:u.input},{key:"payer",title:"\u4ED8\u6B3E\u65B9",width:120,defaultValue:"\u5F20\u4E09",type:u.input},{key:"count",title:"\u6570",width:40,type:u.normal},{key:"company",title:"\u516C\u53F8",minWidth:180,type:u.input},{key:"trend",title:"\u52A8\u5411",width:120,type:u.input}]);t();function t(){return v(this,null,function*(){o.value=!0,yield h.get({url:"/mock/vxe/getData",params:{pageNo:l.current,pageSize:l.pageSize}}).then(e=>{l.total=e.total,m.value=e.records,d.value=[]}).finally(()=>{o.value=!1})})}function p({$table:e,target:a}){e.validate().then(n=>{if(!n){let i=a.getTableData();a.getNewData(),a.getDeleteData(),o.value=!0,h.post({url:"/mock/vxe/immediateSaveAll",params:i}).then(()=>{r.success("\u4FDD\u5B58\u6210\u529F\uFF01")}).finally(()=>{o.value=!1})}})}function D(e){e.deleteRows.map(a=>a.id),o.value=!0,window.setTimeout(()=>{o.value=!1,r.success("\u5220\u9664\u6210\u529F"),e.confirmRemove()},1e3)}function F(e){let{$table:a,row:n,column:i}=e,y=i.property;a.isUpdateByRow(n,y)&&a.validate(n).then(b=>{if(!b){let C=r.loading(`\u6B63\u5728\u4FDD\u5B58"${i.title}"`,0);h.put({url:"/mock/vxe/immediateSaveRow",params:n}).then(z=>{r.success(`"${i.title}"\u4FDD\u5B58\u6210\u529F\uFF01`),a.reloadRow(n,null,y)}).finally(()=>{C()})}})}function k(e){l.current=e.current,l.pageSize=e.pageSize,t()}function _(e){d.value=e.selectedRows}return(e,a)=>{const n=S("JVxeTable"),i=S("a-card");return x(),E(i,{title:"\u5373\u65F6\u4FDD\u5B58\u793A\u4F8B",bordered:!1},{default:T(()=>[V(n,{toolbar:"",toolbarConfig:s,rowNumber:"",rowSelection:"",keepSource:"",asyncRemove:"",height:340,loading:o.value,columns:c.value,dataSource:m.value,pagination:l,onSave:p,onRemoved:D,onEditClosed:F,onPageChange:k,onSelectRowChange:_},null,8,["toolbarConfig","loading","columns","dataSource","pagination"])]),_:1})}}});export{W as default};
