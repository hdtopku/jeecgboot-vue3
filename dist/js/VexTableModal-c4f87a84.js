var w=(o,a,s)=>new Promise((m,f)=>{var g=l=>{try{d(s.next(l))}catch(i){f(i)}},p=l=>{try{d(s.throw(l))}catch(i){f(i)}},d=l=>l.done?m(l.value):Promise.resolve(l.value).then(g,p);d((s=s.apply(o,a)).next())});import{B as $}from"./index-5e1edea3.js";import{B as L}from"./index-797f995b.js";import{d as R,k as M,r as E,u as T,e as V,V as r,a5 as h,a9 as x,a7 as t,f as e,E as A,ag as U}from"./vue-5a09445c.js";import{D as O}from"./jeecg-online-vendor-a84f26e2.js";import"./BasicModal-02606f87.js";import"./antd-vue-vendor-04f0af1d.js";import"./tinymce-vendor-e2919cb0.js";import"./useWindowSizeFn-76d4329b.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-70833b4a.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";const j=R({name:"VexTableModal",components:{BasicModal:$},emits:["success","register"],setup(o,{emit:a}){const s=M(!0),m=M({}),f=M(""),g=M(),p=E({xs:{span:24},sm:{span:5}}),d=E({xs:{span:24},sm:{span:16}}),l=M([{label:"",value:""},{label:"男",value:"1"},{label:"女",value:"2"}]),i={orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},_=E({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[y,{setModalProps:v,closeModal:B}]=L(u=>w(this,null,function*(){_.orderCode="",v({confirmLoading:!1}),s.value=!!(u!=null&&u.isUpdate),T(s)&&(f.value=u.record.id,_.orderCode=u.record.orderCode)})),F=M([]),c=V(()=>T(s)?"编辑":"新增");function D(u){return w(this,null,function*(){const b=m.value,k={name:"",sex:"1",idcard:"",telphone:""},{row:n}=yield b.insertAt(k,u);yield b.setActiveCell(n,"sex")})}function C(){return w(this,null,function*(){g.value.validate().then(()=>{try{const u=m.value,{fullData:b}=u.getTableData();_.jeecgOrderCustomerList=b,v({confirmLoading:!0}),B(),a("success",{isUpdate:T(s),values:{id:f.value}})}finally{v({confirmLoading:!1})}}).catch(u=>{})})}return{xTable:m,tableData:F,sexList:l,formRef:g,validatorRules:i,orderMainModel:_,registerModal:y,getTitle:c,labelCol:p,wrapperCol:d,insertEvent:D,handleSubmit:C}}});function Y(o,a,s,m,f,g){const p=r("a-input"),d=r("a-form-item"),l=r("a-col"),i=r("a-select-option"),_=r("a-select"),y=r("a-date-picker"),v=r("a-row"),B=r("vxe-button"),F=r("vxe-toolbar"),c=r("vxe-column"),D=r("vxe-table"),C=r("a-tab-pane"),u=r("a-tabs"),b=r("a-form"),k=r("BasicModal");return h(),x(k,U(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit,width:"70%"}),{default:t(()=>[e(b,{ref:"formRef",model:o.orderMainModel,"label-col":o.labelCol,"wrapper-col":o.wrapperCol,rules:o.validatorRules},{default:t(()=>[e(v,{class:"form-row",gutter:16},{default:t(()=>[e(l,{lg:8},{default:t(()=>[e(d,{label:"订单号",name:"orderCode"},{default:t(()=>[e(p,{value:o.orderMainModel.orderCode,"onUpdate:value":a[0]||(a[0]=n=>o.orderMainModel.orderCode=n),placeholder:"请输入订单号"},null,8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"订单类型"},{default:t(()=>[e(_,{placeholder:"请选择订单类型",value:o.orderMainModel.ctype,"onUpdate:value":a[1]||(a[1]=n=>o.orderMainModel.ctype=n)},{default:t(()=>[e(i,{value:"1"},{default:t(()=>[A("国内订单")]),_:1}),e(i,{value:"2"},{default:t(()=>[A("国际订单")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"订单日期"},{default:t(()=>[e(y,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:o.orderMainModel.orderDate,"onUpdate:value":a[2]||(a[2]=n=>o.orderMainModel.orderDate=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(v,{class:"form-row",gutter:16},{default:t(()=>[e(l,{lg:8},{default:t(()=>[e(d,{label:"订单金额"},{default:t(()=>[e(p,{value:o.orderMainModel.orderMoney,"onUpdate:value":a[3]||(a[3]=n=>o.orderMainModel.orderMoney=n),placeholder:"请输入订单金额"},null,8,["value"])]),_:1})]),_:1}),e(l,{lg:8},{default:t(()=>[e(d,{label:"订单备注"},{default:t(()=>[e(p,{value:o.orderMainModel.content,"onUpdate:value":a[4]||(a[4]=n=>o.orderMainModel.content=n),placeholder:"请输入订单备注"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(u,{defaultActiveKey:"1"},{default:t(()=>[e(C,{tab:"客户信息",key:"1"},{default:t(()=>[e(F,null,{buttons:t(()=>[e(B,{icon:"fa fa-plus",onClick:a[5]||(a[5]=n=>o.insertEvent())},{default:t(()=>[A("新增")]),_:1}),e(B,{onClick:a[6]||(a[6]=n=>o.$refs.xTable.removeCheckboxRow())},{default:t(()=>[A("删除选中")]),_:1})]),_:1}),e(D,{border:"","show-overflow":"","keep-source":"",ref:"xTable","max-height":"400",data:o.orderMainModel.jeecgOrderCustomerList,"edit-config":{trigger:"click",mode:"row",icon:"fa fa-pencil",showStatus:!0}},{default:t(()=>[e(c,{type:"checkbox",width:"60",align:"center"}),e(c,{type:"seq",width:"60",align:"center"}),e(c,{field:"name",title:"客户名",sortable:"","edit-render":{name:"input",defaultValue:""}}),e(c,{field:"sex",title:"性别","edit-render":{name:"$select",options:o.sexList}},null,8,["edit-render"]),e(c,{field:"idcard",title:"身份证",sortable:"","edit-render":{name:"input",defaultValue:""}}),e(c,{field:"telphone",title:"手机",sortable:"","edit-render":{name:"input",defaultValue:""}})]),_:1},8,["data"])]),_:1}),e(C,{tab:"机票信息",key:"2",forceRender:""})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}const Z=O(j,[["render",Y],["__scopeId","data-v-22eadcc5"]]);export{Z as default};
