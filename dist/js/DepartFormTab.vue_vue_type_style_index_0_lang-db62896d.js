var I=Object.defineProperty;var w=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var C=(o,t,e)=>t in o?I(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))P.call(t,e)&&C(o,e,t[e]);if(w)for(var e of w(t))S.call(t,e)&&C(o,e,t[e]);return o};var c=(o,t,e)=>new Promise((l,r)=>{var u=s=>{try{p(e.next(s))}catch(i){r(i)}},n=s=>{try{p(e.throw(s))}catch(i){r(i)}},p=s=>s.done?l(s.value):Promise.resolve(s.value).then(u,n);p((e=e.apply(o,t)).next())});import{B as V}from"./BasicForm-e402ba31.js";import"./componentMap-a7b11ac1.js";import{u as N}from"./useForm-b140653f.js";import"./JAddInput-448c30de.js";import"./JSelectUser-6445886b.js";import"./JSelectDept-a510196a.js";import"./JPopup-17610371.js";import{m as R}from"./index-679980cc.js";import"./index-d3bb5676.js";import{a as U}from"./depart.api-a2e1c84a.js";import{o as x,u as A}from"./depart.data-400b56fa.js";import{d as z,k as _,e as E,o as G,w as y,u as m,U as F,a5 as M,a9 as $,a7 as g,f as b,aa as D,am as q,E as j}from"./vue-249e5fad.js";const H={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},ne=z({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:t}){const e=o,{prefixCls:l}=R("j-depart-form-content"),r=_(!1),u=_(!0),n=_({}),[p,{resetFields:s,setFieldsValue:i,validate:B,updateSchema:d}]=N({schemas:A().basicFormSchema,showActionButtonGroup:!1}),v=E(()=>{var a;return(a=e==null?void 0:e.data)!=null&&a.parentId?x.child:x.root});G(()=>{d([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),y(()=>e.data,()=>c(this,null,function*(){let a=m(e.data);typeof a!="object"&&(a={}),n.value=a,yield s(),yield i(f({},a))}),{deep:!0,immediate:!0}),y(()=>e.rootTreeData,()=>c(this,null,function*(){d([{field:"parentId",componentProps:{treeData:e.rootTreeData}}])}),{deep:!0,immediate:!0}),y(v,()=>c(this,null,function*(){d([{field:"orgCategory",componentProps:{options:v.value}}])}),{immediate:!0})});function O(){return c(this,null,function*(){yield s(),yield i(f({},n.value))})}function T(){return c(this,null,function*(){try{r.value=!0;let a=yield B();a=Object.assign({},n.value,a),yield U(a,u.value),t("success"),Object.assign(n.value,a)}finally{r.value=!1}})}return(a,J)=>{const h=F("a-button"),k=F("a-spin");return M(),$(k,{spinning:r.value},{default:g(()=>[b(m(V),{onRegister:m(p)},null,8,["onRegister"]),D("div",H,[D("div",{class:q(["j-box-bottom-button-float",[`${m(l)}`]])},[b(h,{preIcon:"ant-design:sync-outlined",onClick:O},{default:g(()=>[j("重置")]),_:1}),b(h,{type:"primary",preIcon:"ant-design:save-filled",onClick:T},{default:g(()=>[j("保存")]),_:1})],2)])]),_:1},8,["spinning"])}}});export{ne as _};
