var h=(y,f,r)=>new Promise((o,n)=>{var u=t=>{try{p(r.next(t))}catch(l){n(l)}},c=t=>{try{p(r.throw(t))}catch(l){n(l)}},p=t=>t.done?o(t.value):Promise.resolve(t.value).then(u,c);p((r=r.apply(y,f)).next())});import{u as b,D as A}from"./jeecg-online-vendor-9cc54e36.js";import{_ as B}from"./index-93698215.js";import{n as N,s as P}from"./depart.user.api-fb9bfb39.js";import{d as M,c as V,k as i,V as g,a5 as d,a6 as x,f as F,a7 as I,u as s,F as L,a9 as k,W as R,n as D}from"./vue-5a09445c.js";import"./antd-vue-vendor-04f0af1d.js";import"./tinymce-vendor-e2919cb0.js";import"./vxe-table-vendor-c5aaa9d2.js";import"./lodash-es-vendor-70833b4a.js";import"./index-26fb0584.js";import"./codemirror-vendor-f458506d.js";import"./echarts-vendor-6c8e2159.js";import"./bem-2217b93d.js";import"./props-17f0c5eb.js";import"./useContextMenu-73027fbb.js";const W={class:"bg-white m-4 mr-0 overflow-hidden"},j=M({__name:"DepartTree",emits:["select"],setup(y,{emit:f}){V("prefixCls");const{createMessage:r}=b();let o=i(!1),n=i([]),u=i([]),c=i([]),p=i(!0),t=i("2"),l=i(!1);function v(){o.value=!0,n.value=[],N().then(e=>{e.success?Array.isArray(e.result)&&(n.value=e.result,t.value=e.message,w()):r.warning(e.message)}).finally(()=>o.value=!1)}v();function w(){let e=[];n.value.forEach((a,_)=>{a.children&&a.children.length>0&&e.push(a.key),_===0&&m(a.id,a)}),e.length>0&&(E(),u.value=e)}function E(){return h(this,null,function*(){yield D(),l.value=!0,yield D(),l.value=!1})}function m(e,a){c.value=[e],a&&f("select",a)}function T(e){e?(o.value=!0,P({keyWord:e,myDeptSearch:"1"}).then(a=>{Array.isArray(a)?n.value=a:(r.warning("未查询到部门信息"),n.value=[])}).finally(()=>o.value=!1)):v()}function K(e,a){e.length>0&&c.value[0]!==e[0]?m(e[0],a.selectedNodes[0]):m(c.value[0])}function C(e){u.value=e,p.value=!1}return(e,a)=>{const _=g("a-empty"),S=g("a-spin");return d(),x("div",W,[F(S,{spinning:s(o)},{default:I(()=>[s(t)==="2"?(d(),x(L,{key:0},[s(l)?R("",!0):(d(),k(s(B),{key:0,title:"部门列表",toolbar:"",search:"",showLine:"",checkStrictly:!0,clickRowToExpand:!1,treeData:s(n),selectedKeys:s(c),expandedKeys:s(u),autoExpandParent:s(p),onSelect:K,onExpand:C,onSearch:T},null,8,["treeData","selectedKeys","expandedKeys","autoExpandParent"]))],64)):(d(),k(_,{key:1,description:"普通员工无此权限"}))]),_:1},8,["spinning"])])}}});const ne=A(j,[["__scopeId","data-v-892b3d18"]]);export{ne as default};
