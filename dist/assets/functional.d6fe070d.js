import{cn as e,co as t,F as n,a8 as r,_ as a,$ as i,cp as o,cq as l,bq as u,bB as c,bj as s,o as v,l as f,bs as p,cr as m,cs as d,H as g,aa as w,y as h,bu as b,ax as y,ct as C,cu as x,cv as O,ag as P,cw as k,cx as S,cy as j,cz as I,cA as L,av as N,aJ as z,az as M,aA as D,bp as _,d as A,cB as E,cC as G,aN as T,n as R,aP as X,q as Y,t as B,v as H,x as V,z as W,X as U,bc as F,V as $,bk as q,B as Z,bl as J,E as K,L as Q,C as ee,cD as te,cE as ne}from"./index.b2c24a42.js";function re(e,t,n,r){var a=t+n,i=(n-r)/2;if(n>r){if(t>0)return u({},e,i);if(t<0&&a<r)return u({},e,-i)}else if(t<0||a>r)return u({},e,t<0?i:-i);return{}}var ae=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},ie=Symbol("previewGroupContext"),oe=function(e){c(ie,e)},le=function(){return s(ie,{isPreviewGroup:n(!1),previewUrls:v((function(){return new Map})),setPreviewUrls:function(){},current:n(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null,rootClassName:""})},ue=f({name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String,preview:{type:[Boolean,Object],default:!0},icons:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=t.slots,i=v((function(){var t={visible:void 0,onVisibleChange:function(){},getContainer:void 0,current:0};return"object"===p(e.preview)?pe(e.preview,t):t})),o=r(new Map),l=n(),u=v((function(){return i.value.visible})),c=v((function(){return i.value.getContainer})),s=m(!!u.value,{value:u,onChange:function(e,t){var n,r;null===(r=(n=i.value).onVisibleChange)||void 0===r||r.call(n,e,t)}}),f=d(s,2),C=f[0],x=f[1],O=n(null),P=v((function(){return void 0!==u.value})),k=v((function(){return Array.from(o.keys())})),S=v((function(){return k.value[i.value.current]})),j=v((function(){return new Map(Array.from(o).filter((function(e){return!!d(e,2)[1].canPreview})).map((function(e){var t=d(e,2);return[t[0],t[1].url]})))})),I=function(e){l.value=e},L=function(e){O.value=e},N=function(e){null==e||e.stopPropagation(),x(!1),L(null)};return g(S,(function(e){I(e)}),{immediate:!0,flush:"post"}),w((function(){!C.value&&P.value&&I(S.value)}),{flush:"post"}),oe({isPreviewGroup:n(!0),previewUrls:j,setPreviewUrls:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];o.set(e,{url:t,canPreview:n})},current:l,setCurrent:I,setShowPreview:x,setMousePosition:L,registerImage:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(){o.delete(e)};return o.set(e,{url:t,canPreview:n}),r}}),function(){var t=ae(i.value,[]);return h(y,null,[a.default&&a.default(),h(se,b(b({},t),{},{"ria-hidden":!C.value,visible:C.value,prefixCls:e.previewPrefixCls,onClose:N,mousePosition:O.value,src:j.value.get(l.value),icons:e.icons,getContainer:c.value}),null)])}}}),ce={x:0,y:0},se=f({name:"Preview",inheritAttrs:!1,props:a(a({},C()),{src:String,alt:String,rootClassName:String,icons:{type:Object,default:function(){return{}}}}),emits:["close","afterClose"],setup:function(e,t){var c,s,f,p,m=t.emit,w=t.attrs,y=r(e.icons),C=y.rotateLeft,L=y.rotateRight,N=y.zoomIn,z=y.zoomOut,M=y.close,D=y.left,_=y.right,A=n(1),E=n(0),G=(c=ce,s=n(null),f=r(a({},c)),p=n([]),i((function(){s.value&&o.cancel(s.value)})),[f,function(e){null===s.value&&(p.value=[],s.value=o((function(){var e;p.value.forEach((function(t){e=a(a({},e),t)})),a(f,e),s.value=null}))),p.value.push(e)}]),T=d(G,2),R=T[0],X=T[1],Y=function(){return m("close")},B=n(),H=r({originX:0,originY:0,deltaX:0,deltaY:0}),V=n(!1),W=le(),U=W.previewUrls,F=W.current,$=W.isPreviewGroup,q=W.setCurrent,Z=v((function(){return U.value.size})),J=v((function(){return Array.from(U.value.keys())})),K=v((function(){return J.value.indexOf(F.value)})),Q=v((function(){return $.value?U.value.get(F.value):e.src})),ee=v((function(){return $.value&&Z.value>1})),te=n({wheelDirection:0}),ne=function(){A.value=1,E.value=0,X(ce),m("afterClose")},ae=function(){A.value++,X(ce)},ie=function(){A.value>1&&A.value--,X(ce)},oe=function(e){e.preventDefault(),e.stopPropagation(),K.value>0&&q(J.value[K.value-1])},ue=function(e){e.preventDefault(),e.stopPropagation(),K.value<Z.value-1&&q(J.value[K.value+1])},se=x(u({},"".concat(e.prefixCls,"-moving"),V.value)),ve="".concat(e.prefixCls,"-operations-operation"),fe="".concat(e.prefixCls,"-operations-icon"),pe=[{icon:M,onClick:Y,type:"close"},{icon:N,onClick:ae,type:"zoomIn"},{icon:z,onClick:ie,type:"zoomOut",disabled:v((function(){return 1===A.value}))},{icon:L,onClick:function(){E.value+=90},type:"rotateRight"},{icon:C,onClick:function(){E.value-=90},type:"rotateLeft"}],me=function(){if(e.visible&&V.value){var t=B.value.offsetWidth*A.value,n=B.value.offsetHeight*A.value,r=j(B.value),i=r.left,o=r.top,u=E.value%180!=0;V.value=!1;var c=function(e,t,n,r){var i=l(),o=i.width,u=i.height,c=null;return e<=o&&t<=u?c={x:0,y:0}:(e>o||t>u)&&(c=a(a({},re("x",n,e,o)),re("y",r,t,u))),c}(u?n:t,u?t:n,i,o);c&&X(a({},c))}},de=function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),H.deltaX=e.pageX-R.x,H.deltaY=e.pageY-R.y,H.originX=R.x,H.originY=R.y,V.value=!0)},ge=function(t){e.visible&&V.value&&X({x:t.pageX-H.deltaX,y:t.pageY-H.deltaY})},we=function(t){if(e.visible){t.preventDefault();var n=t.deltaY;te.value={wheelDirection:n}}},he=function(t){e.visible&&ee.value&&(t.preventDefault(),t.keyCode===I.LEFT?K.value>0&&q(J.value[K.value-1]):t.keyCode===I.RIGHT&&K.value<Z.value-1&&q(J.value[K.value+1]))},be=function(){e.visible&&(1!==A.value&&(A.value=1),R.x===ce.x&&R.y===ce.y||X(ce))},ye=function(){};return i((function(){g([function(){return e.visible},V],(function(){var e,t;ye();var n=O(window,"mouseup",me,!1),r=O(window,"mousemove",ge,!1),a=O(window,"wheel",we,{passive:!1}),i=O(window,"keydown",he,!1);try{window.top!==window.self&&(e=O(window.top,"mouseup",me,!1),t=O(window.top,"mousemove",ge,!1))}catch(o){}ye=function(){n.remove(),r.remove(),a.remove(),i.remove(),e&&e.remove(),t&&t.remove()}}),{flush:"post",immediate:!0}),g([te],(function(){var e=te.value.wheelDirection;e>0?ie():e<0&&ae()}))})),P((function(){ye()})),function(){var t=e.visible,n=e.prefixCls,r=e.rootClassName;return h(S,b(b({},w),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:n,onClose:Y,afterClose:ne,visible:t,wrapClassName:se,rootClassName:r,getContainer:e.getContainer}),{default:function(){return[h("ul",{class:"".concat(e.prefixCls,"-operations")},[pe.map((function(t){var n=t.icon,r=t.onClick,a=t.type,i=t.disabled;return h("li",{class:x(ve,u({},"".concat(e.prefixCls,"-operations-operation-disabled"),i&&(null==i?void 0:i.value))),onClick:r,key:a},[k(n,{class:fe})])}))]),h("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(R.x,"px, ").concat(R.y,"px, 0)")}},[h("img",{onMousedown:de,onDblclick:be,ref:B,class:"".concat(e.prefixCls,"-img"),src:Q.value,alt:e.alt,style:{transform:"scale3d(".concat(A.value,", ").concat(A.value,", 1) rotate(").concat(E.value,"deg)")}},null)]),ee.value&&h("div",{class:x("".concat(e.prefixCls,"-switch-left"),u({},"".concat(e.prefixCls,"-switch-left-disabled"),K.value<=0)),onClick:oe},[D]),ee.value&&h("div",{class:x("".concat(e.prefixCls,"-switch-right"),u({},"".concat(e.prefixCls,"-switch-right-disabled"),K.value>=Z.value-1)),onClick:ue},[_])]}})}}}),ve=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},fe=function(){return{src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},rootClassName:String,prefixCls:String,previewPrefixCls:String,previewMask:{type:[Boolean,Function],default:void 0},placeholder:L.any,fallback:String,preview:{type:[Boolean,Object],default:!0},onClick:{type:Function},onError:{type:Function}}},pe=function(e,t){var n=a({},e);return Object.keys(t).forEach((function(r){void 0===e[r]&&(n[r]=t[r])})),n},me=0,de=f({name:"Image",inheritAttrs:!1,props:fe(),emits:["click","error"],setup:function(r,o){var l=o.attrs,c=o.slots,s=o.emit,f=v((function(){return r.prefixCls})),w=v((function(){return"".concat(f.value,"-preview")})),C=v((function(){var e={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return"object"===p(r.preview)?pe(r.preview,e):e})),O=v((function(){return r.placeholder&&!0!==r.placeholder||c.placeholder})),k=v((function(){return C.value.visible})),S=v((function(){return C.value.getContainer})),I=v((function(){return void 0!==k.value})),L=function(e,t){var n,r;null===(r=(n=C.value).onVisibleChange)||void 0===r||r.call(n,e,t)},N=m(!!k.value,{value:k,onChange:L}),z=d(N,2),M=z[0],D=z[1];g(M,(function(e,t){L(e,t)}));var _=n(O.value?"loading":"normal");g((function(){return r.src}),(function(){_.value=O.value?"loading":"normal"}));var A=n(null),E=v((function(){return"error"===_.value})),G=le(),T=G.isPreviewGroup,R=G.setCurrent,X=G.setShowPreview,Y=G.setMousePosition,B=G.registerImage,H=n(me++),V=v((function(){return r.preview&&!E.value})),W=function(){_.value="normal"},U=function(e){_.value="error",s("error",e)},F=function(e){if(!I.value){var t=j(e.target),n=t.left,r=t.top;T.value?(R(H.value),Y({x:n,y:r})):A.value={x:n,y:r}}T.value?X(!0):D(!0),s("click",e)},$=function(){D(!1),I.value||(A.value=null)},q=n(null);g((function(){return q}),(function(){"loading"===_.value&&q.value.complete&&(q.value.naturalWidth||q.value.naturalHeight)&&W()}));var Z=function(){};i((function(){g([function(){return r.src},V],(function(){if(Z(),!T.value)return function(){};Z=B(H.value,r.src,V.value),V.value||Z()}),{flush:"post",immediate:!0})})),P(Z);var J=function(n){return"number"==typeof(r=n)||e(r)&&"[object Number]"==t(r)?n+"px":n;var r};return function(){var e=r.prefixCls,t=r.wrapperClassName,n=r.fallback,i=r.src,o=r.placeholder,v=r.wrapperStyle,f=r.rootClassName,p=l.width,m=l.height,d=l.crossorigin,g=l.decoding,O=l.alt,P=l.sizes,k=l.srcset,j=l.usemap,I=l.class,L=l.style,N=C.value,z=N.icons,D=N.maskClassName,G=N.src,R=ve(N,["icons","maskClassName","src"]),X=x(e,t,f,u({},"".concat(e,"-error"),E.value)),Y=E.value&&n?n:null!=G?G:i,B={crossorigin:d,decoding:g,alt:O,sizes:P,srcset:k,usemap:j,class:x("".concat(e,"-img"),u({},"".concat(e,"-img-placeholder"),!0===o),I),style:a({height:m},L)};return h(y,null,[h("div",{class:X,onClick:V.value?F:function(e){s("click",e)},style:a({width:J(p),height:J(m)},v)},[h("img",b(b(b({},B),E.value&&n?{src:n}:{onLoad:W,onError:U,src:i}),{},{ref:q}),null),"loading"===_.value&&h("div",{"aria-hidden":"true",class:"".concat(e,"-placeholder")},[o||c.placeholder&&c.placeholder()]),c.previewMask&&V.value&&h("div",{class:["".concat(e,"-mask"),D]},[c.previewMask()])]),!T.value&&V.value&&h(se,b(b({},R),{},{"aria-hidden":!M.value,visible:M.value,prefixCls:w.value,onClose:$,mousePosition:A.value,src:Y,alt:O,getContainer:S.value,icons:z,rootClassName:f}),null)])}}});de.PreviewGroup=ue;var ge=de,we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){be(e,t,n[t])}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e,t){var n=he({},e,t.attrs);return h(N,he({},n,{icon:we}),null)};ye.displayName="RotateLeftOutlined",ye.inheritAttrs=!1;var Ce=ye,xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e,t){var n=Oe({},e,t.attrs);return h(N,Oe({},n,{icon:xe}),null)};ke.displayName="RotateRightOutlined",ke.inheritAttrs=!1;var Se=ke,je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Le(e,t,n[t])}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e,t){var n=Ie({},e,t.attrs);return h(N,Ie({},n,{icon:je}),null)};Ne.displayName="ZoomInOutlined",Ne.inheritAttrs=!1;var ze=Ne,Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_e(e,t,n[t])}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=function(e,t){var n=De({},e,t.attrs);return h(N,De({},n,{icon:Me}),null)};Ae.displayName="ZoomOutOutlined",Ae.inheritAttrs=!1;var Ee=Ae,Ge={rotateLeft:h(Ce,null,null),rotateRight:h(Se,null,null),zoomIn:h(ze,null,null),zoomOut:h(Ee,null,null),close:h(z,null,null),left:h(M,null,null),right:h(D,null,null)},Te=f({name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,t){var n=t.attrs,r=t.slots,i=_("image",e).getPrefixCls,o=v((function(){return i("image-preview",e.previewPrefixCls)}));return function(){return h(ue,b(b({},a(a({},n),e)),{},{icons:Ge,previewPrefixCls:o.value}),r)}}}),Re=f({name:"AImage",inheritAttrs:!1,props:fe(),setup:function(e,t){var n=t.slots,r=t.attrs,i=_("image",e),o=i.prefixCls,l=i.rootPrefixCls,u=i.configProvider,c=v((function(){var t=e.preview;if(!1===t)return t;var n="object"===p(t)?t:{};return a(a({icons:Ge},n),{transitionName:E(l.value,"zoom",n.transitionName),maskTransitionName:E(l.value,"fade",n.maskTransitionName)})}));return function(){var t,i=(null===(t=u.locale)||void 0===t?void 0:t.Image)||A.Image,l=e.previewMask,s=void 0===l?n.previewMask||function(){return h("div",{class:"".concat(o.value,"-mask-info")},[h(G,null,null),null==i?void 0:i.preview])}:l;return h(ge,b(b({},a(a(a({},r),e),{prefixCls:o.value})),{},{preview:c.value}),a(a({},n),{previewMask:"function"==typeof s?s:null}))}}});Re.PreviewGroup=Te,Re.install=function(e){return e.component(Re.name,Re),e.component(Re.PreviewGroup.name,Re.PreviewGroup),e};var Xe=Re;var Ye,Be,He=Y(f({name:"ImagePreview",components:{Image:Xe,PreviewGroup:Xe.PreviewGroup},props:{functional:T.bool,imageList:{type:Array}},setup(e){const{prefixCls:t}=R("image-preview");return{prefixCls:t,getImageList:v((()=>{const{imageList:t}=e;return t?t.map((e=>X(e)?{src:e,placeholder:!1}:e)):[]}))}}}),[["render",function(e,t,n,r,a,i){const o=B("Image"),l=B("PreviewGroup");return H(),V("div",{class:K(e.prefixCls)},[h(l,null,{default:W((()=>[!e.imageList||e.$slots.default?U(e.$slots,"default",{key:0}):(H(!0),V(y,{key:1},F(e.getImageList,(e=>(H(),$(o,J(Z({key:e.src},e)),q({_:2},[e.placeholder?{name:"placeholder",fn:W((()=>[h(o,Z(e,{src:e.placeholder,preview:!1}),null,16,["src"])])),key:"0"}:void 0]),1040)))),128))])),_:3})],2)}]]);(Be=Ye||(Ye={}))[Be.LOADING=0]="LOADING",Be[Be.DONE=1]="DONE",Be[Be.FAIL=2]="FAIL";const Ve={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0},scaleStep:{type:Number},defaultWidth:{type:Number},maskClosable:{type:Boolean},rememberState:{type:Boolean}},We="img-preview";var Ue=f({name:"ImagePreview",props:Ve,emits:["img-load","img-error"],setup(e,{expose:t,emit:a}){const i=new Map,o=r({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:Ye.LOADING,currentIndex:0,moveX:0,moveY:0,show:e.show}),l=n(null),u=n(null);function c(){!function(){const e=Q(l);if(!e)return;e.onmousewheel=p,document.body.addEventListener("DOMMouseScroll",p),document.ondragstart=function(){return!1}}();const{index:t,imageList:n}=e;if(!n||!n.length)throw new Error("imageList is undefined");o.currentIndex=t,b(n[t])}function s(){o.imgScale=1,o.imgRotate=0,o.imgTop=0,o.imgLeft=0}const f=v((()=>{var t;const n=null!=(t=null==e?void 0:e.scaleStep)?t:0;return null!=n&&n?n/100:o.imgScale/10}));function p(e){(e=e||window.event).delta=e.wheelDelta||-e.detail,e.preventDefault(),e.delta>0&&m(f.value),e.delta<0&&m(-f.value)}function m(e){o.imgScale<=.2&&e<0||(o.imgScale+=e)}function d(e){o.imgRotate+=e}function g(){const e=Q(u);e&&(e.onmousemove=null)}function b(t){o.status=Ye.LOADING;const n=new Image;n.src=t,n.onload=n=>{if(o.currentUrl!==t){const r=n.composedPath();if(e.rememberState){i.set(o.currentUrl,{scale:o.imgScale,top:o.imgTop,left:o.imgLeft,rotate:o.imgRotate});const n=i.get(t);n?(o.imgScale=n.scale,o.imgTop=n.top,o.imgRotate=n.rotate,o.imgLeft=n.left):(s(),e.defaultWidth&&(o.imgScale=e.defaultWidth/r[0].naturalWidth))}else e.defaultWidth&&(o.imgScale=e.defaultWidth/r[0].naturalWidth);r&&a("img-load",{index:o.currentIndex,dom:r[0],url:t})}o.currentUrl=t,o.status=Ye.DONE},n.onerror=e=>{const n=e.composedPath();n&&a("img-error",{index:o.currentIndex,dom:n[0],url:t}),o.status=Ye.FAIL}}function y(e){e&&e.stopPropagation(),C()}function C(){o.show=!1,document.body.removeEventListener("DOMMouseScroll",p),document.ondragstart=null}function x(){s()}function O(t){const{currentIndex:n}=o,{imageList:r}=e;"left"===t&&(o.currentIndex--,n<=0&&(o.currentIndex=r.length-1)),"right"===t&&(o.currentIndex++,n>=r.length-1&&(o.currentIndex=0)),b(r[o.currentIndex])}function P(e){e=e||window.event,o.moveX=e.clientX,o.moveY=e.clientY;const t=Q(u);t&&(t.onmousemove=k)}function k(e){(e=e||window.event).preventDefault();const t=e.clientX-o.moveX,n=e.clientY-o.moveY;o.imgLeft+=t,o.imgTop+=n,o.moveX=e.clientX,o.moveY=e.clientY}t({resume:x,close:C,prev:O.bind(null,"left"),next:O.bind(null,"right"),setScale:e=>{e>0&&e<=10&&(o.imgScale=e)},setRotate:e=>{o.imgRotate=e}});const S=v((()=>{const{imgScale:t,imgRotate:n,imgTop:r,imgLeft:a}=o;return{transform:`scale(${t}) rotate(${n}deg)`,marginTop:`${r}px`,marginLeft:`${a}px`,maxWidth:e.defaultWidth?"unset":"100%"}})),j=v((()=>{const{imageList:t}=e;return t.length>1}));w((()=>{e.show&&c(),e.imageList&&s()}));const I=t=>{e.maskClosable&&t.target&&t.target.classList.contains("img-preview-content")&&y(t)},L=()=>{if(!Q(j))return null;const{currentIndex:t}=o,{imageList:n}=e;return h("div",{class:"img-preview__index"},[t+1,ee(" / "),n.length])},N=e=>Q(j)?h("div",{class:["img-preview__arrow",e],onClick:()=>O(e)},[h("left"===e?M:D,null,null)]):null;return()=>o.show&&h("div",{class:We,ref:l,onMouseup:g,onClick:I},[h("div",{class:"img-preview-content"},[h("img",{style:Q(S),class:["img-preview-image",o.status===Ye.DONE?"":"hidden"],ref:u,src:o.currentUrl,onMousedown:P},null),h("div",{class:"img-preview__close",onClick:y},[h(z,{class:"img-preview__close-icon"},null)]),L(),h("div",{class:"img-preview__controller"},[h("div",{class:"img-preview__controller-item",onClick:()=>m(-f.value)},[h("img",{src:"/assets/unscale.c552f416.svg"},null)]),h("div",{class:"img-preview__controller-item",onClick:()=>m(f.value)},[h("img",{src:"/assets/scale.44abde22.svg"},null)]),h("div",{class:"img-preview__controller-item",onClick:x},[h("img",{src:"/assets/resume.8f27866b.svg"},null)]),h("div",{class:"img-preview__controller-item",onClick:()=>d(-90)},[h("img",{src:"/assets/unrotate.ef6a2daf.svg"},null)]),h("div",{class:"img-preview__controller-item",onClick:()=>d(90)},[h("img",{src:"/assets/p-rotate.cb8bbfc3.svg"},null)])]),N("left"),N("right")])])}});let Fe=null;function $e(e){var t;if(!te)return;const n={},r=document.createElement("div");return Object.assign(n,{show:!0,index:0,scaleStep:100},e),Fe=h(Ue,n),ne(Fe,r),document.body.appendChild(r),null==(t=Fe.component)?void 0:t.exposed}export{Xe as I,He as a,$e as c};
