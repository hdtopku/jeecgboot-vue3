import{B as e}from"./BasicTable.8cbbb86a.js";import{T as o}from"./helper.7e5efd4b.js";import"./TableImg.f02873d7.js";import{f0 as t,H as n,t as i,v as a,x as l,y as r,V as s,z as d,C as c,W as p,ax as u,bc as m,D as g,R as f,S as b,aW as h,E as j,bl as y,bm as C,dE as S,B as I,ep as w,fh as M,ad as x,u as T}from"./index.26a57b91.js";import k from"./OnlineAutoModal.b463e7bd.js";import B from"./OnlineCustomModal.1a2c2e2f.js";import F from"./OnlineDetailModal.0410a998.js";import{J as R}from"./JImportModal.8ec266c5.js";import{u as D,a as O}from"./useListButton.f3fba3a4.js";import{a as v,c as L,j as A,g as _}from"./useAutoForm.67b4b6d8.js";import E from"./OnlineQueryForm.a53cc830.js";import P from"./OnlineSuperQuery.9ce00950.js";import"./index.934459b9.js";import"./BasicForm.5f094c03.js";import"./JAddInput.a2bd8bfb.js";import"./JUpload.7c63ef7b.js";import"./JUploadModal.4b0dd4d4.js";import"./pick.dbff1c58.js";import"./omit.d6518a29.js";import"./OnlineSelectCascade.2c5f6973.js";import"./Area.5f50cf87.js";import"./functional.c7818516.js";import"./LinkTableListPiece.ee26873b.js";import"./_flatRest.ff1861ce.js";import"./isArray.40a4ed15.js";import"./toString.cf909882.js";import"./_arrayPush.8821345e.js";import"./_baseClone.a8082016.js";import"./CommentPanel.04ee21e3.js";import"./DetailForm.371b8607.js";import"./api.54a4ca84.js";import"./OnlineSuperQueryValComponent.vue_vue_type_script_lang.4e04ad91.js";import"./useForm.18cf269c.js";import"./index.1a78ea68.js";import"./useContentHeight.3e69d770.js";import"./onMountedOrActivated.d719a17d.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useContentViewHeight.34b8e2f1.js";import"./usePageContext.dd16d566.js";import"./BasicModal.e5e1fb3e.js";import"./RedoOutlined.48666e00.js";import"./useFormItem.efca0b58.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./index.9c299300.js";import"./OnlineForm.4b8653d0.js";import"./FormSchemaFactory.00db1169.js";import"./uniqBy.006870c7.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";import"./user.api.c522f7b9.js";import"./_commonjsHelpers.7ef9cff5.js";import"./customExpression.58041e91.js";import"./useListPage.fd3526da.js";import"./useTable.98dbd6c0.js";import"./JModalTip.6a90f9c1.js";import"./_baseSlice.23bb44df.js";import"./OnlineFormDetail.4e0f4382.js";import"./OnlineSubFormDetail.fb92e95f.js";var Q=(e,o,t)=>new Promise(((n,i)=>{var a=e=>{try{r(t.next(e))}catch(o){i(o)}},l=e=>{try{r(t.throw(e))}catch(o){i(o)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,l);r((t=t.apply(e,o)).next())}));const H=Symbol();function J(e){const o=M();o.on("openpopmodal",(function(o){e(o)})),x({onlineEmitter:o},H,{readonly:!1,native:!0})}const q={class:"p-2"},z={key:0,style:{"font-size":"12px","font-style":"italic"}},U={key:0,style:{"font-size":"12px","font-style":"italic"}},V=["src","onClick"],W=["innerHTML"],K=["title"];var N=t({name:"DefaultOnlineList",components:{BasicTable:e,TableAction:o,OnlineAutoModal:k,JImportModal:R,OnlineQueryForm:E,OnlineSuperQuery:P,OnlineCustomModal:B,OnlineDetailModal:F,OnlinePopModal:v},setup(){const{createMessage:e}=T(),{ID:o,onlineTableContext:t,onlineQueryFormOuter:i,loading:a,reload:l,dataSource:r,pagination:s,handleSpecialConfig:d,getColumnList:c,handleChangeInTable:p,loadData:u,superQueryButtonRef:m,superQueryStatus:g,handleSuperQuery:f,onlineExtConfigJson:b,handleFormConfig:h,registerCustomModal:j,tableReloading:y}=D();if(!o.value)return void e.warning("地址错误, 配置ID不存在!");let{initCgEnhanceJs:C}=L(t);const{buttonSwitch:S,cgLinkButtonList:I,cgTopButtonList:w,importUrl:M,registerModal:x,handleAdd:k,handleEdit:B,handleBatchDelete:F,registerImportModal:R,onImportExcel:v,onExportExcel:E,cgButtonJsHandler:P,cgButtonActionHandler:H,cgButtonLinkHandler:q,handleSubmitFlow:z,getDropDownActions:U,getActions:V,initButtonList:W,initButtonSwitch:K,registerDetailModal:N,registerBpmModal:G}=O(t,b),{columns:X,actionColumn:Y,selectedKeys:Z,rowSelection:$,enableScrollBar:ee,tableScroll:oe,downloadRowFile:te,getImgView:ne,getPcaText:ie,getFormatDate:ae,handleColumnResult:le,hrefComponent:re,viewOnlineCellImage:se,hrefMainTableId:de,registerOnlineHrefModal:ce,registerPopModal:pe,openPopModal:ue,onlinePopModalRef:me,popTableId:ge}=A(t,b);n(o,(()=>{!function(){Q(this,null,(function*(){a.value=!0,function(e){let o=C(e.enhanceJs);t.EnhanceJS=o,W(e.cgButtonList),K(e.hideColumns),le(e),d(e)}(yield c()),yield u(),a.value=!1,t.execButtonEnhance("setup")}))}()}),{immediate:!0}),J((function(e){ge.value=e.id;let o={title:e.describe};e.record&&e.record.id&&(o.record=e.record,o.isUpdate=!0),ue(!0,o)}));return{ID:o,onlineQueryFormOuter:i,queryWithCondition:function(e){t.queryParam=e,l()},onQueryFormLoaded:function(e){return Q(this,null,(function*(){yield _(m),m.value.init(e)}))},reload:l,superQueryButtonRef:m,superQueryStatus:g,handleSuperQuery:f,loading:a,columns:X,dataSource:r,pagination:s,actionColumn:Y,rowSelection:$,selectedKeys:Z,tableScroll:oe,enableScrollBar:ee,handleChangeInTable:p,buttonSwitch:S,handleAdd:k,handleEdit:B,onImportExcel:v,onExportExcel:E,cgTopButtonList:w,cgLinkButtonList:I,cgButtonJsHandler:P,cgButtonActionHandler:H,cgButtonLinkHandler:q,handleBatchDelete:F,downloadRowFile:te,getImgView:ne,getPcaText:ie,getFormatDate:ae,getActions:V,getDropDownActions:U,registerModal:x,registerCustomModal:j,registerImportModal:R,registerDetailModal:N,importUrl:M,handleFormConfig:h,onlinePopModalRef:me,tableReloading:y,handleSubmitFlow:z,hrefComponent:re,viewOnlineCellImage:se,hrefMainTableId:de,onlineExtConfigJson:b,registerOnlineHrefModal:ce,registerPopModal:pe,popTableId:ge,registerBpmModal:G}}},[["render",function(e,o,t,n,M,x){const T=i("online-query-form"),k=i("a-button"),B=i("online-super-query"),F=i("TableAction"),R=i("BasicTable"),D=i("OnlineAutoModal"),O=i("online-detail-modal"),v=i("JImportModal"),L=i("a-modal"),A=i("online-custom-modal"),_=i("online-pop-modal");return a(),l("div",q,[r(T,{ref:"onlineQueryFormOuter",id:e.ID,onSearch:e.queryWithCondition,onLoaded:e.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),e.tableReloading?p("",!0):(a(),s(R,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e.loading,columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,actionColumn:e.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:e.tableScroll,onTableRedo:e.reload,class:j({"j-table-force-nowrap":e.enableScrollBar}),onChange:e.handleChangeInTable},{tableTitle:d((()=>[e.buttonSwitch.add?(a(),s(k,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e.handleAdd},{default:d((()=>[c("新增")])),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.import?(a(),s(k,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e.onImportExcel},{default:d((()=>[c("导入")])),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.export?(a(),s(k,{key:2,preIcon:"ant-design:export-outlined",type:"primary",onClick:e.onExportExcel},{default:d((()=>[c(" 导出")])),_:1},8,["onClick"])):p("",!0),e.cgTopButtonList&&e.cgTopButtonList.length>0?(a(!0),l(u,{key:3},m(e.cgTopButtonList,((o,t)=>(a(),l(u,null,["js"==o.optType?(a(),s(k,{key:"cgbtn"+t,onClick:t=>e.cgButtonJsHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:d((()=>[c(g(o.buttonName),1)])),_:2},1032,["onClick","preIcon"])):"action"==o.optType?(a(),s(k,{key:"cgbtn"+t,onClick:t=>e.cgButtonActionHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:d((()=>[c(g(o.buttonName),1)])),_:2},1032,["onClick","preIcon"])):p("",!0)],64)))),256)):p("",!0),e.buttonSwitch.batch_delete?f((a(),s(k,{key:4,preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:d((()=>[c(" 批量删除")])),_:1},8,["onClick"])),[[b,e.selectedKeys.length>0]]):p("",!0),e.buttonSwitch.super_query?(a(),s(B,{key:5,ref:"superQueryButtonRef",status:e.superQueryStatus,onSearch:e.handleSuperQuery},null,8,["status","onSearch"])):p("",!0)])),fileSlot:d((({text:o})=>[o?(a(),s(k,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:t=>e.downloadRowFile(o)},{default:d((()=>[c(" 下载 ")])),_:2},1032,["onClick"])):(a(),l("span",z,"无文件"))])),imgSlot:d((({text:o})=>[o?(a(),l("img",{key:1,src:e.getImgView(o),alt:"图片不存在",class:"online-cell-image",onClick:t=>e.viewOnlineCellImage(o)},null,8,V)):(a(),l("span",U,"无图片"))])),htmlSlot:d((({text:e})=>[h("div",{innerHTML:e},null,8,W)])),pcaSlot:d((({text:o})=>[h("div",{title:e.getPcaText(o)},g(e.getPcaText(o)),9,K)])),dateSlot:d((({text:o})=>[h("span",null,g(e.getFormatDate(o)),1)])),action:d((({record:o})=>[r(F,{actions:e.getActions(o),dropDownActions:e.getDropDownActions(o)},null,8,["actions","dropDownActions"])])),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),r(D,{id:e.ID,onRegister:e.registerModal,onSuccess:e.reload,onFormConfig:e.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),r(O,{id:e.ID,onRegister:e.registerDetailModal},null,8,["id","onRegister"]),r(v,{onRegister:e.registerImportModal,url:e.importUrl(),onOk:e.reload,online:""},null,8,["onRegister","url","onOk"]),r(L,I(e.hrefComponent.model,w(e.hrefComponent.on)),{default:d((()=>[(a(),s(S(e.hrefComponent.is),y(C(e.hrefComponent.params)),null,16))])),_:1},16),r(A,{onRegister:e.registerCustomModal,onSuccess:e.reload},null,8,["onRegister","onSuccess"]),r(O,{id:e.hrefMainTableId,onRegister:e.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),r(_,{ref:"onlinePopModalRef",id:e.popTableId,onRegister:e.registerPopModal,onSuccess:e.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}]]);export{N as default};
