var l=(C,u,r)=>new Promise((p,c)=>{var m=t=>{try{i(r.next(t))}catch(n){c(n)}},b=t=>{try{i(r.throw(t))}catch(n){c(n)}},i=t=>t.done?p(t.value):Promise.resolve(t.value).then(m,b);i((r=r.apply(C,u)).next())});import z from"./BasicTable.a41212ce.js";import{T as D}from"./componentMap.fb20707e.js";import"./BasicTable.vue_vue_type_style_index_0_lang.68263dc2.js";import"./useTable.a1a29200.js";import{j as K,bj as N,m as V,bI as H,E as O,H as a,i as y,r as d,s as F,t as P,v as o,w as s,y as g,Q as U,R as $,u as J}from"./index.4c230d5e.js";import{_ as Q}from"./JeecgOrderCustomerModal.vue_vue_type_script_setup_true_lang.16984837.js";import{useListPage as q}from"./useListPage.648748b2.js";import"./index.ae44de4e.js";import{c as G,a as W,d as X,b as Y}from"./erplist.api.16680a64.js";const ie=K({__name:"JeecgOrderCustomerList",setup(C){const u=N("orderId",V(()=>"")),r=J(),[p,{openModal:c}]=H(),m={},{prefixCls:b,tableContext:i}=q({tableProps:{api:E,tableSetting:{cacheKey:"customer"},columns:G,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[t,{reload:n,setSelectedRowKeys:I},{rowSelection:B,selectedRowKeys:_}]=i;O(u,()=>{m.orderId=a(u),n(),I([])});function E(e){return l(this,null,function*(){let{orderId:f}=e;return f==null||y(f)?[]:yield W(e)})}function S(){if(console.log("orderId=====\u300B",u),y(a(u))){r.createMessage.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u8BA2\u5355\u4FE1\u606F");return}c(!0,{isUpdate:!1,showFooter:!0})}function k(e){return l(this,null,function*(){c(!0,{record:e,isUpdate:!0,showFooter:!0})})}function R(e){return l(this,null,function*(){yield Y({id:e.id},n)})}function v(){return l(this,null,function*(){yield X({ids:_.value},()=>{_.value=[],n()})})}function T(){n()}function x(e){return[{label:"\u7F16\u8F91",onClick:k.bind(null,e)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:R.bind(null,e)}}]}return(e,f)=>{const w=d("a-button"),h=d("Icon"),A=d("a-menu-item"),M=d("a-menu"),L=d("a-dropdown");return F(),P("div",null,[o(a(z),{onRegister:a(t),rowSelection:a(B),searchInfo:m},{tableTitle:s(()=>[o(w,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:S},{default:s(()=>[g(" \u65B0\u589E")]),_:1}),a(_).length>0?(F(),U(L,{key:0},{overlay:s(()=>[o(M,null,{default:s(()=>[o(A,{key:"1",onClick:v},{default:s(()=>[o(h,{icon:"ant-design:delete-outlined"}),g(" \u5220\u9664 ")]),_:1})]),_:1})]),default:s(()=>[o(w,null,{default:s(()=>[g("\u6279\u91CF\u64CD\u4F5C "),o(h,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):$("",!0)]),action:s(({record:j})=>[o(a(D),{actions:x(j)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),o(Q,{onRegister:a(p),onSuccess:T},null,8,["onRegister"])])}}});export{ie as _};
