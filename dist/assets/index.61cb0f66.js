import{dL as M,fJ as P,o as d,ab as E,L as l,l as L,q as C,t as h,v as i,x as g,aw as v,bb as I,R as S,S as K,V as p,W as _,ao as $,fN as w,y as R,z as N,dE as b,fO as V,n as B,m as O,$ as A,aU as D,E as Q}from"./index.23784a6b.js";import q from"./index.28bff267.js";import{useMultipleTabSetting as k}from"./useMultipleTabSetting.c5acd275.js";import{u as z}from"./uniqBy.d45e63ad.js";import{a as G}from"./useContentViewHeight.6b076a37.js";import"./useWindowSizeFn.c7f5a452.js";import"./usePageContext.0eee1b9e.js";function H(){const e=M(),{currentRoute:r}=e,{getShowMultipleTab:a}=k(),s=P(),c=d(()=>n(E(e.getRoutes()))||[]),u=d(()=>s.getTabList.reduce((o,m)=>(m.meta&&Reflect.has(m.meta,"frameSrc")&&o.push(m.name),o),[]));function n(o){let m=[];for(const F of o){const{meta:{frameSrc:T}={},children:y}=F;T&&m.push(F),y&&y.length&&m.push(...n(y))}return m=z(m,"name"),m}function t(o){return o.name===l(r).name}function f(o){return l(a)?l(u).includes(o):e.currentRoute.value.name===o}return{hasRenderFrame:f,getFramePages:c,showIframe:t,getAllFramePages:n}}const J=L({name:"FrameLayout",components:{FramePage:q},setup(){const{getFramePages:e,hasRenderFrame:r,showIframe:a}=H(),s=d(()=>l(e).length>0);return{getFramePages:e,hasRenderFrame:r,showIframe:a,showFrame:s}}}),U={key:0};function W(e,r,a,s,c,u){const n=h("FramePage");return e.showFrame?(i(),g("div",U,[(i(!0),g(v,null,I(e.getFramePages,t=>(i(),g(v,{key:t.path},[t.meta.frameSrc&&e.hasRenderFrame(t.name)?S((i(),p(n,{key:0,frameSrc:t.meta.frameSrc},null,8,["frameSrc"])),[[K,e.showIframe(t)]]):_("",!0)],64))),128))])):_("",!0)}var j=C(J,[["render",W]]);function X({route:e,openCache:r,cacheTabs:a,enableTransition:s,def:c}){if(!s)return;const u=a.includes(e.name),n="fade-slide";let t=n;return r&&(t=u&&e.meta.loaded?n:void 0),t||e.meta.transitionName||c}const Y=L({name:"PageLayout",components:{FrameLayout:j},setup(){const{getShowMultipleTab:e}=k(),r=P(),{getOpenKeepAlive:a,getCanEmbedIFramePage:s}=$(),{getBasicTransition:c,getEnableTransition:u}=w(),n=d(()=>l(a)&&l(e)),t=d(()=>l(a)?r.getCachedTabList:[]);return{getTransitionName:X,openCache:n,getEnableTransition:u,getBasicTransition:c,getCaches:t,getCanEmbedIFramePage:s}}});function Z(e,r,a,s,c,u){const n=h("RouterView"),t=h("FrameLayout");return i(),g(v,null,[R(n,null,{default:N(({Component:f,route:o})=>[e.openCache?(i(),p(V,{key:0,include:e.getCaches},[(i(),p(b(f),{key:o.fullPath}))],1032,["include"])):(i(),p(b(f),{key:o.fullPath}))]),_:1}),e.getCanEmbedIFramePage?(i(),p(t,{key:0})):_("",!0)],64)}var x=C(Y,[["render",Z]]);const ee=L({name:"LayoutContent",components:{PageLayout:x},setup(){const{prefixCls:e}=B("layout-content"),{getOpenPageLoading:r}=w(),{getLayoutContentMode:a,getPageLoading:s}=$(),u=O().openQianKun;return G(),A(()=>{}),{prefixCls:e,openQianKun:u,getOpenPageLoading:r,getLayoutContentMode:a,getPageLoading:s}}}),te={key:0,id:"content",class:"app-view-box"};function ne(e,r,a,s,c,u){const n=h("PageLayout"),t=D("loading");return S((i(),g("div",{class:Q([e.prefixCls,e.getLayoutContentMode])},[R(n),e.openQianKun=="true"?(i(),g("div",te)):_("",!0)],2)),[[t,e.getOpenPageLoading&&e.getPageLoading]])}var me=C(ee,[["render",ne]]);export{me as default};
