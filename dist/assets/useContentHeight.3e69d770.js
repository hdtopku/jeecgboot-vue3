import{onMountedOrActivated as t}from"./onMountedOrActivated.d719a17d.js";import{useWindowSizeFn as e}from"./useWindowSizeFn.9ed8a10e.js";import{u as n}from"./useContentViewHeight.34b8e2f1.js";import{F as o,H as l,Q as i,L as u,b3 as r,ck as a,aP as s,N as c}from"./index.26a57b91.js";import"./usePageContext.dd16d566.js";function d(d,m,f,v,p=0,h=o(0)){const g=o(null),{footerHeightRef:b}=n();let y={useLayoutFooter:!0};function H(t,e="all"){var n,o,l,i;function u(t){return Number(t.replace(/[^\d]/g,""))}let r=0;const a="0px";if(t){const s=getComputedStyle(t),c=u(null!=(n=null==s?void 0:s.marginTop)?n:a),d=u(null!=(o=null==s?void 0:s.marginBottom)?o:a),m=u(null!=(l=null==s?void 0:s.paddingTop)?l:a),f=u(null!=(i=null==s?void 0:s.paddingBottom)?i:a);"all"===e?(r+=c,r+=d,r+=m,r+=f):"top"===e?(r+=c,r+=m):(r+=d,r+=f)}return r}function x(t){return null==t?null:t instanceof HTMLDivElement?t:t.$el}function j(){return t=this,e=null,n=function*(){var t;if(!d.value)return;yield i();const e=x(u(m));if(!e)return;const{bottomIncludeBody:n}=r(e);let o=0;f.forEach((t=>{var e,n;o+=null!=(n=null==(e=x(u(t)))?void 0:e.offsetHeight)?n:0}));let l=null!=(t=H(e))?t:0;v.forEach((t=>{l+=H(x(u(t)))}));let j=0;function E(t,e){if(t&&e){const n=t.parentElement;n&&(s(e)?n.classList.contains(e)?j+=H(n,"bottom"):(j+=H(n,"bottom"),E(n,e)):c(e)&&e>0&&(j+=H(n,"bottom"),E(n,--e)))}}a(p)?E(e,u(p)):E(e,p);let L=n-u(b)-u(h)-o-l-j;const w=()=>{var t;null==(t=y.elements)||t.forEach((t=>{var e,n;L+=null!=(n=null==(e=x(u(t)))?void 0:e.offsetHeight)?n:0}))};y.useLayoutFooter&&u(b),w(),g.value=L},new Promise(((o,l)=>{var i=t=>{try{r(n.next(t))}catch(e){l(e)}},u=t=>{try{r(n.throw(t))}catch(e){l(e)}},r=t=>t.done?o(t.value):Promise.resolve(t.value).then(i,u);r((n=n.apply(t,e)).next())}));var t,e,n}return t((()=>{i((()=>{j()}))})),e((()=>{j()}),50,{immediate:!0}),l((()=>[b.value]),(()=>{j()}),{flush:"post",immediate:!0}),{redoHeight:function(){i((()=>{j()}))},setCompensation:t=>{y=t},contentHeight:g}}export{d as useContentHeight};
