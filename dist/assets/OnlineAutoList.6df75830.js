import Io from"./BasicTable.899ba1b1.js";import{T as Mo}from"./componentMap.63d566a1.js";import"./BasicTable.vue_vue_type_style_index_0_lang.8783b1a4.js";import{f6 as vo,E as Do,r as s,s as t,t as b,v as d,Q as u,w as i,y as h,R as m,ax as L,bc as Ro,z as E,N as Fo,O as Oo,aW as F,B as Lo,dN as Po,by as Ao,bz as Qo,x as _o,e_ as Jo,fn as Ho,ad as No,u as qo}from"./index.c71909f1.js";import"./TableImg.vue_vue_type_style_index_0_lang.fbf70fb7.js";import $o from"./OnlineAutoModal.29afc8df.js";import zo from"./OnlineCustomModal.970bd552.js";import Vo from"./OnlineDetailModal.cfd6a00e.js";import{J as jo}from"./JImportModal.bf8af504.js";import{u as Ko,a as Uo}from"./useListButton.c7a6a541.js";import{a as Wo,c as Go,j as Xo,g as Yo}from"./useAutoForm.8e111c1e.js";import Zo from"./OnlineQueryForm.8467a9f0.js";import xo from"./SuperQuery.d4a2bf21.js";import"./index.a5ab7053.js";import"./BasicForm.vue_vue_type_style_index_0_lang.974eb70c.js";import"./JAddInput.867f9e33.js";import"./JUpload.vue_vue_type_style_index_0_lang.f659086c.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang.fd0d6f8f.js";import"./pick.b45371be.js";import"./omit.bfcc4eee.js";import"./OnlineSelectCascade.39b8e014.js";import"./Area.0d56e074.js";import"./functional.5a84acab.js";import"./LinkTableListPiece.bb1b5ac1.js";import"./_flatRest.4980c73e.js";import"./isArray.1617b935.js";import"./toString.79810c3b.js";import"./_arrayPush.ca89106e.js";import"./_baseClone.34614d7c.js";import"./CommentPanel.acdea6eb.js";import"./DetailForm.713d1539.js";import"./api.1e5725b3.js";import"./SuperQueryValComponent.vue_vue_type_script_lang.6c0cce76.js";import"./BasicForm.8f4703c7.js";import"./useFormItem.954136ab.js";import"./BasicModal.bde34060.js";import"./useWindowSizeFn.4955e805.js";import"./download.0b664d9d.js";import"./base64Conver.030fa32c.js";import"./index.49ab17bc.js";import"./index.13d17c90.js";import"./useCountdown.eeff0c92.js";import"./areaDataUtil.0fdc3748.js";import"./props.56db4c2d.js";import"./index.7659ab95.js";import"./bem.9c99c9e3.js";import"./props.0e4b3938.js";import"./useContextMenu.539b4ac8.js";import"./index.8c4df71d.js";import"./onMountedOrActivated.7b7e892b.js";import"./index.38b9dc54.js";import"./htmlmixed.eaffa289.js";import"./vue.de497315.js";/* empty css             */import"./depart.api.494ce948.js";import"./MinusCircleOutlined.ed085a67.js";import"./index.dcb08401.js";import"./index.5ae3ef0d.js";import"./uniqBy.525af613.js";import"./useForm.8416e1ca.js";import"./index.f7ec3537.js";import"./useContentHeight.cef7106c.js";import"./useContentViewHeight.8656c73d.js";import"./usePageContext.1304946e.js";import"./RedoOutlined.328232f3.js";import"./OnlineForm.2807b108.js";import"./FormSchemaFactory.4b56b2a2.js";import"./user.api.9d5d1bb2.js";import"./_commonjsHelpers.7ef9cff5.js";import"./customExpression.05dc2408.js";import"./useListPage.f6a1557a.js";import"./useTable.876b6c8a.js";import"./JModalTip.edad76c4.js";import"./_baseSlice.23bb44df.js";import"./OnlineFormDetail.5b93ed47.js";import"./OnlineSubFormDetail.9c746fc1.js";var P=(o,p,r)=>new Promise((c,g)=>{var S=a=>{try{l(r.next(a))}catch(f){g(f)}},B=a=>{try{l(r.throw(a))}catch(f){g(f)}},l=a=>a.done?c(a.value):Promise.resolve(a.value).then(S,B);l((r=r.apply(o,p)).next())});const oe=Symbol(),ee="openpopmodal";function ne(o){const p=Ho();function r(c){o(c),console.log("\u4E8B\u4EF6\u89E6\u53D1\u5B8C\u6210,",c)}p.on(ee,r),te({onlineEmitter:p}),console.log("\u4E8B\u4EF6\u7ED1\u5B8C\u6210,")}function te(o){return No(o,oe,{readonly:!1,native:!0})}const ie={name:"DefaultOnlineList",components:{BasicTable:Io,TableAction:Mo,OnlineAutoModal:$o,JImportModal:jo,OnlineQueryForm:Zo,OnlineSuperQuery:xo,OnlineCustomModal:zo,OnlineDetailModal:Vo,OnlinePopModal:Wo},setup(){const{createMessage:o}=qo(),{ID:p,onlineTableContext:r,onlineQueryFormOuter:c,loading:g,reload:S,dataSource:B,pagination:l,handleSpecialConfig:a,getColumnList:f,handleChangeInTable:T,loadData:I,superQueryButtonRef:y,superQueryStatus:M,handleSuperQuery:v,onlineExtConfigJson:w,handleFormConfig:D,registerCustomModal:e,tableReloading:C}=Ko();if(!p.value){o.warning("\u5730\u5740\u9519\u8BEF, \u914D\u7F6EID\u4E0D\u5B58\u5728!");return}let{initCgEnhanceJs:R}=Go(r);const{buttonSwitch:A,cgLinkButtonList:Q,cgTopButtonList:_,importUrl:J,registerModal:H,handleAdd:N,handleEdit:q,handleBatchDelete:$,registerImportModal:z,onImportExcel:V,onExportExcel:j,cgButtonJsHandler:K,cgButtonActionHandler:U,cgButtonLinkHandler:W,handleSubmitFlow:G,getDropDownActions:X,getActions:Y,initButtonList:Z,initButtonSwitch:x,registerDetailModal:oo,registerBpmModal:eo}=Uo(r,w),{columns:no,actionColumn:to,selectedKeys:io,rowSelection:ro,enableScrollBar:lo,tableScroll:ao,downloadRowFile:so,getImgView:uo,getPcaText:po,getFormatDate:mo,handleColumnResult:co,hrefComponent:go,viewOnlineCellImage:fo,hrefMainTableId:ho,registerOnlineHrefModal:yo,registerPopModal:Co,openPopModal:bo,onlinePopModalRef:So,popTableId:O}=Xo(r,w);Do(p,()=>{console.log("watched id is change..."),Bo()},{immediate:!0});function Bo(){return P(this,null,function*(){g.value=!0;let n=yield f();wo(n),yield I(),g.value=!1,r.execButtonEnhance("setup")})}function wo(n){let k=R(n.enhanceJs);r.EnhanceJS=k,Z(n.cgButtonList),x(n.hideColumns),co(n),a(n)}function ko(n){r.queryParam=n,S()}function Eo(n){return P(this,null,function*(){yield Yo(y),y.value.init(n)})}function To(n){console.log("openOnlinePopModal",n),O.value=n.id;let k={title:n.describe};n.record&&n.record.id&&(k.record=n.record,k.isUpdate=!0),bo(!0,k)}return ne(To),{ID:p,onlineQueryFormOuter:c,queryWithCondition:ko,onQueryFormLoaded:Eo,reload:S,superQueryButtonRef:y,superQueryStatus:M,handleSuperQuery:v,loading:g,columns:no,dataSource:B,pagination:l,actionColumn:to,rowSelection:ro,selectedKeys:io,tableScroll:ao,enableScrollBar:lo,handleChangeInTable:T,buttonSwitch:A,handleAdd:N,handleEdit:q,onImportExcel:V,onExportExcel:j,cgTopButtonList:_,cgLinkButtonList:Q,cgButtonJsHandler:K,cgButtonActionHandler:U,cgButtonLinkHandler:W,handleBatchDelete:$,downloadRowFile:so,getImgView:uo,getPcaText:po,getFormatDate:mo,getActions:Y,getDropDownActions:X,registerModal:H,registerCustomModal:e,registerImportModal:z,registerDetailModal:oo,importUrl:J,handleFormConfig:D,onlinePopModalRef:So,tableReloading:C,handleSubmitFlow:G,hrefComponent:go,viewOnlineCellImage:fo,hrefMainTableId:ho,onlineExtConfigJson:w,registerOnlineHrefModal:yo,registerPopModal:Co,popTableId:O,registerBpmModal:eo}}},re={class:"p-2"},le={key:0,style:{"font-size":"12px","font-style":"italic"}},ae={key:0,style:{"font-size":"12px","font-style":"italic"}},se=["src","onClick"],ue=["innerHTML"],pe=["title"];function de(o,p,r,c,g,S){const B=s("online-query-form"),l=s("a-button"),a=s("online-super-query"),f=s("TableAction"),T=s("BasicTable"),I=s("OnlineAutoModal"),y=s("online-detail-modal"),M=s("JImportModal"),v=s("a-modal"),w=s("online-custom-modal"),D=s("online-pop-modal");return t(),b("div",re,[d(B,{ref:"onlineQueryFormOuter",id:o.ID,onSearch:o.queryWithCondition,onLoaded:o.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),o.tableReloading?m("",!0):(t(),u(T,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:o.loading,columns:o.columns,dataSource:o.dataSource,pagination:o.pagination,rowSelection:o.rowSelection,actionColumn:o.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:o.tableScroll,onTableRedo:o.reload,class:Lo({"j-table-force-nowrap":o.enableScrollBar}),onChange:o.handleChangeInTable},{tableTitle:i(()=>[o.buttonSwitch.add?(t(),u(l,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:o.handleAdd},{default:i(()=>[h("\u65B0\u589E")]),_:1},8,["onClick"])):m("",!0),o.buttonSwitch.import?(t(),u(l,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:o.onImportExcel},{default:i(()=>[h("\u5BFC\u5165")]),_:1},8,["onClick"])):m("",!0),o.buttonSwitch.export?(t(),u(l,{key:2,preIcon:"ant-design:export-outlined",type:"primary",onClick:o.onExportExcel},{default:i(()=>[h(" \u5BFC\u51FA")]),_:1},8,["onClick"])):m("",!0),o.cgTopButtonList&&o.cgTopButtonList.length>0?(t(!0),b(L,{key:3},Ro(o.cgTopButtonList,(e,C)=>(t(),b(L,null,[e.optType=="js"?(t(),u(l,{key:"cgbtn"+C,onClick:R=>o.cgButtonJsHandler(e.buttonCode),type:"primary",preIcon:e.buttonIcon?"ant-design:"+e.buttonIcon:""},{default:i(()=>[h(E(e.buttonName),1)]),_:2},1032,["onClick","preIcon"])):e.optType=="action"?(t(),u(l,{key:"cgbtn"+C,onClick:R=>o.cgButtonActionHandler(e.buttonCode),type:"primary",preIcon:e.buttonIcon?"ant-design:"+e.buttonIcon:""},{default:i(()=>[h(E(e.buttonName),1)]),_:2},1032,["onClick","preIcon"])):m("",!0)],64))),256)):m("",!0),o.buttonSwitch.batch_delete?Fo((t(),u(l,{key:4,preIcon:"ant-design:delete-outlined",onClick:o.handleBatchDelete},{default:i(()=>[h(" \u6279\u91CF\u5220\u9664")]),_:1},8,["onClick"])),[[Oo,o.selectedKeys.length>0]]):m("",!0),o.buttonSwitch.super_query?(t(),u(a,{key:5,ref:"superQueryButtonRef",online:"",status:o.superQueryStatus,onSearch:o.handleSuperQuery},null,8,["status","onSearch"])):m("",!0)]),fileSlot:i(({text:e})=>[e?(t(),u(l,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:C=>o.downloadRowFile(e)},{default:i(()=>[h(" \u4E0B\u8F7D ")]),_:2},1032,["onClick"])):(t(),b("span",le,"\u65E0\u6587\u4EF6"))]),imgSlot:i(({text:e})=>[e?(t(),b("img",{key:1,src:o.getImgView(e),alt:"\u56FE\u7247\u4E0D\u5B58\u5728",class:"online-cell-image",onClick:C=>o.viewOnlineCellImage(e)},null,8,se)):(t(),b("span",ae,"\u65E0\u56FE\u7247"))]),htmlSlot:i(({text:e})=>[F("div",{innerHTML:e},null,8,ue)]),pcaSlot:i(({text:e})=>[F("div",{title:o.getPcaText(e)},E(o.getPcaText(e)),9,pe)]),dateSlot:i(({text:e})=>[F("span",null,E(o.getFormatDate(e)),1)]),action:i(({record:e})=>[d(f,{actions:o.getActions(e),dropDownActions:o.getDropDownActions(e)},null,8,["actions","dropDownActions"])]),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),d(I,{id:o.ID,onRegister:o.registerModal,onSuccess:o.reload,onFormConfig:o.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),d(y,{id:o.ID,onRegister:o.registerDetailModal},null,8,["id","onRegister"]),d(M,{onRegister:o.registerImportModal,url:o.importUrl(),onOk:o.reload,online:""},null,8,["onRegister","url","onOk"]),d(v,_o(o.hrefComponent.model,Jo(o.hrefComponent.on)),{default:i(()=>[(t(),u(Po(o.hrefComponent.is),Ao(Qo(o.hrefComponent.params)),null,16))]),_:1},16),d(w,{onRegister:o.registerCustomModal,onSuccess:o.reload},null,8,["onRegister","onSuccess"]),d(y,{id:o.hrefMainTableId,onRegister:o.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),d(D,{ref:"onlinePopModalRef",id:o.popTableId,onRegister:o.registerPopModal,onSuccess:o.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}var Qn=vo(ie,[["render",de]]);export{Qn as default};
