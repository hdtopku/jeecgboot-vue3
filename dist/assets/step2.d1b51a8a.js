import{l as e,cI as a,a7 as s,aB as r,s as t,F as o,a8 as n,dZ as l,q as u,e1 as m,ac as d,t as c,v as p,V as i,z as f,y as v,u as h,e0 as w,C as g}from"./index.435ab247.js";import{S as x}from"./index.a5502478.js";const y=e({name:"step2",components:{Button:a,Form:s,FormItem:s.Item,InputPassword:r.Password,Input:r,StrengthMeter:x},props:{accountInfo:{type:Object,default:()=>({})}},emits:["prevStep","nextStep"],setup(e,{emit:a}){const{t:s}=t(),{createErrorModal:r}=h(),{accountInfo:u}=e,c=o(),p=n({username:u.obj.username||"",password:"",confirmPassword:""}),{getFormRules:i}=l(p),{validForm:f}=w(c);return{t:s,formRef:c,formData:p,getFormRules:i,handleNext:function(){return e=this,t=null,o=function*(){const e=yield f();if(!e)return;const t=yield m(d({username:e.username,password:e.password,smscode:u.obj.smscode,phone:u.obj.phone}));t.success?a("nextStep",u.obj):r({title:s("sys.api.errorTip"),content:t.message||s("sys.api.networkExceptionMsg")})},new Promise(((a,s)=>{var r=e=>{try{l(o.next(e))}catch(a){s(a)}},n=e=>{try{l(o.throw(e))}catch(a){s(a)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,n);l((o=o.apply(e,t)).next())}));var e,t,o},handlePrev:function(){a("prevStep",u.obj)}}}}),P=g(" 上一步 "),b=g(" 下一步 ");var I=u(y,[["render",function(e,a,s,r,t,o){const n=c("Input"),l=c("FormItem"),u=c("StrengthMeter"),m=c("InputPassword"),d=c("Button"),h=c("Form");return p(),i(h,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:f((()=>[v(l,{name:"username",class:"enter-x"},{default:f((()=>[v(n,{size:"large",value:e.formData.username,"onUpdate:value":a[0]||(a[0]=a=>e.formData.username=a),placeholder:e.t("sys.login.userName"),disabled:""},null,8,["value","placeholder"])])),_:1}),v(l,{name:"password",class:"enter-x"},{default:f((()=>[v(u,{size:"large",value:e.formData.password,"onUpdate:value":a[1]||(a[1]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),v(l,{name:"confirmPassword",class:"enter-x"},{default:f((()=>[v(m,{size:"large",visibilityToggle:"",value:e.formData.confirmPassword,"onUpdate:value":a[2]||(a[2]=a=>e.formData.confirmPassword=a),placeholder:e.t("sys.login.confirmPassword")},null,8,["value","placeholder"])])),_:1}),v(l,{class:"enter-x"},{default:f((()=>[v(d,{type:"primary",size:"large",block:"",onClick:e.handlePrev},{default:f((()=>[P])),_:1},8,["onClick"]),v(d,{size:"large",block:"",class:"mt-4",onClick:e.handleNext},{default:f((()=>[b])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])}]]);export{I as default};
