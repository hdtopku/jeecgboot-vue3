import{b2 as M,dd as k,l as L,F as g,bF as j,f0 as H,Q as I,aX as N,t as s,v as x,V,z as a,y as i,C as J,E as b,aU as S,D as $}from"./index.6c1aeca2.js";import{B as R}from"./index.c1c509d9.js";import"./BasicForm.e500713f.js";import"./helper.15e1830a.js";import{k as T}from"./JAddInput.5c78e955.js";import"./BasicModal.2246c02b.js";import"./useWindowSizeFn.a6a246d2.js";import"./uniqBy.b316cd09.js";import"./useFormItem.63b4eda3.js";import"./functional.32464814.js";import"./download.54491438.js";import"./base64Conver.030fa32c.js";import"./index.1785e33e.js";import"./index.9d763a26.js";import"./useCountdown.c7fbe84b.js";import"./JUpload.7c7f9634.js";import"./api.52ea4d1e.js";import"./index.af09c9a6.js";import"./props.0c0dfcc6.js";import"./index.5b79f8bf.js";import"./bem.8f063110.js";import"./props.ee552767.js";import"./useContextMenu.2ad8381d.js";import"./index.3803400c.js";import"./onMountedOrActivated.0e85db74.js";import"./index.2847d809.js";import"./htmlmixed.6fb02709.js";import"./vue.ab8c7c18.js";/* empty css             */import"./usePopBiz.651349c4.js";import"./useMethods.eccfa16d.js";import"./depart.api.c664bb73.js";var z=Object.defineProperty,w=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,F=(e,t,o)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))A.call(t,o)&&F(e,o,t[o]);if(w)for(var o of w(t))Q.call(t,o)&&F(e,o,t[o]);return e},U=(e,t,o)=>new Promise((u,d)=>{var f=r=>{try{c(o.next(r))}catch(p){d(p)}},_=r=>{try{c(o.throw(r))}catch(p){d(p)}},c=r=>r.done?u(r.value):Promise.resolve(r.value).then(f,_);c((o=o.apply(e,t)).next())});const P=M(),B="enhance_",X=k({id:"online-cgform-enhance",state:()=>({enhanceJs:{}}),getters:{},actions:{getEnhanceJs(e){return this.enhanceJs[e]=P.get(B+e),this.enhanceJs[e]},addEnhanceJs(e){this.enhanceJs[e.code]?this.enhanceJs[e.code].push(O({},e)):this.enhanceJs[e.code]=[O({},e)];let t=this.enhanceJs[e.code];for(;t.length>16;)t.shift();P.set(B+e.code,t)}}}),q=L({name:"EnhanceJsHistory",components:{BasicModal:R,JCodeEditor:T},setup(){const e=X(),t=g(),o=g(!1),u=g([]),d=g(""),f=g(0),[_,{closeModal:c}]=j(n=>U(this,null,function*(){r(n.code,n.type)}));function r(n,C){d.value="",u.value=[];let E=e.getEnhanceJs(n),l=[],m=0;for(let h of E)h.type===C&&(m++,l.push(Object.assign({},h,{index:m})));l&&l.length>0&&l.sort((h,D)=>D.date-h.date),u.value=[...l],I(()=>v(l[0]))}function p(){c()}function y(n){return N(n,"yyyy-MM-DD HH:mm:ss")}function v(n){f.value=n.index,t.value.setValue(n.str)}return{codeEditorRef:t,fullCode:v,registerModal:_,getFormatDate:y,onCancel:p,confirmLoading:o,dataList:u,jsStr:d,activeIndex:f}}}),G=["onClick"];function K(e,t,o,u,d,f){const _=s("a-divider"),c=s("a-list-item"),r=s("a-list"),p=s("a-layout-sider"),y=s("JCodeEditor"),v=s("a-layout-content"),n=s("a-layout"),C=s("a-spin"),E=s("a-button"),l=s("BasicModal");return x(),V(l,{onRegister:e.registerModal,title:"JS\u589E\u5F3A\u5386\u53F2\u8BB0\u5F55",width:1200,maskClosable:!1,confirmLoading:e.confirmLoading,defaultFullscreen:"",onCancel:e.onCancel},{footer:a(()=>[i(E,{onClick:e.onCancel},{default:a(()=>[J("\u5173\u95ED")]),_:1},8,["onClick"])]),default:a(()=>[i(C,{spinning:e.confirmLoading},{default:a(()=>[i(n,null,{default:a(()=>[i(p,{theme:"light"},{default:a(()=>[i(r,{bordered:"",dataSource:e.dataList,class:b("enhance-list")},{header:a(()=>[S("div",null,[i(_,{style:{margin:"0"}},{default:a(()=>[J("\u4FDD\u5B58\u65F6\u95F4")]),_:1})])]),renderItem:a(({item:m})=>[i(c,{class:b(e.activeIndex===m.index?"bg-blue":"")},{default:a(()=>[S("a",{onClick:h=>e.fullCode(m)},$(e.getFormatDate(m.date)),9,G)]),_:2},1032,["class"])]),_:1},8,["dataSource"])]),_:1}),i(n,null,{default:a(()=>[i(v,{style:{margin:"8px 8px",padding:"8px",background:"#fff",minHeight:"280px"}},{default:a(()=>[i(y,{ref:"codeEditorRef",language:"javascript",fullScreen:!0,lineNumbers:!1,"language-change":!1},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["onRegister","confirmLoading","onCancel"])}var W=H(q,[["render",K],["__scopeId","data-v-3e3ee46a"]]),De=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as E,De as a,X as u};
