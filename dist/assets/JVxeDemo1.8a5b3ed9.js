var e=(e,t,l)=>new Promise(((a,i)=>{var o=e=>{try{u(l.next(e))}catch(t){i(t)}},n=e=>{try{u(l.throw(e))}catch(t){i(t)}},u=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,n);u((l=l.apply(e,t)).next())}));import{l as t,F as l,dz as a,t as i,v as o,x as n,y as u,z as s,aW as c,D as r,L as d,eh as v,ax as f,C as p,a$ as m,eO as h,eP as y,u as b,c3 as w}from"./index.b2c24a42.js";const k=p("切换加载"),g=p("切换禁用"),x=p("表单验证"),_=p("获取数据"),C=p("设置值"),D=p("获取选中数据"),S=p("清空选中"),R=p("删除第一行数据"),V=p("删除选中数据"),$={style:{padding:"20px"}},T=["onClick"],A=c("a",null,"删除",-1),Y=t({__name:"JVxeDemo1",setup(t){const{createMessage:p}=b(),Y=l(),z=l(!1),E=l(!1),M=l([{title:"ID",key:"id",type:a.hidden},{title:"不可编辑",key:"noEdit",type:a.normal,width:180,defaultValue:"noEdit-new"},{title:"单行文本",key:"input",type:a.input,width:180,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"请输入${title}"},{pattern:/^[a-z|A-Z][a-z|A-Z\d_-]*$/,message:"必须以字母开头，可包含数字、下划线、横杠"},{unique:!0,message:"${title}不能重复"},{handler({cellValue:e,row:t,column:l},a,i){"abc"===e?a(!1,"${title}不能是abc"):a(!0)},message:"${title}默认提示"}]},{title:"多行文本",key:"textarea",type:a.textarea,width:200},{title:"数字",key:"number",type:a.inputNumber,width:80,defaultValue:32,statistics:["sum","average"]},{title:"下拉框",key:"select",type:a.select,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],allowSearch:!0,placeholder:"请选择"},{title:"下拉框_字典",key:"select_dict",type:a.select,width:180,options:[],dictCode:"sex",placeholder:"请选择"},{title:"下拉框_多选",key:"select_multiple",type:a.selectMultiple,width:205,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}],defaultValue:["int","boolean"],placeholder:"多选"},{title:"下拉框_搜索",key:"select_search",type:a.selectSearch,width:180,options:[{title:"String",value:"string"},{title:"Integer",value:"int"},{title:"Double",value:"double"},{title:"Boolean",value:"boolean"}]},{title:"日期时间",key:"datetime",type:a.datetime,width:200,defaultValue:"2019-04-30 14:52:22",placeholder:"请选择"},{title:"时间",key:"time",type:a.time,width:200,defaultValue:"14:52:22",placeholder:"请选择"},{title:"复选框",key:"checkbox",type:a.checkbox,width:100,customValue:["Y","N"],defaultChecked:!1},{title:"操作",key:"action",type:a.slot,fixed:"right",minWidth:100,align:"center",slotName:"myAction"}]),N=l([]);function j(e,t,l=!1){l&&(z.value=!0);let a=()=>{let e=h(1e3,9999999999999);return w(new Date(e)).format("YYYY-MM-DD HH:mm:ss")},i=(e-1)*t,o=["string","int","double","boolean"],n=Date.now(),u=[];for(let c=0;c<t;c++)u.push({id:m(),noEdit:`noEdit-${i+c+1}`,input:`text-${i+c+1}`,textarea:`textarea-${i+c+1}`,number:h(0,233),select:o[h(0,3)],select_dict:h(1,2).toString(),select_multiple:(()=>{let e=h(1,4),t=[];for(let l=0;l<e;l++)y(t,o[h(0,3)]);return t.join(",")})(),select_search:o[h(0,3)],datetime:a(),checkbox:["Y","N"][h(0,1)]});N.value=u;let s=Date.now()-n;l&&s<t&&setTimeout((()=>z.value=!1),t-s)}function H(){Y.value.validateTable().then((e=>{e?p.error("验证未通过，请在控制台查看详细"):p.success("验证通过")}))}function I(){Y.value.getTableData();p.success("获取值成功，请看控制台输出")}function P(){j(1,1e3,!0)}function B(){const e=Y.value.getXTable().getTableData().fullData[0];Y.value.removeRows(e)}function O(){Y.value.getXTable().removeCheckboxRow()}function q(){p.info("请看控制台")}function J(){Y.value.clearSelection()}function W(){z.value=!z.value}function X(){E.value=!E.value}function Z(t){return e(this,null,(function*(){const e=p.loading("删除中…",0);try{(yield(l=t.deleteRows,new Promise((e=>{l.map((e=>e.id)),setTimeout((()=>e(!0)),1500)}))))?(yield Y.value.removeSelection(),p.success("删除成功！")):p.warn("删除失败！")}finally{e()}var l}))}return j(0,20,!0),(t,l)=>{const a=i("a-button"),m=i("a-space"),h=i("a-tooltip"),y=i("a-divider"),b=i("JVxeTable");return o(),n(f,null,[u(m,null,{default:s((()=>[u(a,{onClick:W},{default:s((()=>[k])),_:1}),u(a,{onClick:X},{default:s((()=>[g])),_:1})])),_:1}),u(b,{ref_key:"tableRef",ref:Y,stripe:"",toolbar:"",rowNumber:"",rowSelection:"",rowExpand:"",resizable:"",asyncRemove:"",clickSelectRow:"",maxHeight:480,checkboxConfig:{range:!0},disabledRows:{input:["text--16","text--18"]},loading:z.value,disabled:E.value,columns:M.value,dataSource:N.value,onRemove:Z},{toolbarSuffix:s((()=>[u(a,{onClick:H},{default:s((()=>[x])),_:1}),u(h,{placement:"top",title:"获取值，忽略表单验证",autoAdjustOverflow:!0},{default:s((()=>[u(a,{onClick:I},{default:s((()=>[_])),_:1})])),_:1}),u(h,{placement:"top",title:"模拟加载1000条数据",autoAdjustOverflow:!0},{default:s((()=>[u(a,{onClick:P},{default:s((()=>[C])),_:1})])),_:1}),u(a,{onClick:q},{default:s((()=>[D])),_:1}),u(a,{onClick:J},{default:s((()=>[S])),_:1}),u(a,{onClick:B},{default:s((()=>[R])),_:1}),u(a,{onClick:O},{default:s((()=>[V])),_:1})])),expandContent:s((e=>[c("div",$,[c("span",null,"Hello! My name is: "+r(e.row.input)+"!",1)])])),myAction:s((t=>[c("a",{onClick:e=>{p.success("请在控制台查看输出")}},"查看",8,T),u(y,{type:"vertical"}),u(d(v),{title:"确定删除吗？",onConfirm:l=>function(t){return e(this,null,(function*(){var e;const l=yield null==(e=Y.value)?void 0:e.removeRows(t.row);l&&l.rows.length>0&&p.success("删除成功")}))}(t)},{default:s((()=>[A])),_:2},1032,["onConfirm"])])),_:1},8,["loading","disabled","columns","dataSource"])],64)}}});export{Y as default};
