import y from"./LoginFormTitle.f7cce35b.js";import{l as I,F as f,s as Q,d4 as w,dV as L,o as g,L as t,d$ as T,H as V,v as B,x as q,y as a,aV as D,z as _,C as p,D as v,b6 as F,cF as N,aw as b,W as E,e9 as j,ea as z}from"./index.a1b4e527.js";import{Q as U}from"./index.9856817c.js";import"./download.6d07b2c0.js";import"./base64Conver.030fa32c.js";const $={class:"enter-x min-w-64 min-h-64"},J=I({__name:"QrCodeForm",setup(H){const c=f("");let s;const{t:n}=Q(),C=w(),{handleBackLogin:k,getLoginState:x}=L(),o=f("0"),i=g(()=>t(x)===T.QR_CODE),h=g(()=>t(o)==="0"?n("sys.login.scanSign"):n("sys.login.scanSuccess"));function l(){o.value="0",j().then(e=>{c.value=e.qrcodeId,e.qrcodeId&&S(e.qrcodeId)})}function u(e){z({qrcodeId:e}).then(r=>{let m=r.token;m=="-2"&&(l(),clearInterval(s)),r.success&&(o.value="2",clearInterval(s),setTimeout(()=>{C.qrCodeLogin(m)},500))})}function S(e){u(e),d(),s=setInterval(()=>{u(e)},1500)}function d(){s&&clearInterval(s)}return V(i,e=>{e?l():d()}),(e,r)=>t(i)?(B(),q(b,{key:0},[a(y,{class:"enter-x"}),D("div",$,[a(t(U),{value:c.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),a(t(F),{class:"enter-x"},{default:_(()=>[p(v(t(h)),1)]),_:1}),a(t(N),{size:"large",block:"",class:"mt-4 enter-x",onClick:t(k)},{default:_(()=>[p(v(t(n)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])])],64)):E("",!0)}});export{J as default};
