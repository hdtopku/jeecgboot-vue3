var K=Object.defineProperty,q=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var R=(e,t,o)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,S=(e,t)=>{for(var o in t||(t={}))H.call(t,o)&&R(e,o,t[o]);if(w)for(var o of w(t))N.call(t,o)&&R(e,o,t[o]);return e},T=(e,t)=>q(e,z(t));var k=(e,t,o)=>new Promise((b,m)=>{var v=l=>{try{s(o.next(l))}catch(p){m(p)}},c=l=>{try{s(o.throw(l))}catch(p){m(p)}},s=l=>l.done?b(l.value):Promise.resolve(l.value).then(v,c);s((o=o.apply(e,t)).next())});import{B as Y}from"./index.ae4cc225.js";import{dz as f,l as I,dA as P,F as M,a7 as B,bG as G,L as E,o as X,q as Q,t as d,v as W,V as Z,z as u,y as a,B as x,C as $}from"./index.f119eb41.js";import{o as ee,a as te,s as ae}from"./jvxetable.api.475d5d80.js";import{useJvxeMethod as oe}from"./useJvxeMethods.7f925fcd.js";import"./BasicModal.25f98338.js";import"./useWindowSizeFn.54f80105.js";import"./vxeUtils.4b2d9862.js";const ue=[{title:"\u5BA2\u6237\u540D",key:"name",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{required:!0,message:"${title}\u4E0D\u80FD\u4E3A\u7A7A"}]},{title:"\u6027\u522B",key:"sex",width:180,type:f.select,options:[{title:"\u7537",value:"1"},{title:"\u5973",value:"2"}],defaultValue:"",placeholder:"\u8BF7\u9009\u62E9${title}"},{title:"\u8EAB\u4EFD\u8BC1\u53F7",key:"idcard",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}\u683C\u5F0F\u4E0D\u6B63\u786E"}]},{title:"\u624B\u673A\u53F7",key:"telphone",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{pattern:"^1(3|4|5|7|8)\\d{9}$",message:"${title}\u683C\u5F0F\u4E0D\u6B63\u786E"}]}],le=[{title:"\u822A\u73ED\u53F7",key:"ticketCode",width:180,type:f.input,defaultValue:"",placeholder:"\u8BF7\u8F93\u5165${title}",validateRules:[{required:!0,message:"${title}\u4E0D\u80FD\u4E3A\u7A7A"}]},{title:"\u822A\u73ED\u65F6\u95F4",key:"tickectDate",width:180,type:f.date,placeholder:"\u8BF7\u9009\u62E9${title}",defaultValue:""}],re=I({name:"JVexTableModal",components:{BasicModal:Y,JVxeTable:P},emits:["success","register"],setup(e,{emit:t}){const o=M(!0),b=M(),m=M(),v=M(["tableRef1","tableRef2"]),c=M("tableRef1"),s={tableRef1:b,tableRef2:m},l=B({xs:{span:24},sm:{span:5}}),p=B({xs:{span:24},sm:{span:16}}),g=B({loading:!1,dataSource:[],columns:ue}),F=B({loading:!1,dataSource:[],columns:le}),r=B({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[y,_,A,D]=oe(J,U,s,c,v),[h,{setModalProps:n,closeModal:V}]=G(i=>k(this,null,function*(){if(n({confirmLoading:!1}),j(),o.value=!!(i!=null&&i.isUpdate),E(o)){Object.assign(r,i.record);let C={id:r.id};A(ee,C,g),A(te,C,F)}})),O={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},L=X(()=>E(o)?"\u7F16\u8F91":"\u65B0\u589E");function U(i){let C=Object.assign(r,i.formValue);return T(S({},C),{jeecgOrderCustomerList:i.tablesValue[0].tableData,jeecgOrderTicketList:i.tablesValue[1].tableData})}function j(){r.id=null,r.orderCode="",r.orderMoney="",r.orderDate=null,r.ctype="",r.content="",r.jeecgOrderCustomerList=[],r.jeecgOrderTicketList=[],g.dataSource=[],F.dataSource=[]}function J(i){return k(this,null,function*(){n({confirmLoading:!0}),yield ae(i,E(o)),V(),t("success")})}return{formRef:D,activeKey:c,table1:g,table2:F,tableRef1:b,tableRef2:m,getTitle:L,labelCol:l,wrapperCol:p,validatorRules:O,orderMainModel:r,registerModal:h,handleChangeTabs:y,handleSubmit:_}}}),ne=$("\u56FD\u5185\u8BA2\u5355"),de=$("\u56FD\u9645\u8BA2\u5355");function se(e,t,o,b,m,v){const c=d("a-input"),s=d("a-form-item"),l=d("a-col"),p=d("a-select-option"),g=d("a-select"),F=d("a-date-picker"),r=d("a-row"),y=d("JVxeTable"),_=d("a-tab-pane"),A=d("a-tabs"),D=d("a-form"),h=d("BasicModal");return W(),Z(h,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:u(()=>[a(D,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:u(()=>[a(r,{class:"form-row",gutter:16},{default:u(()=>[a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:u(()=>[a(c,{value:e.orderMainModel.orderCode,"onUpdate:value":t[0]||(t[0]=n=>e.orderMainModel.orderCode=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u7C7B\u578B",name:"ctype"},{default:u(()=>[a(g,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:e.orderMainModel.ctype,"onUpdate:value":t[1]||(t[1]=n=>e.orderMainModel.ctype=n)},{default:u(()=>[a(p,{value:"1"},{default:u(()=>[ne]),_:1}),a(p,{value:"2"},{default:u(()=>[de]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u65E5\u671F",name:"orderDate"},{default:u(()=>[a(F,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":t[2]||(t[2]=n=>e.orderMainModel.orderDate=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(r,{class:"form-row",gutter:16},{default:u(()=>[a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u91D1\u989D",name:"orderMoney"},{default:u(()=>[a(c,{value:e.orderMainModel.orderMoney,"onUpdate:value":t[3]||(t[3]=n=>e.orderMainModel.orderMoney=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),a(l,{lg:8},{default:u(()=>[a(s,{label:"\u8BA2\u5355\u5907\u6CE8",name:"content"},{default:u(()=>[a(c,{value:e.orderMainModel.content,"onUpdate:value":t[4]||(t[4]=n=>e.orderMainModel.content=n),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(A,{activeKey:e.activeKey,"onUpdate:activeKey":t[5]||(t[5]=n=>e.activeKey=n),onChange:e.handleChangeTabs},{default:u(()=>[a(_,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"tableRef1"},{default:u(()=>[a(y,{ref:"tableRef1",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource},null,8,["loading","columns","dataSource"])]),_:1}),a(_,{tab:"\u673A\u7968\u4FE1\u606F",key:"tableRef2",forceRender:""},{default:u(()=>[a(y,{ref:"tableRef2",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource},null,8,["loading","columns","dataSource"])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}var Me=Q(re,[["render",se]]);export{Me as default};
