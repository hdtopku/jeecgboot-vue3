import{y as e,av as t,e7 as n,e8 as a,e9 as r,l as o,a7 as l,aB as s,s as i,n as c,d7 as u,dY as d,dZ as f,F as A,a8 as p,o as m,L as g,e2 as y,$ as b,v,x as w,R as x,S as h,z as O,aF as k,C,D as j,cI as D,b7 as B,aW as E,E as M,c8 as S,ax as F,bY as P,c7 as Q,ac as I,ea as R,u as G,e0 as N}from"./index.b2c24a42.js";import K from"./LoginFormTitle.76a6cde8.js";import L from"./ThirdModal.88a36ca0.js";import{G as H}from"./GithubFilled.26adcbcc.js";import{W as z}from"./WechatFilled.77d1bf15.js";import"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./useFormItem.9110ec70.js";import"./useThirdLogin.c3ca17e8.js";var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm227 385.3c-1 4.2-3.5 10.4-7 17.8h.1l-.4.7c-20.3 43.1-73.1 127.7-73.1 127.7s-.1-.2-.3-.5l-15.5 26.8h74.5L575.1 810l32.3-128h-58.6l20.4-84.7c-16.5 3.9-35.9 9.4-59 16.8 0 0-31.2 18.2-89.9-35 0 0-39.6-34.7-16.6-43.4 9.8-3.7 47.4-8.4 77-12.3 40-5.4 64.6-8.2 64.6-8.2S422 517 392.7 512.5c-29.3-4.6-66.4-53.1-74.3-95.8 0 0-12.2-23.4 26.3-12.3 38.5 11.1 197.9 43.2 197.9 43.2s-207.4-63.3-221.2-78.7c-13.8-15.4-40.6-84.2-37.1-126.5 0 0 1.5-10.5 12.4-7.7 0 0 153.3 69.7 258.1 107.9 104.8 37.9 195.9 57.3 184.2 106.7z"}}]},name:"dingtalk-circle",theme:"filled"};function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){V(e,t,n[t])}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(n,a){var r=J({},n,a.attrs);return e(t,J({},r,{icon:X}),null)};U.displayName="DingtalkCircleFilled",U.inheritAttrs=!1;var W=U,T=["class","component","viewBox","spin","rotate","tabindex","onClick"];function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Z(e,t,n[t])}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=function(t,o){var l=o.attrs,s=o.slots,i=q({},t,l),c=i.class,u=i.component,d=i.viewBox,f=i.spin,A=i.rotate,p=i.tabindex,m=i.onClick,g=Y(i,T),y=s.default&&s.default(),b=y&&y.length,v=s.component;n();var w=Z({anticon:!0},c,c),x={"anticon-spin":""===f||!!f},h=A?{msTransform:"rotate(".concat(A,"deg)"),transform:"rotate(".concat(A,"deg)")}:void 0,O=q({},a,{viewBox:d,class:x,style:h});d||delete O.viewBox;var k=p;return void 0===k&&m&&(k=-1,g.tabindex=k),e("span",q({role:"img"},g,{onClick:m,class:w}),[u?e(u,O,{default:function(){return[y]}}):v?v(O):b?(r(Boolean(d)||1===y.length&&y[0]&&"use"===y[0].type),e("svg",q({},O,{viewBox:d}),[y])):null])};_.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String},_.inheritAttrs=!1,_.displayName="Icon";var $=_,ee=["type"];function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){ne(e,t,n[t])}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var re=new Set;function oe(e){return"string"==typeof e&&e.length&&!re.has(e)}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];if(oe(n)){var a=document.createElement("script");a.setAttribute("src",n),a.setAttribute("data-namespace",n),e.length>t+1&&(a.onload=function(){le(e,t+1)},a.onerror=function(){le(e,t+1)}),re.add(n),document.body.appendChild(a)}}const se=["src"],ie=o({__name:"LoginForm",setup(t){const n=P,a=Q,r=l.Item,o=s.Password,X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scriptUrl,a=t.extraCommonProps,r=void 0===a?{}:a;"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(n)?le(n.reverse()):le([n]));var o=function(t,n){var a=n.attrs,o=n.slots,l=te({},t,a),s=l.type,i=ae(l,ee),c=o.default&&o.default(),u=null;s&&(u=e("use",{"xlink:href":"#".concat(s)},null)),c&&c.length&&(u=c);var d=te({},r,i);return e($,d,{default:function(){return[u]}})};return o.props={spin:Boolean,rotate:Number,type:String},o.inheritAttrs=!1,o.displayName="Iconfont",o}({scriptUrl:"//at.alicdn.com/t/font_2316098_umqusozousr.js"}),{t:J}=i(),{notification:V,createErrorModal:U}=G(),{prefixCls:T}=c("login"),q=u(),{setLoginState:Z,getLoginState:Y}=d(),{getFormRules:_}=f(),ne=A(),re=A(),oe=A(!1),ie=A(!1),ce=p({account:"",password:"",inputCode:""}),ue=p({randCodeImage:"",requestCodeSuccess:!1,checkKey:null}),{validForm:de}=N(ne),fe=m((()=>g(Y)===y.LOGIN)),Ae=A(),pe=A();function me(){return e=this,t=null,n=function*(){const e=yield de();if(e)try{oe.value=!0;const{userInfo:t}=yield q.login(I({password:e.password,username:e.account,captcha:e.inputCode,checkKey:ue.checkKey,mode:"none"}));t&&V.success({message:J("sys.login.loginSuccessTitle"),description:`${J("sys.login.loginSuccessDesc")}: ${t.realname}`,duration:3})}catch(t){V.error({message:J("sys.api.errorTip"),description:t.message||J("sys.api.networkExceptionMsg"),duration:3}),oe.value=!1,"验证码错误"===t.message?(ce.inputCode="",Ae.value.focus(),ge()):"该用户不存在，请注册"!==t.message&&"用户名或密码错误"!==t.message||pe.value.focus()}},new Promise(((a,r)=>{var o=e=>{try{s(n.next(e))}catch(t){r(t)}},l=e=>{try{s(n.throw(e))}catch(t){r(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);s((n=n.apply(e,t)).next())}));var e,t,n}function ge(){ce.inputCode="",ue.checkKey=1629428467008,R(ue.checkKey).then((e=>{ue.randCodeImage=e,ue.requestCodeSuccess=!0,Ae.value.focus()}))}function ye(e){re.value.onThirdLogin(e)}return b((()=>{ge()})),(t,i)=>(v(),w(F,null,[x(e(K,{class:"enter-x"},null,512),[[h,g(fe)]]),x(e(g(l),{class:"p-4 enter-x",model:ce,rules:g(_),ref_key:"formRef",ref:ne,onKeypress:S(me,["enter"])},{default:O((()=>[e(g(r),{name:"account",class:"enter-x"},{default:O((()=>[e(g(s),{ref_key:"usernameRef",ref:pe,allowClear:"",size:"large",value:ce.account,"onUpdate:value":i[0]||(i[0]=e=>ce.account=e),placeholder:g(J)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),e(g(r),{name:"password",class:"enter-x"},{default:O((()=>[e(g(o),{allowClear:"",size:"large",visibilityToggle:"",value:ce.password,"onUpdate:value":i[1]||(i[1]=e=>ce.password=e),placeholder:g(J)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),e(g(a),{class:"enter-x",gutter:4},{default:O((()=>[e(g(n),{span:16},{default:O((()=>[e(g(r),{name:"inputCode",class:"enter-x"},{default:O((()=>[e(g(s),{allowClear:"",ref_key:"inputCodeRef",ref:Ae,autocomplete:"off",size:"large",value:ce.inputCode,"onUpdate:value":i[2]||(i[2]=e=>ce.inputCode=e),placeholder:g(J)("sys.login.inputCode")},null,8,["value","placeholder"])])),_:1})])),_:1}),e(g(n),{span:8},{default:O((()=>[e(g(r),{style:{"text-align":"right","margin-left":"20px"},class:"enter-x"},{default:O((()=>[ue.requestCodeSuccess?(v(),w("img",{key:0,style:{"margin-top":"2px","max-width":"initial"},src:ue.randCodeImage,onClick:ge},null,8,se)):(v(),w("img",{key:1,style:{"margin-top":"2px","max-width":"initial"},src:"data:image/png;base64,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",onClick:ge}))])),_:1})])),_:1})])),_:1}),e(g(a),{class:"enter-x"},{default:O((()=>[e(g(n),{span:12},{default:O((()=>[e(g(r),null,{default:O((()=>[e(g(k),{checked:ie.value,"onUpdate:checked":i[3]||(i[3]=e=>ie.value=e),size:"small"},{default:O((()=>[C(j(g(J)("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),e(g(n),{span:12},{default:O((()=>[e(g(r),{style:{"text-align":"right"}},{default:O((()=>[e(g(D),{type:"link",size:"small",onClick:i[4]||(i[4]=e=>g(Z)(g(y).RESET_PASSWORD))},{default:O((()=>[C(j(g(J)("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),e(g(r),{class:"enter-x"},{default:O((()=>[e(g(D),{type:"primary",size:"large",block:"",onClick:me,loading:oe.value},{default:O((()=>[C(j(g(J)("sys.login.loginButton")),1)])),_:1},8,["loading"])])),_:1}),e(g(a),{class:"enter-x"},{default:O((()=>[e(g(n),{md:8,xs:24},{default:O((()=>[e(g(D),{block:"",onClick:i[5]||(i[5]=e=>g(Z)(g(y).MOBILE))},{default:O((()=>[C(j(g(J)("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),e(g(n),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:O((()=>[e(g(D),{block:"",onClick:i[6]||(i[6]=e=>g(Z)(g(y).QR_CODE))},{default:O((()=>[C(j(g(J)("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),e(g(n),{md:7,xs:24},{default:O((()=>[e(g(D),{block:"",onClick:i[7]||(i[7]=e=>g(Z)(g(y).REGISTER))},{default:O((()=>[C(j(g(J)("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),e(g(B),{class:"enter-x"},{default:O((()=>[C(j(g(J)("sys.login.otherSignIn")),1)])),_:1}),E("div",{class:M(["flex justify-evenly enter-x",`${g(T)}-sign-in-way`])},[E("a",{onClick:i[8]||(i[8]=e=>ye("github")),title:"github"},[e(g(H))]),E("a",{onClick:i[9]||(i[9]=e=>ye("wechat_enterprise")),title:"企业微信"},[e(g(X),{class:"item-icon",type:"icon-qiyeweixin3"})]),E("a",{onClick:i[10]||(i[10]=e=>ye("dingtalk")),title:"钉钉"},[e(g(W))]),E("a",{onClick:i[11]||(i[11]=e=>ye("wechat_open")),title:"微信"},[e(g(z))])],2)])),_:1},8,["model","rules","onKeypress"]),[[h,g(fe)]]),e(L,{ref_key:"thirdModalRef",ref:re},null,512)],64))}});export{ie as default};
