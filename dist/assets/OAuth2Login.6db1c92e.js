import{l as h,F as i,ee as r,dL as v,b4 as k,dW as A,ef as c,d7 as m,s as y,v as _,x as B,u as L}from"./index.03381019.js";const E=h({__name:"OAuth2Login",setup(F){const l=i(r()),e=i({thirdApp:!1,wxWork:!1,dingtalk:!1}),{currentRoute:g}=v(),s=g.value;r()||k.replace({path:A.BASE_LOGIN,query:s.query}),l.value&&d();function d(){/wxwork/i.test(navigator.userAgent)&&(e.value.thirdApp=!0,e.value.wxWork=!0),/dingtalk/i.test(navigator.userAgent)&&(e.value.thirdApp=!0,e.value.dingtalk=!0),p()}function p(){if(e.value.thirdApp)if(s.query.oauth2LoginToken){let u=s.query.oauth2LoginToken;f({token:u,thirdType:s.query.thirdType})}else e.value.wxWork?c("wechat_enterprise"):e.value.dingtalk&&c("dingtalk")}function f(u){const n=m(),{notification:o}=L(),{t:a}=y();n.ThirdLogin(u).then(t=>{t&&t.userInfo?o.success({message:a("sys.login.loginSuccessTitle"),description:`${a("sys.login.loginSuccessDesc")}: ${t.userInfo.realname}`,duration:3}):o.error({message:"\u767B\u5F55\u5931\u8D25",description:((t.response||{}).data||{}).message||t.message||"\u8BF7\u6C42\u51FA\u73B0\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:4})})}return(u,n)=>(_(),B("div"))}});export{E as default};
