var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&i(e,a,t[a]);return e},s=(e,t,a)=>new Promise(((l,o)=>{var n=e=>{try{r(a.next(e))}catch(t){o(t)}},i=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,i);r((a=a.apply(e,t)).next())}));import{l as u,a5 as d,aL as p,aB as c,f5 as m,F as f,O as v,o as b,L as y,$ as g,Q as h,q as j,t as C,v as x,V as w,z as O,y as P,aW as k,bl as R,bm as V,cE as T,bX as I,n as M,dz as F,f0 as S,E as _,R as L,S as A,B,u as E}from"./index.26a57b91.js";import{u as H}from"./useTableSync.a12f1469.js";import{B as J}from"./BasicForm.5f094c03.js";import"./helper.7e5efd4b.js";import{u as N}from"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import"./pick.dbff1c58.js";import"./_flatRest.ff1861ce.js";import"./isArray.40a4ed15.js";import"./toString.cf909882.js";import"./_arrayPush.8821345e.js";import"./cgform.data.3f26a448.js";import"./uniqBy.006870c7.js";import"./index.934459b9.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useFormItem.efca0b58.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./api.54a4ca84.js";import"./index.9c299300.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";const q=u({name:"JPrompt",components:{Modal:d,Spin:p,Input:c,BasicForm:J,ConfigProvider:m},emits:["register"],setup(e,{emit:l}){const o=f(),{getAntdLocale:n}=v(),i=f(!1),u=f(!1),d=f({}),p=b((()=>{var e;return null!=(e=d.value.placeholder)?e:"请输入内容"})),[c,{clearValidate:m,setFieldsValue:j,validate:C,updateSchema:x}]=N({compact:!0,wrapperCol:{span:24},schemas:[{label:"",field:"input",component:"Input",slot:"customInput"}],showActionButtonGroup:!1}),w=b((()=>{var l,o;let n=d.value,s={width:null!=(l=n.width)?l:500,title:null!=(o=n.title)?o:"prompt",visible:y(i),confirmLoading:y(u)};var p;return p=r(r(r({},s),e),n),t(p,a({onOk:k,onCancel(){"function"==typeof d.value.onCancel&&d.value.onCancel(),P()}}))}));function O(e){return s(this,null,(function*(){var t,a;document.body.focus(),d.value=e,i.value=!0,yield h(),yield x({field:"input",required:d.value.required,rules:d.value.rules,dynamicRules:d.value.dynamicRules}),yield j({input:null!=(t=d.value.defaultValue)?t:""}),yield m(),null==(a=o.value)||a.focus()}))}function P(){i.value=!1}function k(){return s(this,null,(function*(){try{const{onOk:e}=d.value;let t=yield C();if(R(!0),"function"==typeof e){!1!==(yield e(t.input))&&P()}else P()}finally{R(!1)}}))}function R(e){u.value=e}return g((()=>{l("register",{openModal:O,setLoading:R,getVisible:i})})),{inputRef:o,getProps:w,loading:u,options:d,placeholder:p,getAntdLocale:n,onChange:function(){C()},onSubmit:k,registerForm:c}}}),z={style:{padding:"20px"}},D=["innerHTML"];var U=j(q,[["render",function(e,t,a,l,o,n){const i=C("Input"),r=C("BasicForm"),s=C("Spin"),u=C("Modal"),d=C("ConfigProvider");return x(),w(d,{locale:e.getAntdLocale},{default:O((()=>[P(u,R(V(e.getProps)),{default:O((()=>[P(s,{spinning:e.loading},{default:O((()=>[k("div",z,[k("div",{innerHTML:e.options.content,style:{"margin-bottom":"8px"}},null,8,D),P(r,{onRegister:e.registerForm},{customInput:O((({model:t,field:a})=>[P(i,{ref:"inputRef",value:t[a],"onUpdate:value":e=>t[a]=e,placeholder:e.placeholder,onPressEnter:e.onSubmit,onInput:e.onChange},null,8,["value","onUpdate:value","placeholder","onPressEnter","onInput"])])),_:1},8,["onRegister"])])])),_:1},8,["spinning"])])),_:1},16)])),_:1},8,["locale"])}]]);var W=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,Y=(e,t,a)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Z=u({name:"CheckDictTable",components:{VNodes:(e,{attrs:t})=>t.vnodes},setup(){const{prefixCls:e}=M("cgform-check-dict-table"),{createMessage:t}=E(),a=f([{title:"字段名称",key:"dbFieldName",width:100},{title:"字段备注",key:"dbFieldTxt",width:100},{title:"字段Href",key:"fieldHref",width:130,type:F.input,defaultValue:""},{title:"验证规则",key:"fieldValidType",width:170,type:F.slot,slotName:"fieldValidType",allowInput:!0,defaultValue:"",placeholder:"空"},{title:"校验必填",key:"fieldMustInput",width:80,type:F.checkbox,align:"center",customValue:["1","0"],defaultChecked:!1},{title:"字典Table",key:"dictTable",width:280,type:F.textarea,defaultValue:""},{title:"字典Code",key:"dictField",width:280,type:F.input,defaultValue:""},{title:"字典Text",key:"dictText",width:280,type:F.input,defaultValue:""}]),l=H(a),o=f([{label:"空",value:""},{label:"唯一校验",value:"only"},{label:"6到16位数字",value:"n6-16"},{label:"6到18位字母",value:"s6-18"},{label:"6到16位任意字符",value:"*6-16"},{label:"网址",value:"url"},{label:"电子邮件",value:"e"},{label:"手机号码",value:"m"},{label:"邮政编码",value:"p"},{label:"字母",value:"s"},{label:"数字",value:"n"},{label:"整数",value:"z"},{label:"非空",value:"*"},{label:"金额",value:"money"}]),n=b((()=>o.value.map((e=>e.value)))),{createJPrompt:i}={createJPrompt:function(e){let t=null;const a=document.createElement("div"),l=P(U,{onRegister(a){return s(this,null,(function*(){t=a,yield h(),a.openModal(e)}))},afterClose(){T(null,a),document.body.removeChild(a)}});function o(){return null==t&&I("useJPrompt instance is undefined!"),t}return T(l,a),document.body.appendChild(a),{closeModal:function(){var e;null==(e=o())||e.closeModal()},updateModal:function(e){var t;null==(t=o())||t.updateModal(e)},setLoading:function(e){var t;null==(t=o())||t.setLoading(e)}}}};function r(e){return!n.value.includes(e)}function u(e,t){return r(t)?Promise.resolve():Promise.reject("当前校验已存在")}return d=((e,t)=>{for(var a in t||(t={}))$.call(t,a)&&Y(e,a,t[a]);if(X)for(var a of X(t))K.call(t,a)&&Y(e,a,t[a]);return e})({},l),G(d,Q({prefixCls:e,columns:a,isCustomRegexp:r,validTypeOptions:o,validTypeValues:n,onAddCustomRegexp:function(e){i({title:"自定义正则表达式",placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:u}],onOk:a=>{e.triggerChange(a),t.success("添加成功")}})},onChangeCustomRegexp:function(e){i({title:"修改自定义正则表达式",defaultValue:e.value,placeholder:"请输入正则表达式",rules:[{required:!0,message:"正则表达式不能为空！"},{validator:u}],onOk:a=>{e.triggerChange(a),a!==e.value&&t.success("修改成功")}})}}));var d}}),ee={class:"custom-option-list rc-virtual-list-holder-inner",style:{"border-top":"1px solid #dfdfdf"}},te=["onClick"];var ae=S(Z,[["render",function(e,t,a,l,o,n){const i=C("VNodes"),r=C("a-select"),s=C("a-col"),u=C("a-button"),d=C("a-row"),p=C("JVxeTable");return x(),w(p,B({ref:"tableRef",rowNumber:"",keyboardEdit:"",class:[e.prefixCls],maxHeight:e.tableHeight.noToolbar,loading:e.loading,columns:e.columns,dataSource:e.dataSource,disabledRows:{dbFieldName:["id","has_child"]}},e.tableProps),{fieldValidType:O((t=>[P(d,{type:"flex",class:_(["row-valid-type",{full:!e.isCustomRegexp(t.value)}])},{default:O((()=>[P(s,{class:_(["left"])},{default:O((()=>[P(r,{value:t.value,options:e.validTypeOptions,style:{width:"100%"},onChange:t.triggerChange},{dropdownRender:O((({menuNode:a})=>[P(i,{vnodes:a},null,8,["vnodes"]),L(k("div",ee,[k("div",{class:"ant-select-item ant-select-item-option",title:"使用自定义正则表达式作为校验规则",onClick:a=>e.onAddCustomRegexp(t)}," 正则表达式 ",8,te)],512),[[A,!e.isCustomRegexp(t.value)]])])),_:2},1032,["value","options","onChange"])])),_:2},1024),P(s,{class:"right",title:"修改自定义正则表达式"},{default:O((()=>[P(u,{preIcon:"ant-design:edit",onClick:()=>e.onChangeCustomRegexp(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["class"])])),_:1},16,["class","maxHeight","loading","columns","dataSource"])}],["__scopeId","data-v-8470723a"]]);export{ae as default};
