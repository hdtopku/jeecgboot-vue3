import{l as G,aX as J,F as g,H as M,t as y,v as l,V as x,z as n,aV as e,R as D,S as b,y as c,x as _,D as o,W as t,L as E,E as H,C as r}from"./index.23784a6b.js";import Y from"./CommonList.bcfb8d81.js";import{a as Z,s as i}from"./Am.api.df409892.js";const m=r("\u5DF2\u6253\u5F00\u9A8C\u8BC1\u9875\u9762\uFF0C\u4F46\u8FD8\u6CA1\u70B9\u51FB\u5F00\u59CB\u9A8C\u8BC1"),uu=r("\u6240\u6709\u72B6\u6001\uFF1A\u5DF2\u6253\u5F00+\u5DF2\u5F00\u59CB+\u5DF2\u5173\u95ED+\u9000\u6B3E\u7B49"),su=r("\u9A8C\u8BC1\u7ED3\u675F\u540E\uFF0C\u7CFB\u7EDF\u5173\u95ED\u6559\u7A0B\u53CA\u9875\u9762\u81F3\u7A7A\u767D"),nu={key:0},au={key:1},ou={key:0},lu={key:1},cu={key:0},ru=r(),eu={key:1},_u={key:0},tu={key:1},du=r("\u7F16\u8F91 "),hu=r(" \u9500\u6BC1\u9A8C\u8BC1 "),pu=r("\u6253\u5F00\u65F6\u95F4"),yu=r("\u9A8C\u8BC1\u65F6\u95F4"),vu={key:0},fu=r(" \u672A\u5F00\u59CB"),ku=r("\u6700\u540E\u8BBF\u95EE"),Bu={key:0},Cu={key:0},Fu=r("\u4E70\u5BB6\u9000\u6B3E"),gu={key:1},Eu=r("\u521B\u5EFA\u4EBA"),Au={key:0,class:"font-light text-sm text-gray-500"},Tu=G({__name:"AmDataList",emits:["handleEdit"],setup(xu,{expose:I,emit:K}){const{hasPermission:v}=J(),w=g(),A=g(),P=(s,k)=>{s.valid=k,i(s,!0).then(()=>{})},p=g("0"),Q=s=>(s==null?void 0:s.type)===6?"https://c.taojingling.cn/d/"+(s==null?void 0:s.code):"https://c.taojingling.cn/c/"+(s==null?void 0:s.code),f=g(0);M(A,()=>{var s,k;f.value=0,(k=(s=A.value)==null?void 0:s.records)==null||k.forEach(a=>{a.valid===-1&&(a.status===-1||a.status===-2)&&++f.value,a.showOperate=(a==null?void 0:a.valid)!==-1&&(a==null?void 0:a.status)>-1&&(a==null?void 0:a.status)<4})});const U=s=>{switch(s=Number.parseInt(s),s){case 0:case 1:case 2:return"processing";case 3:return"cyan";case 4:return"success";case-1:case-2:return"error"}},W=s=>{K("handleEdit",s)},T=g(!1);return I({startQuery:(s={})=>{p.value=s==null?void 0:s.status,w.value.execQuery(Z,s)},changeAdvanced:()=>{T.value=!T.value},changeActiveKey:s=>{p.value=s}}),(s,k)=>{const a=y("a-typography-text"),X=y("a-typography-link"),L=y("a-button"),N=y("a-menu-item"),q=y("a-menu"),h=y("a-tag");return l(),x(Y,{ref_key:"CommonListRef",ref:w},{header:n(()=>[e("span",null,[D(c(a,{mark:""},{default:n(()=>[m]),_:1},512),[[b,p.value==="1"]]),D(c(a,{mark:""},{default:n(()=>[uu]),_:1},512),[[b,p.value==="0"]]),D(c(a,{mark:""},{default:n(()=>[su]),_:1},512),[[b,p.value==="2"]]),D(c(a,{mark:""},{default:n(()=>{var u,d;return[((u=A.value)==null?void 0:u.total)===0?(l(),_("span",nu,"\u4E70\u5BB6\u7533\u8BF7\u9000\u6B3E\uFF0C\u8BB0\u5F97\u9500\u6BC1\u9A8C\u8BC1\u9875\u9762")):(l(),_("span",au,[e("span",null,"\u7BA1\u7406\u5458\u5173\u95ED"+o(((d=A.value)==null?void 0:d.total)-f.value)+"\u6761",1),f.value>0?(l(),_("span",ou,"+\u4E70\u5BB6\u4E3B\u52A8\u9000\u6B3E"+o(f.value)+"\u6761",1)):(l(),_("span",lu,"\u4E70\u5BB6\u4E3B\u52A8\u9000\u6B3E"))]))]}),_:1},512),[[b,p.value==="4"]])])]),shelter:n(({item:u})=>[u.verifyCount>0?(l(),_("span",cu,"|"+o(u.verifyCount),1)):t("",!0),ru,E(v)("link:switch")&&(u==null?void 0:u.type)===6?(l(),_("span",eu,"[\u5C0A]")):t("",!0)]),left:n(({item:u})=>{var d,B;return[e("div",null,[c(a,{copyable:{text:Q(u)}},{default:n(()=>[e("span",{class:H(["",(u==null?void 0:u.valid)===-1?"text-gray-500 line-through":"text-purple-900 font-medium"])},o(u==null?void 0:u.code),3)]),_:2},1032,["copyable"])]),E(v)("link:switch")&&((d=u==null?void 0:u.link)==null?void 0:d.length)>3?(l(),_("div",_u,[c(X,{copyable:{text:u==null?void 0:u.link}},{default:n(()=>{var C,F;return[r(o((F=u==null?void 0:u.link)==null?void 0:F.substring(((C=u==null?void 0:u.link)==null?void 0:C.length)-4)),1)]}),_:2},1032,["copyable"])])):t("",!0),E(v)("link:switch")&&((B=u==null?void 0:u.remark)==null?void 0:B.length)>0?(l(),_("div",tu,[c(a,{copyable:{text:u==null?void 0:u.remark},mark:""},{default:n(()=>[r(" \u6CE8:"+o(u==null?void 0:u.remark),1)]),_:2},1032,["copyable"])])):t("",!0)]}),operate:n(({item:u})=>[c(q,null,{default:n(()=>[u?(l(),x(N,{key:0,onClick:d=>W(u)},{default:n(()=>[E(v)("link:switch")?(l(),x(L,{key:0,type:"link",size:"small"},{default:n(()=>[du]),_:1})):t("",!0)]),_:2},1032,["onClick"])):t("",!0),c(N,null,{default:n(()=>[t("",!0),c(L,{type:"link",size:"small",danger:"",onClick:d=>P(u,-1)},{default:n(()=>[hu]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),top:n(({item:u})=>{var d,B,C,F,V,z,O,S,R,$,j;return[e("div",null,o(((d=u==null?void 0:u.country)==null?void 0:d.indexOf("\u4E2D\u56FD"))>-1||((C=(B=u==null?void 0:u.country)==null?void 0:B.toUpperCase())==null?void 0:C.indexOf("CHINA"))>-1?"":u.country)+" "+o(u.province)+o(u.city)+o(u.county)+" | "+o(u.browser),1),e("div",null,o(u.operator)+" | "+o(u.model)+" | "+o(u.system),1),e("div",null,[c(h,null,{default:n(()=>[pu]),_:1}),r(" "+o((F=u==null?void 0:u.visitTime)==null?void 0:F.substring(5)),1)]),e("div",null,[c(h,null,{default:n(()=>[yu]),_:1}),((V=u==null?void 0:u.verifyTime)==null?void 0:V.length)>0?(l(),_("span",vu,o((z=u==null?void 0:u.verifyTime)==null?void 0:z.substring(5)),1)):(l(),x(h,{key:1,color:"error",plain:"",plainFill:""},{default:n(()=>[fu]),_:1}))]),e("div",null,[c(h,null,{default:n(()=>[ku]),_:1}),((O=u==null?void 0:u.updateTime)==null?void 0:O.length)>0?(l(),_("span",Bu,o((S=u==null?void 0:u.updateTime)==null?void 0:S.substring(5)),1)):t("",!0)]),((R=u==null?void 0:u.refundTime)==null?void 0:R.length)>0?(l(),_("div",Cu,[c(h,{color:"error"},{default:n(()=>[Fu]),_:1}),e("span",null,o(($=u==null?void 0:u.refundTime)==null?void 0:$.substring(5)),1)])):t("",!0),E(v)("link:switch")&&((j=u==null?void 0:u.createBy)==null?void 0:j.length)>0?(l(),_("div",gu,[c(h,null,{default:n(()=>[Eu]),_:1}),e("span",null,o(u==null?void 0:u.createBy),1)])):t("",!0)]}),right:n(({item:u})=>[e("div",null,[e("div",null,[c(h,{color:U(u.status)},{default:n(()=>[e("text",{class:H((u==null?void 0:u.valid)===-1?"line-through":"")},o(u.statusName),3)]),_:2},1032,["color"])]),(u==null?void 0:u.valid)!==-1&&(u==null?void 0:u.status)>-1&&(u==null?void 0:u.status)<4?t("",!0):(l(),_("div",Au," \u9875\u9762\u7A7A\u767D "))])]),_:1},512)}}});export{Tu as default};
