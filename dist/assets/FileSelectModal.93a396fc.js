import{l as e,F as a,bH as t,f0 as n,a1 as l,t as o,v as i,V as r,z as s,y as c}from"./index.b3c93d64.js";import{B as u}from"./index.ee0a0c33.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";var d=(e,a,t)=>new Promise(((n,l)=>{var o=e=>{try{r(t.next(e))}catch(a){l(a)}},i=e=>{try{r(t.throw(e))}catch(a){l(a)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);r((t=t.apply(e,a)).next())}));var f=n(e({name:"FileSelectModal",components:{BasicModal:u},emits:["select","register"],setup(e,{emit:n}){const o=a(!0),i=a([]),r=a(""),[s,{closeModal:c}]=t((()=>d(this,null,(function*(){r.value="",0===i.value.length&&function(){d(this,null,(function*(){o.value=!0,i.value=yield l.get({url:"/online/cgform/head/rootFile"}).finally((()=>{o.value=!1}))}))}()}))));return{loading:o,treeData:i,onLoadData:function(e){return d(this,null,(function*(){if(e.dataRef.children)return;let a={parentPath:e.dataRef.key};e.dataRef.children=yield l.get({url:"/online/cgform/head/fileTree",params:a}),i.value=[...i.value]}))},onSelect:function(e){r.value=e[0]},onSubmit:function(){n("select",r.value),c()},onCancel:function(){c()},registerModal:s}}}),[["render",function(e,a,t,n,l,u){const d=o("a-directory-tree"),f=o("a-spin"),m=o("BasicModal");return i(),r(m,{onRegister:e.registerModal,title:"选择目录",width:500,onOk:e.onSubmit,onCancel:e.onCancel},{default:s((()=>[c(f,{spinning:e.loading},{default:s((()=>[c(d,{treeData:e.treeData,loadData:e.onLoadData,onSelect:e.onSelect},null,8,["treeData","loadData","onSelect"])])),_:1},8,["spinning"])])),_:1},8,["onRegister","onOk","onCancel"])}]]);export{f as default};
