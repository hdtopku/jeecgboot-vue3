var P=Object.defineProperty;var f=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,y=(e,t)=>{for(var o in t||(t={}))_.call(t,o)&&g(e,o,t[o]);if(f)for(var o of f(t))F.call(t,o)&&g(e,o,t[o]);return e};var m=(e,t,o)=>new Promise((c,l)=>{var d=s=>{try{r(o.next(s))}catch(u){l(u)}},p=s=>{try{r(o.throw(s))}catch(u){l(u)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(d,p);r((o=o.apply(e,t)).next())});import{B as b}from"./index.e8f8bca4.js";import{B as C}from"./BasicForm.213c2d85.js";import"./helper.ad8866a8.js";import{u as w}from"./useForm.f89b5089.js";import"./JAddInput.e43de06a.js";import{a1 as a,a5 as A,l as x,F as E,bG as I,L as n,o as k,v,V as D,z as M,y as R,B as T}from"./index.bf68c475.js";import{rules as S}from"./validator.1b84e8aa.js";const K=[{title:"\u804C\u52A1\u7F16\u7801",dataIndex:"code",width:200,align:"left"},{title:"\u804C\u52A1\u540D\u79F0",dataIndex:"name",width:200},{title:"\u804C\u52A1\u7B49\u7EA7",dataIndex:"postRank_dictText",width:100}],Q=[{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"Input",colProps:{span:8}}],U=[{label:"\u4E3B\u952E",field:"id",component:"Input",show:!1},{label:"\u804C\u7EA7",field:"postRank",component:"JDictSelectTag",required:!0,componentProps:{dictCode:"position_rank",dropdownStyle:{maxHeight:"100vh"},getPopupContainer:()=>document.body}},{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"Input",required:!0},{field:"code",label:"\u804C\u52A1\u7F16\u7801",component:"Input",required:!0,dynamicDisabled:({values:e})=>!!e.id,dynamicRules:({model:e,schema:t})=>S.duplicateCheckRule("sys_position","code",e,t,!0)}],W="/sys/position/exportXls",Y="/sys/position/importExcel",Z=e=>a.get({url:"/sys/position/list",params:e}),L=(e,t)=>{let o=t?"/sys/position/edit":"/sys/position/add";return a.post({url:o,params:e})},O=e=>a.get({url:"/sys/position/queryById",params:e}),ee=(e,t)=>a.delete({url:"/sys/position/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),te=(e,t)=>{A.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>a.delete({url:"/sys/position/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},j=x({__name:"PositionModal",emits:["success","register"],setup(e,{emit:t}){const o=E(!0),[c,{resetFields:l,setFieldsValue:d,validate:p}]=w({schemas:U,showActionButtonGroup:!1}),[r,{setModalProps:s,closeModal:u}]=I(i=>m(this,null,function*(){yield l(),s({confirmLoading:!1}),o.value=!!(i!=null&&i.isUpdate),n(o)&&(i.record=yield O({id:i.record.id}),yield d(y({},i.record)))})),h=k(()=>n(o)?"\u7F16\u8F91\u804C\u52A1":"\u65B0\u589E\u804C\u52A1");function B(){return m(this,null,function*(){try{const i=yield p();s({confirmLoading:!0}),yield L(i,o.value),u(),t("success")}finally{s({confirmLoading:!1})}})}return(i,q)=>(v(),D(n(b),T(i.$attrs,{onRegister:n(r),title:n(h),onOk:B,width:700}),{default:M(()=>[R(n(C),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var oe=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{oe as P,j as _,W as a,Y as b,K as c,ee as d,te as e,Z as g,Q as s};
