import{B as e}from"./BasicTable.8cbbb86a.js";import"./helper.7e5efd4b.js";import"./TableImg.f02873d7.js";import{u as t}from"./useTable.98dbd6c0.js";import{d as o,e as s,f as a}from"./auth.api.a6f2a5e6.js";import{b as i,c as r}from"./auth.data.f236296d.js";import{l as n,F as d,H as u,f0 as p,t as c,v as m,x as l,y as f,z as j,C as b}from"./index.26a57b91.js";import{b as h}from"./_baseClone.a8082016.js";import"./_arrayPush.8821345e.js";import"./isArray.40a4ed15.js";import"./BasicForm.5f094c03.js";import"./uniqBy.006870c7.js";import"./index.934459b9.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import"./useFormItem.efca0b58.js";import"./api.54a4ca84.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";import"./index.1a78ea68.js";import"./useContentHeight.3e69d770.js";import"./useContentViewHeight.34b8e2f1.js";import"./usePageContext.dd16d566.js";import"./RedoOutlined.48666e00.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./index.9c299300.js";var g=(e,t,o)=>new Promise(((s,a)=>{var i=e=>{try{n(o.next(e))}catch(t){a(t)}},r=e=>{try{n(o.throw(e))}catch(t){a(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,r);n((o=o.apply(e,t)).next())}));const v=n({name:"AuthButtonConfig",components:{BasicTable:e},props:{headId:{type:String,default:"",required:!0}},setup(e){const n=d(""),p=d(2),c=d(3),m=d(5),[l,{reload:f}]=t({api:function(e){return g(this,null,(function*(){let t=yield o(n.value,e),{authList:s,buttonList:a}=t,i=[];for(let e of h(r,5)){let t={status:0,page:c.value},o=s.find((t=>t.code==e.code));Object.assign(e,t,o),i.push(e)}return function(e,t,o){for(let s of t){let t=e.find((e=>e.code==s.buttonCode)),a={code:s.buttonCode,title:s.buttonName,status:0,page:"form"==s.buttonStyle?m.value:c.value};o.push(Object.assign(a,t))}return o}(s,a,i)}))},rowKey:"code",bordered:!0,columns:i,showIndexColumn:!1});return u((()=>e.headId),(e=>{n.value=e.split("?")[0],f().catch((()=>null))}),{immediate:!0}),{registerTable:l,onUpdateStatus:function(e,t){return g(this,null,(function*(){e?function(e){g(this,null,(function*(){let t=yield s({id:e.id,code:e.code,page:e.page,cgformId:n.value,type:p.value,control:5,status:1});e.id=t.id,e.status=1}))}(t):function(e){g(this,null,(function*(){yield a(e.id),e.status=0}))}(t)}))}}}}),x={class:"auth-field-config"};var y=p(v,[["render",function(e,t,o,s,a,i){const r=c("a-switch"),n=c("BasicTable");return m(),l("div",x,[f(n,{onRegister:e.registerTable},{switch:j((({text:t,record:o})=>[f(r,{size:"small",checked:1===o.status,onChange:t=>e.onUpdateStatus(t,o)},null,8,["checked","onChange"])])),control:j((()=>[b(" 可见 ")])),_:1},8,["onRegister"])])}]]);export{y as default};
