import{l,F as e,t as a,v as t,x as u,y as i,z as n,R as d,S as o,aW as r,D as s,C as v,V as c,W as p,E as f,ax as y}from"./index.435ab247.js";import m from"./CommonList.766009f5.js";import{a as _,s as k}from"./IdeaMember.api.d75fd08e.js";import g from"./IdeaSysIpInfo.b0836ce1.js";const h=v("按激活时间倒排"),b=v("按更新时间倒排"),C=v("标识"),I={key:0},x=v("未绑定"),w={key:0},j=v(" 备注 "),z={class:"text-red-500"},T={key:1},L=v(" 重点观察中 "),A=v("打开"),S={key:0},U=v("未打开"),q=v("激活"),E=v("截止"),N={key:0},R=v("账密"),D=v("更新"),M=v("未关联"),O={style:{color:"#dc2626"}},P=["onClick"],Q=["onClick"],V=v("置顶"),W=v("编辑"),$=v("失效 "),F=v(" 恢复 "),H=v(" 重点观察 "),B=v(" 取消重点 "),G=v("未绑定"),J=l({__name:"IdeaMemberDataList",emits:["queryList","handleEdit"],setup(l,{expose:J,emit:K}){const X=e(!1),Y=e(!1),Z=()=>{Y.value=!1},ll=l=>"https://c.taojingling.cn/j/"+l,el=l=>{if(-1===l.valid)return"error";switch(Number.parseInt(l.status)){case 1:return"processing";case 2:return"success";case 0:return"error"}},al=e(),tl=(l,e=!1)=>{al.value=l,al.value.showIp=e,Y.value=!0},ul=(l,e)=>{l.valid=e,k(l,!0).then((()=>{K("queryList")}))},il=e("0"),nl=e(),dl=l=>{var e,a,t,u;if((null==(e=null==l?void 0:l.sysIps)?void 0:e.length)>0){let e=null==l?void 0:l.sysIps[0];return((null==(a=null==e?void 0:e.country)?void 0:a.indexOf("中国"))>-1||(null==(u=null==(t=null==e?void 0:e.country)?void 0:t.toUpperCase())?void 0:u.indexOf("CHINA"))>-1?"":null==e?void 0:e.country)+e.province+e.city+e.county+" | "+e.browser}return""},ol=l=>{var e;if((null==(e=null==l?void 0:l.sysIps)?void 0:e.length)>0){let e=null==l?void 0:l.sysIps[0];return e.operator+" | "+e.model+" | "+e.system}return""};return J({startQuery:(l={})=>{il.value=null==l?void 0:l.status,nl.value.execQuery(_,l)},changeAdvanced:()=>{X.value=!X.value}}),(l,e)=>{const _=a("a-typography-text"),J=a("a-tag"),rl=a("a-button"),sl=a("a-menu-item"),vl=a("a-menu"),cl=a("a-drawer");return t(),u(y,null,[i(m,{ref_key:"CommonListRef",ref:nl},{header:n((()=>[d(i(_,{mark:""},{default:n((()=>[h])),_:1},512),[[o,"0"===il.value]]),d(i(_,{mark:""},{default:n((()=>[b])),_:1},512),[[o,"0"!==il.value]])])),top:n((({item:l})=>{var e,a;return[r("div",null,s(dl(l)),1),r("div",null,s(ol(l)),1),r("div",null,[i(J,{color:"processing"},{default:n((()=>[i(_,null,{default:n((()=>[C])),_:1})])),_:1}),(null==l?void 0:l.identity.length)>0?(t(),u("span",I,[i(_,{copyable:""},{default:n((()=>[v(s(l.identity),1)])),_:2},1024)])):(t(),c(J,{key:1,color:"error"},{default:n((()=>[x])),_:1}))]),(null==(a=null==(e=null==l?void 0:l.remark)?void 0:e.trim())?void 0:a.length)>0?(t(),u("div",w,[i(J,{color:"error"},{default:n((()=>[j])),_:1}),r("span",z,s(null==l?void 0:l.remark),1)])):p("",!0),1===(null==l?void 0:l.valid)?(t(),u("div",T,[i(J,{color:"warning"},{default:n((()=>[L])),_:1})])):p("",!0)]})),bottom:n((({item:l})=>{var e,a,p,f,y;return[r("div",null,[i(J,null,{default:n((()=>[A])),_:1}),(null==(e=null==l?void 0:l.openTime)?void 0:e.length)>0?(t(),u("span",S,s(null==l?void 0:l.openTime),1)):(t(),c(J,{key:1,color:"error"},{default:n((()=>[U])),_:1}))]),r("div",null,[i(J,null,{default:n((()=>[q])),_:1}),v(" "+s(null==l?void 0:l.activeTime),1)]),r("div",null,[i(J,null,{default:n((()=>[E])),_:1}),v(" "+s(null==l?void 0:l.invalidTime),1)]),r("div",null,[2===(null==l?void 0:l.status)&&null!=(null==l?void 0:l.ideaStatus)?(t(),u("span",N,[i(_,{delete:-1===(null==l?void 0:l.ideaStatus),copyable:!!X.value&&{text:(f=l.ideaAccount,y=l.ideaPassword,`账【${f}】\n密【${y}】`)}},{default:n((()=>[r("div",null,[i(J,null,{default:n((()=>[i(_,null,{default:n((()=>[R])),_:1})])),_:1}),i(_,{copyable:X.value},{default:n((()=>[v(s(l.ideaAccount),1)])),_:2},1032,["copyable"])]),i(_,{copyable:X.value},{default:n((()=>[v(s(l.ideaPassword),1)])),_:2},1032,["copyable"])])),_:2},1032,["delete","copyable"]),d(r("div",null,[r("div",null," 售后至："+s(null==(a=null==l?void 0:l.ideaInvalidTime)?void 0:a.substring(0,10)),1),r("div",null," 失效："+s(null==(p=null==l?void 0:l.ideaRealInvalidTime)?void 0:p.substring(0,10)),1),r("div",null,[i(J,null,{default:n((()=>[D])),_:1}),v(" "+s(null==l?void 0:l.updateTime),1)])],512),[[o,X.value]])])):(t(),c(J,{key:1,color:"error"},{default:n((()=>[M])),_:1}))])]})),left:n((({item:l,index:e})=>[r("div",null,[i(_,{copyable:{text:ll(null==l?void 0:l.code)}},{default:n((()=>[r("span",{class:f(["",-1===(null==l?void 0:l.valid)?"text-gray-500 line-through":"text-purple-900 font-medium"])},s(null==l?void 0:l.code),3)])),_:2},1032,["copyable"])]),r("div",O,[r("div",null,[r("a",{href:"javascript:;",onClick:e=>tl(l)},s(null==l?void 0:l.sysIps.length)+"个设备",9,P)]),r("div",null,[r("a",{href:"javascript:;",onClick:e=>tl(l,!0)},s(null==l?void 0:l.ideaUsages.length)+"个账号",9,Q)]),v(" 总"+s(null==l?void 0:l.count)+"次提取 ",1)])])),operate:n((({item:l,index:e})=>[i(vl,null,{default:n((()=>[i(sl,{onClick:e=>{return a=l.id,void k({id:a},!0).then((()=>{K("queryList")}));var a}},{default:n((()=>[i(rl,{type:"warning",ghost:"",size:"small"},{default:n((()=>[V])),_:1})])),_:2},1032,["onClick"]),i(sl,{onClick:e=>{K("handleEdit",l)}},{default:n((()=>[i(rl,{type:"link",size:"small"},{default:n((()=>[W])),_:1})])),_:2},1032,["onClick"]),0===l.valid||1===l.valid?(t(),c(sl,{key:0,onClick:e=>ul(l,-1)},{default:n((()=>[i(rl,{type:"link",size:"small",danger:""},{default:n((()=>[$])),_:1})])),_:2},1032,["onClick"])):p("",!0),-1===l.valid?(t(),c(sl,{key:1,onClick:e=>ul(l,0)},{default:n((()=>[i(rl,{type:"link",size:"small"},{default:n((()=>[F])),_:1})])),_:2},1032,["onClick"])):p("",!0),1!==l.valid?(t(),c(sl,{key:2,onClick:e=>ul(l,1)},{default:n((()=>[i(rl,{type:"warning",size:"small"},{default:n((()=>[H])),_:1})])),_:2},1032,["onClick"])):p("",!0),1===l.valid?(t(),c(sl,{key:3,onClick:e=>ul(l,0)},{default:n((()=>[i(rl,{type:"warning",size:"small",ghost:""},{default:n((()=>[B])),_:1})])),_:2},1032,["onClick"])):p("",!0)])),_:2},1024)])),right:n((({item:l})=>[i(J,{color:el(l)},{default:n((()=>[r("text",{class:f(-1===(null==l?void 0:l.valid)?"line-through":"")},s(l.statusName),3)])),_:2},1032,["color"])])),_:1},512),i(cl,{placement:"bottom",closable:"",visible:Y.value,onClose:Z},{title:n((()=>{var l,e;return[r("div",null,[i(J,null,{default:n((()=>{var l;return[v("总次数："+s((null==(l=al.value)?void 0:l.showIp)?al.value.totalUseCount:al.value.totalVisitCount),1)]})),_:1}),i(_,{copyable:{text:ll(null==(l=al.value)?void 0:l.code)}},{default:n((()=>{var l,e;return[r("span",{class:f(["",-1===(null==(l=al.value)?void 0:l.valid)?"text-gray-500 line-through":"text-purple-900 font-medium"])},s(null==(e=al.value)?void 0:e.code),3)]})),_:1},8,["copyable"])]),r("div",null,[i(J,null,{default:n((()=>{var l,e;return[v("总条数："+s((null==(l=al.value)?void 0:l.showIp)?al.value.ideaUsages.length:null==(e=al.value)?void 0:e.sysIps.length),1)]})),_:1}),(null==(e=al.value)?void 0:e.identity.length)>0?(t(),c(_,{key:0,copyable:""},{default:n((()=>[r("span",null,s(al.value.identity),1)])),_:1})):(t(),c(J,{key:1,color:"error"},{default:n((()=>[G])),_:1}))])]})),default:n((()=>[i(g,{ipIdeaItem:al.value},null,8,["ipIdeaItem"])])),_:1},8,["visible"])],64)}}});export{J as default};
