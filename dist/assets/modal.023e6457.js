var e=(e,l,a)=>new Promise(((t,d)=>{var o=e=>{try{u(a.next(e))}catch(l){d(l)}},r=e=>{try{u(a.throw(e))}catch(l){d(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);u((a=a.apply(e,l)).next())}));import{B as l}from"./index.e1e06dd6.js";import{s as a}from"./jvxetable.api.559da4d2.js";import{o as t,a as d}from"./api.c33adc6d.js";import{l as o,F as r,a8 as u,bH as n,L as s,o as i,q as c,t as p,v as f,V as m,z as v,y as _,aW as g,x as M,bc as y,ax as h,B as C,C as k}from"./index.435ab247.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";const b=o({name:"tableModal",components:{BasicModal:l},emits:["success","register"],setup(l,{emit:o}){const c=r(!0),p=r(""),f=r(),m=u({xs:{span:24},sm:{span:5}}),v=u({xs:{span:24},sm:{span:16}}),_=u({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[g,{setModalProps:M,closeModal:y}]=n((l=>e(this,null,(function*(){if(M({confirmLoading:!1}),c.value=!!(null==l?void 0:l.isUpdate),_.id=null,_.orderCode="",_.orderMoney="",_.orderDate=null,_.ctype="",_.content="",_.jeecgOrderCustomerList=[],_.jeecgOrderTicketList=[],s(c)){p.value=l.record.id,Object.assign(_,l.record);let e={id:_.id};const a=yield t(e);_.jeecgOrderCustomerList=a;const o=yield d(e);_.jeecgOrderTicketList=o}})))),h=i((()=>s(c)?"编辑":"新增"));return{formRef:f,validatorRules:{orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},orderMainModel:_,registerModal:g,getTitle:h,labelCol:m,wrapperCol:v,addRowCustom:function(){_.jeecgOrderCustomerList.push({})},delRowCustom:function(e){_.jeecgOrderCustomerList.splice(e,1),_.jeecgOrderCustomerList.splice(e,1)},addRowTicket:function(){_.jeecgOrderTicketList.push({})},delRowTicket:function(e){_.jeecgOrderTicketList.splice(e,1),_.jeecgOrderTicketList.splice(e,1)},handleSubmit:function(){return e(this,null,(function*(){f.value.validate().then((()=>e(this,null,(function*(){try{M({confirmLoading:!0}),yield a(_,s(c)),y(),o("success")}finally{M({confirmLoading:!1})}})))).catch((e=>{}))}))}}}}),j=k("国内订单"),x=k("国际订单"),w=k("客户名"),U=k("性别"),L=k("身份证号码"),O=k("手机号"),R=k("操作"),T=k("男"),D=k("女"),Y=k(" 添加客户信息 "),B=k("航班号"),q=k("航班时间"),z=k("操作"),F=k(" 添加机票信息 ");var H=c(b,[["render",function(e,l,a,t,d,o){const r=p("a-input"),u=p("a-form-item"),n=p("a-col"),s=p("a-select-option"),i=p("a-select"),c=p("a-date-picker"),k=p("a-row"),b=p("Icon"),H=p("a-button"),P=p("a-tab-pane"),S=p("a-tabs"),I=p("a-form"),W=p("BasicModal");return f(),m(W,C(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:v((()=>[_(I,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:v((()=>[_(k,{class:"form-row",gutter:16},{default:v((()=>[_(n,{lg:8},{default:v((()=>[_(u,{label:"订单号",name:"orderCode"},{default:v((()=>[_(r,{value:e.orderMainModel.orderCode,"onUpdate:value":l[0]||(l[0]=l=>e.orderMainModel.orderCode=l),placeholder:"请输入订单号"},null,8,["value"])])),_:1})])),_:1}),_(n,{lg:8},{default:v((()=>[_(u,{label:"订单类型"},{default:v((()=>[_(i,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":l[1]||(l[1]=l=>e.orderMainModel.ctype=l)},{default:v((()=>[_(s,{value:"1"},{default:v((()=>[j])),_:1}),_(s,{value:"2"},{default:v((()=>[x])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),_(n,{lg:8},{default:v((()=>[_(u,{label:"订单日期"},{default:v((()=>[_(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":l[2]||(l[2]=l=>e.orderMainModel.orderDate=l)},null,8,["value"])])),_:1})])),_:1})])),_:1}),_(k,{class:"form-row",gutter:16},{default:v((()=>[_(n,{lg:8},{default:v((()=>[_(u,{label:"订单金额"},{default:v((()=>[_(r,{value:e.orderMainModel.orderMoney,"onUpdate:value":l[3]||(l[3]=l=>e.orderMainModel.orderMoney=l),placeholder:"请输入订单金额"},null,8,["value"])])),_:1})])),_:1}),_(n,{lg:8},{default:v((()=>[_(u,{label:"订单备注"},{default:v((()=>[_(r,{value:e.orderMainModel.content,"onUpdate:value":l[4]||(l[4]=l=>e.orderMainModel.content=l),placeholder:"请输入订单备注"},null,8,["value"])])),_:1})])),_:1})])),_:1}),_(S,{defaultActiveKey:"1"},{default:v((()=>[_(P,{tab:"客户信息",key:"1"},{default:v((()=>[g("div",null,[_(k,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:v((()=>[_(n,{span:5},{default:v((()=>[w])),_:1}),_(n,{span:5},{default:v((()=>[U])),_:1}),_(n,{span:6},{default:v((()=>[L])),_:1}),_(n,{span:6},{default:v((()=>[O])),_:1}),_(n,{span:2},{default:v((()=>[R])),_:1})])),_:1}),(f(!0),M(h,null,y(e.orderMainModel.jeecgOrderCustomerList,((l,a)=>(f(),m(k,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:a},{default:v((()=>[_(n,{span:6,style:{display:"none"}},{default:v((()=>[_(u,null,{default:v((()=>[_(r,{placeholder:"id",value:l.id,"onUpdate:value":e=>l.id=e},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),_(n,{span:5},{default:v((()=>[_(u,null,{default:v((()=>[_(r,{placeholder:"客户名",value:l.name,"onUpdate:value":e=>l.name=e},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),_(n,{span:5},{default:v((()=>[_(u,null,{default:v((()=>[_(i,{placeholder:"性别",value:l.sex,"onUpdate:value":e=>l.sex=e},{default:v((()=>[_(s,{value:"1"},{default:v((()=>[T])),_:1}),_(s,{value:"2"},{default:v((()=>[D])),_:1})])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),_(n,{span:6},{default:v((()=>[(f(),m(u,{name:["jeecgOrderCustomerList",a,"idcard"],rules:[{required:!0,message:"请输入身份证号",trigger:"blur"}],key:a},{default:v((()=>[_(r,{placeholder:"身份证号",value:l.idcard,"onUpdate:value":e=>l.idcard=e},null,8,["value","onUpdate:value"])])),_:2},1032,["name"]))])),_:2},1024),_(n,{span:6},{default:v((()=>[_(u,{name:["jeecgOrderCustomerList",a,"telphone"]},{default:v((()=>[_(r,{placeholder:"手机号",value:l.telphone,"onUpdate:value":e=>l.telphone=e},null,8,["value","onUpdate:value"])])),_:2},1032,["name"])])),_:2},1024),_(n,{span:2},{default:v((()=>[_(u,null,{default:v((()=>[_(b,{icon:"ant-design:minus-outlined",onClick:l=>e.delRowCustom(a),style:{fontsize:"20px"}},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),_(H,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:e.addRowCustom},{default:v((()=>[_(b,{icon:"ph:plus-bold"}),Y])),_:1},8,["onClick"])])])),_:1}),_(P,{tab:"机票信息",key:"2",forceRender:""},{default:v((()=>[_(k,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:v((()=>[_(n,{span:6},{default:v((()=>[B])),_:1}),_(n,{span:6},{default:v((()=>[q])),_:1}),_(n,{span:6},{default:v((()=>[z])),_:1})])),_:1}),(f(!0),M(h,null,y(e.orderMainModel.jeecgOrderTicketList,((l,a)=>(f(),m(k,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:a},{default:v((()=>[_(n,{span:6,style:{display:"none"}},{default:v((()=>[_(u,null,{default:v((()=>[_(r,{placeholder:"id",value:l.id,"onUpdate:value":e=>l.id=e},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),_(n,{span:6},{default:v((()=>[_(u,{name:["jeecgOrderTicketList",a,"ticketCode"],rules:{required:!0,message:"请输入航班号",trigger:"blur"}},{default:v((()=>[_(r,{placeholder:"航班号",value:l.ticketCode,"onUpdate:value":e=>l.ticketCode=e},null,8,["value","onUpdate:value"])])),_:2},1032,["name"])])),_:2},1024),_(n,{span:6},{default:v((()=>[_(u,null,{default:v((()=>[_(c,{placeholder:"航班时间",valueFormat:"YYYY-MM-DD",value:l.tickectDate,"onUpdate:value":e=>l.tickectDate=e},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024),_(n,{span:6},{default:v((()=>[_(u,null,{default:v((()=>[_(b,{icon:"ant-design:minus-outlined",onClick:l=>e.delRowTicket(a),style:{fontsize:"20px"}},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),_(H,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:e.addRowTicket},{default:v((()=>[_(b,{icon:"ph:plus-bold"}),F])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col","rules"])])),_:1},16,["onRegister","title","onOk"])}],["__scopeId","data-v-609fd010"]]);export{H as default};
