import e from"./LeftRole.b380ebcf.js";import t from"./LeftDepart.e4d30133.js";import a from"./LeftUser.35dac4ff.js";import r from"./AuthFieldTree.3e19c97d.js";import o from"./AuthButtonTree.1e4e31f6.js";import l from"./AuthDataTree.de4053ae.js";import{B as n}from"./index.e1e06dd6.js";import{l as d,F as c,o as i,bH as u,f0 as s,Q as f,t as p,v as m,V as j,z as v,y as b,x as h,ax as y,W as g}from"./index.435ab247.js";import"./BasicTable.0748ea8a.js";import"./helper.1c9dc9a5.js";import"./TableImg.e204e8e3.js";import"./api.bc301b0f.js";import"./useListPage.26849a0d.js";import"./useTable.6359f662.js";import"./BasicForm.d9f6c231.js";import"./uniqBy.91f18935.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";import"./useForm.45d68074.js";import"./JAddInput.8c125e2c.js";import"./useFormItem.816007c4.js";import"./props.5467b933.js";import"./index.713dc63d.js";import"./bem.0e923c54.js";import"./props.37836c63.js";import"./useContextMenu.82ce6d89.js";import"./index.e1ec35e6.js";import"./onMountedOrActivated.e9ddbd41.js";import"./index.627c6cd3.js";import"./htmlmixed.749cbc8c.js";import"./vue.f62dfd4a.js";/* empty css             */import"./depart.api.c07add53.js";import"./index.4cdbd2ab.js";import"./useContentHeight.60ff243a.js";import"./useContentViewHeight.f55d8457.js";import"./usePageContext.56c44530.js";import"./RedoOutlined.9fc7613c.js";import"./functional.be5901d6.js";import"./download.5dc68cfb.js";import"./base64Conver.030fa32c.js";import"./index.a5502478.js";import"./index.64086148.js";import"./useCountdown.adc4ab77.js";import"./JUpload.e164672b.js";import"./index.cdc49bf1.js";import"./auth.api.8020f544.js";import"./auth.data.50be0292.js";var R=Object.defineProperty,S=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t,a)=>new Promise(((r,o)=>{var l=e=>{try{d(a.next(e))}catch(t){o(t)}},n=e=>{try{d(a.throw(e))}catch(t){o(t)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);d((a=a.apply(e,t)).next())}));var _=s(d({name:"AuthSetterModal",components:{BasicModal:n,LeftRole:e,LeftDepart:t,LeftUser:a,AuthFieldTree:r,AuthButtonTree:o,AuthDataTree:l},props:{tableType:{type:Number,default:1}},setup(e){const t=c(""),a=c(!1),r=c("field"),o=c("role"),l={fieldRef:c(),buttonRef:c(),dataRef:c(),roleRef:c(),userRef:c(),departRef:c()},n=c(""),d=i((()=>1==e.tableType||2==e.tableType)),[s,{closeModal:p}]=u((e=>{r.value="field",t.value!=e.cgformId&&(t.value=e.cgformId,function(){M(this,null,(function*(){yield f(),v(),m().clear()}))}())}));function m(e=r.value){var t;return null==(t=l[e+"Ref"])?void 0:t.value}function j(){"role"==o.value?(l.departRef.value.clearSelected(),l.userRef.value.clearSelected()):"depart"==o.value?(l.roleRef.value.clearSelected(),l.userRef.value.clearSelected()):"user"==o.value&&(l.departRef.value.clearSelected(),l.roleRef.value.clearSelected())}function v(){"role"==o.value?l.roleRef.value.clearSelected():"depart"==o.value?l.departRef.value.clearSelected():"user"==o.value&&l.userRef.value.clearSelected(),m().clearChecked()}function b(e){return M(this,null,(function*(){yield f(),n.value&&m(e).loadChecked(n.value,o.value)}))}return h=((e,t)=>{for(var a in t||(t={}))A.call(t,a)&&I(e,a,t[a]);if(x)for(var a of x(t))T.call(t,a)&&I(e,a,t[a]);return e})({},l),S(h,C({cgformId:t,loading:a,activeKey:r,hasDataAuth:d,authMode:o,onAuthModeChange:function(){v()},onAuthTypeChange:b,closeModal:p,onSelectRole:function(e){n.value=e,b(r.value),j()},onSelectDepart:function(e){n.value=e,b(r.value),j()},onSelectUser:function(e){n.value=e,b(r.value),j()},registerModal:s}));var h}}),[["render",function(e,t,a,r,o,l){const n=p("LeftRole"),d=p("a-tab-pane"),c=p("LeftDepart"),i=p("LeftUser"),u=p("a-tabs"),s=p("a-col"),f=p("AuthFieldTree"),R=p("AuthButtonTree"),S=p("AuthDataTree"),C=p("a-row"),x=p("a-spin"),A=p("BasicModal");return m(),j(A,{title:"Online权限授权",width:900,maskClosable:!1,defaultFullscreen:"",okButtonProps:{style:{display:"none"}},cancelText:"关闭",onCancel:e.closeModal,onRegister:e.registerModal},{default:v((()=>[b(x,{spinning:e.loading},{default:v((()=>[b(C,null,{default:v((()=>[b(s,{span:12},{default:v((()=>[b(u,{activeKey:e.authMode,"onUpdate:activeKey":t[0]||(t[0]=t=>e.authMode=t),onChange:e.onAuthModeChange},{default:v((()=>[b(d,{tab:"角色授权",key:"role",forceRender:""},{default:v((()=>[b(n,{ref:"roleRef",onSelect:e.onSelectRole},null,8,["onSelect"])])),_:1}),b(d,{tab:"部门授权",key:"depart",forceRender:""},{default:v((()=>[b(c,{ref:"departRef",onSelect:e.onSelectDepart},null,8,["onSelect"])])),_:1}),b(d,{tab:"人员授权",key:"user",forceRender:""},{default:v((()=>[b(i,{ref:"userRef",onSelect:e.onSelectUser},null,8,["onSelect"])])),_:1})])),_:1},8,["activeKey","onChange"])])),_:1}),b(s,{span:1}),b(s,{span:11},{default:v((()=>[b(u,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t),onChange:e.onAuthTypeChange},{default:v((()=>[b(d,{tab:"字段权限",key:"field",forceRender:""},{default:v((()=>[b(f,{ref:"fieldRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),e.hasDataAuth?(m(),h(y,{key:0},[b(d,{tab:"按钮权限",key:"button",forceRender:""},{default:v((()=>[b(R,{ref:"buttonRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),b(d,{tab:"数据权限",key:"data",forceRender:""},{default:v((()=>[b(S,{ref:"dataRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1})],64)):g("",!0)])),_:1},8,["activeKey","onChange"])])),_:1})])),_:1})])),_:1},8,["spinning"])])),_:1},8,["onCancel","onRegister"])}]]);export{_ as default};
