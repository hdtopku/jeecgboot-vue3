var k=Object.defineProperty;var D=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var F=(o,t,e)=>t in o?k(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))P.call(t,e)&&F(o,e,t[e]);if(D)for(var e of D(t))S.call(t,e)&&F(o,e,t[e]);return o};var c=(o,t,e)=>new Promise((p,n)=>{var d=s=>{try{u(e.next(s))}catch(i){n(i)}},r=s=>{try{u(e.throw(s))}catch(i){n(i)}},u=s=>s.done?p(s.value):Promise.resolve(s.value).then(d,r);u((e=e.apply(o,t)).next())});import{B as V}from"./BasicForm.763c9f74.js";import"./componentMap.995605ed.js";import{u as N}from"./useForm.4b03a18a.js";import"./JAddInput.c425dfe6.js";import{j as R,l as A,C as _,m as E,X as U,E as y,H as l,r as h,s as z,Q as G,w as b,v as g,aW as w,B as H,y as x}from"./index.c1d8dbc8.js";import{b as M}from"./depart.api.ef5d901e.js";import{u as Q,o as B}from"./depart.data.ff6c9320.js";const W={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},te=R({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(o,{emit:t}){const e=o,{prefixCls:p}=A("j-depart-form-content"),n=_(!1),d=_(!0),r=_({}),[u,{resetFields:s,setFieldsValue:i,validate:j,updateSchema:m}]=N({schemas:Q().basicFormSchema,showActionButtonGroup:!1}),v=E(()=>{var a;return(a=e==null?void 0:e.data)!=null&&a.parentId?B.child:B.root});U(()=>{m([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),y(()=>e.data,()=>c(this,null,function*(){let a=l(e.data);typeof a!="object"&&(a={}),r.value=a,yield s(),yield i(f({},a))}),{deep:!0,immediate:!0}),y(()=>e.rootTreeData,()=>c(this,null,function*(){m([{field:"parentId",componentProps:{treeData:e.rootTreeData}}])}),{deep:!0,immediate:!0}),y(v,()=>c(this,null,function*(){m([{field:"orgCategory",componentProps:{options:v.value}}])}),{immediate:!0})});function O(){return c(this,null,function*(){yield s(),yield i(f({},r.value))})}function T(){return c(this,null,function*(){try{n.value=!0;let a=yield j();a=Object.assign({},r.value,a),yield M(a,d.value),t("success"),Object.assign(r.value,a)}finally{n.value=!1}})}return(a,X)=>{const C=h("a-button"),I=h("a-spin");return z(),G(I,{spinning:n.value},{default:b(()=>[g(l(V),{onRegister:l(u)},null,8,["onRegister"]),w("div",W,[w("div",{class:H(["j-box-bottom-button-float",[`${l(p)}`]])},[g(C,{preIcon:"ant-design:sync-outlined",onClick:O},{default:b(()=>[x("\u91CD\u7F6E")]),_:1}),g(C,{type:"primary",preIcon:"ant-design:save-filled",onClick:T},{default:b(()=>[x("\u4FDD\u5B58")]),_:1})],2)])]),_:1},8,["spinning"])}}});export{te as _};
