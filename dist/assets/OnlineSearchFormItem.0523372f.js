import{j as z,C as Y,E as C,eO as Q,c9 as G,r as o,s as i,Q as u,w,aW as J,z as N,t as p,ax as m,v as h,bc as H,y as R,x as $,B as X,dt as Z,du as _}from"./index.c1d8dbc8.js";import"./BasicForm.vue_vue_type_style_index_0_lang.1eae9d9f.js";import"./componentMap.995605ed.js";import{e as x,q as ee,l as le,b as te,r as ae,f as ie,n as ue,J as ne,g as oe,m as re}from"./JAddInput.c425dfe6.js";import de from"./JOnlineSearchSelect.c8e87ce5.js";import"./uniqBy.3dbe90b3.js";import"./index.5f6d2eec.js";import"./BasicModal.4c523d71.js";import"./useWindowSizeFn.1a55d327.js";import"./useFormItem.6935557d.js";import"./JUpload.vue_vue_type_style_index_0_lang.51f417a5.js";import"./api.221c4cde.js";import"./download.f2b87928.js";import"./base64Conver.030fa32c.js";import"./index.236167d6.js";import"./index.9b215829.js";import"./useCountdown.5186f11f.js";import"./index.7a47645e.js";import"./areaDataUtil.b22cb30b.js";import"./props.adbaf37f.js";import"./index.201afc50.js";import"./bem.452cc75b.js";import"./props.82dd77cc.js";import"./useContextMenu.184539a6.js";import"./index.cf6640d7.js";import"./onMountedOrActivated.6b21dee8.js";import"./depart.api.ef5d901e.js";import"./MinusCircleOutlined.bac41ad8.js";var se=Object.defineProperty,A=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,K=(e,l,n)=>l in e?se(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n,ve=(e,l)=>{for(var n in l||(l={}))pe.call(l,n)&&K(e,n,l[n]);if(A)for(var n of A(l))me.call(l,n)&&K(e,n,l[n]);return e};const P=z({name:"OnlineSearchFormItem",components:{JOnlineSearchSelect:de,JDictSelectTag:x,JTreeSelect:ee,JCategorySelect:le,JSelectUser:te,JSelectUserByDept:ae,JSelectDept:ie,JPopup:ue,JAreaLinkage:ne,JAreaSelect:oe,JSelectMultiple:re},props:{value:{type:String,default:""},item:{type:Object,default:()=>{},required:!0},dictOptions:{type:Object,default:()=>{},required:!1},onlineForm:{type:Object,default:()=>{},required:!1}},emits:["update:value","change"],setup(e,{emit:l}){const n="120px",q={style:{"max-width":n}},j="single";let y=Y(""),s=Y(""),f=Y("");C(()=>e.value,()=>{F()?y.value=e.value?e.value:void 0:y.value=e.value,e.value||(s.value="",f.value="")},{deep:!0,immediate:!0}),C(y,a=>{console.log("innerValue-change",a),l("update:value",a)},{immediate:!0}),C(s,a=>{l("change",e.item.field+"_begin",a),l("update:value","1")}),C(f,a=>{l("change",e.item.field+"_end",a),l("update:value","1")});function D(a){return console.log("ddictOptions",e.dictOptions),a.dbField?a.dbField:a.field}function F(){let a=e.item;return a?a.view=="list"||a.view=="radio"||a.view=="switch":!1}function k(){let a=e.item;return a.dictTable&&a.dictTable.length>0?a.dictTable+","+a.dictText+","+a.dictCode:a.dictCode}function E(){let a=e.item,{dictTable:t,dictCode:v,dictText:d}=a,g=t.toLowerCase().split("where"),r="";g.length>1&&(r=" where"+g[1]);let I="select "+v+" as 'value', "+d+" as 'text' from "+g[0]+r;return console.log("sql",I),I}function T(a){let{dictText:t,dictCode:v}=a;if(!t||t.length==0)return[];let d=t.split(","),c=v.split(","),g=[];for(let r=0;r<d.length;r++)g.push({target:d[r],source:c[r]});return g}function B(a){let{dictText:t}=e.item,d=t.split(",")[0];l("change",d,a[d])}function O(a){l("update:value",a)}function S(a,t,v){let d={labelKey:t,rowKey:v},c=a.fieldExtendJson;if(c&&typeof c=="string"){let g=JSON.parse(c),r=ve({},g);r.text&&(d.labelKey=r.text),r.store&&(d.rowKey=r.store)}return d}let b=S(e.item,"realname","username");console.log("userSelectProp",b);let U=S(e.item,"departName","id");function V(a){a&&a.length>0?l("update:value",a.join(",")):l("update:value","")}return{getPopupFieldConfig:T,userSelectProp:b,depSelectProp:U,handleSelectChange:V,setFieldsValue:B,innerValue:y,beginValue:s,endValue:f,isEasySelect:F,getDictOptionKey:D,getDictCode:k,labelTextMaxWidth:n,labelCol:q,single_mode:j,getSqlByDictCode:E,handleCategoryTreeChange:O}}}),L=()=>{G(e=>({"1e41a56d":e.labelTextMaxWidth}))},W=P.setup;P.setup=W?(e,l)=>(L(),W(e,l)):L;const ge=P,M=e=>(Z("data-v-76dfb908"),e=e(),_(),e),fe=["title"],ce=M(()=>J("span",{class:"group-query-strig"},"~",-1)),he=M(()=>J("span",{class:"group-query-strig"},"~",-1)),ye=M(()=>J("span",{class:"group-query-strig"},"~",-1));function Ve(e,l,n,q,j,y){const s=o("a-date-picker"),f=o("JDictSelectTag"),D=o("a-select-option"),F=o("a-select"),k=o("JTreeSelect"),E=o("JCategorySelect"),T=o("JOnlineSearchSelect"),B=o("JSelectUser"),O=o("JSelectDept"),S=o("JPopup"),b=o("JAreaSelect"),U=o("JSelectMultiple"),V=o("a-input"),a=o("a-form-item");return i(),u(a,{labelCol:e.labelCol,class:X("jeecg-online-search")},{label:w(()=>[J("span",{title:e.item.label,class:"label-text"},N(e.item.label),9,fe)]),default:w(()=>[e.item.view=="date"?(i(),p(m,{key:0},[e.single_mode===e.item.mode?(i(),u(s,{key:0,style:{width:"100%"},showTime:!1,valueFormat:"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[0]||(l[0]=t=>e.innerValue=t)},null,8,["placeholder","value"])):(i(),p(m,{key:1},[h(s,{showTime:!1,valueFormat:"YYYY-MM-DD",placeholder:"\u5F00\u59CB\u65E5\u671F",value:e.beginValue,"onUpdate:value":l[1]||(l[1]=t=>e.beginValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"]),ce,h(s,{showTime:!1,valueFormat:"YYYY-MM-DD",placeholder:"\u7ED3\u675F\u65E5\u671F",value:e.endValue,"onUpdate:value":l[2]||(l[2]=t=>e.endValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"])],64))],64)):e.item.view=="datetime"?(i(),p(m,{key:1},[e.single_mode===e.item.mode?(i(),u(s,{key:0,style:{width:"100%"},showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss",placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[3]||(l[3]=t=>e.innerValue=t)},null,8,["placeholder","value"])):(i(),p(m,{key:1},[h(s,{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss",placeholder:"\u5F00\u59CB\u65F6\u95F4",value:e.beginValue,"onUpdate:value":l[4]||(l[4]=t=>e.beginValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"]),he,h(s,{showTime:!0,valueFormat:"YYYY-MM-DD hh:mm:ss",placeholder:"\u7ED3\u675F\u65F6\u95F4",value:e.endValue,"onUpdate:value":l[5]||(l[5]=t=>e.endValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"])],64))],64)):e.isEasySelect()?(i(),p(m,{key:2},[e.item.config==="1"?(i(),u(f,{key:0,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[6]||(l[6]=t=>e.innerValue=t),dictCode:e.getDictCode()},null,8,["placeholder","value","dictCode"])):(i(),u(F,{key:1,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[7]||(l[7]=t=>e.innerValue=t)},{default:w(()=>[(i(!0),p(m,null,H(e.dictOptions[e.getDictOptionKey(e.item)],(t,v)=>(i(),u(D,{key:v,value:t.value},{default:w(()=>[R(N(t.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["placeholder","value"]))],64)):e.item.view==="sel_tree"?(i(),u(k,{key:3,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[8]||(l[8]=t=>e.innerValue=t),dict:e.item.dict,pidField:e.item.pidField,pidValue:e.item.pidValue,hasChildField:e.item.hasChildField,"load-triggle-change":""},null,8,["placeholder","value","dict","pidField","pidValue","hasChildField"])):e.item.view==="cat_tree"?(i(),u(E,{key:4,onChange:e.handleCategoryTreeChange,loadTriggleChange:!0,pcode:e.item.pcode,value:e.innerValue,"onUpdate:value":l[9]||(l[9]=t=>e.innerValue=t),placeholder:"\u8BF7\u9009\u62E9"+e.item.label},null,8,["onChange","pcode","value","placeholder"])):e.item.view==="sel_search"?(i(),p(m,{key:5},[e.item.config==="1"?(i(),u(f,{key:0,value:e.innerValue,"onUpdate:value":l[10]||(l[10]=t=>e.innerValue=t),placeholder:"\u8BF7\u9009\u62E9"+e.item.label,dict:e.getDictCode()},null,8,["value","placeholder","dict"])):(i(),u(T,{key:1,value:e.innerValue,"onUpdate:value":l[11]||(l[11]=t=>e.innerValue=t),placeholder:"\u8BF7\u9009\u62E9"+e.item.label,sql:e.getSqlByDictCode()},null,8,["value","placeholder","sql"]))],64)):e.item.view=="sel_user"?(i(),u(B,$({key:6},e.userSelectProp,{value:e.innerValue,"onUpdate:value":l[12]||(l[12]=t=>e.innerValue=t),placeholder:"\u8BF7\u9009\u62E9"+e.item.label}),null,16,["value","placeholder"])):e.item.view=="sel_depart"?(i(),u(O,$({key:7,showButton:!1},e.depSelectProp,{value:e.innerValue,"onUpdate:value":l[13]||(l[13]=t=>e.innerValue=t),placeholder:"\u8BF7\u9009\u62E9"+e.item.label}),null,16,["value","placeholder"])):e.item.view=="popup"?(i(),u(S,{key:8,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[14]||(l[14]=t=>e.innerValue=t),code:e.item.dictTable,setFieldsValue:e.setFieldsValue,"field-config":e.getPopupFieldConfig(e.item),multi:!0},null,8,["placeholder","value","code","setFieldsValue","field-config"])):e.item.view=="pca"?(i(),u(b,{key:9,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[15]||(l[15]=t=>e.innerValue=t)},null,8,["placeholder","value"])):e.item.view=="checkbox"||e.item.view=="list_multi"?(i(),u(U,{key:10,dictCode:e.getDictCode(),placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[16]||(l[16]=t=>e.innerValue=t)},null,8,["dictCode","placeholder","value"])):(i(),p(m,{key:11},[e.single_mode===e.item.mode?(i(),u(V,{key:0,placeholder:"\u8BF7\u9009\u62E9"+e.item.label,value:e.innerValue,"onUpdate:value":l[17]||(l[17]=t=>e.innerValue=t)},null,8,["placeholder","value"])):(i(),p(m,{key:1},[h(V,{placeholder:"\u5F00\u59CB\u503C",value:e.beginValue,"onUpdate:value":l[18]||(l[18]=t=>e.beginValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"]),ye,h(V,{placeholder:"\u7ED3\u675F\u503C",value:e.endValue,"onUpdate:value":l[19]||(l[19]=t=>e.endValue=t),style:{width:"calc(50% - 15px)"}},null,8,["value"])],64))],64))]),_:1},8,["labelCol"])}var He=Q(ge,[["render",Ve],["__scopeId","data-v-76dfb908"]]);export{He as default};
