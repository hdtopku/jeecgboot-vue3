var h=(a,r,p)=>new Promise((C,m)=>{var B=t=>{try{l(p.next(t))}catch(_){m(_)}},s=t=>{try{l(p.throw(t))}catch(_){m(_)}},l=t=>t.done?C(t.value):Promise.resolve(t.value).then(B,s);l((p=p.apply(a,r)).next())});import{B as Y}from"./index.2b083806.js";import{s as $}from"./jvxetable.api.0372e0ca.js";import{o as I,a as V}from"./api.804d1f70.js";import{l as q,F as L,a7 as U,bG as N,L as E,o as z,q as S,t as i,v as F,V as b,z as u,y as e,aV as H,x as O,bb as j,aw as T,B as P,C as d}from"./index.3bed7968.js";import"./BasicModal.63407285.js";import"./useWindowSizeFn.3a0aad8e.js";const G=q({name:"tableModal",components:{BasicModal:Y},emits:["success","register"],setup(a,{emit:r}){const p=L(!0),C=L(""),m=L(),B=U({xs:{span:24},sm:{span:5}}),s=U({xs:{span:24},sm:{span:16}}),l={orderCode:[{required:!0,message:"\u8BA2\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},t=U({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[_,{setModalProps:v,closeModal:M}]=N(o=>h(this,null,function*(){if(v({confirmLoading:!1}),p.value=!!(o!=null&&o.isUpdate),k(),E(p)){C.value=o.record.id,Object.assign(t,o.record);let c={id:t.id};const n=yield I(c);t.jeecgOrderCustomerList=n;const R=yield V(c);t.jeecgOrderTicketList=R}})),f=z(()=>E(p)?"\u7F16\u8F91":"\u65B0\u589E");function g(){t.jeecgOrderCustomerList.push({})}function y(o){t.jeecgOrderCustomerList.splice(o,1),t.jeecgOrderCustomerList.splice(o,1)}function k(){t.id=null,t.orderCode="",t.orderMoney="",t.orderDate=null,t.ctype="",t.content="",t.jeecgOrderCustomerList=[],t.jeecgOrderTicketList=[]}function A(){t.jeecgOrderTicketList.push({})}function D(o){t.jeecgOrderTicketList.splice(o,1),t.jeecgOrderTicketList.splice(o,1)}function w(){return h(this,null,function*(){m.value.validate().then(()=>h(this,null,function*(){try{console.log("formData",JSON.stringify(t)),v({confirmLoading:!0}),yield $(t,E(p)),M(),r("success")}finally{v({confirmLoading:!1})}})).catch(o=>{console.log("error",o)})})}return{formRef:m,validatorRules:l,orderMainModel:t,registerModal:_,getTitle:f,labelCol:B,wrapperCol:s,addRowCustom:g,delRowCustom:y,addRowTicket:A,delRowTicket:D,handleSubmit:w}}}),J=d("\u56FD\u5185\u8BA2\u5355"),K=d("\u56FD\u9645\u8BA2\u5355"),Q=d("\u5BA2\u6237\u540D"),W=d("\u6027\u522B"),X=d("\u8EAB\u4EFD\u8BC1\u53F7\u7801"),Z=d("\u624B\u673A\u53F7"),x=d("\u64CD\u4F5C"),ee=d("\u7537"),ue=d("\u5973"),te=d(" \u6DFB\u52A0\u5BA2\u6237\u4FE1\u606F "),oe=d("\u822A\u73ED\u53F7"),ae=d("\u822A\u73ED\u65F6\u95F4"),le=d("\u64CD\u4F5C"),ne=d(" \u6DFB\u52A0\u673A\u7968\u4FE1\u606F ");function re(a,r,p,C,m,B){const s=i("a-input"),l=i("a-form-item"),t=i("a-col"),_=i("a-select-option"),v=i("a-select"),M=i("a-date-picker"),f=i("a-row"),g=i("Icon"),y=i("a-button"),k=i("a-tab-pane"),A=i("a-tabs"),D=i("a-form"),w=i("BasicModal");return F(),b(w,P(a.$attrs,{onRegister:a.registerModal,title:a.getTitle,onOk:a.handleSubmit,width:"70%"}),{default:u(()=>[e(D,{ref:"formRef",model:a.orderMainModel,"label-col":a.labelCol,"wrapper-col":a.wrapperCol,rules:a.validatorRules},{default:u(()=>[e(f,{class:"form-row",gutter:16},{default:u(()=>[e(t,{lg:8},{default:u(()=>[e(l,{label:"\u8BA2\u5355\u53F7",name:"orderCode"},{default:u(()=>[e(s,{value:a.orderMainModel.orderCode,"onUpdate:value":r[0]||(r[0]=o=>a.orderMainModel.orderCode=o),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},null,8,["value"])]),_:1})]),_:1}),e(t,{lg:8},{default:u(()=>[e(l,{label:"\u8BA2\u5355\u7C7B\u578B"},{default:u(()=>[e(v,{placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u7C7B\u578B",value:a.orderMainModel.ctype,"onUpdate:value":r[1]||(r[1]=o=>a.orderMainModel.ctype=o)},{default:u(()=>[e(_,{value:"1"},{default:u(()=>[J]),_:1}),e(_,{value:"2"},{default:u(()=>[K]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(t,{lg:8},{default:u(()=>[e(l,{label:"\u8BA2\u5355\u65E5\u671F"},{default:u(()=>[e(M,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:a.orderMainModel.orderDate,"onUpdate:value":r[2]||(r[2]=o=>a.orderMainModel.orderDate=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(f,{class:"form-row",gutter:16},{default:u(()=>[e(t,{lg:8},{default:u(()=>[e(l,{label:"\u8BA2\u5355\u91D1\u989D"},{default:u(()=>[e(s,{value:a.orderMainModel.orderMoney,"onUpdate:value":r[3]||(r[3]=o=>a.orderMainModel.orderMoney=o),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u91D1\u989D"},null,8,["value"])]),_:1})]),_:1}),e(t,{lg:8},{default:u(()=>[e(l,{label:"\u8BA2\u5355\u5907\u6CE8"},{default:u(()=>[e(s,{value:a.orderMainModel.content,"onUpdate:value":r[4]||(r[4]=o=>a.orderMainModel.content=o),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(A,{defaultActiveKey:"1"},{default:u(()=>[e(k,{tab:"\u5BA2\u6237\u4FE1\u606F",key:"1"},{default:u(()=>[H("div",null,[e(f,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:u(()=>[e(t,{span:5},{default:u(()=>[Q]),_:1}),e(t,{span:5},{default:u(()=>[W]),_:1}),e(t,{span:6},{default:u(()=>[X]),_:1}),e(t,{span:6},{default:u(()=>[Z]),_:1}),e(t,{span:2},{default:u(()=>[x]),_:1})]),_:1}),(F(!0),O(T,null,j(a.orderMainModel.jeecgOrderCustomerList,(o,c)=>(F(),b(f,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:c},{default:u(()=>[e(t,{span:6,style:{display:"none"}},{default:u(()=>[e(l,null,{default:u(()=>[e(s,{placeholder:"id",value:o.id,"onUpdate:value":n=>o.id=n},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(t,{span:5},{default:u(()=>[e(l,null,{default:u(()=>[e(s,{placeholder:"\u5BA2\u6237\u540D",value:o.name,"onUpdate:value":n=>o.name=n},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(t,{span:5},{default:u(()=>[e(l,null,{default:u(()=>[e(v,{placeholder:"\u6027\u522B",value:o.sex,"onUpdate:value":n=>o.sex=n},{default:u(()=>[e(_,{value:"1"},{default:u(()=>[ee]),_:1}),e(_,{value:"2"},{default:u(()=>[ue]),_:1})]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(t,{span:6},{default:u(()=>[(F(),b(l,{name:["jeecgOrderCustomerList",c,"idcard"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",trigger:"blur"}],key:c},{default:u(()=>[e(s,{placeholder:"\u8EAB\u4EFD\u8BC1\u53F7",value:o.idcard,"onUpdate:value":n=>o.idcard=n},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]))]),_:2},1024),e(t,{span:6},{default:u(()=>[e(l,{name:["jeecgOrderCustomerList",c,"telphone"]},{default:u(()=>[e(s,{placeholder:"\u624B\u673A\u53F7",value:o.telphone,"onUpdate:value":n=>o.telphone=n},null,8,["value","onUpdate:value"])]),_:2},1032,["name"])]),_:2},1024),e(t,{span:2},{default:u(()=>[e(l,null,{default:u(()=>[e(g,{icon:"ant-design:minus-outlined",onClick:n=>a.delRowCustom(c),style:{fontsize:"20px"}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(y,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:a.addRowCustom},{default:u(()=>[e(g,{icon:"ph:plus-bold"}),te]),_:1},8,["onClick"])])]),_:1}),e(k,{tab:"\u673A\u7968\u4FE1\u606F",key:"2",forceRender:""},{default:u(()=>[e(f,{type:"flex",style:{"margin-bottom":"10px"},gutter:16},{default:u(()=>[e(t,{span:6},{default:u(()=>[oe]),_:1}),e(t,{span:6},{default:u(()=>[ae]),_:1}),e(t,{span:6},{default:u(()=>[le]),_:1})]),_:1}),(F(!0),O(T,null,j(a.orderMainModel.jeecgOrderTicketList,(o,c)=>(F(),b(f,{type:"flex",style:{"margin-bottom":"10px"},gutter:16,key:c},{default:u(()=>[e(t,{span:6,style:{display:"none"}},{default:u(()=>[e(l,null,{default:u(()=>[e(s,{placeholder:"id",value:o.id,"onUpdate:value":n=>o.id=n},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(t,{span:6},{default:u(()=>[e(l,{name:["jeecgOrderTicketList",c,"ticketCode"],rules:{required:!0,message:"\u8BF7\u8F93\u5165\u822A\u73ED\u53F7",trigger:"blur"}},{default:u(()=>[e(s,{placeholder:"\u822A\u73ED\u53F7",value:o.ticketCode,"onUpdate:value":n=>o.ticketCode=n},null,8,["value","onUpdate:value"])]),_:2},1032,["name"])]),_:2},1024),e(t,{span:6},{default:u(()=>[e(l,null,{default:u(()=>[e(M,{placeholder:"\u822A\u73ED\u65F6\u95F4",valueFormat:"YYYY-MM-DD",value:o.tickectDate,"onUpdate:value":n=>o.tickectDate=n},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),e(t,{span:6},{default:u(()=>[e(l,null,{default:u(()=>[e(g,{icon:"ant-design:minus-outlined",onClick:n=>a.delRowTicket(c),style:{fontsize:"20px"}},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(y,{type:"dashed",style:{width:"98%","margin-top":"10px"},onClick:a.addRowTicket},{default:u(()=>[e(g,{icon:"ph:plus-bold"}),ne]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model","label-col","wrapper-col","rules"])]),_:1},16,["onRegister","title","onOk"])}var me=S(G,[["render",re],["__scopeId","data-v-609fd010"]]);export{me as default};
