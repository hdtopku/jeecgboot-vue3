var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,t,o)=>new Promise(((a,s)=>{var i=e=>{try{n(o.next(e))}catch(t){s(t)}},r=e=>{try{n(o.throw(e))}catch(t){s(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,r);n((o=o.apply(e,t)).next())}));import{B as r}from"./index.12c6f6d1.js";import{B as n}from"./BasicForm.fb9b9310.js";import"./helper.c50e6850.js";import{u as l}from"./useForm.5a9ed278.js";import"./JAddInput.2ba637e0.js";import{a1 as d,a5 as c,l as p,F as u,bH as m,L as y,o as f,v as b,V as h,z as g,y as v,B as j}from"./index.b2c24a42.js";import{rules as x}from"./validator.b4088ecf.js";const P=[{title:"职务编码",dataIndex:"code",width:200,align:"left"},{title:"职务名称",dataIndex:"name",width:200},{title:"职务等级",dataIndex:"postRank_dictText",width:100}],w=[{field:"name",label:"职务名称",component:"Input",colProps:{span:8}}],_=[{label:"主键",field:"id",component:"Input",show:!1},{label:"职级",field:"postRank",component:"JDictSelectTag",required:!0,componentProps:{dictCode:"position_rank",dropdownStyle:{maxHeight:"100vh"},getPopupContainer:()=>document.body}},{field:"name",label:"职务名称",component:"Input",required:!0},{field:"code",label:"职务编码",component:"Input",required:!0,dynamicDisabled:({values:e})=>!!e.id,dynamicRules:({model:e,schema:t})=>x.duplicateCheckRule("sys_position","code",e,t,!0)}],I="/sys/position/exportXls",O="/sys/position/importExcel",R=e=>d.get({url:"/sys/position/list",params:e}),k=(e,t)=>d.delete({url:"/sys/position/delete",data:e},{joinParamsToUrl:!0}).then((()=>{t()})),B=(e,t)=>{c.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>d.delete({url:"/sys/position/deleteBatch",data:e},{joinParamsToUrl:!0}).then((()=>{t()}))})},T=p({__name:"PositionModal",emits:["success","register"],setup(e,{emit:c}){const p=u(!0),[x,{resetFields:P,setFieldsValue:w,validate:I}]=l({schemas:_,showActionButtonGroup:!1}),[O,{setModalProps:R,closeModal:k}]=m((e=>i(this,null,(function*(){var i;yield P(),R({confirmLoading:!1}),p.value=!!(null==e?void 0:e.isUpdate),y(p)&&(e.record=yield(i={id:e.record.id},d.get({url:"/sys/position/queryById",params:i})),yield w(((e,i)=>{for(var r in i||(i={}))o.call(i,r)&&s(e,r,i[r]);if(t)for(var r of t(i))a.call(i,r)&&s(e,r,i[r]);return e})({},e.record)))})))),B=f((()=>y(p)?"编辑职务":"新增职务"));function T(){return i(this,null,(function*(){try{const e=yield I();R({confirmLoading:!0}),yield((e,t)=>{let o=t?"/sys/position/edit":"/sys/position/add";return d.post({url:o,params:e})})(e,p.value),k(),c("success")}finally{R({confirmLoading:!1})}}))}return(e,t)=>(b(),h(y(r),j(e.$attrs,{onRegister:y(O),title:y(B),onOk:T,width:700}),{default:g((()=>[v(y(n),{onRegister:y(x)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});var F=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{F as P,T as _,I as a,O as b,P as c,k as d,B as e,R as g,w as s};
