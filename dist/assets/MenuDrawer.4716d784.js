var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,n=(e,t,o)=>new Promise(((a,l)=>{var n=e=>{try{i(o.next(e))}catch(t){l(t)}},r=e=>{try{i(o.throw(e))}catch(t){l(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,r);i((o=o.apply(e,t)).next())}));import{B as r}from"./BasicForm.d9f6c231.js";import"./helper.1c9dc9a5.js";import{u as i}from"./useForm.45d68074.js";import"./JAddInput.8c125e2c.js";import{h as s,I as u,T as p,l as c,F as d,o as m,L as f,q as b,t as v,v as h,V as w,z as y,y as g,B as P}from"./index.435ab247.js";import{B as I,u as S}from"./index.65c1cb1a.js";import{c as B}from"./system.d1710ccf.js";const j=[{title:"菜单名称",dataIndex:"menuName",width:200,align:"left"},{title:"图标",dataIndex:"icon",width:50,customRender:({record:e})=>s(u,{icon:e.icon})},{title:"权限标识",dataIndex:"permission",width:180},{title:"组件",dataIndex:"component"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,o=t?"启用":"停用";return s(p,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180}],x=e=>"1"===e,F=e=>"2"===e,R=[{field:"menuName",label:"菜单名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],O=[{field:"type",label:"菜单类型",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"目录",value:"0"},{label:"菜单",value:"1"},{label:"按钮",value:"2"}]},colProps:{lg:24,md:24}},{field:"menuName",label:"菜单名称",component:"Input",required:!0},{field:"parentMenu",label:"上级菜单",component:"TreeSelect",componentProps:{replaceFields:{title:"menuName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"icon",label:"图标",component:"IconPicker",required:!0,ifShow:({values:e})=>!F(e.type)},{field:"routePath",label:"路由地址",component:"Input",required:!0,ifShow:({values:e})=>!F(e.type)},{field:"component",label:"组件路径",component:"Input",ifShow:({values:e})=>x(e.type)},{field:"permission",label:"权限标识",component:"Input",ifShow:({values:e})=>!("0"===e.type)},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"禁用",value:"1"}]}},{field:"isExt",label:"是否外链",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"否",value:"0"},{label:"是",value:"1"}]},ifShow:({values:e})=>!F(e.type)},{field:"keepalive",label:"是否缓存",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"否",value:"0"},{label:"是",value:"1"}]},ifShow:({values:e})=>x(e.type)},{field:"show",label:"是否显示",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"是",value:"0"},{label:"否",value:"1"}]},ifShow:({values:e})=>!F(e.type)}];var D=b(c({name:"MenuDrawer",components:{BasicDrawer:I,BasicForm:r},emits:["success","register"],setup(e,{emit:r}){const s=d(!0),[u,{resetFields:p,setFieldsValue:c,updateSchema:b,validate:v}]=i({labelWidth:100,schemas:O,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[h,{setDrawerProps:w,closeDrawer:y}]=S((e=>n(this,null,(function*(){p(),w({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),f(s)&&c(((e,n)=>{for(var r in n||(n={}))o.call(n,r)&&l(e,r,n[r]);if(t)for(var r of t(n))a.call(n,r)&&l(e,r,n[r]);return e})({},e.record));const n=yield B();b({field:"parentMenu",componentProps:{treeData:n}})}))));return{registerDrawer:h,registerForm:u,getTitle:m((()=>f(s)?"编辑菜单":"新增菜单")),handleSubmit:function(){return n(this,null,(function*(){try{yield v();w({confirmLoading:!0}),y(),r("success")}finally{w({confirmLoading:!1})}}))}}}}),[["render",function(e,t,o,a,l,n){const r=v("BasicForm"),i=v("BasicDrawer");return h(),w(i,P(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:y((()=>[g(r,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}]]),N=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{D as M,N as a,j as c,R as s};
