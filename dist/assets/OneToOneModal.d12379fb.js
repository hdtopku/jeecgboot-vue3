var e=(e,a,l)=>new Promise(((r,t)=>{var o=e=>{try{i(l.next(e))}catch(a){t(a)}},d=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,d);i((l=l.apply(e,a)).next())}));import{B as a}from"./index.e1e06dd6.js";import{s as l}from"./jvxetable.api.559da4d2.js";import{o as r,a as t}from"./api.c33adc6d.js";import{l as o,F as d,a8 as i,bH as s,L as n,o as u,q as c,t as f,v as m,V as M,z as p,y as g,B as v,C as _}from"./index.435ab247.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";const j=o({name:"OneToOneModal",components:{BasicModal:a},emits:["success","register"],setup(a,{emit:o}){const c=d(!0),f=d(""),m=d(),M=i({xs:{span:24},sm:{span:5}}),p=i({xs:{span:24},sm:{span:16}}),g=i({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:{name:"",telphone:""},jeecgOrderTicketList:{ticketCode:"",tickectDate:""}}),[v,{setModalProps:_,closeModal:j}]=s((a=>e(this,null,(function*(){if(_({confirmLoading:!1}),g.id=null,g.orderCode="",g.orderMoney="",g.orderDate=null,g.ctype="",g.content="",g.jeecgOrderCustomerList={},g.jeecgOrderTicketList={},c.value=!!(null==a?void 0:a.isUpdate),n(c)){f.value=a.record.id,Object.assign(g,a.record);let e={id:g.id};const l=yield r(e);g.jeecgOrderCustomerList=l[0]?l[0]:{};const o=yield t(e);g.jeecgOrderTicketList=o[0]?o[0]:{}}})))),b=u((()=>n(c)?"编辑":"新增"));return{formRef:m,validatorRules:{orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},orderMainModel:g,registerModal:v,getTitle:b,labelCol:M,wrapperCol:p,handleSubmit:function(){return e(this,null,(function*(){m.value.validate().then((()=>e(this,null,(function*(){try{_({confirmLoading:!0}),g.jeecgOrderCustomerList=Object.keys(g.jeecgOrderCustomerList).length>0?[g.jeecgOrderCustomerList]:[],g.jeecgOrderTicketList=Object.keys(g.jeecgOrderTicketList).length>0?[g.jeecgOrderTicketList]:[],yield l(g,n(c)),j(),o("success")}finally{_({confirmLoading:!1})}})))).catch((e=>{}))}))}}}}),b=_("国内订单"),O=_("国际订单");var h=c(j,[["render",function(e,a,l,r,t,o){const d=f("a-input"),i=f("a-form-item"),s=f("a-col"),n=f("a-select-option"),u=f("a-select"),c=f("a-date-picker"),_=f("a-row"),j=f("a-tab-pane"),h=f("a-tabs"),C=f("a-form"),L=f("BasicModal");return m(),M(L,v(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:p((()=>[g(C,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:p((()=>[g(_,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"订单号",name:"orderCode"},{default:p((()=>[g(d,{value:e.orderMainModel.orderCode,"onUpdate:value":a[0]||(a[0]=a=>e.orderMainModel.orderCode=a),placeholder:"请输入订单号"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单类型"},{default:p((()=>[g(u,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":a[1]||(a[1]=a=>e.orderMainModel.ctype=a)},{default:p((()=>[g(n,{value:"1"},{default:p((()=>[b])),_:1}),g(n,{value:"2"},{default:p((()=>[O])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单日期"},{default:p((()=>[g(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":a[2]||(a[2]=a=>e.orderMainModel.orderDate=a)},null,8,["value"])])),_:1})])),_:1})])),_:1}),g(_,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"订单金额"},{default:p((()=>[g(d,{value:e.orderMainModel.orderMoney,"onUpdate:value":a[3]||(a[3]=a=>e.orderMainModel.orderMoney=a),placeholder:"请输入订单金额"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单备注"},{default:p((()=>[g(d,{value:e.orderMainModel.content,"onUpdate:value":a[4]||(a[4]=a=>e.orderMainModel.content=a),placeholder:"请输入订单备注"},null,8,["value"])])),_:1})])),_:1})])),_:1}),g(h,{defaultActiveKey:"1"},{default:p((()=>[g(j,{tab:"客户信息",key:"1"},{default:p((()=>[g(_,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"客户姓名"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderCustomerList.name,"onUpdate:value":a[5]||(a[5]=a=>e.orderMainModel.jeecgOrderCustomerList.name=a),placeholder:"请输入客户姓名"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"手机号"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderCustomerList.telphone,"onUpdate:value":a[6]||(a[6]=a=>e.orderMainModel.jeecgOrderCustomerList.telphone=a),placeholder:"请输入手机号"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),g(j,{tab:"机票信息",key:"2",forceRender:""},{default:p((()=>[g(_,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"航班号"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderTicketList.ticketCode,"onUpdate:value":a[7]||(a[7]=a=>e.orderMainModel.jeecgOrderTicketList.ticketCode=a),placeholder:"请输入航班号"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"起飞时间"},{default:p((()=>[g(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.jeecgOrderTicketList.tickectDate,"onUpdate:value":a[8]||(a[8]=a=>e.orderMainModel.jeecgOrderTicketList.tickectDate=a)},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col","rules"])])),_:1},16,["onRegister","title","onOk"])}],["__scopeId","data-v-7e8e9bda"]]);export{h as default};
