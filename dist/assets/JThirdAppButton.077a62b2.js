var v=(e,u,n)=>new Promise((f,i)=>{var r=t=>{try{a(n.next(t))}catch(y){i(y)}},o=t=>{try{a(n.throw(t))}catch(y){i(y)}},a=t=>t.done?f(t.value):Promise.resolve(t.value).then(r,o);a((n=n.apply(e,u)).next())});import{Z as V,ex as M,j as q,m as S,r as A,s as l,Q as m,w as p,v as $,y as F,z as B,R as w,C as Z,a2 as L,ey as G,h as k,t as H,x as K,ez as N,ax as O,u as X,q as Y}from"./index.c1f9bce8.js";const Q={getEnabledType:"/sys/thirdApp/getEnabledType",wechatEnterprise:{user:"/sys/thirdApp/sync/wechatEnterprise/user",depart:"/sys/thirdApp/sync/wechatEnterprise/depart"},dingtalk:{user:"/sys/thirdApp/sync/dingtalk/user",depart:"/sys/thirdApp/sync/dingtalk/depart"}};let D=null;const ee=()=>v(void 0,null,function*(){if(D!=null)return M(D);{let{success:e,result:u}=yield V.get({url:Q.getEnabledType},{isTransformResponse:!1});if(e)return D=M(u),u;console.warn("getEnabledType\u67E5\u8BE2\u5931\u8D25\uFF1A")}return{}}),P=q({__name:"JThirdAppDropdown",props:{type:String,name:String,syncToApp:Boolean,syncToLocal:Boolean},emits:["to-app","to-local"],setup(e,{emit:u}){const n=e,f=S(()=>n.type==="wechatEnterprise"?!1:n.syncToLocal);function i(r){u(r.key,{type:n.type})}return(r,o)=>{const a=A("a-button"),t=A("a-menu-item"),y=A("a-menu"),C=A("a-dropdown");return e.syncToApp&&e.syncToLocal?(l(),m(C,{key:0},{overlay:p(()=>[$(y,{onClick:i},{default:p(()=>[e.syncToApp?(l(),m(t,{key:"to-app"},{default:p(()=>[F("\u540C\u6B65\u5230"+B(e.name),1)]),_:1})):w("",!0),f.value?(l(),m(t,{key:"to-local"},{default:p(()=>[F("\u540C\u6B65\u5230\u672C\u5730")]),_:1})):w("",!0)]),_:1})]),default:p(()=>[$(a,{type:"primary",preIcon:"ant-design:sync-outlined"},{default:p(()=>[F("\u540C\u6B65"+B(e.name),1)]),_:1})]),_:1})):e.syncToApp?(l(),m(a,{key:1,type:"primary",preIcon:"ant-design:sync-outlined",onClick:o[0]||(o[0]=E=>i({key:"to-app"}))},{default:p(()=>[F("\u540C\u6B65"+B(e.name),1)]),_:1})):(l(),m(a,{key:2,type:"primary",preIcon:"ant-design:sync-outlined",onClick:o[1]||(o[1]=E=>i({key:"to-local"}))},{default:p(()=>[F("\u540C\u6B65"+B(e.name)+"\u5230\u672C\u5730",1)]),_:1}))}}}),ne=q({__name:"JThirdAppButton",props:{bizType:{type:String,required:!0},syncToApp:Boolean,syncToLocal:Boolean,selectedRowKeys:Array},emits:["sync-ok","sync-error","sync-finally"],setup(e,{emit:u}){const n=e,{createMessage:f,createWarningModal:i}=X(),r=Z({}),o=S(()=>({syncToApp:n.syncToApp,syncToLocal:n.syncToLocal})),a=S(()=>({"to-app":t,"to-local":y}));function t(s){E(s.type,"/toApp")}function y(s){E(s.type,"/toLocal")}function C(){return v(this,null,function*(){r.value=yield ee()})}function E(s,d){let h=Q[s];if(!(h&&h[n.bizType])){console.warn("\u914D\u7F6E\u51FA\u9519");return}let U=h[n.bizType]+d,T=n.selectedRowKeys,j="\u786E\u5B9A\u8981\u5F00\u59CB\u540C\u6B65\u5168\u90E8\u6570\u636E\u5417\uFF1F\u53EF\u80FD\u82B1\u8D39\u8F83\u957F\u65F6\u95F4\uFF01";return Array.isArray(T)&&T.length>0?j=`\u786E\u5B9A\u8981\u5F00\u59CB\u540C\u6B65\u8FD9 ${T.length} \u9879\u5417\uFF1F`:T=[],new Promise((z,te)=>{const R=L.confirm({icon:$(G),title:"\u540C\u6B65",content:j,onOk:()=>{R.update({keyboard:!1,okText:"\u540C\u6B65\u4E2D\u2026",cancelButtonProps:{disabled:!0}});let W={ids:T.join(",")};return V.get({url:U,params:W},{isTransformResponse:!1}).then(c=>{let g={};c.result&&(g={width:600,title:c.message,content:()=>{let b,J=["\u6210\u529F\u4FE1\u606F\u5982\u4E0B\uFF1A",I(k,c.result.successInfo.map((_,x)=>`${x+1}. ${_}`).join(`
`))];return c.success?b=[...J,k("br"),"\u65E0\u5931\u8D25\u4FE1\u606F\uFF01"]:b=["\u5931\u8D25\u4FE1\u606F\u5982\u4E0B\uFF1A",I(k,c.result.failInfo.map((_,x)=>`${x+1}. ${_}`).join(`
`)),k("br"),...J],b}}),c.success?(g!=null?L.success(g):f.warning(c.message),u("sync-ok")):(g!=null?L.warning(g):f.warning(c.message),u("sync-error"))}).catch(()=>R.destroy()).finally(()=>{z(),u("sync-finally",{type:s,direction:d,isToApp:d==="/toApp",isToLocal:d==="/toLocal"})})},onCancel(){z()}})})}function I(s,d){return s("div",{id:"box",style:{minHeight:"100px",border:"1px solid #d9d9d9",fontSize:"14px",maxHeight:"250px",whiteSpace:"pre",overflow:"auto",padding:"10px"}},d)}return C(),(s,d)=>e.syncToApp||e.syncToLocal?(l(),H(O,{key:0},[r.value.wechatEnterprise?(l(),m(P,K({key:0,type:"wechatEnterprise",name:"\u4F01\u5FAE"},o.value,N(a.value)),null,16)):w("",!0),r.value.dingtalk?(l(),m(P,K({key:1,type:"dingtalk",name:"\u9489\u9489"},o.value,N(a.value)),null,16)):w("",!0)],64)):(l(),H(O,{key:1},[F("\u672A\u8BBE\u7F6E\u4EFB\u4F55\u540C\u6B65\u65B9\u5411")],64))}});const oe=Y(ne,[["__scopeId","data-v-d8023e59"]]);export{oe as J};
