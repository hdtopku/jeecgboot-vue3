var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,s)=>{for(var i in s||(s={}))o.call(s,i)&&r(e,i,s[i]);if(t)for(var i of t(s))a.call(s,i)&&r(e,i,s[i]);return e},i=(e,t,o)=>new Promise(((a,r)=>{var s=e=>{try{n(o.next(e))}catch(t){r(t)}},i=e=>{try{n(o.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);n((o=o.apply(e,t)).next())}));import{B as n}from"./BasicForm.d9f6c231.js";import"./helper.1c9dc9a5.js";import{u as d}from"./useForm.45d68074.js";import"./JAddInput.8c125e2c.js";import{l as p,bj as l,F as c,o as m,$ as u,H as f,L as j,t as b,v as y,V as v,z as h,y as x,aW as g,C as O}from"./index.435ab247.js";import{s as w}from"./depart.api.c07add53.js";import{u as C,o as F}from"./depart.data.ff6c9320.js";import"./uniqBy.91f18935.js";import"./index.e1e06dd6.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";import"./useFormItem.816007c4.js";import"./functional.be5901d6.js";import"./download.5dc68cfb.js";import"./base64Conver.030fa32c.js";import"./index.a5502478.js";import"./index.64086148.js";import"./useCountdown.adc4ab77.js";import"./JUpload.e164672b.js";import"./api.bc301b0f.js";import"./index.cdc49bf1.js";import"./props.5467b933.js";import"./index.713dc63d.js";import"./bem.0e923c54.js";import"./props.37836c63.js";import"./useContextMenu.82ce6d89.js";import"./index.e1ec35e6.js";import"./onMountedOrActivated.e9ddbd41.js";import"./index.627c6cd3.js";import"./htmlmixed.749cbc8c.js";import"./vue.f62dfd4a.js";/* empty css             */const P={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},I={class:"j-box-bottom-button-float"},B=O("重置"),D=O("保存"),_=p({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(e,{emit:t}){const o=e;l("prefixCls");const a=c(!1),r=c(!0),p=c({}),[O,{resetFields:_,setFieldsValue:A,validate:S,updateSchema:T}]=d({schemas:C().basicFormSchema,showActionButtonGroup:!1}),M=m((()=>{var e;return(null==(e=null==o?void 0:o.data)?void 0:e.parentId)?F.child:F.root}));function k(){return i(this,null,(function*(){yield _(),yield A(s({},p.value))}))}function z(){return i(this,null,(function*(){try{a.value=!0;let e=yield S();e=Object.assign({},p.value,e),yield w(e,r.value),t("success"),Object.assign(p.value,e)}finally{a.value=!1}}))}return u((()=>{T([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),f((()=>o.data),(()=>i(this,null,(function*(){let e=j(o.data);"object"!=typeof e&&(e={}),p.value=e,yield _(),yield A(s({},e))}))),{deep:!0,immediate:!0}),f((()=>o.rootTreeData),(()=>i(this,null,(function*(){T([{field:"parentId",componentProps:{treeData:o.rootTreeData}}])}))),{deep:!0,immediate:!0}),f(M,(()=>i(this,null,(function*(){T([{field:"orgCategory",componentProps:{options:M.value}}])}))),{immediate:!0})})),(e,t)=>{const o=b("a-button"),r=b("a-spin");return y(),v(r,{spinning:a.value},{default:h((()=>[x(j(n),{onRegister:j(O)},null,8,["onRegister"]),g("div",P,[g("div",I,[x(o,{preIcon:"ant-design:sync-outlined",onClick:k},{default:h((()=>[B])),_:1}),x(o,{type:"primary",preIcon:"ant-design:save-filled",onClick:z},{default:h((()=>[D])),_:1})])])])),_:1},8,["spinning"])}}});export{_ as default};
