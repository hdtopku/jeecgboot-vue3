import{l as e,F as s,ee as a,dL as t,b5 as n,dW as i,ef as r,d7 as o,s as u,v as l,x as d,u as g}from"./index.26a57b91.js";const c=e({__name:"OAuth2Login",setup(e){const c=s(a()),p=s({thirdApp:!1,wxWork:!1,dingtalk:!1}),{currentRoute:h}=t(),v=h.value;return a()||n.replace({path:i.BASE_LOGIN,query:v.query}),c.value&&function(){/wxwork/i.test(navigator.userAgent)&&(p.value.thirdApp=!0,p.value.wxWork=!0);/dingtalk/i.test(navigator.userAgent)&&(p.value.thirdApp=!0,p.value.dingtalk=!0);!function(){if(p.value.thirdApp)if(v.query.oauth2LoginToken){!function(e){const s=o(),{notification:a}=g(),{t:t}=u();s.ThirdLogin(e).then((e=>{e&&e.userInfo?a.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${e.userInfo.realname}`,duration:3}):a.error({message:"登录失败",description:((e.response||{}).data||{}).message||e.message||"请求出现错误，请稍后再试",duration:4})}))}({token:v.query.oauth2LoginToken,thirdType:v.query.thirdType})}else p.value.wxWork?r("wechat_enterprise"):p.value.dingtalk&&r("dingtalk")}()}(),(e,s)=>(l(),d("div"))}});export{c as default};
