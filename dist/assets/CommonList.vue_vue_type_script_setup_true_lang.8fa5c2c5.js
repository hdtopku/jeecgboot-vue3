import{j as z,C as v,m as E,r as c,s as _,t as h,aW as s,v as i,w as n,y,z as d,S as p,bx as I,H as O,dl as P,Q as D,R,ax as W}from"./index.c1f9bce8.js";const x={class:"flex justify-between"},G={class:"border-solid rounded"},J={class:"ant-dropdown-link"},K={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},U={key:0},X={key:1},Z=z({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0}},setup(A,{expose:S}){const f=v(!1),m=v(!1),e=v(),g=v(),k=v(),C=(t,u,r=!1)=>{g.value=t,k.value=u,r?m.value=!0:(f.value=!0,u.pageNo=1),t(u).then(a=>{if(u.pageNo=a.current+1,a.current>1&&r){e.value.records.push(...a.records);return}e.value=a}).catch(a=>{console.error(a)}).finally(()=>{f.value=!1,m.value=!1})},V=()=>{C(g.value,k.value,!0)},j=E(()=>{var t,u,r,a;return((t=e==null?void 0:e.value)==null?void 0:t.total)===0||((r=(u=e==null?void 0:e.value)==null?void 0:u.records)==null?void 0:r.length)>=((a=e==null?void 0:e.value)==null?void 0:a.total)});return S({execQuery:C}),(t,u)=>{var w;const r=c("a-typography-title"),a=c("a-dropdown"),H=c("a-list-item-meta"),M=c("a-list-item"),Q=c("a-spin"),T=c("a-button"),q=c("a-list");return _(),h(W,null,[s("div",x,[i(r,{level:5},{default:n(()=>{var l,o;return[y("\u5171"+d((o=(l=e.value)==null?void 0:l.total)!=null?o:0)+"\u6761",1)]}),_:1}),s("span",null,[p(t.$slots,"header")])]),i(q,{loading:f.value,"data-source":(w=e.value)==null?void 0:w.records},{renderItem:n(({item:l,index:o})=>[i(M,null,{default:n(()=>[i(H,null,I({title:n(()=>[s("span",null,[p(t.$slots,"top",{item:l,index:o})])]),description:n(()=>[p(t.$slots,"bottom",{item:l,index:o})]),_:2},[A.showLeft?{name:"avatar",fn:n(()=>[s("div",null,[s("span",G,"#"+d(o+1),1),s("span",null,[p(t.$slots,"shelter",{item:l,index:o})])]),i(a,null,{overlay:n(()=>[s("span",null,[p(t.$slots,"operate",{item:l,index:o})])]),default:n(()=>[s("a",J,[y(" \u64CD\u4F5C "),i(O(P))])]),_:2},1024),s("span",null,[p(t.$slots,"left",{style:"position: relative",item:l,index:o})])]),key:"0"}:void 0]),1024),s("span",null,[p(t.$slots,"right",{item:l,index:o})])]),_:2},1024)]),loadMore:n(()=>{var l,o,$,b;return[((l=e.value)==null?void 0:l.total)>0?(_(),h("div",K,[j.value?(_(),h("span",U,"\u52A0\u8F7D\u5B8C\u6210("+d(($=(o=e.value)==null?void 0:o.records)==null?void 0:$.length)+"/"+d((b=e.value)==null?void 0:b.total)+")",1)):(_(),h("span",X,[m.value?(_(),D(Q,{key:0})):(_(),D(T,{key:1,onClick:V},{default:n(()=>{var B,F,N;return[y("\u52A0\u8F7D\u66F4\u591A("+d((F=(B=e.value)==null?void 0:B.records)==null?void 0:F.length)+"/"+d((N=e.value)==null?void 0:N.total)+")",1)]}),_:1}))]))])):R("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{Z as _};
