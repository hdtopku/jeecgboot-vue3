var e=(e,l,a)=>new Promise(((r,t)=>{var o=e=>{try{i(a.next(e))}catch(l){t(l)}},d=e=>{try{i(a.throw(e))}catch(l){t(l)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,d);i((a=a.apply(e,l)).next())}));import{B as l}from"./index.934459b9.js";import{s as a}from"./jvxetable.api.b5fc82eb.js";import{o as r,a as t}from"./api.079fe6db.js";import{l as o,F as d,a8 as i,bH as s,L as n,o as u,q as c,t as f,v as m,V as M,z as p,y as g,B as v,C as b}from"./index.26a57b91.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";const _=o({name:"OneToOneModal",components:{BasicModal:l},emits:["success","register"],setup(l,{emit:o}){const c=d(!0),f=d(""),m=d(),M=i({xs:{span:24},sm:{span:5}}),p=i({xs:{span:24},sm:{span:16}}),g=i({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:{name:"",telphone:""},jeecgOrderTicketList:{ticketCode:"",tickectDate:""}}),[v,{setModalProps:b,closeModal:_}]=s((l=>e(this,null,(function*(){if(b({confirmLoading:!1}),g.id=null,g.orderCode="",g.orderMoney="",g.orderDate=null,g.ctype="",g.content="",g.jeecgOrderCustomerList={},g.jeecgOrderTicketList={},c.value=!!(null==l?void 0:l.isUpdate),n(c)){f.value=l.record.id,Object.assign(g,l.record);let e={id:g.id};const a=yield r(e);g.jeecgOrderCustomerList=a[0]?a[0]:{};const o=yield t(e);g.jeecgOrderTicketList=o[0]?o[0]:{}}})))),j=u((()=>n(c)?"编辑":"新增"));return{formRef:m,validatorRules:{orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},orderMainModel:g,registerModal:v,getTitle:j,labelCol:M,wrapperCol:p,handleSubmit:function(){return e(this,null,(function*(){m.value.validate().then((()=>e(this,null,(function*(){try{b({confirmLoading:!0}),g.jeecgOrderCustomerList=Object.keys(g.jeecgOrderCustomerList).length>0?[g.jeecgOrderCustomerList]:[],g.jeecgOrderTicketList=Object.keys(g.jeecgOrderTicketList).length>0?[g.jeecgOrderTicketList]:[],yield a(g,n(c)),_(),o("success")}finally{b({confirmLoading:!1})}})))).catch((e=>{}))}))}}}}),j=b("国内订单"),O=b("国际订单");var h=c(_,[["render",function(e,l,a,r,t,o){const d=f("a-input"),i=f("a-form-item"),s=f("a-col"),n=f("a-select-option"),u=f("a-select"),c=f("a-date-picker"),b=f("a-row"),_=f("a-tab-pane"),h=f("a-tabs"),C=f("a-form"),L=f("BasicModal");return m(),M(L,v(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:p((()=>[g(C,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:p((()=>[g(b,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"订单号",name:"orderCode"},{default:p((()=>[g(d,{value:e.orderMainModel.orderCode,"onUpdate:value":l[0]||(l[0]=l=>e.orderMainModel.orderCode=l),placeholder:"请输入订单号"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单类型"},{default:p((()=>[g(u,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":l[1]||(l[1]=l=>e.orderMainModel.ctype=l)},{default:p((()=>[g(n,{value:"1"},{default:p((()=>[j])),_:1}),g(n,{value:"2"},{default:p((()=>[O])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单日期"},{default:p((()=>[g(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":l[2]||(l[2]=l=>e.orderMainModel.orderDate=l)},null,8,["value"])])),_:1})])),_:1})])),_:1}),g(b,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"订单金额"},{default:p((()=>[g(d,{value:e.orderMainModel.orderMoney,"onUpdate:value":l[3]||(l[3]=l=>e.orderMainModel.orderMoney=l),placeholder:"请输入订单金额"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"订单备注"},{default:p((()=>[g(d,{value:e.orderMainModel.content,"onUpdate:value":l[4]||(l[4]=l=>e.orderMainModel.content=l),placeholder:"请输入订单备注"},null,8,["value"])])),_:1})])),_:1})])),_:1}),g(h,{defaultActiveKey:"1"},{default:p((()=>[g(_,{tab:"客户信息",key:"1"},{default:p((()=>[g(b,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"客户姓名"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderCustomerList.name,"onUpdate:value":l[5]||(l[5]=l=>e.orderMainModel.jeecgOrderCustomerList.name=l),placeholder:"请输入客户姓名"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"手机号"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderCustomerList.telphone,"onUpdate:value":l[6]||(l[6]=l=>e.orderMainModel.jeecgOrderCustomerList.telphone=l),placeholder:"请输入手机号"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),g(_,{tab:"机票信息",key:"2",forceRender:""},{default:p((()=>[g(b,{class:"form-row",gutter:16},{default:p((()=>[g(s,{lg:8},{default:p((()=>[g(i,{label:"航班号"},{default:p((()=>[g(d,{value:e.orderMainModel.jeecgOrderTicketList.ticketCode,"onUpdate:value":l[7]||(l[7]=l=>e.orderMainModel.jeecgOrderTicketList.ticketCode=l),placeholder:"请输入航班号"},null,8,["value"])])),_:1})])),_:1}),g(s,{lg:8},{default:p((()=>[g(i,{label:"起飞时间"},{default:p((()=>[g(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.jeecgOrderTicketList.tickectDate,"onUpdate:value":l[8]||(l[8]=l=>e.orderMainModel.jeecgOrderTicketList.tickectDate=l)},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col","rules"])])),_:1},16,["onRegister","title","onOk"])}],["__scopeId","data-v-7e8e9bda"]]);export{h as default};
