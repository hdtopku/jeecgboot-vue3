var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,n=(e,t,o)=>new Promise(((l,a)=>{var n=e=>{try{i(o.next(e))}catch(t){a(t)}},s=e=>{try{i(o.throw(e))}catch(t){a(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,s);i((o=o.apply(e,t)).next())}));import{B as s}from"./index.ee0a0c33.js";import{B as i}from"./BasicForm.79466d99.js";import"./helper.ec3e26f3.js";import{u as r}from"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import{a1 as d,a5 as p,l as u,F as c,bH as m,L as b,o as f,v as h,V as v,z as y,y as I,B as k}from"./index.b3c93d64.js";const x=[{title:"短链接码",dataIndex:"code"},{title:"链接",dataIndex:"link"},{title:"备注",dataIndex:"remark"},{title:"访问次数",dataIndex:"visitCount"},{title:"手机是否可以访问(0-可以,-1-不可以)",dataIndex:"mobile"},{title:"电脑是否可以访问(0-可以,-1-不可以)",dataIndex:"pc"},{title:"状态(0：正常，-1:失效)",dataIndex:"status"},{title:"链接类型:1-agiso订单",dataIndex:"linkType"}],g=[{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"}],j=[{label:"",field:"id",component:"Input",show:!1},{label:"短链接码",field:"code",component:"Input"},{label:"链接",field:"link",component:"Input"},{label:"备注",field:"remark",component:"Input"},{label:"访问次数",field:"visitCount",component:"InputNumber"},{label:"手机是否可以访问(0-可以,-1-不可以)",field:"mobile",component:"InputNumber"},{label:"电脑是否可以访问(0-可以,-1-不可以)",field:"pc",component:"InputNumber"},{label:"状态(0：正常，-1:失效)",field:"status",component:"Input"},{label:"链接类型:1-agiso订单",field:"linkType",component:"Input"}],w="/pms/shortLink/exportXls",L="/pms/shortLink/importExcel",O=e=>d.get({url:"/pms/shortLink/list",params:e}),P=(e,t)=>d.delete({url:"/pms/shortLink/delete",params:e},{joinParamsToUrl:!0}).then((()=>{t()})),B=(e,t)=>{p.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>d.delete({url:"/pms/shortLink/deleteBatch",data:e},{joinParamsToUrl:!0}).then((()=>{t()}))})},_=u({__name:"ShortLinkModal",emits:["register","success"],setup(e,{emit:p}){const u=c(!0),[x,{resetFields:g,setFieldsValue:w,validate:L}]=r({labelWidth:150,schemas:j,showActionButtonGroup:!1}),[O,{setModalProps:P,closeModal:B}]=m((e=>n(this,null,(function*(){yield g(),P({confirmLoading:!1,showCancelBtn:null==e?void 0:e.showFooter,showOkBtn:null==e?void 0:e.showFooter}),u.value=!!(null==e?void 0:e.isUpdate),b(u)&&(yield w(((e,n)=>{for(var s in n||(n={}))o.call(n,s)&&a(e,s,n[s]);if(t)for(var s of t(n))l.call(n,s)&&a(e,s,n[s]);return e})({},e.record)))})))),_=f((()=>b(u)?"编辑":"新增"));function F(e){return n(this,null,(function*(){try{let e=yield L();P({confirmLoading:!0}),yield((e,t)=>{let o=t?"/pms/shortLink/edit":"/pms/shortLink/add";return d.post({url:o,params:e})})(e,u.value),B(),p("success",{isUpdate:u.value,values:e})}finally{P({confirmLoading:!1})}}))}return(e,t)=>(h(),v(b(s),k(e.$attrs,{onRegister:b(O),title:b(_),onOk:F,width:"60%"}),{default:y((()=>[I(b(i),{onRegister:b(x)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});var F=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{F as S,_,L as a,B as b,x as c,P as d,w as g,O as l,g as s};
