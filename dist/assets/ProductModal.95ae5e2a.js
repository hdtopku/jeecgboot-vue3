var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,n=(e,t,o)=>new Promise(((a,l)=>{var n=e=>{try{i(o.next(e))}catch(t){l(t)}},r=e=>{try{i(o.throw(e))}catch(t){l(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,r);i((o=o.apply(e,t)).next())}));import{B as r}from"./index.ee0a0c33.js";import{B as i}from"./BasicForm.79466d99.js";import"./helper.ec3e26f3.js";import{u as s}from"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import{l as c,F as d,bH as p,L as u,o as m,v as b,V as f,z as v,y,B as h}from"./index.b3c93d64.js";import{s as I}from"./Product.api.ac2c6318.js";const j=[{title:"\b商品名称",dataIndex:"name"},{title:"\b商品价格",dataIndex:"price"},{title:"\b商品进价",dataIndex:"cost"},{title:"备注",dataIndex:"remark"},{title:"\b商品图片",dataIndex:"pic"}],g=[{label:"\b商品名称",field:"name",component:"Input"},{label:"\b商品价格",field:"price",component:"InputNumber"}],w=[{label:"",field:"id",component:"Input",show:!1},{label:"\b商品名称",field:"name",component:"Input"},{label:"\b商品价格",field:"price",component:"InputNumber"},{label:"\b商品进价",field:"cost",component:"InputNumber"},{label:"备注",field:"remark",component:"Input"},{label:"\b商品图片",field:"pic",component:"Input"}],x=c({__name:"ProductModal",emits:["register","success"],setup(e,{emit:c}){const j=d(!0),[g,{resetFields:x,setFieldsValue:O,validate:P}]=s({labelWidth:150,schemas:w,showActionButtonGroup:!1}),[_,{setModalProps:B,closeModal:F}]=p((e=>n(this,null,(function*(){yield x(),B({confirmLoading:!1,showCancelBtn:null==e?void 0:e.showFooter,showOkBtn:null==e?void 0:e.showFooter}),j.value=!!(null==e?void 0:e.isUpdate),u(j)&&(yield O(((e,n)=>{for(var r in n||(n={}))o.call(n,r)&&l(e,r,n[r]);if(t)for(var r of t(n))a.call(n,r)&&l(e,r,n[r]);return e})({},e.record)))})))),k=m((()=>u(j)?"编辑":"新增"));function L(e){return n(this,null,(function*(){try{let e=yield P();B({confirmLoading:!0}),yield I(e,j.value),F(),c("success",{isUpdate:j.value,values:e})}finally{B({confirmLoading:!1})}}))}return(e,t)=>(b(),f(u(r),h(e.$attrs,{onRegister:u(_),title:u(k),onOk:L,width:"80%"}),{default:v((()=>[y(u(i),{onRegister:u(g)},null,8,["onRegister"])])),_:1},16,["onRegister","title"]))}});var O=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{O as P,x as _,j as c,g as s};
