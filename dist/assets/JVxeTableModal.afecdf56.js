var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,d=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a,t)=>new Promise(((l,r)=>{var o=e=>{try{i(t.next(e))}catch(a){r(a)}},d=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,d);i((t=t.apply(e,a)).next())}));import{B as n}from"./index.e1e06dd6.js";import{dz as s,l as u,dA as c,F as p,a8 as f,bH as b,L as m,o as g,q as v,t as y,v as M,V as h,z as w,y as j,B as R,C as k}from"./index.435ab247.js";import{o as _,a as x,s as C}from"./jvxetable.api.559da4d2.js";import{useJvxeMethod as O}from"./useJvxeMethods.354abe80.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";import"./vxeUtils.7581a51b.js";const S=[{title:"客户名",key:"name",width:180,type:s.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"性别",key:"sex",width:180,type:s.select,options:[{title:"男",value:"1"},{title:"女",value:"2"}],defaultValue:"",placeholder:"请选择${title}"},{title:"身份证号",key:"idcard",width:180,type:s.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}格式不正确"}]},{title:"手机号",key:"telphone",width:180,type:s.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^1(3|4|5|7|8)\\d{9}$",message:"${title}格式不正确"}]}],V=[{title:"航班号",key:"ticketCode",width:180,type:s.input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"航班时间",key:"tickectDate",width:180,type:s.date,placeholder:"请选择${title}",defaultValue:""}],$=u({name:"JVexTableModal",components:{BasicModal:n,JVxeTable:c},emits:["success","register"],setup(e,{emit:n}){const s=p(!0),u=p(),c=p(),v=p(["tableRef1","tableRef2"]),y=p("tableRef1"),M={tableRef1:u,tableRef2:c},h=f({xs:{span:24},sm:{span:5}}),w=f({xs:{span:24},sm:{span:16}}),j=f({loading:!1,dataSource:[],columns:S}),R=f({loading:!1,dataSource:[],columns:V}),k=f({id:null,orderCode:"",orderMoney:"",ctype:"",content:"",jeecgOrderCustomerList:[],jeecgOrderTicketList:[]}),[$,T,D,L]=O((function(e){return i(this,null,(function*(){U({confirmLoading:!0}),yield C(e,m(s)),K(),n("success")}))}),(function(e){let i=Object.assign(k,e.formValue);return n=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&d(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&d(e,t,a[t]);return e})({},i),s={jeecgOrderCustomerList:e.tablesValue[0].tableData,jeecgOrderTicketList:e.tablesValue[1].tableData},a(n,t(s));var n,s}),M,y,v),[P,{setModalProps:U,closeModal:K}]=b((e=>i(this,null,(function*(){if(U({confirmLoading:!1}),k.id=null,k.orderCode="",k.orderMoney="",k.orderDate=null,k.ctype="",k.content="",k.jeecgOrderCustomerList=[],k.jeecgOrderTicketList=[],j.dataSource=[],R.dataSource=[],s.value=!!(null==e?void 0:e.isUpdate),m(s)){Object.assign(k,e.record);let a={id:k.id};D(_,a,j),D(x,a,R)}})))),z=g((()=>m(s)?"编辑":"新增"));return{formRef:L,activeKey:y,table1:j,table2:R,tableRef1:u,tableRef2:c,getTitle:z,labelCol:h,wrapperCol:w,validatorRules:{orderCode:[{required:!0,message:"订单号不能为空",trigger:"blur"}]},orderMainModel:k,registerModal:P,handleChangeTabs:$,handleSubmit:T}}}),T=k("国内订单"),D=k("国际订单");var L=v($,[["render",function(e,a,t,l,r,o){const d=y("a-input"),i=y("a-form-item"),n=y("a-col"),s=y("a-select-option"),u=y("a-select"),c=y("a-date-picker"),p=y("a-row"),f=y("JVxeTable"),b=y("a-tab-pane"),m=y("a-tabs"),g=y("a-form"),v=y("BasicModal");return M(),h(v,R(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit,width:"70%"}),{default:w((()=>[j(g,{ref:"formRef",model:e.orderMainModel,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.validatorRules},{default:w((()=>[j(p,{class:"form-row",gutter:16},{default:w((()=>[j(n,{lg:8},{default:w((()=>[j(i,{label:"订单号",name:"orderCode"},{default:w((()=>[j(d,{value:e.orderMainModel.orderCode,"onUpdate:value":a[0]||(a[0]=a=>e.orderMainModel.orderCode=a),placeholder:"请输入订单号"},null,8,["value"])])),_:1})])),_:1}),j(n,{lg:8},{default:w((()=>[j(i,{label:"订单类型",name:"ctype"},{default:w((()=>[j(u,{placeholder:"请选择订单类型",value:e.orderMainModel.ctype,"onUpdate:value":a[1]||(a[1]=a=>e.orderMainModel.ctype=a)},{default:w((()=>[j(s,{value:"1"},{default:w((()=>[T])),_:1}),j(s,{value:"2"},{default:w((()=>[D])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),j(n,{lg:8},{default:w((()=>[j(i,{label:"订单日期",name:"orderDate"},{default:w((()=>[j(c,{showTime:"",valueFormat:"YYYY-MM-DD HH:mm:ss",value:e.orderMainModel.orderDate,"onUpdate:value":a[2]||(a[2]=a=>e.orderMainModel.orderDate=a)},null,8,["value"])])),_:1})])),_:1})])),_:1}),j(p,{class:"form-row",gutter:16},{default:w((()=>[j(n,{lg:8},{default:w((()=>[j(i,{label:"订单金额",name:"orderMoney"},{default:w((()=>[j(d,{value:e.orderMainModel.orderMoney,"onUpdate:value":a[3]||(a[3]=a=>e.orderMainModel.orderMoney=a),placeholder:"请输入订单金额"},null,8,["value"])])),_:1})])),_:1}),j(n,{lg:8},{default:w((()=>[j(i,{label:"订单备注",name:"content"},{default:w((()=>[j(d,{value:e.orderMainModel.content,"onUpdate:value":a[4]||(a[4]=a=>e.orderMainModel.content=a),placeholder:"请输入订单备注"},null,8,["value"])])),_:1})])),_:1})])),_:1}),j(m,{activeKey:e.activeKey,"onUpdate:activeKey":a[5]||(a[5]=a=>e.activeKey=a),onChange:e.handleChangeTabs},{default:w((()=>[j(b,{tab:"客户信息",key:"tableRef1"},{default:w((()=>[j(f,{ref:"tableRef1",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource},null,8,["loading","columns","dataSource"])])),_:1}),j(b,{tab:"机票信息",key:"tableRef2",forceRender:""},{default:w((()=>[j(f,{ref:"tableRef2",stripe:"",toolbar:"",rowNumber:"",rowSelection:"",resizable:"",keepSource:"",maxHeight:300,"checkbox-config":{range:!0},loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource},null,8,["loading","columns","dataSource"])])),_:1})])),_:1},8,["activeKey","onChange"])])),_:1},8,["model","label-col","wrapper-col","rules"])])),_:1},16,["onRegister","title","onOk"])}]]);export{L as default};
