import{dc as t,F as e,L as n,dd as i,de as o,J as s,df as a,dg as d,a6 as l}from"./index.435ab247.js";const c=Symbol("watermark-dom");function r(r=e(document.body)){const h=a((function(){const t=n(r);if(!t)return;const{clientHeight:e,clientWidth:i}=t;f({height:e,width:i})})),u=c.toString(),g=t(),m=()=>{const t=n(g);g.value=void 0;const e=n(r);e&&(t&&e.removeChild(t),i(e,h))};function f(t={}){const e=n(g);e&&(d(t.width)&&(e.style.width=`${t.width}px`),d(t.height)&&(e.style.height=`${t.height}px`),d(t.str)&&(e.style.background=`url(${function(t){const e=document.createElement("canvas");Object.assign(e,{width:300,height:240});const n=e.getContext("2d");return n&&(n.rotate(-20*Math.PI/120),n.font="15px Vedana",n.fillStyle="rgba(0, 0, 0, 0.15)",n.textAlign="left",n.textBaseline="middle",n.fillText(t,15,240)),e.toDataURL("image/png")}(t.str)}) left top repeat`))}return{setWatermark:function(t){(t=>{if(n(g))return f({str:t}),u;const e=document.createElement("div");g.value=e,e.id=u,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const i=n(r);if(!i)return u;const{clientHeight:o,clientWidth:s}=i;f({str:t,width:s,height:o}),i.appendChild(e)})(t),o(document.documentElement,h),l()&&s((()=>{m()}))},clear:m}}export{r as useWatermark};
