var ie=Object.defineProperty;var O=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var M=(m,l,t)=>l in m?ie(m,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[l]=t,P=(m,l)=>{for(var t in l||(l={}))ue.call(l,t)&&M(m,t,l[t]);if(O)for(var t of O(l))se.call(l,t)&&M(m,t,l[t]);return m};var V=(m,l,t)=>new Promise((r,p)=>{var C=n=>{try{g(t.next(n))}catch(d){p(d)}},x=n=>{try{g(t.throw(n))}catch(d){p(d)}},g=n=>n.done?r(n.value):Promise.resolve(n.value).then(C,x);g((t=t.apply(m,l)).next())});import{l as ce,F as i,r as re,j as w,a7 as de,$ as me,t as _,v as y,V as S,z as a,aV as u,y as o,W as pe,D as $,x as b,L as D,ee as _e,C as v,a5 as fe,a1 as I,a as ve,cc as B,u as ge,as as he}from"./index.b3d2a891.js";import{g as ye}from"./Area.5314b018.js";import xe from"./OneNativeModal.7999cf7a.js";import{i as Ce}from"./api.1d3c1927.js";import{downloadFile as we}from"./renderUtils.a1668db6.js";import"./JAddInput.43004d14.js";import"./useFormItem.c06072f5.js";import"./index.2d23bddf.js";import"./BasicModal.7efd78fc.js";import"./useWindowSizeFn.ab02708a.js";import"./props.eccfb3be.js";import"./index.7afb8201.js";import"./bem.8fd44f61.js";import"./props.9df65a00.js";import"./useContextMenu.2f0b587d.js";import"./index.bc22d773.js";import"./onMountedOrActivated.12413c39.js";import"./index.bcdb3c55.js";import"./htmlmixed.6d768be1.js";import"./vue.1e0c6574.js";/* empty css             */import"./depart.api.7ce3d710.js";import"./OneNativeForm.8de49991.js";import"./JUpload.7bcd35c5.js";import"./functional.4d8eb9e7.js";const ke={class:"table-operator"},Ee=v("\u65B0\u589E"),Fe=v(" \u5220\u9664 "),Se=v("\u6279\u91CF\u64CD\u4F5C "),be={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},De=u("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),Ie=v(" \u5DF2\u9009\u62E9 "),Be={style:{"font-weight":"600"}},Te=v("\u9879 "),je={slot:"htmlSlot","slot-scope":"text"},Ae=["innerHTML"],Re={key:0,style:{"font-size":"12px","font-style":"italic"}},ze=["src","preview"],Ne={key:0,style:{"font-size":"12px","font-style":"italic"}},Oe=v(" \u4E0B\u8F7D "),Me=["onClick"],Pe={class:"ant-dropdown-link"},Ve=v("\u66F4\u591A "),$e=["onClick"],He=u("a",null,"\u5220\u9664",-1),ft=ce({__name:"OneNativeList",setup(m){i(!1);const l=i({}),t=i(!1),r=i([]),p=i();re();const C=i([{title:"\u6587\u672C",align:"center",dataIndex:"name"},{title:"\u5B57\u5178\u4E0B\u62C9",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?w(r.value.xiala,e):""},{title:"\u5B57\u5178\u5355\u9009",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?w(r.value.danxuan,e):""},{title:"\u5B57\u5178\u591A\u9009",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?w(r.value.duoxuan,e):""},{title:"\u5F00\u5173",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?w(r.value.kaiguan,e):""},{title:"\u65E5\u671F",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"\u5E74\u6708\u65E5\u65F6\u5206\u79D2",align:"center",dataIndex:"nyrsfm"},{title:"\u65F6\u95F4",align:"center",dataIndex:"shijian"},{title:"\u6587\u4EF6",align:"center",dataIndex:"wenjian",slots:{customRender:"fileSlot"}},{title:"\u56FE\u7247",align:"center",dataIndex:"tupian",slots:{customRender:"imgSlot"}},{title:"\u64CD\u4F5C",dataIndex:"action",align:"center",fixed:"right",width:147,slots:{customRender:"action"}}]),x=de({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),g=i([]);i(!1);const n=i({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,s)=>s[0]+"-"+s[1]+" \u5171"+e+"\u6761",showQuickJumper:!0,showSizeChanger:!0,total:0}),d=i([]),k=i([]),T=i({column:"createTime",order:"desc"}),j=i({}),{createMessage:H}=ge();function L(e,s){d.value=e,k.value=s}function K({pagination:e,filters:s,sorter:c}){n.value=e,T.value=c,j.value=P({},s)}function Q(){p.value.disableSubmit=!1,p.value.add()}function U(){d.value=[],k.value=[]}function X(){fe.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>{I.delete({url:x.delete,data:{ids:d.value}},{joinParamsToUrl:!0}).then(()=>{E()})}})}function q(){let e=Object.assign(l.value,T.value,j.value);return e.field=J(),e.pageNo=n.value.current,e.pageSize=n.value.pageSize,he(e)}function J(){let e="id,";return C.value.forEach(function(s){e+=","+s.dataIndex}),e}function A(e){e===1&&(n.value.current=1),t.value=!0;let s=q();I.get({url:x.list,params:s},{isTransformResponse:!1}).then(c=>{c.success?(g.value=c.result.records,c.result&&c.result.total?n.value.total=c.result.total:n.value.total=0):H.warning(c.message)}).finally(()=>{t.value=!1})}function W(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),ve(e)}function G(e){p.value.disableSubmit=!1,p.value.edit(e)}function Y(e){p.value.disableSubmit=!0,p.value.edit(e)}function Z(e){I.delete({url:x.delete,data:{ids:e}},{joinParamsToUrl:!0}).then(s=>{E()})}function ee(){return V(this,null,function*(){r.value.flzds=yield Ce({code:"B01"}),r.value.xiala=yield B("sex"),r.value.danxuan=yield B("sex"),r.value.duoxuan=yield B("urgent_level")})}function E(){d.value=[],k.value=[],A(1)}return me(()=>{r.value.kaiguan=[{text:"\u662F",value:"1"},{text:"\u5426",value:"2"}],A(),ee()}),(e,s)=>{const c=_("a-button"),R=_("Icon"),F=_("a-menu-item"),z=_("a-menu"),N=_("a-dropdown"),te=_("a-divider"),ae=_("a-icon"),ne=_("a-table"),oe=_("a-card");return y(),S(oe,{bordered:!1},{default:a(()=>[u("div",ke,[o(c,{onClick:Q,type:"primary",preIcon:"ant-design:plus"},{default:a(()=>[Ee]),_:1}),d.value.length>0?(y(),S(N,{key:0},{overlay:a(()=>[o(z,null,{default:a(()=>[o(F,{key:"1",onClick:X},{default:a(()=>[o(R,{icon:"ant-design:delete-outlined"}),Fe]),_:1})]),_:1})]),default:a(()=>[o(c,null,{default:a(()=>[Se,o(R,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):pe("",!0)]),u("div",null,[u("div",be,[De,Ie,u("a",Be,$(d.value.length),1),Te,u("a",{style:{"margin-left":"24px"},onClick:U},"\u6E05\u7A7A")]),o(ne,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:C.value,dataSource:g.value,pagination:n.value,loading:t.value,rowSelection:{selectedRowKeys:d.value,onChange:L},onChange:K},{imgSlot:a(({text:f,record:h})=>[f?(y(),b("img",{key:1,src:W(f),preview:h.id,alt:"",class:"anty-img-wrap"},null,8,ze)):(y(),b("span",Re,"\u65E0\u56FE\u7247"))]),pcaSlot:a(({text:f})=>[u("div",null,$(D(ye)(f)),1)]),fileSlot:a(({text:f})=>[f?(y(),S(c,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:h=>D(we)(f)},{default:a(()=>[Oe]),_:2},1032,["onClick"])):(y(),b("span",Ne,"\u65E0\u6587\u4EF6"))]),action:a(({text:f,record:h})=>[u("a",{onClick:le=>G(h)},"\u7F16\u8F91",8,Me),o(te,{type:"vertical"}),o(N,null,{overlay:a(()=>[o(z,{class:"antd-more"},{default:a(()=>[o(F,null,{default:a(()=>[u("a",{onClick:le=>Y(h)},"\u8BE6\u60C5",8,$e)]),_:2},1024),o(F,null,{default:a(()=>[o(D(_e),{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:()=>Z(h.id)},{default:a(()=>[He]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[u("a",Pe,[Ve,o(ae,{type:"down"})])]),_:2},1024)]),default:a(()=>[u("template",je,[u("div",{innerHTML:e.text},null,8,Ae)])]),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),o(xe,{ref_key:"oneProtogenesisModal",ref:p,onOk:E},null,512)]),_:1})}}});export{ft as default};
