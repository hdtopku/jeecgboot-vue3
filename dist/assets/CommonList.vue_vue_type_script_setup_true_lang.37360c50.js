import{j as K,C as _,m as X,r as s,s as v,t as h,aW as i,v as a,w as t,y,z as p,N as H,O as I,bx as Y,S as f,H as Z,dl as ee,Q as M,R as oe,ax as te,ac as le}from"./index.c1d8dbc8.js";const ae={class:"border-solid rounded"},ne={class:"ant-dropdown-link"},ue={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},se={key:0},re={key:1},pe=K({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0},buttonColor:{type:String,default:"primary"}},emits:["queryList","changeAdvanced","confirmCopy"],setup(w,{expose:O,emit:Q}){const b=w,r=_(1),m=_(!1),F=()=>{m.value=!0,Q("confirmCopy",{count:r.value})},g=_(!1),C=_(!1),e=_(),B=_(),A=_(),N=(o,c,d=!1)=>{B.value=o,A.value=c,d?C.value=!0:(g.value=!0,c.pageNo=1),o(c).then(n=>{if(c.pageNo=n.current+1,n.current>1&&d){e.value.records.push(...n.records);return}e.value=n}).catch(n=>{console.error(n)}).finally(()=>{g.value=!1,C.value=!1})},T=()=>{N(B.value,A.value,!0)},j=X(()=>{var o,c,d,n;return((o=e==null?void 0:e.value)==null?void 0:o.total)===0||((d=(c=e==null?void 0:e.value)==null?void 0:c.records)==null?void 0:d.length)>=((n=e==null?void 0:e.value)==null?void 0:n.total)}),{proxy:D}=le();return O({execQuery:N,queryFinish:(o=null)=>{o==null?D.tool.error("\u590D\u5236\u5931\u8D25"):r.value===1?D.tool.copy(o,o+"\u5DF2\u590D\u5236"):D.tool.copy(o,r.value+"\u6761\u5DF2\u590D\u5236"),m.value=!1}}),(o,c)=>{var $;const d=s("a-typography-title"),n=s("a-col"),z=s("a-slider"),k=s("a-button"),L=s("a-popconfirm"),P=s("a-row"),R=s("a-dropdown"),U=s("a-list-item-meta"),W=s("a-list-item"),G=s("a-spin"),J=s("a-list");return v(),h(te,null,[i("div",null,[a(P,{class:""},{default:t(()=>[a(n,{span:4},{default:t(()=>[a(d,{level:5},{default:t(()=>{var l,u;return[y("\u5171"+p((u=(l=e.value)==null?void 0:l.total)!=null?u:0)+"\u6761",1)]}),_:1})]),_:1}),a(n,{span:14},{default:t(()=>[a(z,{style:{display:"inline-block"},value:r.value,"onUpdate:value":c[0]||(c[0]=l=>r.value=l),min:1,max:500},null,8,["value"])]),_:1}),a(n,{class:"text-center",span:6},{default:t(()=>[H(a(k,{loading:m.value,type:b.buttonColor,onClick:F},{default:t(()=>[y("\u590D\u5236"+p(r.value)+"\u6761 ",1)]),_:1},8,["loading","type"]),[[I,r.value===1]]),a(L,{title:`\u786E\u5B9A\u590D\u5236${r.value}\u6761\u5417?`,"ok-text":"\u786E\u5B9A","cancel-text":"\u53D6\u6D88",onConfirm:F},{default:t(()=>[H(a(k,{type:b.buttonColor,loading:m.value},{default:t(()=>[y("\u590D\u5236"+p(r.value)+"\u6761 ",1)]),_:1},8,["type","loading"]),[[I,r.value>1]])]),_:1},8,["title"])]),_:1})]),_:1})]),a(J,{loading:g.value,"data-source":($=e.value)==null?void 0:$.records},{renderItem:t(({item:l,index:u})=>[a(W,null,{default:t(()=>[a(U,null,Y({title:t(()=>[i("span",null,[f(o.$slots,"top",{item:l,index:u})])]),description:t(()=>[f(o.$slots,"bottom",{item:l,index:u})]),_:2},[w.showLeft?{name:"avatar",fn:t(()=>[i("div",null,[i("span",ae,"#"+p(u+1),1),i("span",null,[f(o.$slots,"shelter",{item:l,index:u})])]),a(R,null,{overlay:t(()=>[i("span",null,[f(o.$slots,"operate",{item:l,index:u})])]),default:t(()=>[i("a",ne,[y(" \u64CD\u4F5C "),a(Z(ee))])]),_:2},1024),i("span",null,[f(o.$slots,"left",{style:"position: relative",item:l,index:u})])]),key:"0"}:void 0]),1024),i("span",null,[f(o.$slots,"right",{item:l,index:u})])]),_:2},1024)]),loadMore:t(()=>{var l,u,S,x;return[((l=e.value)==null?void 0:l.total)>0?(v(),h("div",ue,[j.value?(v(),h("span",se,"\u52A0\u8F7D\u5B8C\u6210("+p((S=(u=e.value)==null?void 0:u.records)==null?void 0:S.length)+"/"+p((x=e.value)==null?void 0:x.total)+")",1)):(v(),h("span",re,[C.value?(v(),M(G,{key:0})):(v(),M(k,{key:1,onClick:T},{default:t(()=>{var q,V,E;return[y("\u52A0\u8F7D\u66F4\u591A("+p((V=(q=e.value)==null?void 0:q.records)==null?void 0:V.length)+"/"+p((E=e.value)==null?void 0:E.total)+")",1)]}),_:1}))]))])):oe("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{pe as _};
