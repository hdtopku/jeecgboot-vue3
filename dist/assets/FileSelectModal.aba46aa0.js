import{l as M,F as d,bG as D,eY as S,a1 as m,t as f,v as C,V as B,z as v,y as h}from"./index.a1b4e527.js";import{B as R}from"./index.ea6d1b33.js";import"./BasicModal.6dc4adbe.js";import"./useWindowSizeFn.cf93ddee.js";var p=(n,c,t)=>new Promise((a,o)=>{var u=e=>{try{l(t.next(e))}catch(i){o(i)}},r=e=>{try{l(t.throw(e))}catch(i){o(i)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(u,r);l((t=t.apply(n,c)).next())});const k=M({name:"FileSelectModal",components:{BasicModal:R},emits:["select","register"],setup(n,{emit:c}){const t=d(!0),a=d([]),o=d(""),[u,{closeModal:r}]=D(()=>p(this,null,function*(){o.value="",a.value.length===0&&i()}));function l(){c("select",o.value),r()}function e(){r()}function i(){return p(this,null,function*(){t.value=!0,a.value=yield m.get({url:"/online/cgform/head/rootFile"}).finally(()=>{t.value=!1})})}function _(s){return p(this,null,function*(){if(s.dataRef.children)return;let g={parentPath:s.dataRef.key};s.dataRef.children=yield m.get({url:"/online/cgform/head/fileTree",params:g}),a.value=[...a.value]})}function y(s){o.value=s[0]}return{loading:t,treeData:a,onLoadData:_,onSelect:y,onSubmit:l,onCancel:e,registerModal:u}}});function F(n,c,t,a,o,u){const r=f("a-directory-tree"),l=f("a-spin"),e=f("BasicModal");return C(),B(e,{onRegister:n.registerModal,title:"\u9009\u62E9\u76EE\u5F55",width:500,onOk:n.onSubmit,onCancel:n.onCancel},{default:v(()=>[h(l,{spinning:n.loading},{default:v(()=>[h(r,{treeData:n.treeData,loadData:n.onLoadData,onSelect:n.onSelect},null,8,["treeData","loadData","onSelect"])]),_:1},8,["spinning"])]),_:1},8,["onRegister","onOk","onCancel"])}var P=S(k,[["render",F]]);export{P as default};
