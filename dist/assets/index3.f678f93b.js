import I from"./BasicTable.1f9db63f.js";import{T as O}from"./componentMap.402f8d06.js";import"./BasicTable.vue_vue_type_style_index_0_lang.7002ba29.js";import"./TableImg.vue_vue_type_style_index_0_lang.e550a269.js";import{useListPage as M}from"./useListPage.5ed5bcb5.js";import{l as V,c as q,s as K,_ as Q,g as j,d as H,b as z}from"./CgreportModal.175ae422.js";import"./index.942ae64c.js";import{C as k}from"./clipboard.9b0741ac.js";import{j as G,e6 as J,bI as W,r as m,s as x,t as X,v as i,w as u,y as D,K as l,Q as Y,R as Z,x as ee,b1 as te}from"./index.241c886f.js";import"./BasicForm.vue_vue_type_style_index_0_lang.ae157906.js";import"./JAddInput.2d42a71c.js";import"./BasicForm.85dd04b6.js";import"./useFormItem.f1fb85ce.js";import"./BasicModal.cfab584a.js";import"./useWindowSizeFn.01c7b19f.js";import"./functional.a3a4ffc3.js";import"./download.21653b1e.js";import"./base64Conver.030fa32c.js";import"./index.ba19cec8.js";import"./index.67d46494.js";import"./useCountdown.fad41293.js";import"./areaDataUtil.5ccd89d2.js";import"./api.cd27fbef.js";import"./props.10f1db43.js";import"./index.a2e27c18.js";import"./bem.d4d59b92.js";import"./props.394b99ec.js";import"./useContextMenu.37ec29c7.js";import"./index.63c54a6a.js";import"./onMountedOrActivated.7d12d100.js";import"./index.96da7ff0.js";import"./htmlmixed.4a3ad425.js";import"./vue.93346669.js";/* empty css             */import"./depart.api.4991cabc.js";import"./MinusCircleOutlined.99343ef9.js";import"./JUpload.vue_vue_type_style_index_0_lang.67ed2e27.js";import"./index.5c569bac.js";import"./index.1ca4599c.js";import"./uniqBy.57f60d92.js";import"./useForm.8e4ea63f.js";import"./index.b05a25ac.js";import"./useContentHeight.77e84762.js";import"./useContentViewHeight.2c1193bb.js";import"./usePageContext.bb3e692a.js";import"./RedoOutlined.507a2036.js";import"./useTable.5cd37444.js";import"./useJvxeMethods.cf855977.js";import"./vxeUtils.d3d89238.js";import"./user.api.170c34ca.js";import"./_commonjsHelpers.7ef9cff5.js";var A=(C,f,s)=>new Promise((h,p)=>{var L=r=>{try{n(s.next(r))}catch(c){p(c)}},b=r=>{try{n(s.throw(r))}catch(c){p(c)}},n=r=>r.done?h(r.value):Promise.resolve(r.value).then(L,b);n((s=s.apply(C,f)).next())});const Ze=G({__name:"index",setup(C,{expose:f}){let s=J();const[h,{openModal:p}]=W(),{prefixCls:L,tableContext:b,createMessage:n,createConfirm:r}=M({designScope:"online-cgreport-list",pagination:!0,tableProps:{title:"Online\u62A5\u8868",api:V,rowKey:"id",columns:q,formConfig:{autoSubmitOnEnter:!0,showAdvancedButton:!0,schemas:K}}}),[c,{reload:y},{rowSelection:N,selectedRowKeys:w}]=b;function F(){p(!0,{isUpdate:!1,showFooter:!0})}function S(t){p(!0,{record:t,isUpdate:!0,showFooter:!0})}function v(t){return A(this,null,function*(){yield H({id:t.id},y)})}function E(){return A(this,null,function*(){yield z({ids:w.value},()=>{y(),w.value=[]})})}function B(){y()}function P(t){return[{label:"\u7F16\u8F91",onClick:S.bind(null,t)}]}function R(t){return[{label:"\u529F\u80FD\u6D4B\u8BD5",class:["low-app-hide"],onClick:()=>T(t.id)},{label:"\u914D\u7F6E\u5730\u5740",class:["low-app-hide"],onClick:()=>$(t)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:v.bind(null,t)}}]}function T(t){s.push({path:"/online/cgreport/"+t})}function $(t){let g=t.id,a=`/online/cgreport/${g}`,d=`INSERT INTO sys_permission(id, parent_id, name, url, component, component_name, redirect, menu_type, perms, perms_type, sort_no, always_show, icon, is_route, is_leaf, keep_alive, hidden, hide_tab, description, status, del_flag, rule_flag, create_by, create_time, update_by, update_time, internal_or_external) 
                         VALUES ('${te()}', NULL, '${t.name}', '${a}', '1', NULL, NULL, 0, NULL, '1', 0.00, 0, NULL, 0, 1, 0, 0, 0, NULL, '1', 0, 0, 'admin', null, NULL, NULL, 0)`;j(g).then(o=>{let e="";if(o&&o.length>0)for(let _ of o)e+=_.paramName+"=${"+_.paramName+"}&";e.length>0&&(e=e.substring(0,e.length-1),a+="?"+e)}).catch(()=>{n.warning("\u83B7\u53D6\u53C2\u6570\u5931\u8D25!")}).finally(()=>{r({iconType:"info",width:500,title:`\u83DC\u5355\u94FE\u63A5\u3010${t.name}\u3011`,content:a,closable:!0,maskClosable:!0,cancelText:"\u590D\u5236SQL",okText:"\u590D\u5236URL",cancelButtonProps:{class:"copy-this-sql","data-clipboard-text":d},okButtonProps:{class:"copy-this-text","data-clipboard-text":a},onOk(){return new Promise(o=>{const e=new k(".copy-this-text");e.on("success",()=>{e.destroy(),n.success("\u590D\u5236URL\u6210\u529F"),o()}),e.on("error",()=>{n.error("\u8BE5\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u81EA\u52A8\u590D\u5236"),e.destroy(),o()})})},onCancel(){return new Promise(o=>{const e=new k(".copy-this-sql");e.on("success",()=>{e.destroy(),n.success("\u590D\u5236\u63D2\u5165\u83DC\u5355SQL\u6210\u529F"),o()}),e.on("error",()=>{n.error("\u8BE5\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u81EA\u52A8\u590D\u5236"),e.destroy(),o()})})}})})}return f({handleAdd:F}),(t,g)=>{const a=m("a-button"),d=m("Icon"),o=m("a-menu-item"),e=m("a-menu"),_=m("a-dropdown");return x(),X("div",null,[i(l(I),ee({onRegister:l(c),rowSelection:l(N)},t.$attrs),{tableTitle:u(()=>[i(a,{preIcon:"ant-design:plus-outlined",type:"primary",onClick:F,style:{"margin-right":"5px"}},{default:u(()=>[D("\u5F55\u5165")]),_:1}),l(w).length>0?(x(),Y(_,{key:0},{overlay:u(()=>[i(e,null,{default:u(()=>[i(o,{key:"1",onClick:E},{default:u(()=>[i(d,{icon:"ant-design:delete-outlined"}),D(" \u5220\u9664 ")]),_:1})]),_:1})]),default:u(()=>[i(a,null,{default:u(()=>[D("\u6279\u91CF\u64CD\u4F5C "),i(d,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):Z("",!0)]),action:u(({record:U})=>[i(l(O),{actions:P(U),dropDownActions:R(U)},null,8,["actions","dropDownActions"])]),_:1},16,["onRegister","rowSelection"]),i(Q,{onRegister:l(h),onSuccess:B},null,8,["onRegister"])])}}});export{Ze as default};
