import{b3 as M,d9 as k,l as L,F as g,bG as j,f0 as H,Q as I,aY as N,t as r,v as V,V as x,z as a,y as i,C as J,E as b,aV as S,D as $}from"./index.bf68c475.js";import{B as R}from"./index.e8f8bca4.js";import"./BasicForm.213c2d85.js";import"./helper.ad8866a8.js";import{k as T}from"./JAddInput.e43de06a.js";import"./BasicModal.38c03318.js";import"./useWindowSizeFn.1f0448eb.js";import"./uniqBy.a53fee27.js";import"./useFormItem.9e16d2b7.js";import"./functional.a42ce03b.js";import"./download.bad38670.js";import"./base64Conver.030fa32c.js";import"./index.0e834b2f.js";import"./index.9d044c60.js";import"./useCountdown.9e9bfe09.js";import"./JUpload.bd6c8d67.js";import"./api.046b728f.js";import"./index.a1abb8b1.js";import"./props.11ce45ee.js";import"./index.6fb73d11.js";import"./bem.50a076c2.js";import"./props.454eaba2.js";import"./useContextMenu.c45c31d7.js";import"./index.3b2c46e0.js";import"./onMountedOrActivated.a477ed21.js";import"./index.4a4acf0c.js";import"./htmlmixed.a0e62acf.js";import"./vue.ac921e1e.js";/* empty css             */import"./depart.api.6451e595.js";var z=Object.defineProperty,w=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,O=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))A.call(t,n)&&O(e,n,t[n]);if(w)for(var n of w(t))G.call(t,n)&&O(e,n,t[n]);return e},Q=(e,t,n)=>new Promise((p,d)=>{var f=s=>{try{c(n.next(s))}catch(u){d(u)}},_=s=>{try{c(n.throw(s))}catch(u){d(u)}},c=s=>s.done?p(s.value):Promise.resolve(s.value).then(f,_);c((n=n.apply(e,t)).next())});const B=M(),D="enhance_",Y=k({id:"online-cgform-enhance",state:()=>({enhanceJs:{}}),getters:{},actions:{getEnhanceJs(e){return this.enhanceJs[e]=B.get(D+e),this.enhanceJs[e]},addEnhanceJs(e){this.enhanceJs[e.code]?this.enhanceJs[e.code].push(P({},e)):this.enhanceJs[e.code]=[P({},e)];let t=this.enhanceJs[e.code];for(;t.length>16;)t.shift();B.set(D+e.code,t)}}}),q=L({name:"EnhanceJsHistory",components:{BasicModal:R,JCodeEditor:T},setup(){const e=Y(),t=g(),n=g(!1),p=g([]),d=g(""),f=g(0),[_,{closeModal:c}]=j(o=>Q(this,null,function*(){s(o.code,o.type)}));function s(o,C){d.value="",p.value=[];let E=e.getEnhanceJs(o),l=[],m=0;for(let h of E)h.type===C&&(m++,l.push(Object.assign({},h,{index:m})));l&&l.length>0&&l.sort((h,F)=>F.date-h.date),p.value=[...l],I(()=>v(l[0]))}function u(){c()}function y(o){return N(o,"yyyy-MM-DD HH:mm:ss")}function v(o){f.value=o.index,t.value.setValue(o.str)}return{codeEditorRef:t,fullCode:v,registerModal:_,getFormatDate:y,onCancel:u,confirmLoading:n,dataList:p,jsStr:d,activeIndex:f}}}),K=["onClick"];function U(e,t,n,p,d,f){const _=r("a-divider"),c=r("a-list-item"),s=r("a-list"),u=r("a-layout-sider"),y=r("JCodeEditor"),v=r("a-layout-content"),o=r("a-layout"),C=r("a-spin"),E=r("a-button"),l=r("BasicModal");return V(),x(l,{onRegister:e.registerModal,title:"JS\u589E\u5F3A\u5386\u53F2\u8BB0\u5F55",width:1200,maskClosable:!1,confirmLoading:e.confirmLoading,defaultFullscreen:"",onCancel:e.onCancel},{footer:a(()=>[i(E,{onClick:e.onCancel},{default:a(()=>[J("\u5173\u95ED")]),_:1},8,["onClick"])]),default:a(()=>[i(C,{spinning:e.confirmLoading},{default:a(()=>[i(o,null,{default:a(()=>[i(u,{theme:"light"},{default:a(()=>[i(s,{bordered:"",dataSource:e.dataList,class:b("enhance-list")},{header:a(()=>[S("div",null,[i(_,{style:{margin:"0"}},{default:a(()=>[J("\u4FDD\u5B58\u65F6\u95F4")]),_:1})])]),renderItem:a(({item:m})=>[i(c,{class:b(e.activeIndex===m.index?"bg-blue":"")},{default:a(()=>[S("a",{onClick:h=>e.fullCode(m)},$(e.getFormatDate(m.date)),9,K)]),_:2},1032,["class"])]),_:1},8,["dataSource"])]),_:1}),i(o,null,{default:a(()=>[i(v,{style:{margin:"8px 8px",padding:"8px",background:"#fff",minHeight:"280px"}},{default:a(()=>[i(y,{ref:"codeEditorRef",language:"javascript",fullScreen:!0,lineNumbers:!1,"language-change":!1},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["onRegister","confirmLoading","onCancel"])}var W=H(q,[["render",U],["__scopeId","data-v-3e3ee46a"]]),Be=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as E,Be as a,Y as u};
