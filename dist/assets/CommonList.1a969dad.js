import{l,F as e,o as a,t,v as n,x as o,aW as s,y as u,z as i,C as r,D as d,X as v,bk as p,L as c,dl as m,V as x,W as y,ax as h}from"./index.26a57b91.js";const f={class:"flex justify-between"},g={class:"border-solid rounded"},k={class:"ant-dropdown-link"},_=r(" 操作 "),$={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},b={key:0},w={key:1},L=l({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0}},setup(l,{expose:L}){const C=e(!1),j=e(!1),N=e(),W=e(),z=e(),A=(l,e,a=!1)=>{W.value=l,z.value=e,a?j.value=!0:(C.value=!0,e.pageNo=1),l(e).then((l=>{e.pageNo=l.current+1,l.current>1&&a?N.value.records.push(...l.records):N.value=l})).catch((l=>{})).finally((()=>{C.value=!1,j.value=!1}))},B=()=>{A(W.value,z.value,!0)},D=a((()=>{var l,e,a,t;return 0===(null==(l=null==N?void 0:N.value)?void 0:l.total)||(null==(a=null==(e=null==N?void 0:N.value)?void 0:e.records)?void 0:a.length)>=(null==(t=null==N?void 0:N.value)?void 0:t.total)}));return L({execQuery:A}),(e,a)=>{var L;const W=t("a-typography-title"),z=t("a-dropdown"),A=t("a-list-item-meta"),F=t("a-list-item"),H=t("a-spin"),I=t("a-button"),M=t("a-list");return n(),o(h,null,[s("div",f,[u(W,{level:5},{default:i((()=>{var l,e;return[r("共"+d(null!=(e=null==(l=N.value)?void 0:l.total)?e:0)+"条",1)]})),_:1}),s("span",null,[v(e.$slots,"header")])]),u(M,{loading:C.value,"data-source":null==(L=N.value)?void 0:L.records},{renderItem:i((({item:a,index:t})=>[u(F,null,{default:i((()=>[u(A,null,p({title:i((()=>[s("span",null,[v(e.$slots,"top",{item:a,index:t})])])),description:i((()=>[v(e.$slots,"bottom",{item:a,index:t})])),_:2},[l.showLeft?{name:"avatar",fn:i((()=>[s("div",null,[s("span",g,"#"+d(t+1),1),s("span",null,[v(e.$slots,"shelter",{item:a,index:t})])]),u(z,null,{overlay:i((()=>[s("span",null,[v(e.$slots,"operate",{item:a,index:t})])])),default:i((()=>[s("a",k,[_,u(c(m))])])),_:2},1024),s("span",null,[v(e.$slots,"left",{style:"position: relative",item:a,index:t})])])),key:"0"}:void 0]),1024),s("span",null,[v(e.$slots,"right",{item:a,index:t})])])),_:2},1024)])),loadMore:i((()=>{var l,e,a,t;return[(null==(l=N.value)?void 0:l.total)>0?(n(),o("div",$,[c(D)?(n(),o("span",b,"加载完成("+d(null==(a=null==(e=N.value)?void 0:e.records)?void 0:a.length)+"/"+d(null==(t=N.value)?void 0:t.total)+")",1)):(n(),o("span",w,[j.value?(n(),x(H,{key:0})):(n(),x(I,{key:1,onClick:B},{default:i((()=>{var l,e,a;return[r("加载更多("+d(null==(e=null==(l=N.value)?void 0:l.records)?void 0:e.length)+"/"+d(null==(a=N.value)?void 0:a.total)+")",1)]})),_:1}))]))])):y("",!0)]})),_:3},8,["loading","data-source"])],64)}}});export{L as default};
