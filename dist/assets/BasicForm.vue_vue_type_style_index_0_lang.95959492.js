var Ee=Object.defineProperty,_e=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var Oe=(e,o,a)=>o in e?Ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,v=(e,o)=>{for(var a in o||(o={}))$e.call(o,a)&&Oe(e,a,o[a]);if(Be)for(var a of Be(o))qe.call(o,a)&&Oe(e,a,o[a]);return e},Te=(e,o)=>_e(e,We(o));var M=(e,o,a)=>new Promise((d,w)=>{var p=b=>{try{f(a.next(b))}catch(u){w(u)}},l=b=>{try{f(a.throw(b))}catch(u){w(u)}},f=b=>b.done?d(b.value):Promise.resolve(b.value).then(p,l);f((a=a.apply(e,o)).next())});import{o as ge,L as Ae,m as V,K as t,j as we,b8 as ze,N as Ye,v as R,cv as re,cw as He,aQ as E,ay as U,bh as Pe,O as Ke,b7 as Ge,x as J,a7 as ve,aY as be,y as se,cx as Ue,cy as Je,cz as Xe,ad as Qe,ae as Ze,cA as et,cB as tt,aN as j,q as nt,r as Z,s as ee,Q as te,w as K,by as ot,R as ne,aW as st,S as oe,z as fe,V as at,a1 as $,af as X,aO as ce,cC as ye,aP as ae,aS as it,cD as rt,cE as ct,E as ie,al as ke,ac as Ie,bX as je,cF as Re,$ as lt,aa as ut,G as Le,bC as dt,cG as ft,a8 as Se,C as G,l as mt,X as pt}from"./index.0b8cafea.js";import{i as De}from"./componentMap.122501d9.js";import{u as ht}from"./uniqBy.ea159c73.js";import"./index.3f60c9c8.js";import{u as bt}from"./BasicModal.e7eb9d68.js";const{t:me}=ge();function xe(e){return e.includes("Input")||e.includes("Complete")?me("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?me("common.chooseText"):""}const yt=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function gt(){return[...yt,"RangePicker"]}function At(e,o,a){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(o)?e.type=a?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(o)?e.type="array":["InputNumber"].includes(o)&&(e.type="number")}function wt(e,o){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&o&&Ae(o)?`${o}`:o}const Me=gt();function vt(e,o){return V(()=>{const a=t(e),{labelCol:d={},wrapperCol:w={}}=a.itemProps||{},{labelWidth:p,disabledLabelWidth:l}=a,{labelWidth:f,labelCol:b,wrapperCol:u,layout:x}=t(o);if(l)return{labelCol:d,wrapperCol:w};if(!f&&!p&&!b)return d.style={textAlign:"left"},{labelCol:d,wrapperCol:w};let I=p||f;const T=v(v({},b),d),W=v(v({},u),w);return I&&(I=Ae(I)?`${I}px`:I),{labelCol:v({style:{width:I||"100%"}},T),wrapperCol:v({style:{width:x==="vertical"?"100%":`calc(100% - ${I})`}},W)}})}function pe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!He(e)}const Ct=we({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:o}){const{t:a}=ge(),{schema:d,formProps:w}=ze(e),p=vt(d,w),l=V(()=>{const{allDefaultValues:c,formModel:i,schema:h}=e,{mergeDynamicData:C}=e.formProps;return{field:h.field,model:i,values:v(v(v({},C),c),i),schema:h}}),f=V(()=>{var y;const{schema:c,tableAction:i,formModel:h,formActionType:C}=e;let{componentProps:m={}}=c;return E(m)&&(m=(y=m({schema:c,tableAction:i,formModel:h,formActionType:C}))!=null?y:{}),c.component==="Divider"&&(m=Object.assign({type:"horizontal"},m,{orientation:"left",plain:!0})),m}),b=V(()=>{const{disabled:c}=e.formProps,{dynamicDisabled:i}=e.schema,{disabled:h=!1}=t(f);let C=!!c||h;return U(i)&&(C=i),E(i)&&(C=i(t(l))),C});function u(){const{show:c,ifShow:i}=e.schema,{showAdvancedButton:h}=e.formProps,C=h&&U(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let m=!0,y=!0;return U(c)&&(m=c),U(i)&&(y=i),E(c)&&(m=c(t(l))),E(i)&&(y=i(t(l))),m=m&&C,{isShow:m,isIfShow:y}}function x(){var k;const{rules:c=[],component:i,rulesMessageJoinLabel:h,label:C,dynamicRules:m,required:y}=e.schema;if(E(m))return m(t(l));let g=be(c);const{rulesMessageJoinLabel:D}=e.formProps,n=Reflect.has(e.schema,"rulesMessageJoinLabel")?h:D,s=xe(i)+`${n?C:""}`;function A(P,F){const N=P.message||s;return F===void 0||Je(F)||Array.isArray(F)&&F.length===0||typeof F=="string"&&F.trim()===""||typeof F=="object"&&Reflect.has(F,"checked")&&Reflect.has(F,"halfChecked")&&Array.isArray(F.checked)&&Array.isArray(F.halfChecked)&&F.checked.length===0&&F.halfChecked.length===0?Promise.reject(N):Promise.resolve()}const r=E(y)?y(t(l)):y;(!g||g.length===0)&&r&&(g=[{required:r,validator:A}]);const S=g.findIndex(P=>Reflect.has(P,"required")&&!Reflect.has(P,"validator"));if(S!==-1){const P=g[S],{isShow:F}=u();if(F||(P.required=!1),i){Reflect.has(P,"type")||(P.type=i==="InputNumber"?"number":"string"),P.message=P.message||s,(i.includes("Input")||i.includes("Textarea"))&&(P.whitespace=!0);const N=(k=t(f))==null?void 0:k.valueFormat;At(P,i,N)}}const O=g.findIndex(P=>P.max);return O!==-1&&!g[O].validator&&(g[O].message=g[O].message||a("component.form.maxTip",[g[O].max])),g}function I(){var F;const{renderComponentContent:c,component:i,field:h,changeEvent:C="change",valueField:m}=e.schema,y=i&&["Switch","Checkbox"].includes(i),g=`on${Xe(C)}`,D={[g]:(...N)=>{const[Y]=N;r[g]&&r[g](...N);const H=Y?Y.target:null,le=H?y?H.checked:H.value:Y;e.setFormModel(h,le)}},n=De.get(i),{autoSetPlaceHolder:s,size:A}=e.formProps,r=Te(v({allowClear:!0,getPopupContainer:N=>N.parentNode,size:A},t(f)),{disabled:t(b)});!r.disabled&&s&&i!=="RangePicker"&&i&&(r.placeholder=((F=t(f))==null?void 0:F.placeholder)||xe(i)+e.schema.label),r.codeField=h,r.formValues=t(l);const O={[m||(y?"checked":"value")]:e.formModel[h]},k=v(v(v({},r),D),O);if(!c)return R(n,k,null);const P=E(c)?v({},c(t(l))):{default:()=>c};return R(n,k,pe(P)?P:{default:()=>[P]})}function T(){const{label:c,helpMessage:i,helpComponentProps:h,subLabel:C,labelLength:m}=e.schema;let y=c+"";m&&y.length>4&&(y=y.substr(0,m));const D=C?R("span",null,[c,se(" "),R("span",{class:"text-secondary"},[C])]):m?R("label",{title:c},[y]):c,n=E(i)?i(t(l)):i;return!n||Array.isArray(n)&&n.length===0?D:R("span",null,[D,R(Ue,J({placement:"top",class:"mx-1",text:n},h),null)])}function W(){const{itemProps:c,slot:i,render:h,field:C,suffix:m,component:y}=e.schema,{labelCol:g,wrapperCol:D}=t(p),{colon:n}=e.formProps;if(y==="Divider"){let s;return R(re,{span:24},{default:()=>[R(Ge,t(f),pe(s=T())?s:{default:()=>[s]})]})}else{const s=()=>i?Pe(o,i,t(l)):h?h(t(l)):I(),A=!!m,r=E(m)?m(t(l)):m;return R(ve.Item,J({name:C,colon:n,class:{"suffix-item":A}},c,{label:T(),rules:x(),labelCol:g,wrapperCol:D}),{default:()=>[R("div",{style:"display:flex"},[R("div",{style:"flex:1; width: 100%;"},[s()]),A&&R("span",{class:"suffix"},[r])])]})}}return()=>{let c;const{colProps:i={},colSlot:h,renderColContent:C,component:m}=e.schema;if(!De.has(m))return null;const{baseColProps:y={}}=e.formProps,g=v(v({},y),i),{isIfShow:D,isShow:n}=u(),s=t(l);return D&&Ye(R(re,g,pe(c=(()=>h?Pe(o,h,s):C?C(s):W())())?c:{default:()=>[c]}),[[Ke,n]])}}}),Ve=Symbol();function Ft(e){return Qe(e,Ve)}function Bt(){return Ze(Ve)}const Ot=we({name:"BasicFormAction",components:{FormItem:ve.Item,Button:et,BasicArrow:tt,[re.name]:re},props:{showActionButtonGroup:j.bool.def(!0),showResetButton:j.bool.def(!0),showSubmitButton:j.bool.def(!0),showAdvancedButton:j.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:j.number.def(6),isAdvanced:j.bool,hideAdvanceBtn:j.bool},emits:["toggle-advanced"],setup(e,{emit:o}){const{t:a}=ge(),d=V(()=>{const{showAdvancedButton:f,actionSpan:b,actionColOptions:u}=e,x=24-b,I=f?{span:x<6?24:x}:{};return v(v({style:{textAlign:"right"},span:f?6:4},I),u)}),w=V(()=>Object.assign({text:a("common.resetText"),preIcon:"ic:baseline-restart-alt"},e.resetButtonOptions)),p=V(()=>Object.assign({},{text:a("common.queryText"),preIcon:"ant-design:search-outlined"},e.submitButtonOptions));function l(){o("toggle-advanced")}return v({t:a,actionColOpt:d,getResetBtnOptions:w,getSubmitBtnOptions:p,toggleAdvanced:l},Bt())}});function Tt(e,o,a,d,w,p){const l=Z("Button"),f=Z("BasicArrow"),b=Z("FormItem"),u=Z("a-col");return e.showActionButtonGroup?(ee(),te(u,ot(J({key:0},e.actionColOpt)),{default:K(()=>[st("div",{style:at([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[R(b,null,{default:K(()=>[oe(e.$slots,"submitBefore"),e.showSubmitButton?(ee(),te(l,J({key:0,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:K(()=>[se(fe(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):ne("",!0),oe(e.$slots,"resetBefore"),e.showResetButton?(ee(),te(l,J({key:1,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:K(()=>[se(fe(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):ne("",!0),oe(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(ee(),te(l,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:K(()=>[se(fe(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),R(f,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):ne("",!0),oe(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):ne("",!0)}const Pt=nt(Ot,[["render",Tt]]);function It(e,o){var w,p;return((w=t(e))==null?void 0:w.fieldMapToTime)&&(o=jt(e,o)),((p=t(e))==null?void 0:p.fieldMapToNumber)&&(o=St(e,o)),o}function jt(e,o){const a=t(e).fieldMapToTime;if(!a||!Array.isArray(a))return o;for(const[d,[w,p],l="YYYY-MM-DD"]of a){if(!d||!w||!p||!o[d])continue;let f=o[d];Array.isArray(f)||(f=f.split(","));const[b,u]=f;o[w]=$(b).format(l),o[p]=$(u).format(l),Reflect.deleteProperty(o,d)}return o}function St(e,o){const a=t(e).fieldMapToNumber;if(!a||!Array.isArray(a))return o;for(const[d,[w,p]]of a){if(!d||!w||!p||!o[d])continue;let l=o[d];typeof l=="string"&&(l=l.split(","));const[f,b]=l;o[w]=f,o[p]=b,Reflect.deleteProperty(o,d)}return o}function Dt({defaultValueRef:e,getSchema:o,formModel:a,getProps:d}){function w(l){if(!X(l))return{};const f={};for(const b of Object.entries(l)){let[,u]=b;const[x]=b;if(!x||ce(u)&&u.length===0||E(u))continue;const I=t(d).transformDateFunc;X(u)&&(u=I==null?void 0:I(u)),ce(u)&&ye.isDayjs(u[0])&&ye.isDayjs(u[1])&&(u=u.map(T=>I==null?void 0:I(T))),ae(u)&&(u=u.trim()),it(f,x,u)}return It(d,f)}function p(){const l=t(o),f={};l.forEach(b=>{const{defaultValue:u}=b;rt(u)||(f[b.field]=u,a[b.field]=u)}),e.value=f}return{handleFormValues:w,initDefault:p}}const z=24;function xt({advanceState:e,emit:o,getProps:a,getSchema:d,formModel:w,defaultValueRef:p}){const{realWidthRef:l,screenEnum:f,screenRef:b}=ct(),u=V(()=>{if(!e.isAdvanced)return 0;const c=t(a).emptySpan||0;if(Ae(c))return c;if(X(c)){const{span:i=0}=c,h=t(b);return c[h.toLowerCase()]||i||0}return 0}),x=ke(T,30);ie([()=>t(d),()=>e.isAdvanced,()=>t(l)],()=>{const{showAdvancedButton:c}=t(a);c&&x()},{immediate:!0});function I(c,i=0,h=!1,C=0){var A;const m=t(l),y=parseInt(c.md)||parseInt(c.xs)||parseInt(c.sm)||c.span||z,g=parseInt(c.lg)||y,D=parseInt(c.xl)||g,n=parseInt(c.xxl)||D;m<=f.LG?i+=y:m<f.XL?i+=g:m<f.XXL?i+=D:i+=n;let s=(A=t(a).autoAdvancedCol)!=null?A:3;return h?(e.hideAdvanceBtn=t(d).length<=s,i>z*2&&i<=z*(t(a).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced,t(d).length>s&&(e.hideAdvanceBtn=!1,e.isAdvanced=!1)),{isAdvanced:e.isAdvanced,itemColSum:i}):i>z*(t(a).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:i}:!e.isAdvanced&&C+1>s?{isAdvanced:!1,itemColSum:i}:{isAdvanced:!0,itemColSum:i}}function T(){let c=0,i=0;const{baseColProps:h={}}=t(a),C=t(d);for(let m=0;m<C.length;m++){const y=C[m],{show:g,colProps:D}=y;let n=!0;if(U(g)&&(n=g),E(g)&&(n=g({schema:y,model:w,field:y.field,values:v(v({},t(p)),w)})),n&&(D||h)){const{itemColSum:s,isAdvanced:A}=I(v(v({},h),D),c,!1,m);c=s||0,A&&(i=c),y.isAdvanced=A}}e.actionSpan=i%z+t(u),I(t(a).actionColOptions||{span:z},c,!0),o("advanced-change")}function W(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:W}}function kt({emit:e,getProps:o,formModel:a,getSchema:d,defaultValueRef:w,formElRef:p,schemaRef:l,handleFormValues:f}){function b(){return M(this,null,function*(){const{resetFunc:n,submitOnReset:s}=t(o);n&&E(n)&&(yield n()),t(p)&&(Object.keys(a).forEach(r=>{a[r]=w.value[r]}),y(),e("reset",Ie(a)),s&&D())})}function u(n){return M(this,null,function*(){const s=t(d).map(r=>r.field).filter(Boolean),A=[];Object.keys(n).forEach(r=>{const S=t(d).find(P=>P.field===r);let O=n[r];if(!(n instanceof Object))return;const k=Reflect.has(n,r);if(O=wt(S==null?void 0:S.component,O),k&&s.includes(r)){if(h(r))if(Array.isArray(O)){const P=[];for(const F of O)P.push(F?$(F):null);a[r]=P}else{const{componentProps:P}=S||{};let F=P;typeof P=="function"&&(F=F({formModel:a})),a[r]=O?F!=null&&F.valueFormat?O:$(O):null}else a[r]=O;A.push(r)}}),C(A).catch(r=>{})})}function x(n){return M(this,null,function*(){const s=be(t(d));if(!n)return;let A=ae(n)?[n]:n;ae(n)&&(A=[n]);for(const r of A)I(r,s);l.value=s})}function I(n,s){if(ae(n)){const A=s.findIndex(r=>r.field===n);A!==-1&&(delete a[n],s.splice(A,1))}}function T(n,s,A=!1){return M(this,null,function*(){const r=be(t(d)),S=r.findIndex(k=>k.field===s);if(!!r.some(k=>k.field===s||n.field)){if(!s||S===-1||A){A?r.unshift(n):r.push(n),l.value=r;return}S!==-1&&r.splice(S+1,0,n),l.value=r}})}function W(n){return M(this,null,function*(){let s=[];if(X(n)&&s.push(n),ce(n)&&(s=[...n]),!s.every(r=>r.component==="Divider"||Reflect.has(r,"field")&&r.field)){je("All children of the form Schema array that need to be updated must contain the `field` field");return}l.value=s})}function c(n){return M(this,null,function*(){let s=[];if(X(n)&&s.push(n),ce(n)&&(s=[...n]),!s.every(S=>S.component==="Divider"||Reflect.has(S,"field")&&S.field)){je("All children of the form Schema array that need to be updated must contain the `field` field");return}const r=[];s.forEach(S=>{t(d).forEach(O=>{if(O.field===S.field){const k=Re(O,S);r.push(k)}else r.push(O)})}),l.value=ht(r,"field")})}function i(){return t(p)?f(Ie(t(a))):{}}function h(n){return t(d).some(s=>s.field===n?Me.includes(s.component):!1)}function C(n){return M(this,null,function*(){var s;return(s=t(p))==null?void 0:s.validateFields(n)})}function m(n){return M(this,null,function*(){var s;return yield(s=t(p))==null?void 0:s.validate(n)})}function y(n){return M(this,null,function*(){var s;yield(s=t(p))==null?void 0:s.clearValidate(n)})}function g(n,s){return M(this,null,function*(){var A;yield(A=t(p))==null?void 0:A.scrollToField(n,s)})}function D(n){return M(this,null,function*(){n&&n.preventDefault();const{submitFunc:s}=t(o);if(s&&E(s)){yield s();return}if(!!t(p))try{const r=yield m();for(let O in r)r[O]instanceof Array&&lt(o,O)==="string"&&(r[O]=r[O].join(","));const S=f(r);e("submit",S)}catch(r){e("submit",{}),console.error("query form validate error, please ignore!",r)}})}return{handleSubmit:D,clearValidate:y,validate:m,validateFields:C,getFieldsValue:i,updateSchema:c,resetSchema:W,appendSchemaByField:T,removeSchemaByFiled:x,resetFields:b,setFieldsValue:u,scrollToField:g}}function Rt(w){return M(this,arguments,function*({getSchema:e,getProps:o,formElRef:a,isInitedDefault:d}){ut(()=>M(this,null,function*(){if(t(d)||!t(o).autoFocusFirstItem)return;yield Le();const p=t(e),l=t(a),f=l==null?void 0:l.$el;if(!l||!f||!p||p.length===0||!p[0].component.includes("Input"))return;const u=f.querySelector(".ant-row:first-child input");!u||u==null||u.focus()}))})}const{form:he}=dt,Lt={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},fieldMapToNumber:{type:Array,default:()=>[]},compact:j.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:j.bool.def(!0),autoSubmitOnEnter:j.bool.def(!1),submitOnReset:j.bool,size:j.oneOf(["default","small","large"]).def("default"),disabled:j.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:j.bool,transformDateFunc:{type:Function,default:e=>ye.isDayjs(e)?e==null?void 0:e.format("YYYY-MM-DD HH:mm:ss"):e},rulesMessageJoinLabel:j.bool.def(!0),autoAdvancedCol:j.number.def(3),autoAdvancedLine:j.number.def(3),alwaysShowLines:j.number.def(1),showActionButtonGroup:j.bool.def(!0),actionColOptions:Object,showResetButton:j.bool.def(!0),autoFocusFirstItem:j.bool,resetButtonOptions:Object,showSubmitButton:j.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:j.bool,labelCol:{type:Object,default:he.labelCol},layout:j.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:{type:Object,default:he.wrapperCol},colon:j.bool.def(he.colon),labelAlign:j.string,rowProps:Object,autoSearch:j.bool.def(!1)},$t=we({name:"BasicForm",components:{FormItem:Ct,Form:ve,Row:ft,FormAction:Pt},props:Lt,emits:["advanced-change","reset","submit","register"],setup(e,{emit:o,attrs:a}){const d=Se({}),w=bt(),p=Se({isAdvanced:!1,hideAdvanceBtn:!0,isLoad:!1,actionSpan:6}),l=G({}),f=G(!1),b=G({}),u=G(null),x=G(null),{prefixCls:I}=mt("basic-form"),T=V(()=>{let B=v(v({},e),t(b));return B.labelWidth&&(B.labelCol=void 0),B}),W=V(()=>[I,{[`${I}--compact`]:t(T).compact}]),c=V(()=>{const{baseRowStyle:B={},rowProps:L}=t(T);return v({style:B},L)}),i=V(()=>v(v(v({},a),e),t(T))),h=V(()=>{const B=t(u)||t(T).schemas;for(const L of B){const{defaultValue:_,component:Ce,componentProps:Q}=L;if(_&&Me.includes(Ce)){let q="";if(Q&&(q=Q==null?void 0:Q.valueFormat),q||console.warn("\u672A\u914D\u7F6EvalueFormat,\u53EF\u80FD\u5BFC\u81F4\u683C\u5F0F\u5316\u9519\u8BEF\uFF01"),!Array.isArray(_))q?L.defaultValue=$(_).format(q):L.defaultValue=$(_);else{const de=[];_.forEach(Fe=>{q?de.push($(Fe).format(q)):de.push($(Fe))}),L.defaultValue=de}}}return t(T).showAdvancedButton?B.filter(L=>L.component!=="Divider"):B}),{handleToggleAdvanced:C}=xt({advanceState:p,emit:o,getProps:T,getSchema:h,formModel:d,defaultValueRef:l}),{handleFormValues:m,initDefault:y}=Dt({getProps:T,defaultValueRef:l,getSchema:h,formModel:d});Rt({getSchema:h,getProps:T,isInitedDefault:f,formElRef:x});const{handleSubmit:g,setFieldsValue:D,clearValidate:n,validate:s,validateFields:A,getFieldsValue:r,updateSchema:S,resetSchema:O,appendSchemaByField:k,removeSchemaByFiled:P,resetFields:F,scrollToField:N}=kt({emit:o,getProps:T,formModel:d,getSchema:h,defaultValueRef:l,formElRef:x,schemaRef:u,handleFormValues:m});Ft({resetAction:F,submitAction:g}),ie(()=>t(T).model,()=>{const{model:B}=t(T);!B||D(B)},{immediate:!0}),ie(()=>t(T).schemas,B=>{O(B!=null?B:[])}),ie(()=>h.value,B=>{Le(()=>{var L;(L=w==null?void 0:w.redoModalHeight)==null||L.call(w)}),!t(f)&&B!=null&&B.length&&(y(),f.value=!0)});function Y(B){return M(this,null,function*(){b.value=Re(t(b)||{},B)})}const H=ke(g,300);function le(B,L){d[B]=L;const{validateTrigger:_}=t(i);(!_||_==="change")&&A([B]).catch(Ce=>{}),e.autoSearch===!0&&H()}function Ne(B){const{autoSubmitOnEnter:L}=t(T);if(!!L&&B.key==="Enter"&&B.target&&B.target instanceof HTMLElement){const _=B.target;_&&_.tagName&&_.tagName.toUpperCase()=="INPUT"&&g()}}const ue={getFieldsValue:r,setFieldsValue:D,resetFields:F,updateSchema:S,resetSchema:O,setProps:Y,getProps:T,removeSchemaByFiled:P,appendSchemaByField:k,clearValidate:n,validateFields:A,validate:s,submit:g,scrollToField:N};return pt(()=>{y(),o("register",ue)}),v({getBindValue:i,handleToggleAdvanced:C,handleEnterPress:Ne,formModel:d,defaultValueRef:l,advanceState:p,getRow:c,getProps:T,formElRef:x,getSchema:h,formActionType:ue,setFormModel:le,getFormClass:W,getFormActionBindProps:V(()=>v(v({},T.value),p))},ue)}});export{$t as _,It as h};
