import{cn as ct,co as vt,F as x,a7 as de,_ as b,$ as Ie,cp as De,cq as ft,bp as H,bA as mt,bi as dt,o as c,l as re,br as Le,cr as He,cs as me,H as ne,a9 as qe,y as o,bt as G,aw as Me,ct as gt,cu as se,cv as le,af as Je,cw as pt,cx as wt,cy as Qe,cz as ze,cA as ht,au as he,aI as Ke,ay as et,az as tt,bo as nt,d as Ct,cB as Ae,cC as bt,aM as Pt,n as yt,aO as Ot,q as St,t as Ge,v as xe,x as Ee,z as Te,X as xt,bb as _t,V as It,bj as Lt,B as Ve,bk as Mt,E as kt,L as ue,C as Rt,cD as $t,cE as Nt}from"./index.f142ecf1.js";var jt="[object Number]";function Dt(n){return typeof n=="number"||ct(n)&&vt(n)==jt}function zt(n){var e=x(null),a=de(b({},n)),r=x([]),t=function(f){e.value===null&&(r.value=[],e.value=De(function(){var d;r.value.forEach(function(w){d=b(b({},d),w)}),b(a,d),e.value=null})),r.value.push(f)};return Ie(function(){e.value&&De.cancel(e.value)}),[a,t]}function Ue(n,e,a,r){var t=e+a,l=(a-r)/2;if(a>r){if(e>0)return H({},n,l);if(e<0&&t<r)return H({},n,-l)}else if(e<0||t>r)return H({},n,e<0?l:-l);return{}}function At(n,e,a,r){var t=ft(),l=t.width,f=t.height,d=null;return n<=l&&e<=f?d={x:0,y:0}:(n>l||e>f)&&(d=b(b({},Ue("x",a,n,l)),Ue("y",r,e,f))),d}var Gt=globalThis&&globalThis.__rest||function(n,e){var a={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(a[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(n);t<r.length;t++)e.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(n,r[t])&&(a[r[t]]=n[r[t]]);return a},Fe=Symbol("previewGroupContext"),ke={provide:function(e){mt(Fe,e)},inject:function(){return dt(Fe,{isPreviewGroup:x(!1),previewUrls:c(function(){return new Map}),setPreviewUrls:function(){},current:x(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null,rootClassName:""})}},Et=re({name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String,preview:{type:[Boolean,Object],default:!0},icons:{type:Object,default:function(){return{}}}},setup:function(e,a){var r=a.slots,t=c(function(){var g={visible:void 0,onVisibleChange:function(){},getContainer:void 0,current:0};return Le(e.preview)==="object"?ot(e.preview,g):g}),l=de(new Map),f=x(),d=c(function(){return t.value.visible}),w=c(function(){return t.value.getContainer}),Z=function(v,M){var S,P;(P=(S=t.value).onVisibleChange)===null||P===void 0||P.call(S,v,M)},h=He(!!d.value,{value:d,onChange:Z}),O=me(h,2),k=O[0],p=O[1],R=x(null),X=c(function(){return d.value!==void 0}),V=c(function(){return Array.from(l.keys())}),_=c(function(){return V.value[t.value.current]}),y=c(function(){return new Map(Array.from(l).filter(function(g){var v=me(g,2),M=v[1].canPreview;return!!M}).map(function(g){var v=me(g,2),M=v[0],S=v[1].url;return[M,S]}))}),E=function(v,M){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;l.set(v,{url:M,canPreview:S})},$=function(v){f.value=v},I=function(v){R.value=v},N=function(v,M){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,P=function(){l.delete(v)};return l.set(v,{url:M,canPreview:S}),P},U=function(v){v==null||v.stopPropagation(),p(!1),I(null)};return ne(_,function(g){$(g)},{immediate:!0,flush:"post"}),qe(function(){!k.value&&X.value&&$(_.value)},{flush:"post"}),ke.provide({isPreviewGroup:x(!0),previewUrls:y,setPreviewUrls:E,current:f,setCurrent:$,setShowPreview:p,setMousePosition:I,registerImage:N}),function(){var g=Gt(t.value,[]);return o(Me,null,[r.default&&r.default(),o(at,G(G({},g),{},{"ria-hidden":!k.value,visible:k.value,prefixCls:e.previewPrefixCls,onClose:U,mousePosition:R.value,src:y.value.get(f.value),icons:e.icons,getContainer:w.value}),null)])}}}),rt=Et,K={x:0,y:0},Tt=b(b({},gt()),{src:String,alt:String,rootClassName:String,icons:{type:Object,default:function(){return{}}}}),Vt=re({name:"Preview",inheritAttrs:!1,props:Tt,emits:["close","afterClose"],setup:function(e,a){var r=a.emit,t=a.attrs,l=de(e.icons),f=l.rotateLeft,d=l.rotateRight,w=l.zoomIn,Z=l.zoomOut,h=l.close,O=l.left,k=l.right,p=x(1),R=x(0),X=zt(K),V=me(X,2),_=V[0],y=V[1],E=function(){return r("close")},$=x(),I=de({originX:0,originY:0,deltaX:0,deltaY:0}),N=x(!1),U=ke.inject(),g=U.previewUrls,v=U.current,M=U.isPreviewGroup,S=U.setCurrent,P=c(function(){return g.value.size}),i=c(function(){return Array.from(g.value.keys())}),u=c(function(){return i.value.indexOf(v.value)}),j=c(function(){return M.value?g.value.get(v.value):e.src}),D=c(function(){return M.value&&P.value>1}),z=x({wheelDirection:0}),ae=function(){p.value=1,R.value=0,y(K),r("afterClose")},ce=function(){p.value++,y(K)},C=function(){p.value>1&&p.value--,y(K)},L=function(){R.value+=90},F=function(){R.value-=90},Y=function(s){s.preventDefault(),s.stopPropagation(),u.value>0&&S(i.value[u.value-1])},W=function(s){s.preventDefault(),s.stopPropagation(),u.value<P.value-1&&S(i.value[u.value+1])},Ce=se(H({},"".concat(e.prefixCls,"-moving"),N.value)),ge="".concat(e.prefixCls,"-operations-operation"),be="".concat(e.prefixCls,"-operations-icon"),pe=[{icon:h,onClick:E,type:"close"},{icon:w,onClick:ce,type:"zoomIn"},{icon:Z,onClick:C,type:"zoomOut",disabled:c(function(){return p.value===1})},{icon:d,onClick:L,type:"rotateRight"},{icon:f,onClick:F,type:"rotateLeft"}],we=function(){if(e.visible&&N.value){var s=$.value.offsetWidth*p.value,B=$.value.offsetHeight*p.value,J=Qe($.value),T=J.left,Q=J.top,q=R.value%180!==0;N.value=!1;var ie=At(q?B:s,q?s:B,T,Q);ie&&y(b({},ie))}},Pe=function(s){s.button===0&&(s.preventDefault(),s.stopPropagation(),I.deltaX=s.pageX-_.x,I.deltaY=s.pageY-_.y,I.originX=_.x,I.originY=_.y,N.value=!0)},ve=function(s){e.visible&&N.value&&y({x:s.pageX-I.deltaX,y:s.pageY-I.deltaY})},ye=function(s){if(!!e.visible){s.preventDefault();var B=s.deltaY;z.value={wheelDirection:B}}},Oe=function(s){!e.visible||!D.value||(s.preventDefault(),s.keyCode===ze.LEFT?u.value>0&&S(i.value[u.value-1]):s.keyCode===ze.RIGHT&&u.value<P.value-1&&S(i.value[u.value+1]))},Se=function(){e.visible&&(p.value!==1&&(p.value=1),(_.x!==K.x||_.y!==K.y)&&y(K))},fe=function(){};return Ie(function(){ne([function(){return e.visible},N],function(){fe();var m,s,B=le(window,"mouseup",we,!1),J=le(window,"mousemove",ve,!1),T=le(window,"wheel",ye,{passive:!1}),Q=le(window,"keydown",Oe,!1);try{window.top!==window.self&&(m=le(window.top,"mouseup",we,!1),s=le(window.top,"mousemove",ve,!1))}catch(q){}fe=function(){B.remove(),J.remove(),T.remove(),Q.remove(),m&&m.remove(),s&&s.remove()}},{flush:"post",immediate:!0}),ne([z],function(){var m=z.value.wheelDirection;m>0?C():m<0&&ce()})}),Je(function(){fe()}),function(){var m=e.visible,s=e.prefixCls,B=e.rootClassName;return o(wt,G(G({},t),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:s,onClose:E,afterClose:ae,visible:m,wrapClassName:Ce,rootClassName:B,getContainer:e.getContainer}),{default:function(){return[o("ul",{class:"".concat(e.prefixCls,"-operations")},[pe.map(function(T){var Q=T.icon,q=T.onClick,ie=T.type,oe=T.disabled;return o("li",{class:se(ge,H({},"".concat(e.prefixCls,"-operations-operation-disabled"),oe&&(oe==null?void 0:oe.value))),onClick:q,key:ie},[pt(Q,{class:be})])})]),o("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(_.x,"px, ").concat(_.y,"px, 0)")}},[o("img",{onMousedown:Pe,onDblclick:Se,ref:$,class:"".concat(e.prefixCls,"-img"),src:j.value,alt:e.alt,style:{transform:"scale3d(".concat(p.value,", ").concat(p.value,", 1) rotate(").concat(R.value,"deg)")}},null)]),D.value&&o("div",{class:se("".concat(e.prefixCls,"-switch-left"),H({},"".concat(e.prefixCls,"-switch-left-disabled"),u.value<=0)),onClick:Y},[O]),D.value&&o("div",{class:se("".concat(e.prefixCls,"-switch-right"),H({},"".concat(e.prefixCls,"-switch-right-disabled"),u.value>=P.value-1)),onClick:W},[k])]}})}}}),at=Vt,Ut=globalThis&&globalThis.__rest||function(n,e){var a={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(a[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(n);t<r.length;t++)e.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(n,r[t])&&(a[r[t]]=n[r[t]]);return a},it=function(){return{src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},rootClassName:String,prefixCls:String,previewPrefixCls:String,previewMask:{type:[Boolean,Function],default:void 0},placeholder:ht.any,fallback:String,preview:{type:[Boolean,Object],default:!0},onClick:{type:Function},onError:{type:Function}}},ot=function(e,a){var r=b({},e);return Object.keys(a).forEach(function(t){e[t]===void 0&&(r[t]=a[t])}),r},Ft=0,lt=re({name:"Image",inheritAttrs:!1,props:it(),emits:["click","error"],setup:function(e,a){var r=a.attrs,t=a.slots,l=a.emit,f=c(function(){return e.prefixCls}),d=c(function(){return"".concat(f.value,"-preview")}),w=c(function(){var C={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return Le(e.preview)==="object"?ot(e.preview,C):C}),Z=c(function(){return e.placeholder&&e.placeholder!==!0||t.placeholder}),h=c(function(){return w.value.visible}),O=c(function(){return w.value.getContainer}),k=c(function(){return h.value!==void 0}),p=function(L,F){var Y,W;(W=(Y=w.value).onVisibleChange)===null||W===void 0||W.call(Y,L,F)},R=He(!!h.value,{value:h,onChange:p}),X=me(R,2),V=X[0],_=X[1];ne(V,function(C,L){p(C,L)});var y=x(Z.value?"loading":"normal");ne(function(){return e.src},function(){y.value=Z.value?"loading":"normal"});var E=x(null),$=c(function(){return y.value==="error"}),I=ke.inject(),N=I.isPreviewGroup,U=I.setCurrent,g=I.setShowPreview,v=I.setMousePosition,M=I.registerImage,S=x(Ft++),P=c(function(){return e.preview&&!$.value}),i=function(){y.value="normal"},u=function(L){y.value="error",l("error",L)},j=function(L){if(!k.value){var F=Qe(L.target),Y=F.left,W=F.top;N.value?(U(S.value),v({x:Y,y:W})):E.value={x:Y,y:W}}N.value?g(!0):_(!0),l("click",L)},D=function(){_(!1),k.value||(E.value=null)},z=x(null);ne(function(){return z},function(){y.value==="loading"&&z.value.complete&&(z.value.naturalWidth||z.value.naturalHeight)&&i()});var ae=function(){};Ie(function(){ne([function(){return e.src},P],function(){if(ae(),!N.value)return function(){};ae=M(S.value,e.src,P.value),P.value||ae()},{flush:"post",immediate:!0})}),Je(ae);var ce=function(L){return Dt(L)?L+"px":L};return function(){var C=e.prefixCls,L=e.wrapperClassName,F=e.fallback,Y=e.src,W=e.placeholder,Ce=e.wrapperStyle,ge=e.rootClassName,be=r.width,pe=r.height,we=r.crossorigin,Pe=r.decoding,ve=r.alt,ye=r.sizes,Oe=r.srcset,Se=r.usemap,fe=r.class,m=r.style,s=w.value,B=s.icons,J=s.maskClassName,T=s.src,Q=Ut(s,["icons","maskClassName","src"]),q=se(C,L,ge,H({},"".concat(C,"-error"),$.value)),ie=$.value&&F?F:T!=null?T:Y,oe={crossorigin:we,decoding:Pe,alt:ve,sizes:ye,srcset:Oe,usemap:Se,class:se("".concat(C,"-img"),H({},"".concat(C,"-img-placeholder"),W===!0),fe),style:b({height:pe},m)};return o(Me,null,[o("div",{class:q,onClick:P.value?j:function(st){l("click",st)},style:b({width:ce(be),height:ce(pe)},Ce)},[o("img",G(G(G({},oe),$.value&&F?{src:F}:{onLoad:i,onError:u,src:Y}),{},{ref:z}),null),y.value==="loading"&&o("div",{"aria-hidden":"true",class:"".concat(C,"-placeholder")},[W||t.placeholder&&t.placeholder()]),t.previewMask&&P.value&&o("div",{class:["".concat(C,"-mask"),J]},[t.previewMask()])]),!N.value&&P.value&&o(at,G(G({},Q),{},{"aria-hidden":!V.value,visible:V.value,prefixCls:d.value,onClose:D,mousePosition:E.value,src:ie,alt:ve,getContainer:O.value,icons:B,rootClassName:ge}),null)])}}});lt.PreviewGroup=rt;var Wt=lt,Zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},Xt=Zt;function We(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(t){Yt(n,t,a[t])})}return n}function Yt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var Re=function(e,a){var r=We({},e,a.attrs);return o(he,We({},r,{icon:Xt}),null)};Re.displayName="RotateLeftOutlined";Re.inheritAttrs=!1;var Bt=Re,Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},qt=Ht;function Ze(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(t){Jt(n,t,a[t])})}return n}function Jt(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var $e=function(e,a){var r=Ze({},e,a.attrs);return o(he,Ze({},r,{icon:qt}),null)};$e.displayName="RotateRightOutlined";$e.inheritAttrs=!1;var Qt=$e,Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},en=Kt;function Xe(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(t){tn(n,t,a[t])})}return n}function tn(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var Ne=function(e,a){var r=Xe({},e,a.attrs);return o(he,Xe({},r,{icon:en}),null)};Ne.displayName="ZoomInOutlined";Ne.inheritAttrs=!1;var nn=Ne,rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},an=rn;function Ye(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(t){on(n,t,a[t])})}return n}function on(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var je=function(e,a){var r=Ye({},e,a.attrs);return o(he,Ye({},r,{icon:an}),null)};je.displayName="ZoomOutOutlined";je.inheritAttrs=!1;var ln=je,ut={rotateLeft:o(Bt,null,null),rotateRight:o(Qt,null,null),zoomIn:o(nn,null,null),zoomOut:o(ln,null,null),close:o(Ke,null,null),left:o(et,null,null),right:o(tt,null,null)},un=re({name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,a){var r=a.attrs,t=a.slots,l=nt("image",e),f=l.getPrefixCls,d=c(function(){return f("image-preview",e.previewPrefixCls)});return function(){return o(rt,G(G({},b(b({},r),e)),{},{icons:ut,previewPrefixCls:d.value}),t)}}}),sn=un,ee=re({name:"AImage",inheritAttrs:!1,props:it(),setup:function(e,a){var r=a.slots,t=a.attrs,l=nt("image",e),f=l.prefixCls,d=l.rootPrefixCls,w=l.configProvider,Z=c(function(){var h=e.preview;if(h===!1)return h;var O=Le(h)==="object"?h:{};return b(b({icons:ut},O),{transitionName:Ae(d.value,"zoom",O.transitionName),maskTransitionName:Ae(d.value,"fade",O.maskTransitionName)})});return function(){var h,O=((h=w.locale)===null||h===void 0?void 0:h.Image)||Ct.Image,k=function(){return o("div",{class:"".concat(f.value,"-mask-info")},[o(bt,null,null),O==null?void 0:O.preview])},p=e.previewMask,R=p===void 0?r.previewMask||k:p;return o(Wt,G(G({},b(b(b({},t),e),{prefixCls:f.value})),{},{preview:Z.value}),b(b({},r),{previewMask:typeof R=="function"?R:null}))}}});ee.PreviewGroup=sn;ee.install=function(n){return n.component(ee.name,ee),n.component(ee.PreviewGroup.name,ee.PreviewGroup),n};var Be=ee;const cn=re({name:"ImagePreview",components:{Image:Be,PreviewGroup:Be.PreviewGroup},props:{functional:Pt.bool,imageList:{type:Array}},setup(n){const{prefixCls:e}=yt("image-preview"),a=c(()=>{const{imageList:r}=n;return r?r.map(t=>Ot(t)?{src:t,placeholder:!1}:t):[]});return{prefixCls:e,getImageList:a}}});function vn(n,e,a,r,t,l){const f=Ge("Image"),d=Ge("PreviewGroup");return xe(),Ee("div",{class:kt(n.prefixCls)},[o(d,null,{default:Te(()=>[!n.imageList||n.$slots.default?xt(n.$slots,"default",{key:0}):(xe(!0),Ee(Me,{key:1},_t(n.getImageList,w=>(xe(),It(f,Mt(Ve({key:w.src},w)),Lt({_:2},[w.placeholder?{name:"placeholder",fn:Te(()=>[o(f,Ve(w,{src:w.placeholder,preview:!1}),null,16,["src"])]),key:"0"}:void 0]),1040))),128))]),_:3})],2)}var bn=St(cn,[["render",vn]]),fn="/assets/resume.8f27866b.svg",mn="/assets/p-rotate.cb8bbfc3.svg",dn="/assets/scale.44abde22.svg",gn="/assets/unscale.c552f416.svg",pn="/assets/unrotate.ef6a2daf.svg",te;(function(n){n[n.LOADING=0]="LOADING",n[n.DONE=1]="DONE",n[n.FAIL=2]="FAIL"})(te||(te={}));const wn={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0},scaleStep:{type:Number},defaultWidth:{type:Number},maskClosable:{type:Boolean},rememberState:{type:Boolean}},A="img-preview";var hn=re({name:"ImagePreview",props:wn,emits:["img-load","img-error"],setup(n,{expose:e,emit:a}){const r=new Map,t=de({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:te.LOADING,currentIndex:0,moveX:0,moveY:0,show:n.show}),l=x(null),f=x(null);function d(){Z();const{index:i,imageList:u}=n;if(!u||!u.length)throw new Error("imageList is undefined");t.currentIndex=i,X(u[i])}function w(){t.imgScale=1,t.imgRotate=0,t.imgTop=0,t.imgLeft=0}function Z(){const i=ue(l);!i||(i.onmousewheel=O,document.body.addEventListener("DOMMouseScroll",O),document.ondragstart=function(){return!1})}const h=c(()=>{var u;const i=(u=n==null?void 0:n.scaleStep)!=null?u:0;return(i!=null?i:0>0)?i/100:t.imgScale/10});function O(i){i=i||window.event,i.delta=i.wheelDelta||-i.detail,i.preventDefault(),i.delta>0&&k(h.value),i.delta<0&&k(-h.value)}function k(i){t.imgScale<=.2&&i<0||(t.imgScale+=i)}function p(i){t.imgRotate+=i}function R(){const i=ue(f);!i||(i.onmousemove=null)}function X(i){t.status=te.LOADING;const u=new Image;u.src=i,u.onload=j=>{if(t.currentUrl!==i){const D=j.composedPath();if(n.rememberState){r.set(t.currentUrl,{scale:t.imgScale,top:t.imgTop,left:t.imgLeft,rotate:t.imgRotate});const z=r.get(i);z?(t.imgScale=z.scale,t.imgTop=z.top,t.imgRotate=z.rotate,t.imgLeft=z.left):(w(),n.defaultWidth&&(t.imgScale=n.defaultWidth/D[0].naturalWidth))}else n.defaultWidth&&(t.imgScale=n.defaultWidth/D[0].naturalWidth);D&&a("img-load",{index:t.currentIndex,dom:D[0],url:i})}t.currentUrl=i,t.status=te.DONE},u.onerror=j=>{const D=j.composedPath();D&&a("img-error",{index:t.currentIndex,dom:D[0],url:i}),t.status=te.FAIL}}function V(i){i&&i.stopPropagation(),_()}function _(){t.show=!1,document.body.removeEventListener("DOMMouseScroll",O),document.ondragstart=null}function y(){w()}e({resume:y,close:_,prev:E.bind(null,"left"),next:E.bind(null,"right"),setScale:i=>{i>0&&i<=10&&(t.imgScale=i)},setRotate:i=>{t.imgRotate=i}});function E(i){const{currentIndex:u}=t,{imageList:j}=n;i==="left"&&(t.currentIndex--,u<=0&&(t.currentIndex=j.length-1)),i==="right"&&(t.currentIndex++,u>=j.length-1&&(t.currentIndex=0)),X(j[t.currentIndex])}function $(i){i=i||window.event,t.moveX=i.clientX,t.moveY=i.clientY;const u=ue(f);u&&(u.onmousemove=I)}function I(i){i=i||window.event,i.preventDefault();const u=i.clientX-t.moveX,j=i.clientY-t.moveY;t.imgLeft+=u,t.imgTop+=j,t.moveX=i.clientX,t.moveY=i.clientY}const N=c(()=>{const{imgScale:i,imgRotate:u,imgTop:j,imgLeft:D}=t;return{transform:`scale(${i}) rotate(${u}deg)`,marginTop:`${j}px`,marginLeft:`${D}px`,maxWidth:n.defaultWidth?"unset":"100%"}}),U=c(()=>{const{imageList:i}=n;return i.length>1});qe(()=>{n.show&&d(),n.imageList&&w()});const g=i=>{n.maskClosable&&i.target&&i.target.classList.contains(`${A}-content`)&&V(i)},v=()=>o("div",{class:`${A}__close`,onClick:V},[o(Ke,{class:`${A}__close-icon`},null)]),M=()=>{if(!ue(U))return null;const{currentIndex:i}=t,{imageList:u}=n;return o("div",{class:`${A}__index`},[i+1,Rt(" / "),u.length])},S=()=>o("div",{class:`${A}__controller`},[o("div",{class:`${A}__controller-item`,onClick:()=>k(-h.value)},[o("img",{src:gn},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>k(h.value)},[o("img",{src:dn},null)]),o("div",{class:`${A}__controller-item`,onClick:y},[o("img",{src:fn},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>p(-90)},[o("img",{src:pn},null)]),o("div",{class:`${A}__controller-item`,onClick:()=>p(90)},[o("img",{src:mn},null)])]),P=i=>ue(U)?o("div",{class:[`${A}__arrow`,i],onClick:()=>E(i)},[i==="left"?o(et,null,null):o(tt,null,null)]):null;return()=>t.show&&o("div",{class:A,ref:l,onMouseup:R,onClick:g},[o("div",{class:`${A}-content`},[o("img",{style:ue(N),class:[`${A}-image`,t.status===te.DONE?"":"hidden"],ref:f,src:t.currentUrl,onMousedown:$},null),v(),M(),S(),P("left"),P("right")])])}});let _e=null;function Pn(n){var r;if(!$t)return;const e={},a=document.createElement("div");return Object.assign(e,{show:!0,index:0,scaleStep:100},n),_e=o(hn,e),Nt(_e,a),document.body.appendChild(a),(r=_e.component)==null?void 0:r.exposed}export{Be as I,bn as a,Pn as c};
