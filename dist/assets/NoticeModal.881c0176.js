var b=Object.defineProperty;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var F=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&F(e,r,t[r]);if(y)for(var r of y(t))I.call(t,r)&&F(e,r,t[r]);return e};var f=(e,t,r)=>new Promise((c,d)=>{var m=o=>{try{l(r.next(o))}catch(i){d(i)}},p=o=>{try{l(r.throw(o))}catch(i){d(i)}},l=o=>o.done?c(o.value):Promise.resolve(o.value).then(m,p);l((r=r.apply(e,t)).next())});import{B as w}from"./index.2b083806.js";import{B as T}from"./BasicForm.edf8c211.js";import"./helper.4a0046bd.js";import{u as E}from"./useForm.a01ff2a7.js";import"./JAddInput.dd50592d.js";import{a1 as a,l as _,F as A,bG as R,L as n,o as P,v,V as S,z as x,y as M,B as U}from"./index.3bed7968.js";import{rules as L}from"./validator.01907e0c.js";import{render as s}from"./renderUtils.afbb852b.js";const X=[{title:"\u6807\u9898",width:150,dataIndex:"titile"},{title:"\u6D88\u606F\u7C7B\u578B",dataIndex:"msgCategory",width:100,customRender:({text:e})=>s.renderDict(e,"msg_category")},{title:"\u53D1\u5E03\u4EBA",width:100,dataIndex:"sender"},{title:"\u4F18\u5148\u7EA7",dataIndex:"priority",width:70,customRender:({text:e})=>{const t=e=="L"?"blue":e=="M"?"yellow":"red";return s.renderTag(s.renderDict(e,"priority"),t)}},{title:"\u901A\u544A\u5BF9\u8C61",dataIndex:"msgType",width:100,customRender:({text:e})=>s.renderDict(e,"msg_type")},{title:"\u53D1\u5E03\u72B6\u6001",dataIndex:"sendStatus",width:70,customRender:({text:e})=>{const t=e=="0"?"red":e=="1"?"green":"gray";return s.renderTag(s.renderDict(e,"send_status"),t)}},{title:"\u53D1\u5E03\u65F6\u95F4",width:100,dataIndex:"sendTime"},{title:"\u64A4\u9500\u65F6\u95F4",width:100,dataIndex:"cancelTime"}],$=[{field:"titile",label:"\u6807\u9898",component:"JInput",colProps:{span:8}}],k=[{field:"id",label:"id",component:"Input",show:!1},{field:"msgCategory",label:"\u6D88\u606F\u7C7B\u578B",required:!0,component:"JDictSelectTag",defaultValue:"1",componentProps:{type:"radio",dictCode:"msg_category",placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"}},{field:"titile",label:"\u6807\u9898",component:"Input",required:!0,componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"}},{field:"msgAbstract",label:"\u6458\u8981",component:"InputTextArea",required:!0},{field:"endTime",label:"\u622A\u81F3\u65E5\u671F",component:"DatePicker",componentProps:{showTime:!0,valueFormat:"YYYY-MM-DD HH:mm:ss",placeholder:"\u8BF7\u9009\u62E9\u622A\u81F3\u65E5\u671F"},dynamicRules:({model:e})=>L.endTime(e.startTime,!0)},{field:"msgType",label:"\u63A5\u6536\u7528\u6237",defaultValue:"ALL",component:"JDictSelectTag",required:!0,componentProps:{type:"radio",dictCode:"msg_type",placeholder:"\u8BF7\u9009\u62E9\u53D1\u5E03\u8303\u56F4"}},{field:"userIds",label:"\u6307\u5B9A\u7528\u6237",component:"JSelectUser",required:!0,componentProps:{rowKey:"id",labelKey:"username"},ifShow:({values:e})=>e.msgType=="USER"},{field:"priority",label:"\u4F18\u5148\u7EA7",defaultValue:"H",component:"JDictSelectTag",componentProps:{dictCode:"priority",type:"radio",placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7"}},{field:"msgContent",label:"\u5185\u5BB9",component:"Input",render:s.renderTinymce}],Q="/sys/annountCement/exportXls",W="/sys/annountCement/importExcel",Z=e=>a.get({url:"/sys/annountCement/list",params:e}),N=(e,t)=>{let r=t?"/sys/annountCement/edit":"/sys/annountCement/add";return a.post({url:r,params:e})},ee=(e,t)=>a.delete({url:"/sys/annountCement/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),te=e=>a.delete({url:"/sys/annountCement/deleteBatch",data:e},{joinParamsToUrl:!0}),re=e=>a.get({url:"/sys/annountCement/doReleaseData",params:e}),oe=e=>a.get({url:"/sys/annountCement/doReovkeData",params:e}),V=_({__name:"NoticeModal",emits:["register","success"],setup(e,{emit:t}){const r=A(!0),[c,{resetFields:d,setFieldsValue:m,validate:p}]=E({schemas:k,showActionButtonGroup:!1}),[l,{setModalProps:o,closeModal:i}]=R(u=>f(this,null,function*(){yield d(),o({confirmLoading:!1}),r.value=!!(u!=null&&u.isUpdate),n(r)&&(u.record.userIds&&(u.record.userIds=u.record.userIds.substring(0,u.record.userIds.length-1)),yield m(h({},u.record)))})),B=P(()=>n(r)?"\u7F16\u8F91":"\u65B0\u589E");function C(u){return f(this,null,function*(){try{let g=yield p();o({confirmLoading:!0}),g.userIds+=",",yield N(g,r.value),i(),t("success")}finally{o({confirmLoading:!1})}})}return(u,g)=>(v(),S(n(w),U(u.$attrs,{onRegister:n(l),title:n(B),onOk:C,width:"900px",destroyOnClose:""}),{default:x(()=>[M(n(T),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var ue=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{ue as N,V as _,Q as a,W as b,X as c,te as d,ee as e,re as f,Z as g,oe as h,$ as s};
