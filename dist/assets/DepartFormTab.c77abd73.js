var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,s)=>{for(var i in s||(s={}))o.call(s,i)&&r(e,i,s[i]);if(t)for(var i of t(s))a.call(s,i)&&r(e,i,s[i]);return e},i=(e,t,o)=>new Promise(((a,r)=>{var s=e=>{try{n(o.next(e))}catch(t){r(t)}},i=e=>{try{n(o.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);n((o=o.apply(e,t)).next())}));import{B as n}from"./BasicForm.79466d99.js";import"./helper.ec3e26f3.js";import{u as d}from"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import{l as p,bj as l,F as c,o as m,$ as u,H as b,L as f,t as j,v as y,V as v,z as h,y as x,aW as g,C as O}from"./index.b3c93d64.js";import{s as w}from"./depart.api.429e062c.js";import{u as C,o as F}from"./depart.data.ff6c9320.js";import"./uniqBy.30d2558a.js";import"./index.ee0a0c33.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";import"./useFormItem.d029403d.js";import"./functional.3bb51b91.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";import"./index.d2e70b0d.js";import"./index.17ec2e33.js";import"./useCountdown.cb4ad478.js";import"./JUpload.6bcc6fce.js";import"./api.dced5d87.js";import"./index.ef2039b9.js";import"./props.a4f5d1ca.js";import"./index.c4683457.js";import"./bem.3d3e77ca.js";import"./props.c13d8268.js";import"./useContextMenu.de287960.js";import"./index.9bbe419b.js";import"./onMountedOrActivated.d3784e6c.js";import"./index.36d6c198.js";import"./htmlmixed.ba3cd961.js";import"./vue.8c416d71.js";/* empty css             */const P={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},I={class:"j-box-bottom-button-float"},B=O("重置"),D=O("保存"),_=p({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(e,{emit:t}){const o=e;l("prefixCls");const a=c(!1),r=c(!0),p=c({}),[O,{resetFields:_,setFieldsValue:A,validate:S,updateSchema:T}]=d({schemas:C().basicFormSchema,showActionButtonGroup:!1}),M=m((()=>{var e;return(null==(e=null==o?void 0:o.data)?void 0:e.parentId)?F.child:F.root}));function k(){return i(this,null,(function*(){yield _(),yield A(s({},p.value))}))}function z(){return i(this,null,(function*(){try{a.value=!0;let e=yield S();e=Object.assign({},p.value,e),yield w(e,r.value),t("success"),Object.assign(p.value,e)}finally{a.value=!1}}))}return u((()=>{T([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),b((()=>o.data),(()=>i(this,null,(function*(){let e=f(o.data);"object"!=typeof e&&(e={}),p.value=e,yield _(),yield A(s({},e))}))),{deep:!0,immediate:!0}),b((()=>o.rootTreeData),(()=>i(this,null,(function*(){T([{field:"parentId",componentProps:{treeData:o.rootTreeData}}])}))),{deep:!0,immediate:!0}),b(M,(()=>i(this,null,(function*(){T([{field:"orgCategory",componentProps:{options:M.value}}])}))),{immediate:!0})})),(e,t)=>{const o=j("a-button"),r=j("a-spin");return y(),v(r,{spinning:a.value},{default:h((()=>[x(f(n),{onRegister:f(O)},null,8,["onRegister"]),g("div",P,[g("div",I,[x(o,{preIcon:"ant-design:sync-outlined",onClick:k},{default:h((()=>[B])),_:1}),x(o,{type:"primary",preIcon:"ant-design:save-filled",onClick:z},{default:h((()=>[D])),_:1})])])])),_:1},8,["spinning"])}}});export{_ as default};
