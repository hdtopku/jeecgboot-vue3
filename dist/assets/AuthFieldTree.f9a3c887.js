import{y as o,au as _,l as G,aJ as Q,F as v,o as W,H as X,e$ as Y,L as Z,t as h,v as b,x as z,V as j,aw as ee,aV as te,z as O,C as g,u as ne}from"./index.f142ecf1.js";import{k as re,l as le,s as ae}from"./auth.api.812b1c17.js";var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},oe=ue;function A(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),r.forEach(function(l){ce(e,l,t[l])})}return e}function ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var P=function(n,t){var r=A({},n,t.attrs);return o(_,A({},r,{icon:oe}),null)};P.displayName="DownCircleOutlined";P.inheritAttrs=!1;var ie=P,se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},de=se;function H(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),r.forEach(function(l){fe(e,l,t[l])})}return e}function fe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var S=function(n,t){var r=H({},n,t.attrs);return o(_,H({},r,{icon:de}),null)};S.displayName="HomeOutlined";S.inheritAttrs=!1;var pe=S,me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},ve=me;function I(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),r.forEach(function(l){he(e,l,t[l])})}return e}function he(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var F=function(n,t){var r=I({},n,t.attrs);return o(_,I({},r,{icon:ve}),null)};F.displayName="UndoOutlined";F.inheritAttrs=!1;var Oe=F,ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"},ye=ge;function B(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),r.forEach(function(l){Ce(e,l,t[l])})}return e}function Ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var U=function(n,t){var r=B({},n,t.attrs);return o(_,B({},r,{icon:ye}),null)};U.displayName="UpCircleOutlined";U.inheritAttrs=!1;var be=U,E=(e,n,t)=>new Promise((r,l)=>{var m=s=>{try{c(t.next(s))}catch(f){l(f)}},i=s=>{try{c(t.throw(s))}catch(f){l(f)}},c=s=>s.done?r(s.value):Promise.resolve(s.value).then(m,i);c((t=t.apply(e,n)).next())});const _e=G({name:"AuthFieldTree",components:{DownCircleOutlined:ie,HomeOutlined:pe,UpCircleOutlined:be,UndoOutlined:Oe,CheckOutlined:Q},props:{cgformId:{type:String,required:!0}},setup(e){const{createMessage:n}=ne(),t=v(""),r=v(1),l=v(!0),m=v([]),i=v([]),c=v([]),s=v([]),f=v(""),k=W(()=>!t.value);X(()=>e.cgformId,y,{immediate:!0});function y(){return E(this,null,function*(){if(!e.cgformId)return;let a=yield re(e.cgformId,r.value),u=[],d=[];a.forEach(p=>{d.includes(p.code)||(d.push(p.code),u.push({key:p.code,title:p.title}))});for(let p of u){let $=[];for(let D of a)if(p.key===D.code){let q=w(D);$.push({key:D.id,title:q})}p.children=$}s.value=u,m.value=[...d],c.value=d})}function w(a){let u="";return a.page==3?u+="\u5217\u8868":a.page==5&&(u+="\u8868\u5355"),a.control==3?u+="\u53EF\u7F16\u8F91":a.control==5&&(u+="\u53EF\u89C1"),u}function C(a,u){return E(this,null,function*(){t.value=a,f.value=u,i.value=[];let d=yield le({roleId:a,cgformId:e.cgformId,type:r.value,authMode:u});i.value=d.map(p=>p.authId)})}function x(){t.value=""}function M(){y(),C(t.value,f.value)}function V(){return E(this,null,function*(){let a=i.value.filter(u=>c.value.indexOf(u)<0);yield ae(t.value,e.cgformId,{authId:JSON.stringify(a),authMode:f.value}),n.success("\u4FDD\u5B58\u6210\u529F")})}function L(){m.value=[...c.value]}function N(){m.value=[]}function T(a){m.value=a,l.value=!1}function R(){t.value="",i.value=[]}function J(){i.value=[]}function K(){const a=function(u){for(let d of u)i.value.push(d.key),d.children&&d.children.length>0&&a.call(null,d.children)};i.value=[],a.call(null,Z(s))}return{loadChecked:C,clear:R,expandedKeys:m,autoExpandParent:l,checkedKeys:i,treeData:s,disabled:k,onSave:V,onExpand:T,clearChecked:x,onCloseAll:N,onExpandAll:L,onRefresh:M,onClearSelected:J,onSelectAll:K}}}),ke={class:"onl-auth-tree-btns"};function we(e,n,t,r,l,m){const i=h("a-empty"),c=h("a-button"),s=h("DownCircleOutlined"),f=h("UpCircleOutlined"),k=h("CheckOutlined"),y=h("UndoOutlined"),w=h("a-tree");return b(),z("div",null,[e.disabled?(b(),j(i,{key:0,description:"\u8BF7\u5148\u9009\u4E2D\u5DE6\u4FA7\u89D2\u8272/\u90E8\u95E8/\u7528\u6237"})):e.treeData.length===0?(b(),j(i,{key:1,description:"\u65E0\u6743\u9650\u4FE1\u606F"})):(b(),z(ee,{key:2},[te("div",ke,[o(c,{onClick:e.onRefresh,size:"small",type:"primary",preIcon:"ant-design:redo",ghost:""},{default:O(()=>[g("\u5237\u65B0")]),_:1},8,["onClick"]),o(c,{onClick:e.onExpandAll,size:"small",type:"primary",ghost:""},{default:O(()=>[o(s),g("\u5C55\u5F00")]),_:1},8,["onClick"]),o(c,{onClick:e.onCloseAll,size:"small",type:"primary",ghost:""},{default:O(()=>[o(f),g("\u6298\u53E0")]),_:1},8,["onClick"]),o(c,{onClick:e.onSave,size:"small",type:"primary",preIcon:"ant-design:save",ghost:""},{default:O(()=>[g("\u4FDD\u5B58")]),_:1},8,["onClick"]),o(c,{onClick:e.onSelectAll,size:"small",type:"primary",ghost:""},{default:O(()=>[o(k),g("\u5168\u9009")]),_:1},8,["onClick"]),o(c,{onClick:e.onClearSelected,size:"small",type:"primary",ghost:""},{default:O(()=>[o(y),g("\u91CD\u7F6E")]),_:1},8,["onClick"])]),o(w,{checkable:"",checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":n[0]||(n[0]=C=>e.checkedKeys=C),expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData,onExpand:e.onExpand},null,8,["checkedKeys","expandedKeys","autoExpandParent","treeData","onExpand"])],64))])}var Pe=Y(_e,[["render",we],["__scopeId","data-v-b03cefd8"]]);export{Pe as default};
