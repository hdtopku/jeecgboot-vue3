import e from"./LoginFormTitle.76a6cde8.js";import{l as s,a7 as a,aB as l,s as o,dY as r,F as i,a8 as n,dZ as t,o as c,L as d,e2 as u,v as m,x as p,y as f,z as g,aF as y,C as v,D as x,cI as h,ax as w,W as b,eb as k,ac as _,d8 as z,d$ as C,u as P,e0 as E}from"./index.b2c24a42.js";import{S as F}from"./index.de682914.js";import{C as R}from"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./useFormItem.9110ec70.js";const j=s({__name:"RegisterForm",setup(s){const j=a.Item,I=l.Password,{t:T}=o(),{handleBackLogin:U,getLoginState:S}=r(),{notification:L,createErrorModal:M}=P(),B=i(),G=i(!1),A=n({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:D}=t(A),{validForm:N}=E(B),W=c((()=>d(S)===u.REGISTER));function Y(){return e=this,s=null,a=function*(){const e=yield N();if(e)try{G.value=!0;const s=yield k(_({username:e.account,password:e.password,phone:e.mobile,smscode:e.sms}));s&&s.data.success?(L.success({description:s.data.message||T("sys.api.registerMsg"),duration:3}),U()):L.warning({message:T("sys.api.errorTip"),description:s.data.message||T("sys.api.networkExceptionMsg"),duration:3})}catch(s){L.error({message:T("sys.api.errorTip"),description:s.message||T("sys.api.networkExceptionMsg"),duration:3})}finally{G.value=!1}},new Promise(((l,o)=>{var r=e=>{try{n(a.next(e))}catch(s){o(s)}},i=e=>{try{n(a.throw(e))}catch(s){o(s)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())}));var e,s,a}function Z(){return z({mobile:A.mobile,smsmode:C.REGISTER})}return(s,o)=>d(W)?(m(),p(w,{key:0},[f(e,{class:"enter-x"}),f(d(a),{class:"p-4 enter-x",model:A,rules:d(D),ref_key:"formRef",ref:B},{default:g((()=>[f(d(j),{name:"account",class:"enter-x"},{default:g((()=>[f(d(l),{class:"fix-auto-fill",size:"large",value:A.account,"onUpdate:value":o[0]||(o[0]=e=>A.account=e),placeholder:d(T)("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),f(d(j),{name:"mobile",class:"enter-x"},{default:g((()=>[f(d(l),{size:"large",value:A.mobile,"onUpdate:value":o[1]||(o[1]=e=>A.mobile=e),placeholder:d(T)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),f(d(j),{name:"sms",class:"enter-x"},{default:g((()=>[f(d(R),{size:"large",class:"fix-auto-fill",value:A.sms,"onUpdate:value":o[2]||(o[2]=e=>A.sms=e),placeholder:d(T)("sys.login.smsCode"),sendCodeApi:Z},null,8,["value","placeholder"])])),_:1}),f(d(j),{name:"password",class:"enter-x"},{default:g((()=>[f(d(F),{size:"large",value:A.password,"onUpdate:value":o[3]||(o[3]=e=>A.password=e),placeholder:d(T)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),f(d(j),{name:"confirmPassword",class:"enter-x"},{default:g((()=>[f(d(I),{size:"large",visibilityToggle:"",value:A.confirmPassword,"onUpdate:value":o[4]||(o[4]=e=>A.confirmPassword=e),placeholder:d(T)("sys.login.confirmPassword")},null,8,["value","placeholder"])])),_:1}),f(d(j),{class:"enter-x",name:"policy"},{default:g((()=>[f(d(y),{checked:A.policy,"onUpdate:checked":o[5]||(o[5]=e=>A.policy=e),size:"small"},{default:g((()=>[v(x(d(T)("sys.login.policy")),1)])),_:1},8,["checked"])])),_:1}),f(d(h),{type:"primary",class:"enter-x",size:"large",block:"",onClick:Y,loading:G.value},{default:g((()=>[v(x(d(T)("sys.login.registerButton")),1)])),_:1},8,["loading"]),f(d(h),{size:"large",block:"",class:"mt-4 enter-x",onClick:d(U)},{default:g((()=>[v(x(d(T)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])),_:1},8,["model","rules"])],64)):b("",!0)}});export{j as default};
