import{j as H,C as v,m as I,r as c,s as _,t as h,aW as n,v as i,w as s,y,z as d,S as p,bx as K,K as D,dk as O,Q as A,R as P,ax as R}from"./index.9f534f34.js";const W={class:"flex justify-between"},G={class:"border-solid rounded"},J={class:"ant-dropdown-link"},U={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},X={key:0},Y={key:1},x=H({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0}},setup(S,{expose:V}){const f=v(!1),m=v(!1),e=v(),g=v(),k=v(),C=(t,u,r=!1)=>{g.value=t,k.value=u,r?m.value=!0:(f.value=!0,u.pageNo=1),t(u).then(a=>{if(u.pageNo=a.current+1,a.current>1&&r){e.value.records.push(...a.records);return}e.value=a}).catch(a=>{console.error(a)}).finally(()=>{f.value=!1,m.value=!1})},j=()=>{C(g.value,k.value,!0)},M=I(()=>{var t,u,r,a;return((t=e==null?void 0:e.value)==null?void 0:t.total)===0||((r=(u=e==null?void 0:e.value)==null?void 0:u.records)==null?void 0:r.length)>=((a=e==null?void 0:e.value)==null?void 0:a.total)});return V({execQuery:C}),(t,u)=>{var w;const r=c("a-typography-title"),a=c("a-dropdown"),Q=c("a-list-item-meta"),T=c("a-list-item"),q=c("a-spin"),z=c("a-button"),E=c("a-list");return _(),h(R,null,[n("div",W,[i(r,{level:5},{default:s(()=>{var l,o;return[y("\u5171"+d((o=(l=e.value)==null?void 0:l.total)!=null?o:0)+"\u6761",1)]}),_:1}),n("span",null,[p(t.$slots,"header")])]),i(E,{loading:f.value,"data-source":(w=e.value)==null?void 0:w.records},{renderItem:s(({item:l,index:o})=>[i(T,null,{default:s(()=>[i(Q,null,K({title:s(()=>[n("span",null,[p(t.$slots,"top",{item:l,index:o})])]),description:s(()=>[p(t.$slots,"bottom",{item:l,index:o})]),_:2},[S.showLeft?{name:"avatar",fn:s(()=>[n("div",null,[n("span",G,"#"+d(o+1),1),n("span",null,[p(t.$slots,"shelter",{item:l,index:o})])]),i(a,null,{overlay:s(()=>[n("span",null,[p(t.$slots,"operate",{item:l,index:o})])]),default:s(()=>[n("a",J,[y(" \u64CD\u4F5C "),i(D(O))])]),_:2},1024),n("span",null,[p(t.$slots,"left",{style:"position: relative",item:l,index:o})])]),key:"0"}:void 0]),1024),n("span",null,[p(t.$slots,"right",{item:l,index:o})])]),_:2},1024)]),loadMore:s(()=>{var l,o,$,b;return[((l=e.value)==null?void 0:l.total)>0?(_(),h("div",U,[D(M)?(_(),h("span",X,"\u52A0\u8F7D\u5B8C\u6210("+d(($=(o=e.value)==null?void 0:o.records)==null?void 0:$.length)+"/"+d((b=e.value)==null?void 0:b.total)+")",1)):(_(),h("span",Y,[m.value?(_(),A(q,{key:0})):(_(),A(z,{key:1,onClick:j},{default:s(()=>{var B,F,N;return[y("\u52A0\u8F7D\u66F4\u591A("+d((F=(B=e.value)==null?void 0:B.records)==null?void 0:F.length)+"/"+d((N=e.value)==null?void 0:N.total)+")",1)]}),_:1}))]))])):P("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{x as _};
