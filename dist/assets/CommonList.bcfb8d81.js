import{l as I,F as v,o as O,t as c,v as _,x as h,aV as n,y as d,z as s,C as y,D as i,X as p,bj as P,L as N,dl as Q,V,W,aw as X}from"./index.23784a6b.js";const G={class:"flex justify-between"},J={class:"border-solid rounded"},K={class:"ant-dropdown-link"},L=y(" \u64CD\u4F5C "),R={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},U={key:0},Y={key:1},x=I({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0}},setup(A,{expose:S}){const f=v(!1),m=v(!1),e=v(),g=v(),k=v(),C=(t,u,r=!1)=>{g.value=t,k.value=u,r?m.value=!0:(f.value=!0,u.pageNo=1),t(u).then(a=>{if(u.pageNo=a.current+1,a.current>1&&r){e.value.records.push(...a.records);return}e.value=a}).catch(a=>{console.error(a)}).finally(()=>{f.value=!1,m.value=!1})},j=()=>{C(g.value,k.value,!0)},M=O(()=>{var t,u,r,a;return((t=e==null?void 0:e.value)==null?void 0:t.total)===0||((r=(u=e==null?void 0:e.value)==null?void 0:u.records)==null?void 0:r.length)>=((a=e==null?void 0:e.value)==null?void 0:a.total)});return S({execQuery:C}),(t,u)=>{var w;const r=c("a-typography-title"),a=c("a-dropdown"),T=c("a-list-item-meta"),q=c("a-list-item"),z=c("a-spin"),E=c("a-button"),H=c("a-list");return _(),h(X,null,[n("div",G,[d(r,{level:5},{default:s(()=>{var l,o;return[y("\u5171"+i((o=(l=e.value)==null?void 0:l.total)!=null?o:0)+"\u6761",1)]}),_:1}),n("span",null,[p(t.$slots,"header")])]),d(H,{loading:f.value,"data-source":(w=e.value)==null?void 0:w.records},{renderItem:s(({item:l,index:o})=>[d(q,null,{default:s(()=>[d(T,null,P({title:s(()=>[n("span",null,[p(t.$slots,"top",{item:l,index:o})])]),description:s(()=>[p(t.$slots,"bottom",{item:l,index:o})]),_:2},[A.showLeft?{name:"avatar",fn:s(()=>[n("div",null,[n("span",J,"#"+i(o+1),1),n("span",null,[p(t.$slots,"shelter",{item:l,index:o})])]),d(a,null,{overlay:s(()=>[n("span",null,[p(t.$slots,"operate",{item:l,index:o})])]),default:s(()=>[n("a",K,[L,d(N(Q))])]),_:2},1024),n("span",null,[p(t.$slots,"left",{style:"position: relative",item:l,index:o})])]),key:"0"}:void 0]),1024),n("span",null,[p(t.$slots,"right",{item:l,index:o})])]),_:2},1024)]),loadMore:s(()=>{var l,o,F,$;return[((l=e.value)==null?void 0:l.total)>0?(_(),h("div",R,[N(M)?(_(),h("span",U,"\u52A0\u8F7D\u5B8C\u6210("+i((F=(o=e.value)==null?void 0:o.records)==null?void 0:F.length)+"/"+i(($=e.value)==null?void 0:$.total)+")",1)):(_(),h("span",Y,[m.value?(_(),V(z,{key:0})):(_(),V(E,{key:1,onClick:j},{default:s(()=>{var b,B,D;return[y("\u52A0\u8F7D\u66F4\u591A("+i((B=(b=e.value)==null?void 0:b.records)==null?void 0:B.length)+"/"+i((D=e.value)==null?void 0:D.total)+")",1)]}),_:1}))]))])):W("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{x as default};
