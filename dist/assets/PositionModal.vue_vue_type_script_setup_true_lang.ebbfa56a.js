var C=Object.defineProperty;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,h=(e,t)=>{for(var o in t||(t={}))w.call(t,o)&&g(e,o,t[o]);if(f)for(var o of f(t))F.call(t,o)&&g(e,o,t[o]);return e};var m=(e,t,o)=>new Promise((c,l)=>{var d=s=>{try{r(o.next(s))}catch(u){l(u)}},p=s=>{try{r(o.throw(s))}catch(u){l(u)}},r=s=>s.done?c(s.value):Promise.resolve(s.value).then(d,p);r((o=o.apply(e,t)).next())});import{B as x}from"./index.0d476352.js";import{B as A}from"./BasicForm.d162c3ca.js";import"./helper.8737e1c9.js";import{u as P}from"./useForm.8b0368e0.js";import"./JAddInput.842dcc4a.js";import{Z as a,a2 as _,j as b,C as E,bH as I,K as n,m as k,s as D,Q as R,w as v,v as M,x as T}from"./index.366dce35.js";import{rules as U}from"./validator.bfd8f8f6.js";const X=[{title:"\u804C\u52A1\u7F16\u7801",dataIndex:"code",width:200,align:"left"},{title:"\u804C\u52A1\u540D\u79F0",dataIndex:"name",width:200},{title:"\u804C\u52A1\u7B49\u7EA7",dataIndex:"postRank_dictText",width:100}],Z=[{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"Input",colProps:{span:8}}],S=[{label:"\u4E3B\u952E",field:"id",component:"Input",show:!1},{label:"\u804C\u7EA7",field:"postRank",component:"JDictSelectTag",required:!0,componentProps:{dictCode:"position_rank",dropdownStyle:{maxHeight:"100vh"},getPopupContainer:()=>document.body}},{field:"name",label:"\u804C\u52A1\u540D\u79F0",component:"Input",required:!0},{field:"code",label:"\u804C\u52A1\u7F16\u7801",component:"Input",required:!0,dynamicDisabled:({values:e})=>!!e.id,dynamicRules:({model:e,schema:t})=>U.duplicateCheckRule("sys_position","code",e,t,!0)}],$="/sys/position/exportXls",z="/sys/position/importExcel",W=e=>a.get({url:"/sys/position/list",params:e}),q=(e,t)=>{let o=t?"/sys/position/edit":"/sys/position/add";return a.post({url:o,params:e})},L=e=>a.get({url:"/sys/position/queryById",params:e}),Y=(e,t)=>a.delete({url:"/sys/position/delete",data:e},{joinParamsToUrl:!0}).then(()=>{t()}),ee=(e,t)=>{_.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u662F\u5426\u5220\u9664\u9009\u4E2D\u6570\u636E",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:()=>a.delete({url:"/sys/position/deleteBatch",data:e},{joinParamsToUrl:!0}).then(()=>{t()})})},te=b({__name:"PositionModal",emits:["success","register"],setup(e,{emit:t}){const o=E(!0),[c,{resetFields:l,setFieldsValue:d,validate:p}]=P({schemas:S,showActionButtonGroup:!1}),[r,{setModalProps:s,closeModal:u}]=I(i=>m(this,null,function*(){yield l(),s({confirmLoading:!1}),o.value=!!(i!=null&&i.isUpdate),n(o)&&(i.record=yield L({id:i.record.id}),yield d(h({},i.record)))})),y=k(()=>n(o)?"\u7F16\u8F91\u804C\u52A1":"\u65B0\u589E\u804C\u52A1");function B(){return m(this,null,function*(){try{const i=yield p();s({confirmLoading:!0}),yield q(i,o.value),u(),t("success")}finally{s({confirmLoading:!1})}})}return(i,j)=>(D(),R(n(x),T(i.$attrs,{onRegister:n(r),title:n(y),onOk:B,width:700}),{default:v(()=>[M(n(A),{onRegister:n(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{te as _,$ as a,z as b,X as c,Y as d,ee as e,W as g,Z as s};
