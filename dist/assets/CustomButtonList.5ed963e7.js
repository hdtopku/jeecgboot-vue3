import{u as H}from"./useOnlineTest.fcc5660d.js";import{useListPage as K}from"./useListPage.e8a70785.js";import x from"./BasicTable.01d91572.js";import{T as J}from"./componentMap.f6de7bd6.js";import"./BasicTable.vue_vue_type_style_index_0_lang.019e6dda.js";import"./TableImg.vue_vue_type_style_index_0_lang.8b4877a0.js";import{B as Q}from"./index.b95a1268.js";import{B as Z}from"./BasicForm.01e7951d.js";import{u as W}from"./useForm.2c423418.js";import"./JAddInput.06e9dc7b.js";import{j as X,C as P,bH as Y,bI as ee,a8 as te,m as oe,f2 as ne,Z as v,r as a,s as A,Q as D,w as u,v as r,y as g,t as ue,R as I,by as re,bz as le,G as ae}from"./index.c1328767.js";import"./useTable.05471750.js";import"./BasicForm.vue_vue_type_style_index_0_lang.871d6336.js";import"./uniqBy.4f213d24.js";import"./BasicModal.6a6ac877.js";import"./useWindowSizeFn.5d257029.js";import"./areaDataUtil.1b9649c7.js";import"./useFormItem.4bccf45b.js";import"./api.e6325d52.js";import"./props.1cab8d8c.js";import"./index.b3c97933.js";import"./bem.0d71878f.js";import"./props.11b166e7.js";import"./useContextMenu.243dd3bc.js";import"./index.95ad231c.js";import"./onMountedOrActivated.06a0c7d6.js";import"./index.bee2df6d.js";import"./htmlmixed.4e595ed6.js";import"./vue.c0159d98.js";/* empty css             */import"./depart.api.5cdf8d58.js";import"./index.1a1450c1.js";import"./useContentHeight.e321723b.js";import"./useContentViewHeight.b4e473e0.js";import"./usePageContext.eca2a4e9.js";import"./RedoOutlined.3c33998f.js";import"./functional.e68521ee.js";import"./download.06282288.js";import"./base64Conver.030fa32c.js";import"./index.9ed99268.js";import"./index.c54de76c.js";import"./useCountdown.81fecb0f.js";import"./JUpload.vue_vue_type_style_index_0_lang.87a145a3.js";import"./index.5fdbe4b7.js";var ie=Object.defineProperty,M=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,T=(e,t,o)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,pe=(e,t)=>{for(var o in t||(t={}))se.call(t,o)&&T(e,o,t[o]);if(M)for(var o of M(t))ce.call(t,o)&&T(e,o,t[o]);return e},B=(e,t,o)=>new Promise((_,f)=>{var b=l=>{try{i(o.next(l))}catch(c){f(c)}},s=l=>{try{i(o.throw(l))}catch(c){f(c)}},i=l=>l.done?_(l.value):Promise.resolve(l.value).then(b,s);i((o=o.apply(e,t)).next())});const me=(e,t)=>v.get({url:"/online/cgform/button/list/"+e,params:t});function k(e){return v.delete({url:"/online/cgform/button/deleteBatch",params:{ids:e.join(",")}},{joinParamsToUrl:!0})}const de=(e,t)=>t?v.put({url:"/online/cgform/button/edit",params:e}):v.post({url:"/online/cgform/button/add",params:e}),fe=[{title:"\u6309\u94AE\u7F16\u7801",align:"center",dataIndex:"buttonCode"},{title:"\u6309\u94AE\u540D\u79F0",align:"center",dataIndex:"buttonName"},{title:"\u6309\u94AE\u6837\u5F0F",align:"center",dataIndex:"buttonStyle",customRender({text:e,record:t}){if(e==="form"){let o=t.optPosition;return e+"("+(o=="2"?"\u5E95\u90E8":"\u4FA7\u9762")+")"}else return e}},{title:"\u6309\u94AE\u7C7B\u578B",align:"center",dataIndex:"optType"},{title:"\u6392\u5E8F",align:"center",dataIndex:"orderNum"},{title:"\u6309\u94AE\u56FE\u6807",align:"center",dataIndex:"buttonIcon"},{title:"\u8868\u8FBE\u5F0F",align:"center",dataIndex:"exp"},{title:"\u6309\u94AE\u72B6\u6001",align:"center",dataIndex:"buttonStatus",customRender({text:e}){return e==1?"\u6FC0\u6D3B":"\u672A\u6FC0\u6D3B"}}],be=[{label:"\u6309\u94AE\u7F16\u7801",field:"buttonCode",component:"Input",required:!0},{label:"\u6309\u94AE\u540D\u79F0",field:"buttonName",component:"Input",required:!0},{label:"\u6309\u94AE\u6837\u5F0F",field:"buttonStyle",component:"Select",componentProps:{options:[{label:"Link",value:"link"},{label:"Button",value:"button"},{label:"Form",value:"form"}]},defaultValue:"link"},{label:"\u6309\u94AE\u4F4D\u7F6E",field:"optPosition",component:"Select",componentProps:{options:[{label:"\u4FA7\u9762",value:"1"},{label:"\u5E95\u90E8",value:"2"}]},defaultValue:"2",show:({model:e})=>e.buttonStyle==="form"},{label:"\u6309\u94AE\u7C7B\u578B",field:"optType",component:"Select",componentProps:{options:[{label:"Js",value:"js"},{label:"Action",value:"action"}]},defaultValue:"js"},{label:"\u6392\u5E8F",field:"orderNum",component:"InputNumber",componentProps:{style:"width: 100%"}},{label:"\u6309\u94AE\u56FE\u6807",field:"buttonIcon",component:"Input",helpMessage:"a-icon type"},{label:"\u8868\u8FBE\u5F0F",field:"exp",component:"Input"},{label:"\u6309\u94AE\u72B6\u6001",field:"buttonStatus",component:"RadioButtonGroup",componentProps:{options:[{label:"\u6FC0\u6D3B",value:"1"},{label:"\u672A\u6FC0\u6D3B",value:"0"}]},defaultValue:"1"}],Fe=X({name:"CustomButtonList",components:{BasicModal:Q,BasicTable:x,TableAction:J,BasicForm:Z},emits:["register"],setup(){const e=P(""),{doRequest:t,doDeleteRecord:o,tableContext:_}=K({tableProps:{api:n=>me(e.value,n),columns:fe,canResize:!1,useSearchForm:!1,beforeFetch(n){return Object.assign(n,{column:"orderNum",order:"asc"})}}}),[f,{reload:b},{rowSelection:s,selectedRowKeys:i}]=_,[l,{closeModal:c}]=Y(n=>B(this,null,function*(){e.value=n.row.id,b()})),{aiTestMode:E,genButtons:y}=H(),[C,F]=ee(),p=P(!1),m=te({onRegister:C,title:oe(()=>p!=null&&p.value?"\u4FEE\u6539":"\u65B0\u589E"),width:800,confirmLoading:!1,onOk:$,onCancel:F.closeModal});let d={};const[R,{resetFields:S,setFieldsValue:O,validate:N}]=W({schemas:be,showActionButtonGroup:!1});function h(n){return B(this,null,function*(){var w;p.value=n.isUpdate,d=pe({},(w=n.record)!=null?w:{}),F.openModal(),yield ae(),yield S(),O(d)})}function j(){h({isUpdate:!1})}function V(n){h({isUpdate:!0,record:n})}function L(){c()}function U(){y(e.value)}function G(){return B(this,null,function*(){t(()=>k(i.value))})}function $(){return B(this,null,function*(){try{m.confirmLoading=!0;let n=yield N();n=Object.assign({cgformHeadId:e.value},d,n),yield de(n,p.value),b(),F.closeModal()}finally{m.confirmLoading=!1}})}function q(n){return[{label:"\u7F16\u8F91",onClick:()=>V(n)}]}function z(n){return[{label:"\u5220\u9664",popConfirm:{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",placement:"left",confirm:()=>o(()=>k([n.id]))}}]}return{onAdd:j,onBatchDelete:G,aiTestMode:E,onGenButtons:U,registerModal:l,registerTable:f,selectedRowKeys:i,rowSelection:s,onCancel:L,getTableAction:q,getDropDownAction:z,registerForm:R,formModalProps:m}}}),ge={key:0,style:{float:"left"}};function _e(e,t,o,_,f,b){const s=a("a-button"),i=a("a-icon"),l=a("a-menu-item"),c=a("a-menu"),E=a("a-dropdown"),y=a("TableAction"),C=a("BasicTable"),F=a("BasicForm"),p=a("a-spin"),m=a("BasicModal");return A(),D(m,{onRegister:e.registerModal,title:"\u81EA\u5B9A\u4E49\u6309\u94AE",width:1200,defaultFullscreen:"",onCancel:e.onCancel},{footer:u(()=>[r(s,{onClick:e.onCancel},{default:u(()=>[g("\u5173\u95ED")]),_:1},8,["onClick"]),e.aiTestMode?(A(),ue("div",ge,[r(s,{onClick:e.onGenButtons},{default:u(()=>[g("\u751F\u6210\u6D4B\u8BD5\u6570\u636E")]),_:1},8,["onClick"])])):I("",!0)]),default:u(()=>[r(C,{onRegister:e.registerTable,rowSelection:e.rowSelection},{tableTitle:u(()=>[r(s,{onClick:e.onAdd,type:"primary",preIcon:"ant-design:plus"},{default:u(()=>[g("\u65B0\u589E")]),_:1},8,["onClick"]),e.selectedRowKeys.length>0?(A(),D(E,{key:0},{overlay:u(()=>[r(c,null,{default:u(()=>[r(l,{key:"1",onClick:e.onBatchDelete},{default:u(()=>[r(i,{type:"delete"}),g(" \u5220\u9664 ")]),_:1},8,["onClick"])]),_:1})]),default:u(()=>[r(s,{style:{"margin-left":"8px"}},{default:u(()=>[g(" \u6279\u91CF\u64CD\u4F5C "),r(i,{type:"down"})]),_:1})]),_:1})):I("",!0)]),action:u(({record:d})=>[r(y,{actions:e.getTableAction(d),dropDownActions:e.getDropDownAction(d)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),r(m,re(le(e.formModalProps)),{default:u(()=>[r(p,{spinning:e.formModalProps.confirmLoading},{default:u(()=>[r(F,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},8,["spinning"])]),_:1},16)]),_:1},8,["onRegister","onCancel"])}var st=ne(Fe,[["render",_e]]);export{st as default};
