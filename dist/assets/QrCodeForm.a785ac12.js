import a from"./LoginFormTitle.bdd03d41.js";import{l as e,F as s,s as n,d7 as t,dY as o,o as l,L as r,e2 as c,H as i,v as d,x as u,y as m,aW as f,z as v,C as x,D as g,b7 as I,cI as b,ax as j,W as k,ec as p,ed as y}from"./index.26a57b91.js";import{Q as C}from"./index.a6bc2aef.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";const h={class:"enter-x min-w-64 min-h-64"},q=e({__name:"QrCodeForm",setup(e){const q=s("");let L;const{t:_}=n(),S=t(),{handleBackLogin:w,getLoginState:F}=o(),Q=s("0"),z=l((()=>r(F)===c.QR_CODE)),D=l((()=>"0"===r(Q)?_("sys.login.scanSign"):_("sys.login.scanSuccess")));function T(){Q.value="0",p().then((a=>{var e;q.value=a.qrcodeId,a.qrcodeId&&(W(e=a.qrcodeId),B(),L=setInterval((()=>{W(e)}),1500))}))}function W(a){y({qrcodeId:a}).then((a=>{let e=a.token;"-2"==e&&(T(),clearInterval(L)),a.success&&(Q.value="2",clearInterval(L),setTimeout((()=>{S.qrCodeLogin(e)}),500))}))}function B(){L&&clearInterval(L)}return i(z,(a=>{a?T():B()})),(e,s)=>r(z)?(d(),u(j,{key:0},[m(a,{class:"enter-x"}),f("div",h,[m(r(C),{value:q.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),m(r(I),{class:"enter-x"},{default:v((()=>[x(g(r(D)),1)])),_:1}),m(r(b),{size:"large",block:"",class:"mt-4 enter-x",onClick:r(w)},{default:v((()=>[x(g(r(_)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])],64)):k("",!0)}});export{q as default};
