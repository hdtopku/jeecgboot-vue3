import e from"./LoginFormTitle.fa6f86de.js";import{l as s,F as a,s as n,d7 as t,dY as o,o as l,L as r,e2 as c,H as i,v as d,x as u,y as f,aW as m,z as v,C as x,D as g,b7 as I,cI as j,ax as k,W as p,ec as y,ed as C}from"./index.b3c93d64.js";import{Q as b}from"./index.f78d2812.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";const h={class:"enter-x min-w-64 min-h-64"},q=s({__name:"QrCodeForm",setup(s){const q=a("");let L;const{t:_}=n(),S=t(),{handleBackLogin:w,getLoginState:F}=o(),Q=a("0"),z=l((()=>r(F)===c.QR_CODE)),D=l((()=>"0"===r(Q)?_("sys.login.scanSign"):_("sys.login.scanSuccess")));function T(){Q.value="0",y().then((e=>{var s;q.value=e.qrcodeId,e.qrcodeId&&(W(s=e.qrcodeId),B(),L=setInterval((()=>{W(s)}),1500))}))}function W(e){C({qrcodeId:e}).then((e=>{let s=e.token;"-2"==s&&(T(),clearInterval(L)),e.success&&(Q.value="2",clearInterval(L),setTimeout((()=>{S.qrCodeLogin(s)}),500))}))}function B(){L&&clearInterval(L)}return i(z,(e=>{e?T():B()})),(s,a)=>r(z)?(d(),u(k,{key:0},[f(e,{class:"enter-x"}),m("div",h,[f(r(b),{value:q.value,class:"enter-x flex justify-center xl:justify-start",width:280},null,8,["value"]),f(r(I),{class:"enter-x"},{default:v((()=>[x(g(r(D)),1)])),_:1}),f(r(j),{size:"large",block:"",class:"mt-4 enter-x",onClick:r(w)},{default:v((()=>[x(g(r(_)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])],64)):p("",!0)}});export{q as default};
