import{l,aY as e,F as a,H as n,t,v as u,V as i,z as o,aW as s,R as d,S as r,y as v,x as c,D as p,W as y,L as m,E as k,C as f}from"./index.26a57b91.js";import h from"./CommonList.1a969dad.js";import{a as g,s as _}from"./Am.api.16b36edd.js";const b=f("已打开验证页面，但还没点击开始验证"),x=f("所有状态：已打开+已开始+已关闭+退款等"),C=f("验证结束后，系统关闭教程及页面至空白"),w={key:0},T={key:1},j={key:0},A={key:1},E={key:0},L=f(),z={key:1},N={key:0},O={key:1},B=f("编辑 "),D=f(" 销毁验证 "),F=f("打开时间"),H=f("验证时间"),I={key:0},Q=f(" 未开始"),R=f("最后访问"),W={key:0},K={key:0},P=f("买家退款"),S={key:1},U=f("创建人"),V={key:0,class:"font-light text-sm text-gray-500"},Y=l({__name:"AmDataList",emits:["handleEdit"],setup(l,{expose:Y,emit:q}){const{hasPermission:G}=e(),J=a(),M=a(),X=a("0"),Z=l=>6===(null==l?void 0:l.type)?"https://c.taojingling.cn/d/"+(null==l?void 0:l.code):"https://c.taojingling.cn/c/"+(null==l?void 0:l.code),$=a(0);n(M,(()=>{var l,e;$.value=0,null==(e=null==(l=M.value)?void 0:l.records)||e.forEach((l=>{-1===l.valid&&(-1!==l.status&&-2!==l.status||++$.value),l.showOperate=-1!==(null==l?void 0:l.valid)&&(null==l?void 0:l.status)>-1&&(null==l?void 0:l.status)<4}))}));const ll=l=>{switch(l=Number.parseInt(l)){case 0:case 1:case 2:return"processing";case 3:return"cyan";case 4:return"success";case-1:case-2:return"error"}},el=a(!1);return Y({startQuery:(l={})=>{X.value=null==l?void 0:l.status,J.value.execQuery(g,l)},changeAdvanced:()=>{el.value=!el.value},changeActiveKey:l=>{X.value=l}}),(l,e)=>{const a=t("a-typography-text"),n=t("a-typography-link"),g=t("a-button"),Y=t("a-menu-item"),el=t("a-menu"),al=t("a-tag");return u(),i(h,{ref_key:"CommonListRef",ref:J},{header:o((()=>[s("span",null,[d(v(a,{mark:""},{default:o((()=>[b])),_:1},512),[[r,"1"===X.value]]),d(v(a,{mark:""},{default:o((()=>[x])),_:1},512),[[r,"0"===X.value]]),d(v(a,{mark:""},{default:o((()=>[C])),_:1},512),[[r,"2"===X.value]]),d(v(a,{mark:""},{default:o((()=>{var l,e;return[0===(null==(l=M.value)?void 0:l.total)?(u(),c("span",w,"买家申请退款，记得销毁验证页面")):(u(),c("span",T,[s("span",null,"管理员关闭"+p((null==(e=M.value)?void 0:e.total)-$.value)+"条",1),$.value>0?(u(),c("span",j,"+买家主动退款"+p($.value)+"条",1)):(u(),c("span",A,"买家主动退款"))]))]})),_:1},512),[[r,"4"===X.value]])])])),shelter:o((({item:l})=>[l.verifyCount>0?(u(),c("span",E,"|"+p(l.verifyCount),1)):y("",!0),L,m(G)("link:switch")&&6===(null==l?void 0:l.type)?(u(),c("span",z,"[尊]")):y("",!0)])),left:o((({item:l})=>{var e,t;return[s("div",null,[v(a,{copyable:{text:Z(l)}},{default:o((()=>[s("span",{class:k(["",-1===(null==l?void 0:l.valid)?"text-gray-500 line-through":"text-purple-900 font-medium"])},p(null==l?void 0:l.code),3)])),_:2},1032,["copyable"])]),m(G)("link:switch")&&(null==(e=null==l?void 0:l.link)?void 0:e.length)>3?(u(),c("div",N,[v(n,{copyable:{text:null==l?void 0:l.link}},{default:o((()=>{var e,a;return[f(p(null==(a=null==l?void 0:l.link)?void 0:a.substring((null==(e=null==l?void 0:l.link)?void 0:e.length)-4)),1)]})),_:2},1032,["copyable"])])):y("",!0),m(G)("link:switch")&&(null==(t=null==l?void 0:l.remark)?void 0:t.length)>0?(u(),c("div",O,[v(a,{copyable:{text:null==l?void 0:l.remark},mark:""},{default:o((()=>[f(" 注:"+p(null==l?void 0:l.remark),1)])),_:2},1032,["copyable"])])):y("",!0)]})),operate:o((({item:l})=>[v(el,null,{default:o((()=>[l?(u(),i(Y,{key:0,onClick:e=>(l=>{q("handleEdit",l)})(l)},{default:o((()=>[m(G)("link:switch")?(u(),i(g,{key:0,type:"link",size:"small"},{default:o((()=>[B])),_:1})):y("",!0)])),_:2},1032,["onClick"])):y("",!0),v(Y,null,{default:o((()=>[y("",!0),v(g,{type:"link",size:"small",danger:"",onClick:e=>((l,e)=>{l.valid=e,_(l,!0).then((()=>{}))})(l,-1)},{default:o((()=>[D])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),top:o((({item:l})=>{var e,a,n,t,d,r,k,h,g,_,b;return[s("div",null,p((null==(e=null==l?void 0:l.country)?void 0:e.indexOf("中国"))>-1||(null==(n=null==(a=null==l?void 0:l.country)?void 0:a.toUpperCase())?void 0:n.indexOf("CHINA"))>-1?"":l.country)+" "+p(l.province)+p(l.city)+p(l.county)+" | "+p(l.browser),1),s("div",null,p(l.operator)+" | "+p(l.model)+" | "+p(l.system),1),s("div",null,[v(al,null,{default:o((()=>[F])),_:1}),f(" "+p(null==(t=null==l?void 0:l.visitTime)?void 0:t.substring(5)),1)]),s("div",null,[v(al,null,{default:o((()=>[H])),_:1}),(null==(d=null==l?void 0:l.verifyTime)?void 0:d.length)>0?(u(),c("span",I,p(null==(r=null==l?void 0:l.verifyTime)?void 0:r.substring(5)),1)):(u(),i(al,{key:1,color:"error",plain:"",plainFill:""},{default:o((()=>[Q])),_:1}))]),s("div",null,[v(al,null,{default:o((()=>[R])),_:1}),(null==(k=null==l?void 0:l.updateTime)?void 0:k.length)>0?(u(),c("span",W,p(null==(h=null==l?void 0:l.updateTime)?void 0:h.substring(5)),1)):y("",!0)]),(null==(g=null==l?void 0:l.refundTime)?void 0:g.length)>0?(u(),c("div",K,[v(al,{color:"error"},{default:o((()=>[P])),_:1}),s("span",null,p(null==(_=null==l?void 0:l.refundTime)?void 0:_.substring(5)),1)])):y("",!0),m(G)("link:switch")&&(null==(b=null==l?void 0:l.createBy)?void 0:b.length)>0?(u(),c("div",S,[v(al,null,{default:o((()=>[U])),_:1}),s("span",null,p(null==l?void 0:l.createBy),1)])):y("",!0)]})),right:o((({item:l})=>[s("div",null,[s("div",null,[v(al,{color:ll(l.status)},{default:o((()=>[s("text",{class:k(-1===(null==l?void 0:l.valid)?"line-through":"")},p(l.statusName),3)])),_:2},1032,["color"])]),-1!==(null==l?void 0:l.valid)&&(null==l?void 0:l.status)>-1&&(null==l?void 0:l.status)<4?y("",!0):(u(),c("div",V," 页面空白 "))])])),_:1},512)}}});export{Y as default};
