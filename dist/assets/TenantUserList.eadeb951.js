var j=Object.defineProperty,z=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var T=(n,t,o)=>t in n?j(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,D=(n,t)=>{for(var o in t||(t={}))N.call(t,o)&&T(n,o,t[o]);if(h)for(var o of h(t))V.call(t,o)&&T(n,o,t[o]);return n},B=(n,t)=>z(n,J(t));var w=(n,t,o)=>new Promise((d,a)=>{var g=s=>{try{l(o.next(s))}catch(p){a(p)}},b=s=>{try{l(o.throw(s))}catch(p){a(p)}},l=s=>s.done?d(s.value):Promise.resolve(s.value).then(g,b);l((o=o.apply(n,t)).next())});import X from"./BasicTable.a8592173.js";import{T as H}from"./componentMap.995605ed.js";import"./BasicTable.vue_vue_type_style_index_0_lang.bed283e2.js";import"./useTable.08b8c8c7.js";import{_ as K}from"./UserDrawer.vue_vue_type_script_setup_true_lang.bb70faaa.js";import{J as O}from"./JThirdAppButton.6444aeeb.js";import{_ as q}from"./UserQuitAgentModal.vue_vue_type_script_setup_true_name_user-quit-agent-modal_lang.57474115.js";import G from"./UserQuitModal.137f4c31.js";import{a as W}from"./index.1aa39cfc.js";import{useListPage as Y}from"./useListPage.fbe26446.js";import"./index.5f6d2eec.js";import{j as R,bI as F,cM as Z,r as ee,s as te,t as oe,v as i,w as f,y as M,H as r,u as ne}from"./index.c1d8dbc8.js";import{h as re,u as se}from"./user.api.edf3258c.js";import{u as ie,b as ae}from"./user.data.0f8f4e49.js";import"./BasicForm.763c9f74.js";import"./BasicForm.vue_vue_type_style_index_0_lang.1eae9d9f.js";import"./uniqBy.3dbe90b3.js";import"./BasicModal.4c523d71.js";import"./useWindowSizeFn.1a55d327.js";import"./useFormItem.6935557d.js";import"./JUpload.vue_vue_type_style_index_0_lang.51f417a5.js";import"./api.221c4cde.js";import"./download.f2b87928.js";import"./base64Conver.030fa32c.js";import"./index.236167d6.js";import"./index.9b215829.js";import"./useCountdown.5186f11f.js";import"./JAddInput.c425dfe6.js";import"./areaDataUtil.b22cb30b.js";import"./props.adbaf37f.js";import"./index.201afc50.js";import"./bem.452cc75b.js";import"./props.82dd77cc.js";import"./useContextMenu.184539a6.js";import"./index.cf6640d7.js";import"./onMountedOrActivated.6b21dee8.js";import"./depart.api.ef5d901e.js";import"./MinusCircleOutlined.bac41ad8.js";import"./index.7a47645e.js";import"./useForm.4b03a18a.js";import"./injectionKey.1ad13e6c.js";import"./SettingOutlined.549e296f.js";import"./RedoOutlined.27cf802c.js";import"./useAdaptiveWidth.48a0150a.js";import"./validator.5dc5e390.js";import"./renderUtils.c3a5484c.js";const ue=R({name:"tenant-system-user"}),at=R(B(D({},ue),{setup(n){const{createMessage:t,createConfirm:o}=ne(),[d,{openDrawer:a}]=W(),[g,{openModal:b}]=F(),[l,{openModal:s}]=F(),C=Z().getUserInfo.username,{prefixCls:le,tableContext:k,onExportXls:pe,onImportXls:me}=Y({designScope:"user-list",tableProps:{title:"\u79DF\u6237\u7528\u6237\u5217\u8868",api:re,columns:ie,size:"small",formConfig:{schemas:ae},actionColumn:{width:120},beforeFetch:e=>(e.userTenantStatus="1,3,4",Object.assign({column:"createTime",order:"desc"},e))}}),[A,{reload:m,updateTableDataRecord:ce},{rowSelection:E,selectedRows:fe,selectedRowKeys:U}]=k;function x(){a(!0,{isUpdate:!1,showFooter:!0,tenantSaas:!0})}function I(e){return w(this,null,function*(){a(!0,{record:e,isUpdate:!0,showFooter:!0,tenantSaas:!0})})}function Q(e){return w(this,null,function*(){a(!0,{record:e,isUpdate:!0,showFooter:!1,tenantSaas:!0})})}function y(){m()}function v({isToLocal:e}){e&&m()}function L(e){return[{label:"\u7F16\u8F91",onClick:I.bind(null,e)}]}function P(e){return[{label:"\u8BE6\u60C5",onClick:Q.bind(null,e)},{label:"\u79BB\u804C",onClick:$.bind(null,e.username),ifShow:()=>e.username!==e.createBy},{label:"\u540C\u610F",onClick:_.bind(null,e.id,"1"),ifShow:()=>(e.status==="3"||e.status==="4")&&e.createBy===C},{label:"\u62D2\u7EDD",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u62D2\u7EDD",confirm:_.bind(null,e.id,"4")},ifShow:()=>e.status==="3"&&e.createBy===C}]}function $(e){b(!0,{userName:e})}function _(e,c){se({userId:e,status:c}).then(u=>{u.success&&y()}).catch(u=>{t.warning(u.message)})}return(e,c)=>{const u=ee("a-button");return te(),oe("div",null,[i(r(X),{onRegister:r(A),rowSelection:r(E)},{tableTitle:f(()=>[i(u,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:x},{default:f(()=>[M(" \u65B0\u589E")]),_:1}),i(O,{"biz-type":"user","selected-row-keys":r(U),syncToApp:"",syncToLocal:"",onSyncFinally:v},null,8,["selected-row-keys"]),i(u,{type:"primary",onClick:c[0]||(c[0]=S=>r(s)(!0,{})),preIcon:"ant-design:user-delete-outlined"},{default:f(()=>[M("\u79BB\u804C\u4FE1\u606F")]),_:1})]),action:f(({record:S})=>[i(r(H),{actions:L(S),dropDownActions:P(S)},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister","rowSelection"]),i(K,{onRegister:r(d),onSuccess:y},null,8,["onRegister"]),i(q,{onRegister:r(g),onSuccess:r(m)},null,8,["onRegister","onSuccess"]),i(G,{onRegister:r(l),onSuccess:r(m)},null,8,["onRegister","onSuccess"])])}}}));export{at as default};
