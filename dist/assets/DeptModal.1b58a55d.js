var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,l=(e,t,o)=>new Promise(((a,r)=>{var l=e=>{try{s(o.next(e))}catch(t){r(t)}},n=e=>{try{s(o.throw(e))}catch(t){r(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);s((o=o.apply(e,t)).next())}));import{B as n}from"./index.ee0a0c33.js";import{B as s}from"./BasicForm.79466d99.js";import"./helper.ec3e26f3.js";import{u as i}from"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import{h as d,T as c,l as p,F as u,bH as m,L as f,o as b,q as g,t as y,v,V as h,z as P,y as j,B as x}from"./index.b3c93d64.js";import{a as I}from"./system.b1ad4fc2.js";const w=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,o=t?"启用":"停用";return d(c,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],B=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],F=[{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentDept",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var O=g(p({name:"DeptModal",components:{BasicModal:n,BasicForm:s},emits:["success","register"],setup(e,{emit:n}){const s=u(!0),[d,{resetFields:c,setFieldsValue:p,updateSchema:g,validate:y}]=i({labelWidth:100,schemas:F,showActionButtonGroup:!1}),[v,{setModalProps:h,closeModal:P}]=m((e=>l(this,null,(function*(){c(),h({confirmLoading:!1}),s.value=!!(null==e?void 0:e.isUpdate),f(s)&&p(((e,l)=>{for(var n in l||(l={}))o.call(l,n)&&r(e,n,l[n]);if(t)for(var n of t(l))a.call(l,n)&&r(e,n,l[n]);return e})({},e.record));const l=yield I();g({field:"parentDept",componentProps:{treeData:l}})}))));return{registerModal:v,registerForm:d,getTitle:b((()=>f(s)?"编辑部门":"新增部门")),handleSubmit:function(){return l(this,null,(function*(){try{yield y();h({confirmLoading:!0}),P(),n("success")}finally{h({confirmLoading:!1})}}))}}}}),[["render",function(e,t,o,a,r,l){const n=y("BasicForm"),s=y("BasicModal");return v(),h(s,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:P((()=>[j(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])}]]),M=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{O as D,M as a,w as c,B as s};
