import e from"./LeftRole.096c97a0.js";import t from"./LeftDepart.b6e6122e.js";import a from"./LeftUser.9d24566a.js";import r from"./AuthFieldTree.34a41fee.js";import o from"./AuthButtonTree.eab0bf45.js";import l from"./AuthDataTree.b16d33ad.js";import{B as n}from"./index.ee0a0c33.js";import{l as d,F as i,o as u,bH as c,f0 as s,Q as f,t as p,v as m,V as b,z as j,y as v,x as h,ax as y,W as g}from"./index.b3c93d64.js";import"./BasicTable.cdd414e6.js";import"./helper.ec3e26f3.js";import"./TableImg.6cb3a734.js";import"./api.dced5d87.js";import"./useListPage.4511beac.js";import"./useTable.4670d269.js";import"./BasicForm.79466d99.js";import"./uniqBy.30d2558a.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";import"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import"./useFormItem.d029403d.js";import"./props.a4f5d1ca.js";import"./index.c4683457.js";import"./bem.3d3e77ca.js";import"./props.c13d8268.js";import"./useContextMenu.de287960.js";import"./index.9bbe419b.js";import"./onMountedOrActivated.d3784e6c.js";import"./index.36d6c198.js";import"./htmlmixed.ba3cd961.js";import"./vue.8c416d71.js";/* empty css             */import"./depart.api.429e062c.js";import"./index.4258d6df.js";import"./useContentHeight.7565ed37.js";import"./useContentViewHeight.d3266665.js";import"./usePageContext.f338fb2a.js";import"./RedoOutlined.c563bb0b.js";import"./functional.3bb51b91.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";import"./index.d2e70b0d.js";import"./index.17ec2e33.js";import"./useCountdown.cb4ad478.js";import"./JUpload.6bcc6fce.js";import"./index.ef2039b9.js";import"./auth.api.d1db9b41.js";import"./auth.data.46f0b0ef.js";var R=Object.defineProperty,S=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t,a)=>new Promise(((r,o)=>{var l=e=>{try{d(a.next(e))}catch(t){o(t)}},n=e=>{try{d(a.throw(e))}catch(t){o(t)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);d((a=a.apply(e,t)).next())}));var _=s(d({name:"AuthSetterModal",components:{BasicModal:n,LeftRole:e,LeftDepart:t,LeftUser:a,AuthFieldTree:r,AuthButtonTree:o,AuthDataTree:l},props:{tableType:{type:Number,default:1}},setup(e){const t=i(""),a=i(!1),r=i("field"),o=i("role"),l={fieldRef:i(),buttonRef:i(),dataRef:i(),roleRef:i(),userRef:i(),departRef:i()},n=i(""),d=u((()=>1==e.tableType||2==e.tableType)),[s,{closeModal:p}]=c((e=>{r.value="field",t.value!=e.cgformId&&(t.value=e.cgformId,function(){M(this,null,(function*(){yield f(),j(),m().clear()}))}())}));function m(e=r.value){var t;return null==(t=l[e+"Ref"])?void 0:t.value}function b(){"role"==o.value?(l.departRef.value.clearSelected(),l.userRef.value.clearSelected()):"depart"==o.value?(l.roleRef.value.clearSelected(),l.userRef.value.clearSelected()):"user"==o.value&&(l.departRef.value.clearSelected(),l.roleRef.value.clearSelected())}function j(){"role"==o.value?l.roleRef.value.clearSelected():"depart"==o.value?l.departRef.value.clearSelected():"user"==o.value&&l.userRef.value.clearSelected(),m().clearChecked()}function v(e){return M(this,null,(function*(){yield f(),n.value&&m(e).loadChecked(n.value,o.value)}))}return h=((e,t)=>{for(var a in t||(t={}))A.call(t,a)&&I(e,a,t[a]);if(x)for(var a of x(t))T.call(t,a)&&I(e,a,t[a]);return e})({},l),S(h,C({cgformId:t,loading:a,activeKey:r,hasDataAuth:d,authMode:o,onAuthModeChange:function(){j()},onAuthTypeChange:v,closeModal:p,onSelectRole:function(e){n.value=e,v(r.value),b()},onSelectDepart:function(e){n.value=e,v(r.value),b()},onSelectUser:function(e){n.value=e,v(r.value),b()},registerModal:s}));var h}}),[["render",function(e,t,a,r,o,l){const n=p("LeftRole"),d=p("a-tab-pane"),i=p("LeftDepart"),u=p("LeftUser"),c=p("a-tabs"),s=p("a-col"),f=p("AuthFieldTree"),R=p("AuthButtonTree"),S=p("AuthDataTree"),C=p("a-row"),x=p("a-spin"),A=p("BasicModal");return m(),b(A,{title:"Online权限授权",width:900,maskClosable:!1,defaultFullscreen:"",okButtonProps:{style:{display:"none"}},cancelText:"关闭",onCancel:e.closeModal,onRegister:e.registerModal},{default:j((()=>[v(x,{spinning:e.loading},{default:j((()=>[v(C,null,{default:j((()=>[v(s,{span:12},{default:j((()=>[v(c,{activeKey:e.authMode,"onUpdate:activeKey":t[0]||(t[0]=t=>e.authMode=t),onChange:e.onAuthModeChange},{default:j((()=>[v(d,{tab:"角色授权",key:"role",forceRender:""},{default:j((()=>[v(n,{ref:"roleRef",onSelect:e.onSelectRole},null,8,["onSelect"])])),_:1}),v(d,{tab:"部门授权",key:"depart",forceRender:""},{default:j((()=>[v(i,{ref:"departRef",onSelect:e.onSelectDepart},null,8,["onSelect"])])),_:1}),v(d,{tab:"人员授权",key:"user",forceRender:""},{default:j((()=>[v(u,{ref:"userRef",onSelect:e.onSelectUser},null,8,["onSelect"])])),_:1})])),_:1},8,["activeKey","onChange"])])),_:1}),v(s,{span:1}),v(s,{span:11},{default:j((()=>[v(c,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t),onChange:e.onAuthTypeChange},{default:j((()=>[v(d,{tab:"字段权限",key:"field",forceRender:""},{default:j((()=>[v(f,{ref:"fieldRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),e.hasDataAuth?(m(),h(y,{key:0},[v(d,{tab:"按钮权限",key:"button",forceRender:""},{default:j((()=>[v(R,{ref:"buttonRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),v(d,{tab:"数据权限",key:"data",forceRender:""},{default:j((()=>[v(S,{ref:"dataRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1})],64)):g("",!0)])),_:1},8,["activeKey","onChange"])])),_:1})])),_:1})])),_:1},8,["spinning"])])),_:1},8,["onCancel","onRegister"])}]]);export{_ as default};
