var b=(e,a,s)=>new Promise((c,m)=>{var i=o=>{try{n(s.next(o))}catch(t){m(t)}},u=o=>{try{n(s.throw(o))}catch(t){m(t)}},n=o=>o.done?c(o.value):Promise.resolve(o.value).then(i,u);n((s=s.apply(e,a)).next())});import{l as v,cF as y,bZ as F,aA as _,s as B,dV as D,F as I,dW as w,a7 as R,q as S,dX as A,ab as V,d5 as z,dY as E,t as p,v as N,V as $,z as r,y as l,C as k,D as L,u as T,dZ as M}from"./index.b3d2a891.js";import{C as O}from"./index.792f7f1c.js";import"./useCountdown.a4eb9495.js";import"./useFormItem.c06072f5.js";const U=v({name:"step1",components:{Button:y,Form:F,FormItem:F.Item,Input:_,CountdownInput:O},emits:["nextStep"],setup(e,{emit:a}){const{t:s}=B(),{handleBackLogin:c}=D(),{notification:m}=T(),i=I(),{validForm:u}=M(i),{getFormRules:n}=w(),o=I(!1),t=R({mobile:"",sms:""});function C(){return b(this,null,function*(){const f=yield u();if(!f)return;const g=yield A(V({phone:f.mobile,smscode:f.sms}));if(g.success){let h={username:g.result.username,phone:f.mobile,smscode:g.result.smscode};a("nextStep",h)}else m.error({message:s("sys.api.errorTip"),description:g.message||s("sys.api.networkExceptionMsg"),duration:3})})}function d(){return z({mobile:t.mobile,smsmode:E.FORGET_PASSWORD})}return{t:s,formRef:i,formData:t,getFormRules:n,handleNext:C,loading:o,handleBackLogin:c,sendCodeApi:d}}}),W=k(" \u4E0B\u4E00\u6B65 ");function Z(e,a,s,c,m,i){const u=p("Input"),n=p("FormItem"),o=p("CountdownInput"),t=p("Button"),C=p("Form");return N(),$(C,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:r(()=>[l(n,{name:"mobile",class:"enter-x"},{default:r(()=>[l(u,{size:"large",value:e.formData.mobile,"onUpdate:value":a[0]||(a[0]=d=>e.formData.mobile=d),placeholder:e.t("sys.login.mobile")},null,8,["value","placeholder"])]),_:1}),l(n,{name:"sms",class:"enter-x"},{default:r(()=>[l(o,{size:"large",value:e.formData.sms,"onUpdate:value":a[1]||(a[1]=d=>e.formData.sms=d),placeholder:e.t("sys.login.smsCode"),sendCodeApi:e.sendCodeApi},null,8,["value","placeholder","sendCodeApi"])]),_:1}),l(n,{class:"enter-x"},{default:r(()=>[l(t,{type:"primary",size:"large",block:"",onClick:e.handleNext,loading:e.loading},{default:r(()=>[W]),_:1},8,["onClick","loading"]),l(t,{size:"large",block:"",class:"mt-4",onClick:e.handleBackLogin},{default:r(()=>[k(L(e.t("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}var Y=S(U,[["render",Z]]);export{Y as default};
