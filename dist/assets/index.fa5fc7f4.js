var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,n=(e,s,t)=>new Promise(((o,r)=>{var a=e=>{try{n(t.next(e))}catch(s){r(s)}},i=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,s)).next())}));import{B as l}from"./BasicTable.0748ea8a.js";import{T as c}from"./helper.1c9dc9a5.js";import"./TableImg.e204e8e3.js";import{a as m}from"./index.65c1cb1a.js";import{useListPage as d}from"./useListPage.26849a0d.js";import{c as p,s as u,_ as f}from"./ManageDrawer.92bab2ab.js";import{a1 as j,u as g,l as b,o as y,t as x,v as w,x as v,y as h,z as C,L as M,V as O,W as P,E as B,aW as T}from"./index.435ab247.js";import"./BasicForm.d9f6c231.js";import"./uniqBy.91f18935.js";import"./index.e1e06dd6.js";import"./BasicModal.c66de981.js";import"./useWindowSizeFn.3d5b1a05.js";import"./useForm.45d68074.js";import"./JAddInput.8c125e2c.js";import"./useFormItem.816007c4.js";import"./api.bc301b0f.js";import"./props.5467b933.js";import"./index.713dc63d.js";import"./bem.0e923c54.js";import"./props.37836c63.js";import"./useContextMenu.82ce6d89.js";import"./index.e1ec35e6.js";import"./onMountedOrActivated.e9ddbd41.js";import"./index.627c6cd3.js";import"./htmlmixed.749cbc8c.js";import"./vue.f62dfd4a.js";/* empty css             */import"./depart.api.c07add53.js";import"./index.4cdbd2ab.js";import"./useContentHeight.60ff243a.js";import"./useContentViewHeight.f55d8457.js";import"./usePageContext.56c44530.js";import"./RedoOutlined.9fc7613c.js";import"./functional.be5901d6.js";import"./download.5dc68cfb.js";import"./base64Conver.030fa32c.js";import"./index.a5502478.js";import"./index.64086148.js";import"./useCountdown.adc4ab77.js";import"./JUpload.e164672b.js";import"./index.cdc49bf1.js";import"./useTable.6359f662.js";const{createConfirm:R}=g();var S=(e=>(e.list="/sys/message/sysMessage/list",e.delete="/sys/message/sysMessage/delete",e.deleteBatch="/sys/message/sysMessage/deleteBatch",e.exportXls="sys/message/sysMessage/exportXls",e.importXls="sys/message/sysMessage/importExcel",e.save="/sys/message/sysMessage/add",e.edit="/sys/message/sysMessage/edit",e))(S||{});const _=e=>j.get({url:"/sys/message/sysMessage/list",params:e});const k=T("span",null,"删除",-1),D=T("span",null,"批量操作",-1),I=b({name:"message-manage"}),X=b((A=((e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(o)for(var t of o(s))a.call(s,t)&&i(e,t,s[t]);return e})({},I),s(A,t({setup(e){const{prefixCls:s,tableContext:t}=d({designScope:"message-manage",tableProps:{title:"消息中心模板列表数据",api:_,columns:p,formConfig:{schemas:u}},exportConfig:{url:S.exportXls,name:"消息中心模板列表"},importConfig:{url:S.importXls,success:()=>r()}}),[o,{reload:r,setLoading:a},{rowSelection:i,selectedRowKeys:g}]=t,b=y((()=>g.value.length>0)),[T,{openDrawer:I}]=m();function X(e){I(!0,{record:e})}function A(e){e&&E([e.id],!1)}function F(){return n(this,null,(function*(){try{yield E(g),g.value=[]}finally{}}))}function E(e,s=!0){return n(this,null,(function*(){const t=M(e);if(t.length>0)try{a(!0),yield((e,s=!1)=>new Promise(((t,o)=>{const r=()=>{t(j.delete({url:"/sys/message/sysMessage/deleteBatch",params:e},{joinParamsToUrl:!0}))};s?R({iconType:"warning",title:"删除",content:"确定要删除吗？",onOk:()=>r(),onCancel:()=>o()}):r()})))({ids:t.join(",")},s),yield r()}finally{a(!1)}}))}function L(e){return[{label:"详情",onClick:X.bind(null,e)}]}function W(e){return[{label:"删除",color:"error",popConfirm:{title:"确认要删除吗？",confirm:A.bind(null,e)}}]}return(e,t)=>{const r=x("Icon"),a=x("a-menu-item"),n=x("a-menu"),m=x("a-button"),d=x("a-dropdown");return w(),v("div",{class:B(M(s))},[h(M(l),{onRegister:M(o),rowSelection:M(i)},{tableTitle:C((()=>[M(b)?(w(),O(d,{key:0},{overlay:C((()=>[h(n,null,{default:C((()=>[h(a,{key:"1",onClick:F},{default:C((()=>[h(r,{icon:"ant-design:delete-outlined"}),k])),_:1})])),_:1})])),default:C((()=>[h(m,null,{default:C((()=>[D,h(r,{icon:"mdi:chevron-down"})])),_:1})])),_:1})):P("",!0)])),action:C((({record:e})=>[h(M(c),{actions:L(e),dropDownActions:W(e)},null,8,["actions","dropDownActions"])])),_:1},8,["onRegister","rowSelection"]),h(f,{onRegister:M(T)},null,8,["onRegister"])],2)}}}))));var A;export{X as default};
