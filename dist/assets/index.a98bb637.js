var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,n=(e,s,t)=>new Promise(((o,r)=>{var a=e=>{try{n(t.next(e))}catch(s){r(s)}},i=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,s)).next())}));import{B as l}from"./BasicTable.fa29c153.js";import{T as d}from"./helper.c50e6850.js";import"./TableImg.2942a3dc.js";import{a as m}from"./index.5cedb984.js";import{useListPage as p}from"./useListPage.ddd6479e.js";import{c,s as u,_ as f}from"./ManageDrawer.e42d61d8.js";import{a1 as j,u as g,l as b,o as y,t as x,v as w,x as v,y as h,z as C,L as M,V as O,W as P,E as B,aW as T}from"./index.b2c24a42.js";import"./BasicForm.fb9b9310.js";import"./uniqBy.be1d69f1.js";import"./index.12c6f6d1.js";import"./BasicModal.c95a44ff.js";import"./useWindowSizeFn.6c0c5931.js";import"./useForm.5a9ed278.js";import"./JAddInput.2ba637e0.js";import"./useFormItem.9110ec70.js";import"./api.e26748d3.js";import"./props.4a0f18d3.js";import"./index.27a29657.js";import"./bem.a0439036.js";import"./props.d4c4f199.js";import"./useContextMenu.0c34a59e.js";import"./index.9872fa51.js";import"./onMountedOrActivated.bfdd028b.js";import"./index.d802f44f.js";import"./htmlmixed.8e042aa6.js";import"./vue.bbfa1b85.js";/* empty css             */import"./depart.api.2d5bb309.js";import"./index.7e26b7de.js";import"./useContentHeight.aae13605.js";import"./useContentViewHeight.879059d9.js";import"./usePageContext.174066c3.js";import"./RedoOutlined.4dd49301.js";import"./functional.d6fe070d.js";import"./download.0dd0b191.js";import"./base64Conver.030fa32c.js";import"./index.de682914.js";import"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./JUpload.152dd3a7.js";import"./index.be1c9e2b.js";import"./useTable.fb0dd6ed.js";const{createConfirm:R}=g();var S=(e=>(e.list="/sys/message/sysMessage/list",e.delete="/sys/message/sysMessage/delete",e.deleteBatch="/sys/message/sysMessage/deleteBatch",e.exportXls="sys/message/sysMessage/exportXls",e.importXls="sys/message/sysMessage/importExcel",e.save="/sys/message/sysMessage/add",e.edit="/sys/message/sysMessage/edit",e))(S||{});const _=e=>j.get({url:"/sys/message/sysMessage/list",params:e});const k=T("span",null,"删除",-1),D=T("span",null,"批量操作",-1),I=b({name:"message-manage"}),X=b((A=((e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(o)for(var t of o(s))a.call(s,t)&&i(e,t,s[t]);return e})({},I),s(A,t({setup(e){const{prefixCls:s,tableContext:t}=p({designScope:"message-manage",tableProps:{title:"消息中心模板列表数据",api:_,columns:c,formConfig:{schemas:u}},exportConfig:{url:S.exportXls,name:"消息中心模板列表"},importConfig:{url:S.importXls,success:()=>r()}}),[o,{reload:r,setLoading:a},{rowSelection:i,selectedRowKeys:g}]=t,b=y((()=>g.value.length>0)),[T,{openDrawer:I}]=m();function X(e){I(!0,{record:e})}function A(e){e&&E([e.id],!1)}function F(){return n(this,null,(function*(){try{yield E(g),g.value=[]}finally{}}))}function E(e,s=!0){return n(this,null,(function*(){const t=M(e);if(t.length>0)try{a(!0),yield((e,s=!1)=>new Promise(((t,o)=>{const r=()=>{t(j.delete({url:"/sys/message/sysMessage/deleteBatch",params:e},{joinParamsToUrl:!0}))};s?R({iconType:"warning",title:"删除",content:"确定要删除吗？",onOk:()=>r(),onCancel:()=>o()}):r()})))({ids:t.join(",")},s),yield r()}finally{a(!1)}}))}function L(e){return[{label:"详情",onClick:X.bind(null,e)}]}function W(e){return[{label:"删除",color:"error",popConfirm:{title:"确认要删除吗？",confirm:A.bind(null,e)}}]}return(e,t)=>{const r=x("Icon"),a=x("a-menu-item"),n=x("a-menu"),m=x("a-button"),p=x("a-dropdown");return w(),v("div",{class:B(M(s))},[h(M(l),{onRegister:M(o),rowSelection:M(i)},{tableTitle:C((()=>[M(b)?(w(),O(p,{key:0},{overlay:C((()=>[h(n,null,{default:C((()=>[h(a,{key:"1",onClick:F},{default:C((()=>[h(r,{icon:"ant-design:delete-outlined"}),k])),_:1})])),_:1})])),default:C((()=>[h(m,null,{default:C((()=>[D,h(r,{icon:"mdi:chevron-down"})])),_:1})])),_:1})):P("",!0)])),action:C((({record:e})=>[h(M(d),{actions:L(e),dropDownActions:W(e)},null,8,["actions","dropDownActions"])])),_:1},8,["onRegister","rowSelection"]),h(f,{onRegister:M(T)},null,8,["onRegister"])],2)}}}))));var A;export{X as default};
