var ge=Object.defineProperty,me=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var J=(c,u,n)=>u in c?ge(c,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[u]=n,Y=(c,u)=>{for(var n in u||(u={}))pe.call(u,n)&&J(c,n,u[n]);if(X)for(var n of X(u))_e.call(u,n)&&J(c,n,u[n]);return c},Z=(c,u)=>me(c,fe(u));var L=(c,u,n)=>new Promise((C,v)=>{var M=r=>{try{F(n.next(r))}catch(b){v(b)}},s=r=>{try{F(n.throw(r))}catch(b){v(b)}},F=r=>r.done?C(r.value):Promise.resolve(r.value).then(M,s);F((n=n.apply(c,u)).next())});import{j as se,l as ve,cM as he,o as ye,ej as xe,a7 as q,C as m,eC as ke,X as Ce,r as E,s as _,t as y,v as t,H as o,ek as be,el as we,aW as e,N as D,O as K,B as x,z as f,Q as ee,w as k,b_ as A,y as Ie,en as Se,ab as Te,db as Le,ef as Me,dt as Fe,du as Re,u as Be,q as $e}from"./index.c1d8dbc8.js";import{c as Ee}from"./checkcode.26910ff2.js";import De from"./ThirdModal.6d9fc0ec.js";import Ke from"./MiniForgotpad.2d9d60a2.js";import Ue from"./MiniRegister.668148d8.js";import Ne from"./MiniCodelogin.aaa01d15.js";import{a as je}from"./jeecg_ad_text.73024f5b.js";import{c as Pe,D as Oe}from"./IconFont.31095ac8.js";import{G as qe}from"./GithubFilled.125a1689.js";import{W as Ae}from"./WechatFilled.85b96b6c.js";import"./index.9b215829.js";import"./useCountdown.5186f11f.js";import"./useFormItem.6935557d.js";import"./useThirdLogin.484efb2e.js";import"./index.4ae69f0e.js";import"./download.f2b87928.js";import"./base64Conver.030fa32c.js";const oe="/assets/jeecg_logo.f622e7d4.png",G=c=>(Fe("data-v-7bf0ffd1"),c=c(),Re(),c),Ge={key:0,class:"aui-logo"},He=["src"],We={key:1,class:"aui-phone-logo"},ze=["src"],Ve={class:"aui-content"},Qe={class:"aui-container"},Xe={class:"aui-form"},Je={class:"aui-image"},Ye={class:"aui-image-text"},Ze=["src"],eo={class:"aui-formBox"},oo={class:"aui-formWell"},so={class:"aui-flex aui-form-nav investment_title"},io={class:"aui-form-box",style:{height:"180px"}},no={class:"aui-account"},to={class:"aui-inputClear"},ao=G(()=>e("i",{class:"icon icon-code"},null,-1)),lo={class:"aui-inputClear"},co=G(()=>e("i",{class:"icon icon-password"},null,-1)),uo={class:"aui-inputClear"},ro=G(()=>e("i",{class:"icon icon-code"},null,-1)),go={class:"aui-code"},mo=["src"],fo=["src"],po={class:"aui-flex"},_o={class:"aui-flex-box"},vo={class:"aui-choice"},ho={style:{"margin-left":"5px"}},yo={class:"aui-forget"},xo={class:"aui-account phone"},ko={class:"aui-inputClear phoneClear"},Co={class:"aui-inputClear"},bo={key:1,class:"aui-code"},wo={class:"aui-get-code code-shape"},Io={class:"aui-formButton"},So={class:"aui-flex"},To={class:"aui-flex"},Lo={class:"aui-flex"},Mo={class:"aui-flex aui-third-text"},Fo={class:"aui-flex-box aui-third-border"},Ro={class:"aui-flex-box"},Bo={class:"aui-third-login"},$o={class:"aui-flex-box"},Eo={class:"aui-third-login"},Do={class:"aui-flex-box"},Ko={class:"aui-third-login"},Uo={class:"aui-flex-box"},No={class:"aui-third-login"},jo=se({name:"login-mini"}),Po=se(Z(Y({},jo),{props:{sessionTimeout:{type:Boolean}},setup(c){const u=Pe({scriptUrl:"//at.alicdn.com/t/font_2316098_umqusozousr.js"}),{prefixCls:n}=ve("mini-login"),{notification:C,createMessage:v}=Be(),M=he(),{t:s}=ye();xe().getShowPicker;const r=q({randCodeImage:"",requestCodeSuccess:!1,checkKey:null}),b=m("0"),h=m("accountLogin"),p=m("login"),d=q({inputCode:"",username:"admin",password:"123456"}),g=q({mobile:"",smscode:""}),ie=m(),H=m(),W=m(),U=m(!0),w=m(60),R=m(null),z=m(),V=m(),S=m(!1),{getIsMobile:ne}=ke();function T(){d.inputCode="",r.checkKey=1629428467008,Se(r.checkKey).then(a=>{r.randCodeImage=a,r.requestCodeSuccess=!0})}function Q(a){h.value=a}function B(){return L(this,null,function*(){o(h)==="accountLogin"?te():ae()})}function te(){return L(this,null,function*(){if(!d.username){v.warn(s("sys.login.accountPlaceholder"));return}if(!d.password){v.warn(s("sys.login.passwordPlaceholder"));return}try{S.value=!0;const{userInfo:a}=yield M.login(Te({password:d.password,username:d.username,captcha:d.inputCode,checkKey:r.checkKey,mode:"none"}));a&&C.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){C.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3}),T()}finally{S.value=!1}})}function ae(){return L(this,null,function*(){if(!g.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}if(!g.smscode){v.warn(s("sys.login.smsPlaceholder"));return}try{S.value=!0;const{userInfo:a}=yield M.phoneLogin({mobile:g.mobile,captcha:g.smscode,mode:"none"});a&&C.success({message:s("sys.login.loginSuccessTitle"),description:`${s("sys.login.loginSuccessDesc")}: ${a.realname}`,duration:3})}catch(a){C.error({message:s("sys.api.errorTip"),description:a.message||s("sys.login.networkExceptionMsg"),duration:3})}finally{S.value=!1}})}function le(){return L(this,null,function*(){if(!g.mobile){v.warn(s("sys.login.mobilePlaceholder"));return}(yield Le({mobile:g.mobile,smsmode:Me.FORGET_PASSWORD}))&&(o(R)||(w.value=60,U.value=!1,R.value=setInterval(()=>{o(w)>0&&o(w)<=60?w.value=w.value-1:(U.value=!0,clearInterval(o(R)),R.value=null)},1e3)))})}function $(a){H.value.onThirdLogin(a)}function ce(){p.value="forgot",setTimeout(()=>{z.value.initForm()},300)}function N(){h.value="accountLogin",p.value="login"}function j(a){Object.assign(d,a),Object.assign(g,{mobile:"",smscode:""}),p.value="login",h.value="accountLogin",T()}function ue(){p.value="register",setTimeout(()=>{V.value.initForm()},300)}function re(){p.value="codeLogin",setTimeout(()=>{W.value.initFrom()},300)}return Ce(()=>{T()}),(a,i)=>{const I=E("a-input"),P=E("a-form-item"),O=E("a-form"),de=E("a-button");return _(),y("div",{class:x([o(n),"login-background-img"])},[t(o(be),{class:"absolute top-4 right-4 enter-x xl:text-gray-600",showText:!1}),t(o(we),{class:"absolute top-3 right-7 enter-x"}),o(ne)?(_(),y("div",We,[e("img",{src:o(oe),alt:"jeecg"},null,8,ze)])):(_(),y("div",Ge,[e("div",null,[e("h3",null,[e("img",{src:o(oe),alt:"jeecg"},null,8,He)])])])),D(e("div",null,[e("div",Ve,[e("div",Qe,[e("div",Xe,[e("div",Je,[e("div",Ye,[e("img",{src:o(je)},null,8,Ze)])]),e("div",eo,[e("div",oo,[e("div",so,[e("div",{class:x(["aui-flex-box",h.value==="accountLogin"?"activeNav on":""]),onClick:i[0]||(i[0]=l=>Q("accountLogin"))},f(o(s)("sys.login.signInFormTitle")),3),e("div",{class:x(["aui-flex-box",h.value==="phoneLogin"?"activeNav on":""]),onClick:i[1]||(i[1]=l=>Q("phoneLogin"))},f(o(s)("sys.login.mobileSignInFormTitle")),3)]),e("div",io,[h.value==="accountLogin"?(_(),ee(O,{key:0,ref_key:"loginRef",ref:ie,model:d,onKeyup:A(B,["enter","native"])},{default:k(()=>[e("div",no,[e("div",to,[ao,t(P,null,{default:k(()=>[t(I,{class:"fix-auto-fill",placeholder:o(s)("sys.login.userName"),value:d.username,"onUpdate:value":i[2]||(i[2]=l=>d.username=l)},null,8,["placeholder","value"])]),_:1})]),e("div",lo,[co,t(P,null,{default:k(()=>[t(I,{class:"fix-auto-fill",type:"password",placeholder:o(s)("sys.login.password"),value:d.password,"onUpdate:value":i[3]||(i[3]=l=>d.password=l)},null,8,["placeholder","value"])]),_:1})]),e("div",uo,[ro,t(P,null,{default:k(()=>[t(I,{class:"fix-auto-fill",type:"text",placeholder:o(s)("sys.login.inputCode"),value:d.inputCode,"onUpdate:value":i[4]||(i[4]=l=>d.inputCode=l)},null,8,["placeholder","value"])]),_:1}),e("div",go,[r.requestCodeSuccess?(_(),y("img",{key:0,src:r.randCodeImage,onClick:T},null,8,mo)):(_(),y("img",{key:1,style:{"margin-top":"2px","max-width":"initial"},src:o(Ee),onClick:T},null,8,fo))])]),e("div",po,[e("div",_o,[e("div",vo,[t(I,{class:"fix-auto-fill",type:"checkbox",value:b.value,"onUpdate:value":i[5]||(i[5]=l=>b.value=l)},null,8,["value"]),e("span",ho,f(o(s)("sys.login.rememberMe")),1)])]),e("div",yo,[e("a",{onClick:ce},f(o(s)("sys.login.forgetPassword")),1)])])])]),_:1},8,["model","onKeyup"])):(_(),ee(O,{key:1,ref:"phoneFormRef",model:g,onKeyup:A(B,["enter","native"])},{default:k(()=>[e("div",xo,[e("div",ko,[t(I,{class:"fix-auto-fill",placeholder:o(s)("sys.login.mobile"),value:g.mobile,"onUpdate:value":i[6]||(i[6]=l=>g.mobile=l)},null,8,["placeholder","value"])]),e("div",Co,[t(I,{class:"fix-auto-fill",maxlength:6,placeholder:o(s)("sys.login.smsCode"),value:g.smscode,"onUpdate:value":i[7]||(i[7]=l=>g.smscode=l)},null,8,["placeholder","value"]),U.value?(_(),y("div",{key:0,class:"aui-code",onClick:le},[e("a",null,f(o(s)("component.countdown.normalText")),1)])):(_(),y("div",bo,[e("span",wo,f(o(s)("component.countdown.sendText",[o(w.value)])),1)]))])])]),_:1},8,["model","onKeyup"]))]),e("div",Io,[e("div",So,[t(de,{loading:S.value,class:"aui-link-login aui-flex-box",type:"primary",onClick:B},{default:k(()=>[Ie(f(o(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),e("div",To,[e("a",{class:"aui-linek-code aui-flex-box",onClick:re},f(o(s)("sys.login.qrSignInFormTitle")),1)]),e("div",Lo,[e("a",{class:"aui-linek-code aui-flex-box",onClick:ue},f(o(s)("sys.login.registerButton")),1)])])]),t(O,{onKeyup:A(B,["enter","native"])},{default:k(()=>[e("div",Mo,[e("div",Fo,[e("span",null,f(o(s)("sys.login.otherSignIn")),1)])]),e("div",{class:x(["aui-flex",`${o(n)}-sign-in-way`])},[e("div",Ro,[e("div",Bo,[e("a",{title:"github",onClick:i[8]||(i[8]=l=>$("github"))},[t(o(qe))])])]),e("div",$o,[e("div",Eo,[e("a",{title:"\u4F01\u4E1A\u5FAE\u4FE1",onClick:i[9]||(i[9]=l=>$("wechat_enterprise"))},[t(o(u),{class:"item-icon",type:"icon-qiyeweixin3"})])])]),e("div",Do,[e("div",Ko,[e("a",{title:"\u9489\u9489",onClick:i[10]||(i[10]=l=>$("dingtalk"))},[t(o(Oe))])])]),e("div",Uo,[e("div",No,[e("a",{title:"\u5FAE\u4FE1",onClick:i[11]||(i[11]=l=>$("wechat_open"))},[t(o(Ae))])])])],2)]),_:1},8,["onKeyup"])])])])])],512),[[K,p.value==="login"]]),D(e("div",{class:x(`${o(n)}-form`)},[t(Ke,{ref_key:"forgotRef",ref:z,onGoBack:N,onSuccess:j},null,512)],2),[[K,p.value==="forgot"]]),D(e("div",{class:x(`${o(n)}-form`)},[t(Ue,{ref_key:"registerRef",ref:V,onGoBack:N,onSuccess:j},null,512)],2),[[K,p.value==="register"]]),D(e("div",{class:x(`${o(n)}-form`)},[t(Ne,{ref_key:"codeRef",ref:W,onGoBack:N,onSuccess:j},null,512)],2),[[K,p.value==="codeLogin"]]),t(De,{ref_key:"thirdModalRef",ref:H},null,512)],2)}}}));const ts=$e(Po,[["__scopeId","data-v-7bf0ffd1"]]);export{ts as default};
