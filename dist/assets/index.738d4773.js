import{dL as e,fL as a,o as t,ac as n,L as o,l as r,q as s,t as i,v as u,x as m,ax as g,bc as c,R as d,S as l,V as f,W as p,ap as h,fP as P,y,z as L,dE as F,fQ as C,n as b,m as w,$ as T,aV as S,E as x}from"./index.435ab247.js";import R from"./index.6d8e331e.js";import{useMultipleTabSetting as v}from"./useMultipleTabSetting.0b8ec692.js";import{u as k}from"./uniqBy.91f18935.js";import{a as j}from"./useContentViewHeight.f55d8457.js";import"./useWindowSizeFn.3d5b1a05.js";import"./usePageContext.56c44530.js";const E=r({name:"FrameLayout",components:{FramePage:R},setup(){const{getFramePages:r,hasRenderFrame:s,showIframe:i}=function(){const r=e(),{currentRoute:s}=r,{getShowMultipleTab:i}=v(),u=a(),m=t((()=>c(n(r.getRoutes()))||[])),g=t((()=>u.getTabList.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.name),e)),[])));function c(e){let a=[];for(const t of e){const{meta:{frameSrc:e}={},children:n}=t;e&&a.push(t),n&&n.length&&a.push(...c(n))}return a=k(a,"name"),a}return{hasRenderFrame:function(e){return o(i)?o(g).includes(e):r.currentRoute.value.name===e},getFramePages:m,showIframe:function(e){return e.name===o(s).name},getAllFramePages:c}}(),u=t((()=>o(r).length>0));return{getFramePages:r,hasRenderFrame:s,showIframe:i,showFrame:u}}}),I={key:0};function M({route:e,openCache:a,cacheTabs:t,enableTransition:n,def:o}){if(!n)return;const r=t.includes(e.name),s="fade-slide";let i=s;return a&&(i=r&&e.meta.loaded?s:void 0),i||e.meta.transitionName||o}const K=r({name:"PageLayout",components:{FrameLayout:s(E,[["render",function(e,a,t,n,o,r){const s=i("FramePage");return e.showFrame?(u(),m("div",I,[(u(!0),m(g,null,c(e.getFramePages,(a=>(u(),m(g,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.name)?d((u(),f(s,{key:0,frameSrc:a.meta.frameSrc},null,8,["frameSrc"])),[[l,e.showIframe(a)]]):p("",!0)],64)))),128))])):p("",!0)}]])},setup(){const{getShowMultipleTab:e}=v(),n=a(),{getOpenKeepAlive:r,getCanEmbedIFramePage:s}=h(),{getBasicTransition:i,getEnableTransition:u}=P();return{getTransitionName:M,openCache:t((()=>o(r)&&o(e))),getEnableTransition:u,getBasicTransition:i,getCaches:t((()=>o(r)?n.getCachedTabList:[])),getCanEmbedIFramePage:s}}});const O=r({name:"LayoutContent",components:{PageLayout:s(K,[["render",function(e,a,t,n,o,r){const s=i("RouterView"),c=i("FrameLayout");return u(),m(g,null,[y(s,null,{default:L((({Component:a,route:t})=>[e.openCache?(u(),f(C,{key:0,include:e.getCaches},[(u(),f(F(a),{key:t.fullPath}))],1032,["include"])):(u(),f(F(a),{key:t.fullPath}))])),_:1}),e.getCanEmbedIFramePage?(u(),f(c,{key:0})):p("",!0)],64)}]])},setup(){const{prefixCls:e}=b("layout-content"),{getOpenPageLoading:a}=P(),{getLayoutContentMode:t,getPageLoading:n}=h(),o=w().openQianKun;return j(),T((()=>{})),{prefixCls:e,openQianKun:o,getOpenPageLoading:a,getLayoutContentMode:t,getPageLoading:n}}}),Q={key:0,id:"content",class:"app-view-box"};var V=s(O,[["render",function(e,a,t,n,o,r){const s=i("PageLayout"),g=S("loading");return d((u(),m("div",{class:x([e.prefixCls,e.getLayoutContentMode])},[y(s),"true"==e.openQianKun?(u(),m("div",Q)):p("",!0)],2)),[[g,e.getOpenPageLoading&&e.getPageLoading]])}]]);export{V as default};
