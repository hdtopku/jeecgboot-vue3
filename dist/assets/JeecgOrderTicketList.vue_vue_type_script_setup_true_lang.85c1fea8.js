var m=(g,c,i)=>new Promise((p,u)=>{var d=e=>{try{r(i.next(e))}catch(n){u(n)}},h=e=>{try{r(i.throw(e))}catch(n){u(n)}},r=e=>e.done?p(e.value):Promise.resolve(e.value).then(d,h);r((i=i.apply(g,c)).next())});import A from"./BasicTable.24085ffb.js";import{T as M}from"./helper.f767d3be.js";import"./BasicTable.vue_vue_type_style_index_0_lang.e39809a9.js";import"./TableImg.vue_vue_type_style_index_0_lang.0231a34e.js";import{j,bj as z,bI as D,E as K,K as o,r as l,s as C,t as L,v as t,w as a,y as f,Q as N,R as V,i as O,u as P}from"./index.6a7efbe3.js";import{_ as U}from"./JeecgOrderTicketModal.vue_vue_type_script_setup_true_lang.0a37aa4b.js";import{useListPage as $}from"./useListPage.842690ee.js";import"./index.822d1710.js";import{t as H,f as J,g as Q,h as q}from"./erplist.api.dc1c41c7.js";const ie=j({__name:"JeecgOrderTicketList",setup(g){const c=z("orderId"),i=P(),[p,{openModal:u}]=D(),d={},{prefixCls:h,tableContext:r}=$({tableProps:{api:H,tableSetting:{cacheKey:"ticket"},columns:J,canResize:!1,useSearchForm:!1,actionColumn:{width:180},pagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20"]}}}),[e,{reload:n},{rowSelection:k,selectedRowKeys:_}]=r;K(c,()=>{d.orderId=o(c),n()});function y(){if(O(o(c))){i.createMessage.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u8BA2\u5355\u4FE1\u606F");return}u(!0,{isUpdate:!1,showFooter:!0})}function F(s){return m(this,null,function*(){u(!0,{record:s,isUpdate:!0,showFooter:!0})})}function E(s){return m(this,null,function*(){yield q({id:s.id},n)})}function T(){return m(this,null,function*(){yield Q({ids:_.value},()=>{_.value=[],n()})})}function B(){n()}function S(s){return[{label:"\u7F16\u8F91",onClick:F.bind(null,s)},{label:"\u5220\u9664",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:E.bind(null,s)}}]}return(s,G)=>{const b=l("a-button"),w=l("Icon"),I=l("a-menu-item"),v=l("a-menu"),R=l("a-dropdown");return C(),L("div",null,[t(o(A),{onRegister:o(e),rowSelection:o(k),searchInfo:d},{tableTitle:a(()=>[t(b,{type:"primary",preIcon:"ant-design:plus-outlined",onClick:y},{default:a(()=>[f(" \u65B0\u589E")]),_:1}),o(_).length>0?(C(),N(R,{key:0},{overlay:a(()=>[t(v,null,{default:a(()=>[t(I,{key:"1",onClick:T},{default:a(()=>[t(w,{icon:"ant-design:delete-outlined"}),f(" \u5220\u9664 ")]),_:1})]),_:1})]),default:a(()=>[t(b,null,{default:a(()=>[f("\u6279\u91CF\u64CD\u4F5C "),t(w,{icon:"mdi:chevron-down"})]),_:1})]),_:1})):V("",!0)]),action:a(({record:x})=>[t(o(M),{actions:S(x)},null,8,["actions"])]),_:1},8,["onRegister","rowSelection"]),t(U,{onRegister:o(p),onSuccess:B},null,8,["onRegister"])])}}});export{ie as _};
