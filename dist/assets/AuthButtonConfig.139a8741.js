import{B as e}from"./BasicTable.cdd414e6.js";import"./helper.ec3e26f3.js";import"./TableImg.6cb3a734.js";import{u as t}from"./useTable.4670d269.js";import{d as o,e as s,f as i}from"./auth.api.d1db9b41.js";import{b as a,c as r}from"./auth.data.46f0b0ef.js";import{l as n,F as d,H as u,f0 as c,t as p,v as m,x as l,y as j,z as b,C as f}from"./index.b3c93d64.js";import{b as h}from"./_baseClone.a8082016.js";import"./_arrayPush.8821345e.js";import"./isArray.40a4ed15.js";import"./BasicForm.79466d99.js";import"./uniqBy.30d2558a.js";import"./index.ee0a0c33.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";import"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import"./useFormItem.d029403d.js";import"./api.dced5d87.js";import"./props.a4f5d1ca.js";import"./index.c4683457.js";import"./bem.3d3e77ca.js";import"./props.c13d8268.js";import"./useContextMenu.de287960.js";import"./index.9bbe419b.js";import"./onMountedOrActivated.d3784e6c.js";import"./index.36d6c198.js";import"./htmlmixed.ba3cd961.js";import"./vue.8c416d71.js";/* empty css             */import"./depart.api.429e062c.js";import"./index.4258d6df.js";import"./useContentHeight.7565ed37.js";import"./useContentViewHeight.d3266665.js";import"./usePageContext.f338fb2a.js";import"./RedoOutlined.c563bb0b.js";import"./functional.3bb51b91.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";import"./index.d2e70b0d.js";import"./index.17ec2e33.js";import"./useCountdown.cb4ad478.js";import"./JUpload.6bcc6fce.js";import"./index.ef2039b9.js";var g=(e,t,o)=>new Promise(((s,i)=>{var a=e=>{try{n(o.next(e))}catch(t){i(t)}},r=e=>{try{n(o.throw(e))}catch(t){i(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);n((o=o.apply(e,t)).next())}));const v=n({name:"AuthButtonConfig",components:{BasicTable:e},props:{headId:{type:String,default:"",required:!0}},setup(e){const n=d(""),c=d(2),p=d(3),m=d(5),[l,{reload:j}]=t({api:function(e){return g(this,null,(function*(){let t=yield o(n.value,e),{authList:s,buttonList:i}=t,a=[];for(let e of h(r,5)){let t={status:0,page:p.value},o=s.find((t=>t.code==e.code));Object.assign(e,t,o),a.push(e)}return function(e,t,o){for(let s of t){let t=e.find((e=>e.code==s.buttonCode)),i={code:s.buttonCode,title:s.buttonName,status:0,page:"form"==s.buttonStyle?m.value:p.value};o.push(Object.assign(i,t))}return o}(s,i,a)}))},rowKey:"code",bordered:!0,columns:a,showIndexColumn:!1});return u((()=>e.headId),(e=>{n.value=e.split("?")[0],j().catch((()=>null))}),{immediate:!0}),{registerTable:l,onUpdateStatus:function(e,t){return g(this,null,(function*(){e?function(e){g(this,null,(function*(){let t=yield s({id:e.id,code:e.code,page:e.page,cgformId:n.value,type:c.value,control:5,status:1});e.id=t.id,e.status=1}))}(t):function(e){g(this,null,(function*(){yield i(e.id),e.status=0}))}(t)}))}}}}),x={class:"auth-field-config"};var y=c(v,[["render",function(e,t,o,s,i,a){const r=p("a-switch"),n=p("BasicTable");return m(),l("div",x,[j(n,{onRegister:e.registerTable},{switch:b((({text:t,record:o})=>[j(r,{size:"small",checked:1===o.status,onChange:t=>e.onUpdateStatus(t,o)},null,8,["checked","onChange"])])),control:b((()=>[f(" 可见 ")])),_:1},8,["onRegister"])])}]]);export{y as default};
