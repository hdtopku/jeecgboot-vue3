var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{l as i,F as o,r,j as s,a8 as u,$ as d,t as c,v as m,V as p,z as f,aW as v,y as x,W as g,D as y,x as b,L as j,eh as h,C as w,a5 as k,a1 as S,a as I,cf as _,u as C,at as O}from"./index.b2c24a42.js";import{g as z}from"./Area.f37a4b8c.js";import R from"./OneNativeModal.47b985e1.js";import{i as T}from"./api.e26748d3.js";import{downloadFile as M}from"./renderUtils.23b0f24e.js";import"./JAddInput.2ba637e0.js";import"./useFormItem.9110ec70.js";import"./index.12c6f6d1.js";import"./BasicModal.c95a44ff.js";import"./useWindowSizeFn.6c0c5931.js";import"./props.4a0f18d3.js";import"./index.27a29657.js";import"./bem.a0439036.js";import"./props.d4c4f199.js";import"./useContextMenu.0c34a59e.js";import"./index.9872fa51.js";import"./onMountedOrActivated.bfdd028b.js";import"./index.d802f44f.js";import"./htmlmixed.8e042aa6.js";import"./vue.bbfa1b85.js";/* empty css             */import"./depart.api.2d5bb309.js";import"./OneNativeForm.2eb19afc.js";import"./JUpload.152dd3a7.js";import"./functional.d6fe070d.js";const N={class:"table-operator"},P=w("新增"),D=w(" 删除 "),E=w("批量操作 "),F={class:"ant-alert ant-alert-info",style:{"margin-bottom":"16px"}},L=v("i",{class:"anticon anticon-info-circle ant-alert-icon"},null,-1),U=w(" 已选择 "),A={style:{"font-weight":"600"}},J=w("项 "),W={slot:"htmlSlot","slot-scope":"text"},B=["innerHTML"],H={key:0,style:{"font-size":"12px","font-style":"italic"}},K=["src","preview"],X={key:0,style:{"font-size":"12px","font-style":"italic"}},q=w(" 下载 "),Q=["onClick"],V={class:"ant-dropdown-link"},$=w("更多 "),G=["onClick"],Y=v("a",null,"删除",-1),Z=i({__name:"OneNativeList",setup(e){o(!1);const i=o({}),w=o(!1),Z=o([]),ee=o();r();const te=o([{title:"文本",align:"center",dataIndex:"name"},{title:"字典下拉",align:"center",dataIndex:"xiala",customRender:({text:e})=>e?s(Z.value.xiala,e):""},{title:"字典单选",align:"center",dataIndex:"danxuan",customRender:({text:e})=>e?s(Z.value.danxuan,e):""},{title:"字典多选",align:"center",dataIndex:"duoxuan",customRender:({text:e})=>e?s(Z.value.duoxuan,e):""},{title:"开关",align:"center",dataIndex:"kaiguan",customRender:({text:e})=>e?s(Z.value.kaiguan,e):""},{title:"日期",align:"center",dataIndex:"riqi",customRender:function({text:e}){return e?e.length>10?e.substr(0,10):e:""}},{title:"年月日时分秒",align:"center",dataIndex:"nyrsfm"},{title:"时间",align:"center",dataIndex:"shijian"},{title:"文件",align:"center",dataIndex:"wenjian",slots:{customRender:"fileSlot"}},{title:"图片",align:"center",dataIndex:"tupian",slots:{customRender:"imgSlot"}},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147,slots:{customRender:"action"}}]),ae=u({list:"/test/jeecgDemo/oneNative/list",delete:"/test/jeecgDemo/oneNative/delete",exportXls:"/test/jeecgDemo/oneNative/exportXls",importExcel:"test/jeecgDemo/oneNative/importExcel"}),ne=o([]);o(!1);const le=o({current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!0,showSizeChanger:!0,total:0}),ie=o([]),oe=o([]),re=o({column:"createTime",order:"desc"}),se=o({}),{createMessage:ue}=C();function de(e,t){ie.value=e,oe.value=t}function ce({pagination:e,filters:i,sorter:o}){le.value=e,re.value=o,se.value=((e,i)=>{for(var o in i||(i={}))a.call(i,o)&&l(e,o,i[o]);if(t)for(var o of t(i))n.call(i,o)&&l(e,o,i[o]);return e})({},i)}function me(){ee.value.disableSubmit=!1,ee.value.add()}function pe(){ie.value=[],oe.value=[]}function fe(){k.confirm({title:"确认删除",content:"是否删除选中数据",okText:"确认",cancelText:"取消",onOk:()=>{S.delete({url:ae.delete,data:{ids:ie.value}},{joinParamsToUrl:!0}).then((()=>{be()}))}})}function ve(){let e=Object.assign(i.value,re.value,se.value);return e.field=function(){let e="id,";return te.value.forEach((function(t){e+=","+t.dataIndex})),e}(),e.pageNo=le.value.current,e.pageSize=le.value.pageSize,O(e)}function xe(e){1===e&&(le.value.current=1),w.value=!0;let t=ve();S.get({url:ae.list,params:t},{isTransformResponse:!1}).then((e=>{e.success?(ne.value=e.result.records,e.result&&e.result.total?le.value.total=e.result.total:le.value.total=0):ue.warning(e.message)})).finally((()=>{w.value=!1}))}function ge(e){return e&&e.indexOf(",")>0&&(e=e.substring(0,e.indexOf(","))),I(e)}function ye(){return e=this,t=null,a=function*(){Z.value.flzds=yield T({code:"B01"}),Z.value.xiala=yield _("sex"),Z.value.danxuan=yield _("sex"),Z.value.duoxuan=yield _("urgent_level")},new Promise(((n,l)=>{var i=e=>{try{r(a.next(e))}catch(t){l(t)}},o=e=>{try{r(a.throw(e))}catch(t){l(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,o);r((a=a.apply(e,t)).next())}));var e,t,a}function be(){ie.value=[],oe.value=[],xe(1)}return d((()=>{Z.value.kaiguan=[{text:"是",value:"1"},{text:"否",value:"2"}],xe(),ye()})),(e,t)=>{const a=c("a-button"),n=c("Icon"),l=c("a-menu-item"),i=c("a-menu"),o=c("a-dropdown"),r=c("a-divider"),s=c("a-icon"),u=c("a-table"),d=c("a-card");return m(),p(d,{bordered:!1},{default:f((()=>[v("div",N,[x(a,{onClick:me,type:"primary",preIcon:"ant-design:plus"},{default:f((()=>[P])),_:1}),ie.value.length>0?(m(),p(o,{key:0},{overlay:f((()=>[x(i,null,{default:f((()=>[x(l,{key:"1",onClick:fe},{default:f((()=>[x(n,{icon:"ant-design:delete-outlined"}),D])),_:1})])),_:1})])),default:f((()=>[x(a,null,{default:f((()=>[E,x(n,{icon:"mdi:chevron-down"})])),_:1})])),_:1})):g("",!0)]),v("div",null,[v("div",F,[L,U,v("a",A,y(ie.value.length),1),J,v("a",{style:{"margin-left":"24px"},onClick:pe},"清空")]),x(u,{ref:"table",size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",class:"j-table-force-nowrap",columns:te.value,dataSource:ne.value,pagination:le.value,loading:w.value,rowSelection:{selectedRowKeys:ie.value,onChange:de},onChange:ce},{imgSlot:f((({text:e,record:t})=>[e?(m(),b("img",{key:1,src:ge(e),preview:t.id,alt:"",class:"anty-img-wrap"},null,8,K)):(m(),b("span",H,"无图片"))])),pcaSlot:f((({text:e})=>[v("div",null,y(j(z)(e)),1)])),fileSlot:f((({text:e})=>[e?(m(),p(a,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:t=>j(M)(e)},{default:f((()=>[q])),_:2},1032,["onClick"])):(m(),b("span",X,"无文件"))])),action:f((({text:e,record:t})=>[v("a",{onClick:e=>function(e){ee.value.disableSubmit=!1,ee.value.edit(e)}(t)},"编辑",8,Q),x(r,{type:"vertical"}),x(o,null,{overlay:f((()=>[x(i,{class:"antd-more"},{default:f((()=>[x(l,null,{default:f((()=>[v("a",{onClick:e=>function(e){ee.value.disableSubmit=!0,ee.value.edit(e)}(t)},"详情",8,G)])),_:2},1024),x(l,null,{default:f((()=>[x(j(h),{title:"确定删除吗?",onConfirm:()=>{return e=t.id,void S.delete({url:ae.delete,data:{ids:e}},{joinParamsToUrl:!0}).then((e=>{be()}));var e}},{default:f((()=>[Y])),_:2},1032,["onConfirm"])])),_:2},1024)])),_:2},1024)])),default:f((()=>[v("a",V,[$,x(s,{type:"down"})])])),_:2},1024)])),default:f((()=>[v("template",W,[v("div",{innerHTML:e.text},null,8,B)])])),_:1},8,["columns","dataSource","pagination","loading","rowSelection"])]),x(R,{ref_key:"oneProtogenesisModal",ref:ee,onOk:be},null,512)])),_:1})}}});export{Z as default};
