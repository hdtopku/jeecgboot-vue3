import{j as G,C as d,m as J,r as u,s as v,t as y,aW as c,v as a,w as o,y as f,z as p,N as V,O as E,bx as K,S as m,H as X,dl as Y,Q as q,R as Z,ax as ee}from"./index.2bb6f736.js";const oe={class:"border-solid rounded"},te={class:"ant-dropdown-link"},ae={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},le={key:0},ne={key:1},ue=G({__name:"CommonList",props:{showLeft:{type:Boolean,default:!0}},emits:["queryList","changeAdvanced","confirmCopy"],setup(H,{expose:M,emit:O}){const i=d(1),h=d(!1),w=()=>{h.value=!0,O("confirmCopy",{count:i.value})},g=d(!1),C=d(!1),e=d(),D=d(),B=d(),b=(s,r,_=!1)=>{D.value=s,B.value=r,_?C.value=!0:(g.value=!0,r.pageNo=1),s(r).then(l=>{if(r.pageNo=l.current+1,l.current>1&&_){e.value.records.push(...l.records);return}e.value=l}).catch(l=>{console.error(l)}).finally(()=>{g.value=!1,C.value=!1})},Q=()=>{b(D.value,B.value,!0)},T=J(()=>{var s,r,_,l;return((s=e==null?void 0:e.value)==null?void 0:s.total)===0||((_=(r=e==null?void 0:e.value)==null?void 0:r.records)==null?void 0:_.length)>=((l=e==null?void 0:e.value)==null?void 0:l.total)});return M({execQuery:b}),(s,r)=>{var A;const _=u("a-typography-title"),l=u("a-col"),j=u("a-slider"),k=u("a-button"),z=u("a-popconfirm"),I=u("a-row"),L=u("a-dropdown"),P=u("a-list-item-meta"),R=u("a-list-item"),U=u("a-spin"),W=u("a-list");return v(),y(ee,null,[c("div",null,[a(I,{class:""},{default:o(()=>[a(l,{span:4},{default:o(()=>[a(_,{level:5},{default:o(()=>{var t,n;return[f("\u5171"+p((n=(t=e.value)==null?void 0:t.total)!=null?n:0)+"\u6761",1)]}),_:1})]),_:1}),a(l,{span:14},{default:o(()=>[a(j,{style:{display:"inline-block"},value:i.value,"onUpdate:value":r[0]||(r[0]=t=>i.value=t),min:1,max:500},null,8,["value"])]),_:1}),a(l,{class:"text-center",span:6},{default:o(()=>[V(a(k,{loading:h.value,type:"primary",onClick:w},{default:o(()=>[f("\u590D\u5236"+p(i.value)+"\u6761 ",1)]),_:1},8,["loading"]),[[E,i.value===1]]),a(z,{title:`\u786E\u5B9A\u590D\u5236${i.value}\u6761\u5417?`,"ok-text":"\u786E\u5B9A","cancel-text":"\u53D6\u6D88",onConfirm:w},{default:o(()=>[V(a(k,{type:"primary",loading:h.value},{default:o(()=>[f("\u590D\u5236"+p(i.value)+"\u6761 ",1)]),_:1},8,["loading"]),[[E,i.value>1]])]),_:1},8,["title"])]),_:1})]),_:1})]),a(W,{loading:g.value,"data-source":(A=e.value)==null?void 0:A.records},{renderItem:o(({item:t,index:n})=>[a(R,null,{default:o(()=>[a(P,null,K({title:o(()=>[c("span",null,[m(s.$slots,"top",{item:t,index:n})])]),description:o(()=>[m(s.$slots,"bottom",{item:t,index:n})]),_:2},[H.showLeft?{name:"avatar",fn:o(()=>[c("div",null,[c("span",oe,"#"+p(n+1),1),c("span",null,[m(s.$slots,"shelter",{item:t,index:n})])]),a(L,null,{overlay:o(()=>[c("span",null,[m(s.$slots,"operate",{item:t,index:n})])]),default:o(()=>[c("a",te,[f(" \u64CD\u4F5C "),a(X(Y))])]),_:2},1024),c("span",null,[m(s.$slots,"left",{style:"position: relative",item:t,index:n})])]),key:"0"}:void 0]),1024),c("span",null,[m(s.$slots,"right",{item:t,index:n})])]),_:2},1024)]),loadMore:o(()=>{var t,n,N,$;return[((t=e.value)==null?void 0:t.total)>0?(v(),y("div",ae,[T.value?(v(),y("span",le,"\u52A0\u8F7D\u5B8C\u6210("+p((N=(n=e.value)==null?void 0:n.records)==null?void 0:N.length)+"/"+p(($=e.value)==null?void 0:$.total)+")",1)):(v(),y("span",ne,[C.value?(v(),q(U,{key:0})):(v(),q(k,{key:1,onClick:Q},{default:o(()=>{var F,S,x;return[f("\u52A0\u8F7D\u66F4\u591A("+p((S=(F=e.value)==null?void 0:F.records)==null?void 0:S.length)+"/"+p((x=e.value)==null?void 0:x.total)+")",1)]}),_:1}))]))])):Z("",!0)]}),_:3},8,["loading","data-source"])],64)}}});export{ue as _};
