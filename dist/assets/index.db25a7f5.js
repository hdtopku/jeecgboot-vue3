var t=Object.defineProperty,e=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;import{B as s}from"./BasicTable.cdd414e6.js";import"./helper.ec3e26f3.js";import"./TableImg.6cb3a734.js";import{u as c}from"./useTable.4670d269.js";import{a1 as u,k as p,c3 as d,h as l,T as f,l as m,F as h,$ as _,t as y,v as b,x as v,y as j,z as g,aW as x,C as O,D as w,L as I}from"./index.b3c93d64.js";import"./BasicForm.79466d99.js";import"./uniqBy.30d2558a.js";import"./index.ee0a0c33.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";import"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import"./useFormItem.d029403d.js";import"./api.dced5d87.js";import"./props.a4f5d1ca.js";import"./index.c4683457.js";import"./bem.3d3e77ca.js";import"./props.c13d8268.js";import"./useContextMenu.de287960.js";import"./index.9bbe419b.js";import"./onMountedOrActivated.d3784e6c.js";import"./index.36d6c198.js";import"./htmlmixed.ba3cd961.js";import"./vue.8c416d71.js";/* empty css             */import"./depart.api.429e062c.js";import"./index.4258d6df.js";import"./useContentHeight.7565ed37.js";import"./useContentViewHeight.d3266665.js";import"./usePageContext.f338fb2a.js";import"./RedoOutlined.c563bb0b.js";import"./functional.3bb51b91.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";import"./index.d2e70b0d.js";import"./index.17ec2e33.js";import"./useCountdown.cb4ad478.js";import"./JUpload.6bcc6fce.js";import"./index.ef2039b9.js";var T="[object GeneratorFunction]",P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,C=/^\./,R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,F="object"==typeof p&&p&&p.Object===Object&&p,k="object"==typeof self&&self&&self.Object===Object&&self,M=F||k||Function("return this")();var q,A=Array.prototype,B=Function.prototype,D=Object.prototype,H=M["__core-js_shared__"],Y=(q=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",L=B.toString,U=D.hasOwnProperty,z=D.toString,G=RegExp("^"+L.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=M.Symbol,W=A.splice,K=at(M,"Map"),N=at(Object,"create"),V=J?J.prototype:void 0,Q=V?V.toString:void 0;function X(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function Z(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function et(t,e){for(var r,o,n=t.length;n--;)if((r=t[n][0])===(o=e)||r!=r&&o!=o)return n;return-1}function rt(t,e){var r;e=function(t,e){if(ut(t))return!1;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||dt(t))return!0;return S.test(t)||!P.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:ut(r=e)?r:it(r);for(var o=0,n=e.length;null!=t&&o<n;)t=t[st(e[o++])];return o&&o==n?t:void 0}function ot(t){if(!pt(t)||(e=t,Y&&Y in e))return!1;var e,r=function(t){var e=pt(t)?z.call(t):"";return"[object Function]"==e||e==T}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}(t)?G:E;return r.test(function(t){if(null!=t){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))}function nt(t,e){var r,o,n=t.__data__;return("string"==(o=typeof(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function at(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return ot(r)?r:void 0}X.prototype.clear=function(){this.__data__=N?N(null):{}},X.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},X.prototype.get=function(t){var e=this.__data__;if(N){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return U.call(e,t)?e[t]:void 0},X.prototype.has=function(t){var e=this.__data__;return N?void 0!==e[t]:U.call(e,t)},X.prototype.set=function(t,e){return this.__data__[t]=N&&void 0===e?"__lodash_hash_undefined__":e,this},Z.prototype.clear=function(){this.__data__=[]},Z.prototype.delete=function(t){var e=this.__data__,r=et(e,t);return!(r<0)&&(r==e.length-1?e.pop():W.call(e,r,1),!0)},Z.prototype.get=function(t){var e=this.__data__,r=et(e,t);return r<0?void 0:e[r][1]},Z.prototype.has=function(t){return et(this.__data__,t)>-1},Z.prototype.set=function(t,e){var r=this.__data__,o=et(r,t);return o<0?r.push([t,e]):r[o][1]=e,this},tt.prototype.clear=function(){this.__data__={hash:new X,map:new(K||Z),string:new X}},tt.prototype.delete=function(t){return nt(this,t).delete(t)},tt.prototype.get=function(t){return nt(this,t).get(t)},tt.prototype.has=function(t){return nt(this,t).has(t)},tt.prototype.set=function(t,e){return nt(this,t).set(t,e),this};var it=ct((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(dt(t))return Q?Q.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}(e);var r=[];return C.test(t)&&r.push(""),t.replace(R,(function(t,e,o,n){r.push(o?n.replace($,"$1"):e||t)})),r}));function st(t){if("string"==typeof t||dt(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function ct(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var o=arguments,n=e?e.apply(this,o):o[0],a=r.cache;if(a.has(n))return a.get(n);var i=t.apply(this,o);return r.cache=a.set(n,i),i};return r.cache=new(ct.Cache||tt),r}ct.Cache=tt;var ut=Array.isArray;function pt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function dt(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==z.call(t)}var lt=function(t,e,r){var o=null==t?void 0:rt(t,e);return void 0===o?r:o};const ft=[{title:"请求时间",dataIndex:"timestamp",width:50,customRender:({text:t})=>d(t).format("YYYY-MM-DD HH:mm:ss")},{title:"请求方法",dataIndex:"request.method",width:20,customRender({record:t,column:e}){let r=lt(t,e.dataIndex),o="";return"GET"===r&&(o="#87d068"),"POST"===r&&(o="#2db7f5"),"PUT"===r&&(o="#ffba5a"),"DELETE"===r&&(o="#ff5500"),l(f,{color:o},(()=>r))}},{title:"请求URL",dataIndex:"request.uri",width:200,customRender:({record:t,column:e})=>lt(t,e.dataIndex)},{title:"响应状态",dataIndex:"response.status",width:50,customRender({record:t,column:e}){let r=lt(t,e.dataIndex),o="";return r<200?o="pink":r<201?o="green":r<399?o="cyan":r<403?o="orange":r<501&&(o="red"),l(f,{color:o},(()=>r))}},{title:"请求耗时",dataIndex:"timeTaken",width:50,customRender({record:t,column:e}){let r=lt(t,e.dataIndex),o="red";return r<500?o="green":r<1e3?o="cyan":r<1500&&(o="orange"),l(f,{color:o},(()=>`${r} ms`))}}],mt={class:"p-4"},ht={slot:"message"},_t=m({name:"monitor-trace"}),yt=m((bt=((t,e)=>{for(var r in e||(e={}))n.call(e,r)&&i(t,r,e[r]);if(o)for(var r of o(e))a.call(e,r)&&i(t,r,e[r]);return t})({},_t),e(bt,r({setup(t){const e=h([]),[r,{reload:o}]=c({columns:ft,showIndexColumn:!1,bordered:!0,rowKey:"id"});function n(){u.get({url:"/actuator/httptrace"},{isTransformResponse:!1}).then((t=>{let r=[];for(let e of t.traces)"OPTIONS"!==e.request.method&&-1===e.request.uri.indexOf("httptrace")&&r.push(e);e.value=r}))}return _((()=>{n()})),(t,o)=>{const a=y("a-divider");return b(),v("div",mt,[j(I(s),{onRegister:I(r),dataSource:e.value},{tableTitle:g((()=>[x("div",ht,[O(" 共追踪到 "+w(e.value.length)+" 条近期HTTP请求记录 ",1),j(a,{type:"vertical"}),x("a",{onClick:n},"立即刷新")])])),_:1},8,["onRegister","dataSource"])])}}}))));var bt;export{yt as default};
