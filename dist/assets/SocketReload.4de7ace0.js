import{l as e,F as t,dz as a,a1 as l,t as o,v as i,V as n,z as d,aW as u,y as c,u as s}from"./index.26a57b91.js";const r={style:{"margin-bottom":"8px"}},p=u("span",null,"启用数据变动特效：",-1),y=e({__name:"SocketReload",setup(e){const{createMessage:y}=s(),h=t(),k=t(!0),m=t(!1),w=t([]),f=t([{key:"num",title:"序号",width:80},{key:"enabled",title:"启用",width:80,type:a.checkbox},{key:"ship_name",title:"船名",width:180,type:a.input},{key:"call",title:"呼叫",width:80,type:a.input},{key:"len",title:"长",width:80,type:a.input},{key:"ton",title:"吨",width:120,type:a.input},{key:"payer",title:"付款方",width:120,type:a.input},{key:"count",title:"数",width:40},{key:"company",title:"公司",minWidth:180,type:a.input},{key:"trend",title:"动向",width:120,type:a.input}]);function v(e){switch(e.type){case a.radio:case a.checkbox:b(e)}}function g(e){b(e)}function b(e){let{$table:t,row:a,column:l}=e,o=l.property;t.isUpdateByRow(a,o)&&t.validate(a).then((e=>{if(!e){let e=y.loading(`正在保存"${l.title}"`,0);setTimeout((()=>{var i;e(),y.success(`"${l.title}"保存成功！`),t.reloadRow(a,null,o),null==(i=h.value)||i.socketSendUpdateRow(a)}),555)}}))}return m.value=!0,l.get({url:"/mock/vxe/getData",params:{pageNo:1,pageSize:200}}).then((e=>{w.value=e.records})).finally((()=>{m.value=!1})),(e,t)=>{const a=o("a-switch"),l=o("JVxeTable"),s=o("a-card");return i(),n(s,{title:"无痕刷新示例",bordered:!1},{default:d((()=>[u("div",r,[p,c(a,{checked:k.value,"onUpdate:checked":t[0]||(t[0]=e=>k.value=e)},null,8,["checked"])]),c(l,{ref_key:"tableRef",ref:h,rowNumber:"",rowSelection:"",keepSource:"",socketReload:"",socketKey:"demo-socket-reload",reloadEffect:k.value,height:340,loading:m.value,columns:f.value,dataSource:w.value,onValueChange:v,onEditClosed:g},null,8,["reloadEffect","loading","columns","dataSource"])])),_:1})}}});export{y as default};
