import{j as te,fl as ie,cs as le,fm as ne,aN as L,f6 as re,C as ae,m as oe,E as se,r as x,s as c,t as f,v as b,w as A,ax as S,bc as P,Q as H,aW as u,B as J,z as N,f as T,b as de,c3 as V,Z as ue,fj as ce,a as pe,u as fe}from"./index.c71909f1.js";import{e as me,q as _e,g as he}from"./api.1e5725b3.js";import{g as ge}from"./Area.0d56e074.js";import{c as ve}from"./functional.5a84acab.js";import{L as ye}from"./useAutoForm.8e111c1e.js";import"./JUpload.vue_vue_type_style_index_0_lang.f659086c.js";import"./JUploadModal.vue_vue_type_script_setup_true_lang.fd0d6f8f.js";import"./componentMap.63d566a1.js";import"./OnlineSelectCascade.39b8e014.js";import"./index.a5ab7053.js";import"./BasicForm.vue_vue_type_style_index_0_lang.974eb70c.js";import"./JAddInput.867f9e33.js";import"./pick.b45371be.js";import"./_flatRest.4980c73e.js";import"./isArray.1617b935.js";import"./toString.79810c3b.js";import"./_arrayPush.ca89106e.js";import"./BasicTable.vue_vue_type_style_index_0_lang.8783b1a4.js";import"./TableImg.vue_vue_type_style_index_0_lang.fbf70fb7.js";import"./LinkTableListPiece.bb1b5ac1.js";import"./areaDataUtil.0fdc3748.js";import"./FormSchemaFactory.4b56b2a2.js";import"./user.api.9d5d1bb2.js";import"./_commonjsHelpers.7ef9cff5.js";import"./customExpression.05dc2408.js";import"./BasicForm.8f4703c7.js";import"./useForm.8416e1ca.js";import"./BasicTable.899ba1b1.js";import"./useFormItem.954136ab.js";import"./BasicModal.bde34060.js";import"./useWindowSizeFn.4955e805.js";import"./download.0b664d9d.js";import"./base64Conver.030fa32c.js";import"./index.49ab17bc.js";import"./index.13d17c90.js";import"./useCountdown.eeff0c92.js";import"./props.56db4c2d.js";import"./index.7659ab95.js";import"./bem.9c99c9e3.js";import"./props.0e4b3938.js";import"./useContextMenu.539b4ac8.js";import"./index.8c4df71d.js";import"./onMountedOrActivated.7b7e892b.js";import"./index.38b9dc54.js";import"./htmlmixed.eaffa289.js";import"./vue.de497315.js";/* empty css             */import"./depart.api.494ce948.js";import"./MinusCircleOutlined.ed085a67.js";import"./index.dcb08401.js";import"./index.5ae3ef0d.js";import"./uniqBy.525af613.js";import"./index.f7ec3537.js";import"./useContentHeight.cef7106c.js";import"./useContentViewHeight.8656c73d.js";import"./usePageContext.1304946e.js";import"./RedoOutlined.328232f3.js";import"./useListPage.f6a1557a.js";import"./useTable.876b6c8a.js";import"./JModalTip.edad76c4.js";var Ce=Object.defineProperty,U=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,W=(r,a,s)=>a in r?Ce(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,we=(r,a)=>{for(var s in a||(a={}))De.call(a,s)&&W(r,s,a[s]);if(U)for(var s of U(a))Fe.call(a,s)&&W(r,s,a[s]);return r},m=(r,a,s)=>new Promise((g,C)=>{var w=p=>{try{_(s.next(p))}catch(F){C(F)}},D=p=>{try{_(s.throw(p))}catch(F){C(F)}},_=p=>p.done?g(p.value):Promise.resolve(p.value).then(w,D);_((s=s.apply(r,a)).next())});function xe(r){console.log(r);const a={},s=[],g=ae({}),{createMessage:C}=fe(),w=oe(()=>r.containerClass?`jeecg-detail-form ${r.containerClass}`:"jeecg-detail-form");se(()=>r.data,e=>m(this,null,function*(){if(e){let n=r.schemas,l={};if(n&&n.length>0)for(let i of n){let t=i.field;try{l[t]=yield D(i)}catch(o){console.error("\u5B57\u6BB5\u3010"+t+"\u3011\u6587\u672C\u83B7\u53D6\u5931\u8D25",o)}}g.value=l}}),{deep:!0,immediate:!0});function D(e){return m(this,null,function*(){let n=r.data;if(n){let l=n[e.field];if(!l&&l!=="0"&&l!==0)return"";let i=l,t=e.view;if(t=="list"||t=="radio"||t=="checkbox"||t=="list_multi")i=yield _(e,n);else if(t=="sel_search")i=yield F(e,n);else if(t=="cat_tree")i=yield j(e,n);else if(t=="link_table")i=yield X(e,n);else if(t=="sel_depart")i=yield B(e,n);else if(t=="sel_user")i=yield d(e,n);else if(t=="pca")i=ge(l);else if(t=="link_down")i=yield v(e,n);else if(t=="sel_tree")i=yield O(e,n);else if(t=="switch")i=yield q(e,n);else if(t=="image"||t=="file")i=z(e,n);else if(s.indexOf(e.field)>=0){let o=a[e.field];o&&o.length>0&&(i=T(o,l))}return i}return""})}function _(e,n){return m(this,null,function*(){let l=p(e),i=n[e.field];if(!l)return i;let t=de(l);if(t&&t.length>0)return T(t,i);{let o=[];if(a[l]?o=a[l]:o=(yield V(l))||[],o&&o.length>0)return a[l]=o,T(o,i)}return""})}function p(e){let n="",{dictCode:l,dictTable:i,dictText:t}=e;return i?n=encodeURI(`${i},${t},${l}`):n=l,n}function F(e,n){return m(this,null,function*(){let l=p(e),i=n[e.field];if(!i)return"";let t=[];return a[l+i]?t=a[l+i]:t=(yield ue.get({url:`/sys/dict/loadDictItem/${l}`,params:{key:i}}))||[],t&&t.length>0?(a[l+i]=t,t.join(",")):""})}function j(e,n){return m(this,null,function*(){let l=n[e.field];if(!l)return"";let i=(yield me({ids:l}))||[];return i&&i.length>0?i.join(","):""})}function B(e,n){return m(this,null,function*(){let l=n[e.field];if(!l)return"";let t=k(e).store||"id",o=(yield _e({ids:l,primaryKey:t}))||[];if(o&&o.length>0){let h=[];for(let y of o)h.push(y.title);return h.join(",")}return""})}function d(e,n){return m(this,null,function*(){let l=n[e.field];if(!l)return"";let i=k(e),o={[i.store||"username"]:l},y=((yield he(o))||{}).records||[];if(y&&y.length>0){let I=[];console.log("getUserDataText",y);let $=i.text||"realname";for(let E of y)I.push(E[$]);return I.join(",")}return""})}function k(e){let n={},{fieldExtendJson:l}=e;if(l&&typeof l=="string")try{let i=JSON.parse(l);n=we({},i)}catch(i){console.error(i)}return n}function v(e,n){return m(this,null,function*(){let{dictTable:l,field:i}=e,t=[];if(a[i])t=a[i];else if(l){let o=JSON.parse(l);if(o){let{table:h,txt:y,key:I,linkField:$}=o,E=`${h},${y},${I}`;if(t=[...(yield V(E))||[]],t&&t.length>0&&(a[i]=t,$)){let ee=$.split(",");for(let M of ee)a[M]=t,s.push(M)}}}if(t&&t.length>0){let o=n[i];return T(t,o)}return""})}function O(e,n){return m(this,null,function*(){let{dict:l,field:i}=e,t=[];if(a[i]?t=a[i]:l&&(t=yield V(l)),t&&t.length>0){let o=n[i];return T(t,o)}return""})}function q(e,n){return m(this,null,function*(){let{fieldExtendJson:l,field:i}=e,t=["Y","N"];l&&(t=JSON.parse(l));let o=[{value:t[0],text:"\u662F"},{value:t[1],text:"\u5426"},{value:t[0]+"",text:"\u662F"},{value:t[1]+"",text:"\u5426"}],h=n[i];return ce(o,h)})}function R(e){return e.span?e.span:r.span}function z(e,n){let l=n[e.field];if(!l)return[];let i=l.split(","),t=[];for(let o of i){let h=pe(o)||"";h&&t.push(h)}return t}function K(e){e&&window.open(e)}function Q(e){let n=g.value[e];if(!n||n.length==0){C.warning("\u65E0\u56FE\u7247!");return}ve({imageList:n})}function Y(e){return e?e.substring(e.lastIndexOf("/")+1):""}const Z=["file","image","markdown","umeditor"];function G(e){return Z.indexOf(e.view)>=0?r.span==12?"span12":r.span==8?"span8":r.span==6?"span6":"span24":""}function X(e,n){return m(this,null,function*(){let l=n[e.field];return k(e).showType=="select"?l?n[e.field+"_dictText"]:"":l?n[e.field]:""})}return{formContainerClass:w,detailFormData:g,getItemSpan:R,handleDownloadFile:K,handleViewImage:Q,getFilename:Y,getLabelWidthClass:G}}const ke=te({name:"DetailForm",components:{DownloadOutlined:ie,EyeOutlined:le,PaperClipOutlined:ne,LinkTableCard:ye},props:{span:L.number.def(24),schemas:L.array.def([]),data:L.object.def({}),containerClass:L.string.def("")},setup(r){const{formContainerClass:a,detailFormData:s,getItemSpan:g,handleDownloadFile:C,handleViewImage:w,getFilename:D,getLabelWidthClass:_}=xe(r);return{formContainerClass:a,detailFormData:s,getItemSpan:g,handleDownloadFile:C,handleViewImage:w,getFilename:D,getLabelWidthClass:_}}}),be={class:"detail-item"},Te=["title"],Oe=["innerHTML"],Ie={key:1,class:"item-content",style:{display:"block","padding-top":"10px"}},$e={key:0},Le={key:2,class:"item-content"},je={class:"ant-upload-list ant-upload-list-picture-card"},Be={class:"ant-upload-list-picture-card-container",style:{"margin-top":"8px"}},Ee={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-picture-card","data-has-actions":"true"},Se={class:"ant-upload-list-item-info"},Pe=["src"],Ne={class:"ant-upload-list-item-actions"},Ve={key:3,class:"item-content"},Me={class:"ant-upload-list ant-upload-list-text"},Ae={class:""},He={class:"ant-upload-list-item ant-upload-list-item-done ant-upload-list-item-list-type-text"},Je={class:"ant-upload-list-item-info"},Ue={class:"ant-upload-span"},We={class:"ant-upload-text-icon"},qe=["href"],Re={class:"ant-upload-list-item-card-actions"},ze={key:4,class:"item-content"};function Ke(r,a,s,g,C,w){const D=x("link-table-card"),_=x("download-outlined"),p=x("eye-outlined"),F=x("paper-clip-outlined"),j=x("a-col"),B=x("a-row");return c(),f("div",{class:J(r.formContainerClass)},[b(B,null,{default:A(()=>[(c(!0),f(S,null,P(r.schemas,(d,k)=>(c(),H(j,{key:k,span:r.getItemSpan(d)},{default:A(()=>[u("div",be,[u("div",{class:J(["item-title",r.getLabelWidthClass(d)]),title:d.label},N(d.label)+"\uFF1A ",11,Te),d.isHtml?(c(),f("div",{key:0,class:"item-content",innerHTML:r.detailFormData[d.field]},null,8,Oe)):d.isCard?(c(),f("div",Ie,[r.detailFormData[d.field]?(c(),H(D,{key:1,disabled:"",detail:"",value:r.detailFormData[d.field],valueField:d.dictCode,textField:d.dictText,tableName:d.dictTable,multi:d.multi},null,8,["value","valueField","textField","tableName","multi"])):(c(),f("span",$e))])):d.isImage?(c(),f("div",Le,[u("div",je,[(c(!0),f(S,null,P(r.detailFormData[d.field],v=>(c(),f("div",Be,[u("span",null,[u("div",Ee,[u("div",Se,[u("img",{src:v,alt:"\u56FE\u7247\u4E0D\u5B58\u5728",class:"ant-upload-list-item-image"},null,8,Pe)]),u("span",Ne,[b(_,{onClick:O=>r.handleDownloadFile(v)},null,8,["onClick"]),b(p,{onClick:O=>r.handleViewImage(d.field)},null,8,["onClick"])])])])]))),256))])])):d.isFile?(c(),f("div",Ve,[u("div",Me,[(c(!0),f(S,null,P(r.detailFormData[d.field],v=>(c(),f("div",Ae,[u("span",null,[u("div",He,[u("div",Je,[u("span",Ue,[u("div",We,[b(F)]),u("a",{href:v,target:"_blank",rel:"noopener noreferrer",class:"ant-upload-list-item-name"},N(r.getFilename(v)),9,qe),u("span",Re,[b(_,{onClick:O=>r.handleDownloadFile(v)},null,8,["onClick"])])])])])])]))),256))])])):(c(),f("div",ze,N(r.detailFormData[d.field]),1))])]),_:2},1032,["span"]))),128))]),_:1})],2)}var ii=re(ke,[["render",Ke],["__scopeId","data-v-47915cc7"]]);export{ii as default};
