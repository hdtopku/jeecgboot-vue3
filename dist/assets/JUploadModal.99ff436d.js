import{B as e}from"./index.ee0a0c33.js";import{l as a,aN as s,F as r,a8 as t,o,bH as i,L as n,Q as l,v as p,V as u,z as d,y as c,B as f}from"./index.b3c93d64.js";import{U as v,_ as m}from"./JUpload.6bcc6fce.js";const h=a({__name:"JUploadModal",props:{value:s.oneOfType([s.string,s.array]),width:s.number.def(520)},emits:["change","update:value","register"],setup(a,{emit:s}){const h=r(),g=t({props:{}}),y=o((()=>{var e;return(null==(e=g.props)?void 0:e.fileType)===v.image?"图片上传":"文件上传"})),[w,{closeModal:_}]=i((e=>{return a=this,s=null,r=function*(){var a;g.props=n(e)||{},[v.image,"img","picture"].includes(null==(a=g.props)?void 0:a.fileType)?g.props.fileType=v.image:g.props.fileType=v.file,l((()=>h.value.addActionsListener()))},new Promise(((e,t)=>{var o=e=>{try{n(r.next(e))}catch(a){t(a)}},i=e=>{try{n(r.throw(e))}catch(a){t(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(o,i);n((r=r.apply(a,s)).next())}));var a,s,r}));function x(){_()}function T(e){s("change",e),s("update:value",e)}return(s,r)=>(p(),u(n(e),f({onRegister:n(w),title:n(y),width:a.width,onOk:x},s.$attrs),{default:d((()=>[c(m,f({ref_key:"uploadRef",ref:h,value:a.value},g.props,{onChange:T}),null,16,["value"])])),_:1},16,["onRegister","title","width"]))}});export{h as _};
