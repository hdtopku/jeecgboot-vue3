var S=Object.defineProperty,z=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var h=(o,s,e)=>s in o?S(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,g=(o,s)=>{for(var e in s||(s={}))P.call(s,e)&&h(o,e,s[e]);if(C)for(var e of C(s))U.call(s,e)&&h(o,e,s[e]);return o},b=(o,s)=>z(o,I(s));var v=(o,s,e)=>new Promise((a,n)=>{var p=u=>{try{l(e.next(u))}catch(m){n(m)}},f=u=>{try{l(e.throw(u))}catch(m){n(m)}},l=u=>u.done?a(u.value):Promise.resolve(u.value).then(p,f);l((e=e.apply(o,s)).next())});import{B as V}from"./BasicModal.94c7292b.js";import{C as j}from"./index.58c1d2c0.js";import{j as E,cM as D,a7 as H,C as B,a6 as N,bH as O,r as i,s as T,Q as $,w as c,v as r,H as A,y as q,x as G,db as L,e7 as Q,u as J}from"./index.85745acf.js";import"./index.29f29c24.js";import{rules as K}from"./validator.192f8d40.js";import{u as W}from"./UserSetting.api.e1869a65.js";const X=E({name:"user-replace-phone-modal"}),te=E(b(g({},X),{emits:["register","success"],setup(o,{emit:s}){D();const{createMessage:e}=J(),a=H({phone:"",smscode:""}),n=B(),p=B({}),f={phone:[g({},K.duplicateCheckRule("sys_user","phone",a,{label:"\u624B\u673A\u53F7"})[0]),{pattern:/^1[3456789]\d{9}$/,message:"\u624B\u673A\u53F7\u7801\u683C\u5F0F\u6709\u8BEF"}],smscode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]};N.useForm;const l=B(""),[u,{setModalProps:m,closeModal:M}]=O(t=>v(this,null,function*(){n.value.resetFields(),n.value.clearValidate(),m({confirmLoading:!1}),l.value="\u4FEE\u6539\u624B\u673A\u53F7",t.record.smscode="",Object.assign(a,t.record),p.value=t.record}));function w(){return L({mobile:a.phone,smsmode:Q.REGISTER})}function R(){return v(this,null,function*(){yield n.value.validateFields(),W(a).then(t=>{t.success?(e.success("\u4FEE\u6539\u624B\u673A\u53F7\u6210\u529F"),s("success"),M()):e.warning(t.message)})})}return(t,d)=>{const k=i("a-input"),_=i("a-form-item"),y=i("a-button"),x=i("a-form");return T(),$(V,G(t.$attrs,{onRegister:A(u),width:"500px",title:l.value,showCancelBtn:!1,showOkBtn:!1}),{default:c(()=>[r(x,{class:"antd-modal-form",ref_key:"formRef",ref:n,model:a,rules:f},{default:c(()=>[r(_,{name:"phone"},{default:c(()=>[r(k,{size:"large",value:a.phone,"onUpdate:value":d[0]||(d[0]=F=>a.phone=F),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["value"])]),_:1}),r(_,{name:"smscode"},{default:c(()=>[r(A(j),{size:"large",value:a.smscode,"onUpdate:value":d[1]||(d[1]=F=>a.smscode=F),placeholder:"\u8F93\u51656\u4F4D\u9A8C\u8BC1\u7801",sendCodeApi:w},null,8,["value"])]),_:1}),r(_,null,{default:c(()=>[r(y,{size:"large",type:"primary",block:"",onClick:R},{default:c(()=>[q(" \u786E\u8BA4 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","title"])}}}));export{te as _};
