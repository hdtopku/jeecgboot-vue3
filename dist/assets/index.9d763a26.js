var d=(t,o,e)=>new Promise((l,r)=>{var c=n=>{try{u(e.next(n))}catch(a){r(a)}},s=n=>{try{u(e.throw(n))}catch(a){r(a)}},u=n=>n.done?l(n.value):Promise.resolve(n.value).then(c,s);u((e=e.apply(t,o)).next())});import{l as m,cG as _,F as $,o as B,a9 as w,q as C,s as z,L as f,aO as F,t as i,v,V as y,z as p,C as h,D as I,B as S,n as k,bi as A,ba as N,X as T,bj as D,bk as j,y as O,Z as b}from"./index.6c1aeca2.js";import{u as P}from"./useCountdown.c7fbe84b.js";import{useRuleFormItem as V}from"./useFormItem.63b4eda3.js";const L={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},R=m({name:"CountButton",components:{Button:_},props:L,setup(t){const o=$(!1),{currentCount:e,isStart:l,start:r,reset:c}=P(t.count),{t:s}=z(),u=B(()=>f(l)?s("component.countdown.sendText",[f(e)]):s("component.countdown.normalText"));w(()=>{t.value===void 0&&c()});function n(){return d(this,null,function*(){const{beforeStartFunc:a}=t;if(a&&F(a)){o.value=!0;try{(yield a())&&r()}finally{o.value=!1}}else r()})}return{handleStart:n,currentCount:e,loading:o,getButtonText:u,isStart:l}}});function q(t,o,e,l,r,c){const s=i("Button");return v(),y(s,S(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:p(()=>[h(I(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var g=C(R,[["render",q]]);const E={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},G=m({name:"CountDownInput",components:{CountButton:g},inheritAttrs:!1,props:E,setup(t){const{prefixCls:o}=k("countdown-input"),[e]=V(t);return{prefixCls:o,state:e}}});function X(t,o,e,l,r,c){const s=i("CountButton"),u=i("a-input");return v(),y(u,S(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),A({addonAfter:p(()=>[O(s,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[N(Object.keys(t.$slots).filter(n=>n!=="addonAfter"),n=>({name:n,fn:p(a=>[T(t.$slots,n,D(j(a||{})))])}))]),1040,["class","size","value"])}var Z=C(G,[["render",X]]);const U=b(Z);b(g);export{U as C};
