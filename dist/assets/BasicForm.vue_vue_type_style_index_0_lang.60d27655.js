var Ee=Object.defineProperty,_e=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var Oe=(e,o,a)=>o in e?Ee(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,C=(e,o)=>{for(var a in o||(o={}))$e.call(o,a)&&Oe(e,a,o[a]);if(Be)for(var a of Be(o))qe.call(o,a)&&Oe(e,a,o[a]);return e},Te=(e,o)=>_e(e,We(o));var L=(e,o,a)=>new Promise((d,w)=>{var p=b=>{try{f(a.next(b))}catch(u){w(u)}},l=b=>{try{f(a.throw(b))}catch(u){w(u)}},f=b=>b.done?d(b.value):Promise.resolve(b.value).then(p,l);f((a=a.apply(e,o)).next())});import{o as ge,K as Ae,m as V,H as t,j as we,b8 as He,N as ze,v as R,cy as re,cz as Ye,ay as J,aQ as E,bh as Ie,b7 as Ke,x as U,a6 as Ce,O as Ge,aY as be,y as se,cA as Je,cB as Ue,cC as Xe,ad as Qe,ae as Ze,cD as et,cE as tt,aN as j,q as nt,r as Z,s as ee,Q as te,w as K,aW as ot,S as ne,z as fe,R as oe,V as st,by as at,a1 as $,af as X,aO as ce,cF as ye,aR as ae,aT as it,cG as rt,cH as ct,E as ie,al as xe,ab as Pe,bZ as je,cI as Re,$ as lt,a9 as ut,M as Me,bC as dt,cJ as ft,a7 as Se,C as G,l as mt,X as pt}from"./index.85745acf.js";import{i as De}from"./componentMap.9e77f5c9.js";import{u as ht}from"./uniqBy.f969ef4a.js";import"./index.29f29c24.js";import{u as bt}from"./BasicModal.94c7292b.js";const{t:me}=ge();function ke(e){return e.includes("Input")||e.includes("Complete")?me("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?me("common.chooseText"):""}const yt=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function gt(){return[...yt,"RangePicker"]}function At(e,o,a){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(o)?e.type=a?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(o)?e.type="array":["InputNumber"].includes(o)&&(e.type="number")}function wt(e,o){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&o&&Ae(o)?`${o}`:o}const Le=gt();function Ct(e,o){return V(()=>{const a=t(e),{labelCol:d={},wrapperCol:w={}}=a.itemProps||{},{labelWidth:p,disabledLabelWidth:l}=a,{labelWidth:f,labelCol:b,wrapperCol:u,layout:k}=t(o);if(l)return{labelCol:d,wrapperCol:w};if(!f&&!p&&!b)return d.style={textAlign:"left"},{labelCol:d,wrapperCol:w};let P=p||f;const T=C(C({},b),d),W=C(C({},u),w);return P&&(P=Ae(P)?`${P}px`:P),{labelCol:C({style:{width:P||"100%"}},T),wrapperCol:C({style:{width:k==="vertical"?"100%":`calc(100% - ${P})`}},W)}})}function pe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ye(e)}const vt=we({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:o}){const{t:a}=ge(),{schema:d,formProps:w}=He(e),p=Ct(d,w),l=V(()=>{const{allDefaultValues:c,formModel:i,schema:h}=e,{mergeDynamicData:v}=e.formProps;return{field:h.field,model:i,values:C(C(C({},v),c),i),schema:h}}),f=V(()=>{var y;const{schema:c,tableAction:i,formModel:h,formActionType:v}=e;let{componentProps:m={}}=c;return E(m)&&(m=(y=m({schema:c,tableAction:i,formModel:h,formActionType:v}))!=null?y:{}),c.component==="Divider"&&(m=Object.assign({type:"horizontal"},m,{orientation:"left",plain:!0})),m}),b=V(()=>{const{disabled:c}=e.formProps,{dynamicDisabled:i}=e.schema,{disabled:h=!1}=t(f);let v=!!c||h;return J(i)&&(v=i),E(i)&&(v=i(t(l))),v});function u(){const{show:c,ifShow:i}=e.schema,{showAdvancedButton:h}=e.formProps,v=h&&J(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let m=!0,y=!0;return J(c)&&(m=c),J(i)&&(y=i),E(c)&&(m=c(t(l))),E(i)&&(y=i(t(l))),m=m&&v,{isShow:m,isIfShow:y}}function k(){var x;const{rules:c=[],component:i,rulesMessageJoinLabel:h,label:v,dynamicRules:m,required:y}=e.schema;if(E(m))return m(t(l));let g=be(c);const{rulesMessageJoinLabel:D}=e.formProps,n=Reflect.has(e.schema,"rulesMessageJoinLabel")?h:D,s=ke(i)+`${n?v:""}`;function A(I,F){const N=I.message||s;return F===void 0||Ue(F)||Array.isArray(F)&&F.length===0||typeof F=="string"&&F.trim()===""||typeof F=="object"&&Reflect.has(F,"checked")&&Reflect.has(F,"halfChecked")&&Array.isArray(F.checked)&&Array.isArray(F.halfChecked)&&F.checked.length===0&&F.halfChecked.length===0?Promise.reject(N):Promise.resolve()}const r=E(y)?y(t(l)):y;(!g||g.length===0)&&r&&(g=[{required:r,validator:A}]);const S=g.findIndex(I=>Reflect.has(I,"required")&&!Reflect.has(I,"validator"));if(S!==-1){const I=g[S],{isShow:F}=u();if(F||(I.required=!1),i){Reflect.has(I,"type")||(I.type=i==="InputNumber"?"number":"string"),I.message=I.message||s,(i.includes("Input")||i.includes("Textarea"))&&(I.whitespace=!0);const N=(x=t(f))==null?void 0:x.valueFormat;At(I,i,N)}}const O=g.findIndex(I=>I.max);return O!==-1&&!g[O].validator&&(g[O].message=g[O].message||a("component.form.maxTip",[g[O].max])),g}function P(){var F;const{renderComponentContent:c,component:i,field:h,changeEvent:v="change",valueField:m}=e.schema,y=i&&["Switch","Checkbox"].includes(i),g=`on${Xe(v)}`,D={[g]:(...N)=>{const[z]=N;r[g]&&r[g](...N);const Y=z?z.target:null,le=Y?y?Y.checked:Y.value:z;e.setFormModel(h,le)}},n=De.get(i),{autoSetPlaceHolder:s,size:A}=e.formProps,r=Te(C({allowClear:!0,getPopupContainer:N=>N.parentNode,size:A},t(f)),{disabled:t(b)});!r.disabled&&s&&i!=="RangePicker"&&i&&(r.placeholder=((F=t(f))==null?void 0:F.placeholder)||ke(i)+e.schema.label),r.codeField=h,r.formValues=t(l);const O={[m||(y?"checked":"value")]:e.formModel[h]},x=C(C(C({},r),D),O);if(!c)return R(n,x,null);const I=E(c)?C({},c(t(l))):{default:()=>c};return R(n,x,pe(I)?I:{default:()=>[I]})}function T(){const{label:c,helpMessage:i,helpComponentProps:h,subLabel:v,labelLength:m}=e.schema;let y=c+"";m&&y.length>4&&(y=y.substr(0,m));const D=v?R("span",null,[c,se(" "),R("span",{class:"text-secondary"},[v])]):m?R("label",{title:c},[y]):c,n=E(i)?i(t(l)):i;return!n||Array.isArray(n)&&n.length===0?D:R("span",null,[D,R(Je,U({placement:"top",class:"mx-1",text:n},h),null)])}function W(){const{itemProps:c,slot:i,render:h,field:v,suffix:m,component:y}=e.schema,{labelCol:g,wrapperCol:D}=t(p),{colon:n}=e.formProps;if(y==="Divider"){let s;return R(re,{span:24},{default:()=>[R(Ke,t(f),pe(s=T())?s:{default:()=>[s]})]})}else{const s=()=>i?Ie(o,i,t(l)):h?h(t(l)):P(),A=!!m,r=E(m)?m(t(l)):m;return R(Ce.Item,U({name:v,colon:n,class:{"suffix-item":A}},c,{label:T(),rules:k(),labelCol:g,wrapperCol:D}),{default:()=>[R("div",{style:"display:flex"},[R("div",{style:"flex:1; width: 100%;"},[s()]),A&&R("span",{class:"suffix"},[r])])]})}}return()=>{let c;const{colProps:i={},colSlot:h,renderColContent:v,component:m}=e.schema;if(!De.has(m))return null;const{baseColProps:y={}}=e.formProps,g=C(C({},y),i),{isIfShow:D,isShow:n}=u(),s=t(l);return D&&ze(R(re,g,pe(c=(()=>h?Ie(o,h,s):v?v(s):W())())?c:{default:()=>[c]}),[[Ge,n]])}}}),Ve=Symbol();function Ft(e){return Qe(e,Ve)}function Bt(){return Ze(Ve)}const Ot=we({name:"BasicFormAction",components:{FormItem:Ce.Item,Button:et,BasicArrow:tt,[re.name]:re},props:{showActionButtonGroup:j.bool.def(!0),showResetButton:j.bool.def(!0),showSubmitButton:j.bool.def(!0),showAdvancedButton:j.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:j.number.def(6),isAdvanced:j.bool,hideAdvanceBtn:j.bool},emits:["toggle-advanced"],setup(e,{emit:o}){const{t:a}=ge(),d=V(()=>{const{showAdvancedButton:f,actionSpan:b,actionColOptions:u}=e,k=24-b,P=f?{span:k<6?24:k}:{};return C(C({style:{textAlign:"right"},span:f?6:4},P),u)}),w=V(()=>Object.assign({text:a("common.resetText"),preIcon:"ic:baseline-restart-alt"},e.resetButtonOptions)),p=V(()=>Object.assign({},{text:a("common.queryText"),preIcon:"ant-design:search-outlined"},e.submitButtonOptions));function l(){o("toggle-advanced")}return C({t:a,actionColOpt:d,getResetBtnOptions:w,getSubmitBtnOptions:p,toggleAdvanced:l},Bt())}});function Tt(e,o,a,d,w,p){const l=Z("Button"),f=Z("BasicArrow"),b=Z("FormItem"),u=Z("a-col");return e.showActionButtonGroup?(ee(),te(u,at(U({key:0},e.actionColOpt)),{default:K(()=>[ot("div",{style:st([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[R(b,null,{default:K(()=>[ne(e.$slots,"submitBefore"),e.showSubmitButton?(ee(),te(l,U({key:0,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:K(()=>[se(fe(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):oe("",!0),ne(e.$slots,"resetBefore"),e.showResetButton?(ee(),te(l,U({key:1,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:K(()=>[se(fe(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):oe("",!0),ne(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(ee(),te(l,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:K(()=>[se(fe(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),R(f,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):oe("",!0),ne(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):oe("",!0)}const It=nt(Ot,[["render",Tt]]);function Pt(e,o){var w,p;return((w=t(e))==null?void 0:w.fieldMapToTime)&&(o=jt(e,o)),((p=t(e))==null?void 0:p.fieldMapToNumber)&&(o=St(e,o)),o}function jt(e,o){const a=t(e).fieldMapToTime;if(!a||!Array.isArray(a))return o;for(const[d,[w,p],l="YYYY-MM-DD"]of a){if(!d||!w||!p||!o[d])continue;let f=o[d];Array.isArray(f)||(f=f.split(","));const[b,u]=f;o[w]=$(b).format(l),o[p]=$(u).format(l),Reflect.deleteProperty(o,d)}return o}function St(e,o){const a=t(e).fieldMapToNumber;if(!a||!Array.isArray(a))return o;for(const[d,[w,p]]of a){if(!d||!w||!p||!o[d])continue;let l=o[d];typeof l=="string"&&(l=l.split(","));const[f,b]=l;o[w]=f,o[p]=b,Reflect.deleteProperty(o,d)}return o}function Dt({defaultValueRef:e,getSchema:o,formModel:a,getProps:d}){function w(l){if(!X(l))return{};const f={};for(const b of Object.entries(l)){let[,u]=b;const[k]=b;if(!k||ce(u)&&u.length===0||E(u))continue;const P=t(d).transformDateFunc;X(u)&&(u=P==null?void 0:P(u)),ce(u)&&ye.isDayjs(u[0])&&ye.isDayjs(u[1])&&(u=u.map(T=>P==null?void 0:P(T))),ae(u)&&(u=u.trim()),it(f,k,u)}return Pt(d,f)}function p(){const l=t(o),f={};l.forEach(b=>{const{defaultValue:u}=b;rt(u)||(f[b.field]=u,a[b.field]=u)}),e.value=f}return{handleFormValues:w,initDefault:p}}const H=24;function kt({advanceState:e,emit:o,getProps:a,getSchema:d,formModel:w,defaultValueRef:p}){const{realWidthRef:l,screenEnum:f,screenRef:b}=ct(),u=V(()=>{if(!e.isAdvanced)return 0;const c=t(a).emptySpan||0;if(Ae(c))return c;if(X(c)){const{span:i=0}=c,h=t(b);return c[h.toLowerCase()]||i||0}return 0}),k=xe(T,30);ie([()=>t(d),()=>e.isAdvanced,()=>t(l)],()=>{const{showAdvancedButton:c}=t(a);c&&k()},{immediate:!0});function P(c,i=0,h=!1,v=0){var A;const m=t(l),y=parseInt(c.md)||parseInt(c.xs)||parseInt(c.sm)||c.span||H,g=parseInt(c.lg)||y,D=parseInt(c.xl)||g,n=parseInt(c.xxl)||D;m<=f.LG?i+=y:m<f.XL?i+=g:m<f.XXL?i+=D:i+=n;let s=(A=t(a).autoAdvancedCol)!=null?A:3;return h?(e.hideAdvanceBtn=t(d).length<=s,i>H*2&&i<=H*(t(a).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced,t(d).length>s&&(e.hideAdvanceBtn=!1,e.isAdvanced=!1)),{isAdvanced:e.isAdvanced,itemColSum:i}):i>H*(t(a).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:i}:!e.isAdvanced&&v+1>s?{isAdvanced:!1,itemColSum:i}:{isAdvanced:!0,itemColSum:i}}function T(){let c=0,i=0;const{baseColProps:h={}}=t(a),v=t(d);for(let m=0;m<v.length;m++){const y=v[m],{show:g,colProps:D}=y;let n=!0;if(J(g)&&(n=g),E(g)&&(n=g({schema:y,model:w,field:y.field,values:C(C({},t(p)),w)})),n&&(D||h)){const{itemColSum:s,isAdvanced:A}=P(C(C({},h),D),c,!1,m);c=s||0,A&&(i=c),y.isAdvanced=A}}e.actionSpan=i%H+t(u),P(t(a).actionColOptions||{span:H},c,!0),o("advanced-change")}function W(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:W}}function xt({emit:e,getProps:o,formModel:a,getSchema:d,defaultValueRef:w,formElRef:p,schemaRef:l,handleFormValues:f}){function b(){return L(this,null,function*(){const{resetFunc:n,submitOnReset:s}=t(o);n&&E(n)&&(yield n()),t(p)&&(Object.keys(a).forEach(r=>{a[r]=w.value[r]}),y(),e("reset",Pe(a)),s&&D())})}function u(n){return L(this,null,function*(){const s=t(d).map(r=>r.field).filter(Boolean),A=[];Object.keys(n).forEach(r=>{const S=t(d).find(I=>I.field===r);let O=n[r];if(!(n instanceof Object))return;const x=Reflect.has(n,r);if(O=wt(S==null?void 0:S.component,O),x&&s.includes(r)){if(h(r))if(Array.isArray(O)){const I=[];for(const F of O)I.push(F?$(F):null);a[r]=I}else{const{componentProps:I}=S||{};let F=I;typeof I=="function"&&(F=F({formModel:a})),a[r]=O?F!=null&&F.valueFormat?O:$(O):null}else a[r]=O;A.push(r)}}),v(A).catch(r=>{})})}function k(n){return L(this,null,function*(){const s=be(t(d));if(!n)return;let A=ae(n)?[n]:n;ae(n)&&(A=[n]);for(const r of A)P(r,s);l.value=s})}function P(n,s){if(ae(n)){const A=s.findIndex(r=>r.field===n);A!==-1&&(delete a[n],s.splice(A,1))}}function T(n,s,A=!1){return L(this,null,function*(){const r=be(t(d)),S=r.findIndex(x=>x.field===s);if(!!r.some(x=>x.field===s||n.field)){if(!s||S===-1||A){A?r.unshift(n):r.push(n),l.value=r;return}S!==-1&&r.splice(S+1,0,n),l.value=r}})}function W(n){return L(this,null,function*(){let s=[];if(X(n)&&s.push(n),ce(n)&&(s=[...n]),!s.every(r=>r.component==="Divider"||Reflect.has(r,"field")&&r.field)){je("All children of the form Schema array that need to be updated must contain the `field` field");return}l.value=s})}function c(n){return L(this,null,function*(){let s=[];if(X(n)&&s.push(n),ce(n)&&(s=[...n]),!s.every(S=>S.component==="Divider"||Reflect.has(S,"field")&&S.field)){je("All children of the form Schema array that need to be updated must contain the `field` field");return}const r=[];s.forEach(S=>{t(d).forEach(O=>{if(O.field===S.field){const x=Re(O,S);r.push(x)}else r.push(O)})}),l.value=ht(r,"field")})}function i(){return t(p)?f(Pe(t(a))):{}}function h(n){return t(d).some(s=>s.field===n?Le.includes(s.component):!1)}function v(n){return L(this,null,function*(){var s;return(s=t(p))==null?void 0:s.validateFields(n)})}function m(n){return L(this,null,function*(){var s;return yield(s=t(p))==null?void 0:s.validate(n)})}function y(n){return L(this,null,function*(){var s;yield(s=t(p))==null?void 0:s.clearValidate(n)})}function g(n,s){return L(this,null,function*(){var A;yield(A=t(p))==null?void 0:A.scrollToField(n,s)})}function D(n){return L(this,null,function*(){n&&n.preventDefault();const{submitFunc:s}=t(o);if(s&&E(s)){yield s();return}if(!!t(p))try{const r=yield m();for(let O in r)r[O]instanceof Array&&lt(o,O)==="string"&&(r[O]=r[O].join(","));const S=f(r);e("submit",S)}catch(r){e("submit",{}),console.error("query form validate error, please ignore!",r)}})}return{handleSubmit:D,clearValidate:y,validate:m,validateFields:v,getFieldsValue:i,updateSchema:c,resetSchema:W,appendSchemaByField:T,removeSchemaByFiled:k,resetFields:b,setFieldsValue:u,scrollToField:g}}function Rt(w){return L(this,arguments,function*({getSchema:e,getProps:o,formElRef:a,isInitedDefault:d}){ut(()=>L(this,null,function*(){if(t(d)||!t(o).autoFocusFirstItem)return;yield Me();const p=t(e),l=t(a),f=l==null?void 0:l.$el;if(!l||!f||!p||p.length===0||!p[0].component.includes("Input"))return;const u=f.querySelector(".ant-row:first-child input");!u||u==null||u.focus()}))})}const{form:he}=dt,Mt={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},fieldMapToNumber:{type:Array,default:()=>[]},compact:j.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:j.bool.def(!0),autoSubmitOnEnter:j.bool.def(!1),submitOnReset:j.bool,size:j.oneOf(["default","small","large"]).def("default"),disabled:j.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:j.bool,transformDateFunc:{type:Function,default:e=>ye.isDayjs(e)?e==null?void 0:e.format("YYYY-MM-DD HH:mm:ss"):e},rulesMessageJoinLabel:j.bool.def(!0),autoAdvancedCol:j.number.def(3),autoAdvancedLine:j.number.def(3),alwaysShowLines:j.number.def(1),showActionButtonGroup:j.bool.def(!0),actionColOptions:Object,showResetButton:j.bool.def(!0),autoFocusFirstItem:j.bool,resetButtonOptions:Object,showSubmitButton:j.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:j.bool,labelCol:{type:Object,default:he.labelCol},layout:j.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:{type:Object,default:he.wrapperCol},colon:j.bool.def(he.colon),labelAlign:j.string,rowProps:Object,autoSearch:j.bool.def(!1)},$t=we({name:"BasicForm",components:{FormItem:vt,Form:Ce,Row:ft,FormAction:It},props:Mt,emits:["advanced-change","reset","submit","register"],setup(e,{emit:o,attrs:a}){const d=Se({}),w=bt(),p=Se({isAdvanced:!1,hideAdvanceBtn:!0,isLoad:!1,actionSpan:6}),l=G({}),f=G(!1),b=G({}),u=G(null),k=G(null),{prefixCls:P}=mt("basic-form"),T=V(()=>{let B=C(C({},e),t(b));return B.labelWidth&&(B.labelCol=void 0),B}),W=V(()=>[P,{[`${P}--compact`]:t(T).compact}]),c=V(()=>{const{baseRowStyle:B={},rowProps:M}=t(T);return C({style:B},M)}),i=V(()=>C(C(C({},a),e),t(T))),h=V(()=>{const B=t(u)||t(T).schemas;for(const M of B){const{defaultValue:_,component:ve,componentProps:Q}=M;if(_&&Le.includes(ve)){let q="";if(Q&&(q=Q==null?void 0:Q.valueFormat),q||console.warn("\u672A\u914D\u7F6EvalueFormat,\u53EF\u80FD\u5BFC\u81F4\u683C\u5F0F\u5316\u9519\u8BEF\uFF01"),!Array.isArray(_))q?M.defaultValue=$(_).format(q):M.defaultValue=$(_);else{const de=[];_.forEach(Fe=>{q?de.push($(Fe).format(q)):de.push($(Fe))}),M.defaultValue=de}}}return t(T).showAdvancedButton?B.filter(M=>M.component!=="Divider"):B}),{handleToggleAdvanced:v}=kt({advanceState:p,emit:o,getProps:T,getSchema:h,formModel:d,defaultValueRef:l}),{handleFormValues:m,initDefault:y}=Dt({getProps:T,defaultValueRef:l,getSchema:h,formModel:d});Rt({getSchema:h,getProps:T,isInitedDefault:f,formElRef:k});const{handleSubmit:g,setFieldsValue:D,clearValidate:n,validate:s,validateFields:A,getFieldsValue:r,updateSchema:S,resetSchema:O,appendSchemaByField:x,removeSchemaByFiled:I,resetFields:F,scrollToField:N}=xt({emit:o,getProps:T,formModel:d,getSchema:h,defaultValueRef:l,formElRef:k,schemaRef:u,handleFormValues:m});Ft({resetAction:F,submitAction:g}),ie(()=>t(T).model,()=>{const{model:B}=t(T);!B||D(B)},{immediate:!0}),ie(()=>t(T).schemas,B=>{O(B!=null?B:[])}),ie(()=>h.value,B=>{Me(()=>{var M;(M=w==null?void 0:w.redoModalHeight)==null||M.call(w)}),!t(f)&&B!=null&&B.length&&(y(),f.value=!0)});function z(B){return L(this,null,function*(){b.value=Re(t(b)||{},B)})}const Y=xe(g,300);function le(B,M){d[B]=M;const{validateTrigger:_}=t(i);(!_||_==="change")&&A([B]).catch(ve=>{}),e.autoSearch===!0&&Y()}function Ne(B){const{autoSubmitOnEnter:M}=t(T);if(!!M&&B.key==="Enter"&&B.target&&B.target instanceof HTMLElement){const _=B.target;_&&_.tagName&&_.tagName.toUpperCase()=="INPUT"&&g()}}const ue={getFieldsValue:r,setFieldsValue:D,resetFields:F,updateSchema:S,resetSchema:O,setProps:z,getProps:T,removeSchemaByFiled:I,appendSchemaByField:x,clearValidate:n,validateFields:A,validate:s,submit:g,scrollToField:N};return pt(()=>{y(),o("register",ue)}),C({getBindValue:i,handleToggleAdvanced:v,handleEnterPress:Ne,formModel:d,defaultValueRef:l,advanceState:p,getRow:c,getProps:T,formElRef:k,getSchema:h,formActionType:ue,setFormModel:le,getFormClass:W,getFormActionBindProps:V(()=>C(C({},T.value),p))},ue)}});export{$t as _,Pt as h};
