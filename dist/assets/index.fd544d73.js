var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,n=(e,s,t)=>new Promise(((o,r)=>{var a=e=>{try{n(t.next(e))}catch(s){r(s)}},i=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,s)).next())}));import{B as l}from"./BasicTable.cdd414e6.js";import{T as c}from"./helper.ec3e26f3.js";import"./TableImg.6cb3a734.js";import{a as d}from"./index.19984ae3.js";import{useListPage as m}from"./useListPage.4511beac.js";import{c as p,s as u,_ as j}from"./ManageDrawer.ead28650.js";import{a1 as b,u as f,l as g,o as y,t as x,v as w,x as v,y as h,z as C,L as M,V as O,W as P,E as B,aW as T}from"./index.b3c93d64.js";import"./BasicForm.79466d99.js";import"./uniqBy.30d2558a.js";import"./index.ee0a0c33.js";import"./BasicModal.2a8ad889.js";import"./useWindowSizeFn.e6386ae5.js";import"./useForm.ee23be26.js";import"./JAddInput.c8a1b05b.js";import"./useFormItem.d029403d.js";import"./api.dced5d87.js";import"./props.a4f5d1ca.js";import"./index.c4683457.js";import"./bem.3d3e77ca.js";import"./props.c13d8268.js";import"./useContextMenu.de287960.js";import"./index.9bbe419b.js";import"./onMountedOrActivated.d3784e6c.js";import"./index.36d6c198.js";import"./htmlmixed.ba3cd961.js";import"./vue.8c416d71.js";/* empty css             */import"./depart.api.429e062c.js";import"./index.4258d6df.js";import"./useContentHeight.7565ed37.js";import"./useContentViewHeight.d3266665.js";import"./usePageContext.f338fb2a.js";import"./RedoOutlined.c563bb0b.js";import"./functional.3bb51b91.js";import"./download.261c8978.js";import"./base64Conver.030fa32c.js";import"./index.d2e70b0d.js";import"./index.17ec2e33.js";import"./useCountdown.cb4ad478.js";import"./JUpload.6bcc6fce.js";import"./index.ef2039b9.js";import"./useTable.4670d269.js";const{createConfirm:R}=f();var S=(e=>(e.list="/sys/message/sysMessage/list",e.delete="/sys/message/sysMessage/delete",e.deleteBatch="/sys/message/sysMessage/deleteBatch",e.exportXls="sys/message/sysMessage/exportXls",e.importXls="sys/message/sysMessage/importExcel",e.save="/sys/message/sysMessage/add",e.edit="/sys/message/sysMessage/edit",e))(S||{});const _=e=>b.get({url:"/sys/message/sysMessage/list",params:e});const k=T("span",null,"删除",-1),D=T("span",null,"批量操作",-1),I=g({name:"message-manage"}),X=g((A=((e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(o)for(var t of o(s))a.call(s,t)&&i(e,t,s[t]);return e})({},I),s(A,t({setup(e){const{prefixCls:s,tableContext:t}=m({designScope:"message-manage",tableProps:{title:"消息中心模板列表数据",api:_,columns:p,formConfig:{schemas:u}},exportConfig:{url:S.exportXls,name:"消息中心模板列表"},importConfig:{url:S.importXls,success:()=>r()}}),[o,{reload:r,setLoading:a},{rowSelection:i,selectedRowKeys:f}]=t,g=y((()=>f.value.length>0)),[T,{openDrawer:I}]=d();function X(e){I(!0,{record:e})}function A(e){e&&E([e.id],!1)}function F(){return n(this,null,(function*(){try{yield E(f),f.value=[]}finally{}}))}function E(e,s=!0){return n(this,null,(function*(){const t=M(e);if(t.length>0)try{a(!0),yield((e,s=!1)=>new Promise(((t,o)=>{const r=()=>{t(b.delete({url:"/sys/message/sysMessage/deleteBatch",params:e},{joinParamsToUrl:!0}))};s?R({iconType:"warning",title:"删除",content:"确定要删除吗？",onOk:()=>r(),onCancel:()=>o()}):r()})))({ids:t.join(",")},s),yield r()}finally{a(!1)}}))}function L(e){return[{label:"详情",onClick:X.bind(null,e)}]}function W(e){return[{label:"删除",color:"error",popConfirm:{title:"确认要删除吗？",confirm:A.bind(null,e)}}]}return(e,t)=>{const r=x("Icon"),a=x("a-menu-item"),n=x("a-menu"),d=x("a-button"),m=x("a-dropdown");return w(),v("div",{class:B(M(s))},[h(M(l),{onRegister:M(o),rowSelection:M(i)},{tableTitle:C((()=>[M(g)?(w(),O(m,{key:0},{overlay:C((()=>[h(n,null,{default:C((()=>[h(a,{key:"1",onClick:F},{default:C((()=>[h(r,{icon:"ant-design:delete-outlined"}),k])),_:1})])),_:1})])),default:C((()=>[h(d,null,{default:C((()=>[D,h(r,{icon:"mdi:chevron-down"})])),_:1})])),_:1})):P("",!0)])),action:C((({record:e})=>[h(M(c),{actions:L(e),dropDownActions:W(e)},null,8,["actions","dropDownActions"])])),_:1},8,["onRegister","rowSelection"]),h(j,{onRegister:M(T)},null,8,["onRegister"])],2)}}}))));var A;export{X as default};
