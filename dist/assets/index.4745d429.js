var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(s,t,o)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,n=(e,s,t)=>new Promise(((o,a)=>{var r=e=>{try{n(t.next(e))}catch(s){a(s)}},i=e=>{try{n(t.throw(e))}catch(s){a(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,i);n((t=t.apply(e,s)).next())}));import{B as l}from"./BasicTable.8cbbb86a.js";import{T as m}from"./helper.7e5efd4b.js";import"./TableImg.f02873d7.js";import{a as p}from"./index.32c2f26d.js";import{useListPage as c}from"./useListPage.fd3526da.js";import{c as d,s as u,_ as f}from"./ManageDrawer.f0b595b5.js";import{a1 as j,u as b,l as g,o as y,t as x,v as w,x as v,y as h,z as C,L as M,V as O,W as P,E as B,aW as T}from"./index.26a57b91.js";import"./BasicForm.5f094c03.js";import"./uniqBy.006870c7.js";import"./index.934459b9.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import"./useFormItem.efca0b58.js";import"./api.54a4ca84.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";import"./index.1a78ea68.js";import"./useContentHeight.3e69d770.js";import"./useContentViewHeight.34b8e2f1.js";import"./usePageContext.dd16d566.js";import"./RedoOutlined.48666e00.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./index.9c299300.js";import"./useTable.98dbd6c0.js";const{createConfirm:R}=b();var S=(e=>(e.list="/sys/message/sysMessage/list",e.delete="/sys/message/sysMessage/delete",e.deleteBatch="/sys/message/sysMessage/deleteBatch",e.exportXls="sys/message/sysMessage/exportXls",e.importXls="sys/message/sysMessage/importExcel",e.save="/sys/message/sysMessage/add",e.edit="/sys/message/sysMessage/edit",e))(S||{});const _=e=>j.get({url:"/sys/message/sysMessage/list",params:e});const k=T("span",null,"删除",-1),D=T("span",null,"批量操作",-1),I=g({name:"message-manage"}),X=g((A=((e,s)=>{for(var t in s||(s={}))a.call(s,t)&&i(e,t,s[t]);if(o)for(var t of o(s))r.call(s,t)&&i(e,t,s[t]);return e})({},I),s(A,t({setup(e){const{prefixCls:s,tableContext:t}=c({designScope:"message-manage",tableProps:{title:"消息中心模板列表数据",api:_,columns:d,formConfig:{schemas:u}},exportConfig:{url:S.exportXls,name:"消息中心模板列表"},importConfig:{url:S.importXls,success:()=>a()}}),[o,{reload:a,setLoading:r},{rowSelection:i,selectedRowKeys:b}]=t,g=y((()=>b.value.length>0)),[T,{openDrawer:I}]=p();function X(e){I(!0,{record:e})}function A(e){e&&E([e.id],!1)}function F(){return n(this,null,(function*(){try{yield E(b),b.value=[]}finally{}}))}function E(e,s=!0){return n(this,null,(function*(){const t=M(e);if(t.length>0)try{r(!0),yield((e,s=!1)=>new Promise(((t,o)=>{const a=()=>{t(j.delete({url:"/sys/message/sysMessage/deleteBatch",params:e},{joinParamsToUrl:!0}))};s?R({iconType:"warning",title:"删除",content:"确定要删除吗？",onOk:()=>a(),onCancel:()=>o()}):a()})))({ids:t.join(",")},s),yield a()}finally{r(!1)}}))}function L(e){return[{label:"详情",onClick:X.bind(null,e)}]}function W(e){return[{label:"删除",color:"error",popConfirm:{title:"确认要删除吗？",confirm:A.bind(null,e)}}]}return(e,t)=>{const a=x("Icon"),r=x("a-menu-item"),n=x("a-menu"),p=x("a-button"),c=x("a-dropdown");return w(),v("div",{class:B(M(s))},[h(M(l),{onRegister:M(o),rowSelection:M(i)},{tableTitle:C((()=>[M(g)?(w(),O(c,{key:0},{overlay:C((()=>[h(n,null,{default:C((()=>[h(r,{key:"1",onClick:F},{default:C((()=>[h(a,{icon:"ant-design:delete-outlined"}),k])),_:1})])),_:1})])),default:C((()=>[h(p,null,{default:C((()=>[D,h(a,{icon:"mdi:chevron-down"})])),_:1})])),_:1})):P("",!0)])),action:C((({record:e})=>[h(M(m),{actions:L(e),dropDownActions:W(e)},null,8,["actions","dropDownActions"])])),_:1},8,["onRegister","rowSelection"]),h(f,{onRegister:M(T)},null,8,["onRegister"])],2)}}}))));var A;export{X as default};
