import{B as e}from"./index.934459b9.js";import{B as r}from"./BasicForm.5f094c03.js";import"./helper.7e5efd4b.js";import{u as t}from"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import{l as o,bH as i,f0 as a,Q as n,t as s,v as m,V as l,z as p,y as d,u as c}from"./index.26a57b91.js";import{a as u}from"./useSchemas.02a1602e.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./uniqBy.006870c7.js";import"./useFormItem.efca0b58.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./api.54a4ca84.js";import"./index.9c299300.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";import"./validator.a47312b2.js";import"./user.api.c522f7b9.js";var f=(e,r,t)=>new Promise(((o,i)=>{var a=e=>{try{s(t.next(e))}catch(r){i(r)}},n=e=>{try{s(t.throw(e))}catch(r){i(r)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(a,n);s((t=t.apply(e,r)).next())}));var j=a(o({name:"CgformExtConfigModel",components:{BasicModal:e,BasicForm:r},props:{parentForm:{type:Object,required:!0}},emits:["register","ok"],setup(e,{emit:r}){const{createMessage:o}=c(),{formSchemas:a}=u(e,{onIsDesformChange:function(r){if("Y"===r){let{themeTemplate:r}=e.parentForm.getFieldsValue(["themeTemplate"]);"erp"===r&&(e.parentForm.setFieldsValue({themeTemplate:"normal"}),o.warning("请注意：erp风格不支持对接表单设计，已自动改为默认风格！"))}else d("desFormCode")},onJoinQueryChange:function(r){if(1===r){let{themeTemplate:r,isTree:t,tableType:i}=e.parentForm.getFieldsValue(["themeTemplate","isTree","tableType"]);"erp"===r&&(o.warning("请注意：erp风格不支持联合查询，配置无效!"),l({joinQuery:0})),"innerTable"===r&&(o.warning("请注意：内嵌风格不支持联合查询，配置无效!"),l({joinQuery:0})),1===i?(o.warning("请注意：单表不支持联合查询，配置无效!"),l({joinQuery:0})):3===i?(o.warning("请注意：当前表为附表，请在对应主表配置!"),l({joinQuery:0})):"Y"===t&&(o.warning("请注意：树形列表不支持联合查询，配置无效!"),l({joinQuery:0}))}},onReportPrintShowChange:function(e){return f(this,null,(function*(){let r=p().reportPrintUrl;0===e?r===g&&(yield l({reportPrintUrl:""})):1===e&&""===r&&(yield l({reportPrintUrl:g})),d("reportPrintUrl")}))}}),[s,{resetFields:m,setFieldsValue:l,getFieldsValue:p,clearValidate:d,validate:j}]=t({schemas:a,showActionButtonGroup:!1,labelAlign:"right"}),[h,{closeModal:b}]=i((e=>f(this,null,(function*(){yield m(),yield l(e.extConfigJson)}))));const g="{{ window._CONFIG['domianURL'] }}/jmreport/view/{积木报表ID}";return{handleOk:function(){return f(this,null,(function*(){yield d(),yield n();try{const e=yield j();r("ok",e),b()}catch(e){}}))},handleCancel:function(){b()},registerModal:h,registerForm:s}}}),[["render",function(e,r,t,o,i,a){const n=s("BasicForm"),c=s("BasicModal");return m(),l(c,{onRegister:e.registerModal,title:"扩展配置",width:1e3,onOk:e.handleOk,onCancel:e.handleCancel},{default:p((()=>[d(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},8,["onRegister","onOk","onCancel"])}],["__scopeId","data-v-63fff65e"]]);export{j as default};
