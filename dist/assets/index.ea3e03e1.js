var E=Object.defineProperty,z=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var F=(o,e,t)=>e in o?E(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,v=(o,e)=>{for(var t in e||(e={}))M.call(e,t)&&F(o,t,e[t]);if(w)for(var t of w(e))O.call(e,t)&&F(o,t,e[t]);return o},I=(o,e)=>z(o,K(e));import V from"./BasicTable.8e358715.js";import"./componentMap.6d6ce384.js";import"./BasicTable.vue_vue_type_style_index_0_lang.deb3e4c6.js";import{u as j}from"./useTable.9835c939.js";import{Z as _,j as C,C as n,a7 as R,X as D,r as y,s as G,t as H,v as a,w as l,aW as A,H as h,cF as N}from"./index.0be4b5b8.js";import{useECharts as B}from"./useECharts.a1dfcd45.js";import"./BasicForm.be7f03c1.js";import"./BasicForm.vue_vue_type_style_index_0_lang.bc61085a.js";import"./uniqBy.a356d751.js";import"./index.df1721d5.js";import"./BasicModal.05e341b8.js";import"./useWindowSizeFn.6297694a.js";import"./useFormItem.77c38aa9.js";import"./JUpload.vue_vue_type_style_index_0_lang.685c6da6.js";import"./api.dbe6bd39.js";import"./download.e1519503.js";import"./base64Conver.030fa32c.js";import"./index.2fb8bc9c.js";import"./index.2fd0f218.js";import"./useCountdown.28a04794.js";import"./JAddInput.d2fd0723.js";import"./areaDataUtil.04b478e5.js";import"./props.85c73a56.js";import"./index.8e58299a.js";import"./bem.95d55b55.js";import"./props.92e8297a.js";import"./useContextMenu.38a95ea9.js";import"./index.495f5812.js";import"./onMountedOrActivated.5ca73ec3.js";import"./depart.api.a4de2579.js";import"./MinusCircleOutlined.339270b0.js";import"./index.145a7e75.js";import"./useForm.b4df01c5.js";import"./injectionKey.1ad13e6c.js";import"./RedoOutlined.f0aa8ff3.js";import"./echarts.02d88369.js";const P=()=>_.get({url:"/sys/actuator/redis/keysSize"},{isTransformResponse:!1}),W=()=>_.get({url:"/sys/actuator/redis/memoryInfo"},{isTransformResponse:!1}),X=()=>_.get({url:"/sys/actuator/redis/info"}),Z=()=>Promise.all([P(),W()]),q=[{title:"Key",dataIndex:"key",width:100},{title:"Description",dataIndex:"description",width:80},{title:"Value",dataIndex:"value",width:80}],J={class:"p-4"},L=C({name:"monitor-redis"}),Oe=C(I(v({},L),{setup(o){n([]);const e=n(null),t=n(null),{setOptions:x,echarts:Q}=B(e),{setOptions:g,echarts:U}=B(t);n(!1);let p=null;const r=R({title:{text:"Redis Key \u5B9E\u65F6\u6570\u91CF\uFF08\u4E2A\uFF09"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",areaStyle:{color:"#ff6987"},lineStyle:{color:"#dc143c",width:10,type:"solid"}}]}),s=R({title:{text:"Redis \u5185\u5B58\u5B9E\u65F6\u5360\u7528\u60C5\u51B5\uFF08KB\uFF09"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{data:[],type:"line",areaStyle:{color:"#74bcff"},lineStyle:{color:"#1890ff",width:10,type:"solid"}}]}),[b,{reload:Y}]=j({columns:q,showIndexColumn:!1,pagination:!1,bordered:!0});function S(){x(s),g(r)}function T(){c(),k(),p=setInterval(()=>{c()},5e3)}function k(){p&&clearInterval(p)}function c(){Z().then(m=>{let u=N().format("hh:mm:ss"),[{dbSize:i},d]=m,f=d.used_memory/1e3;r.xAxis.data.push(u),r.series[0].data.push(i),s.xAxis.data.push(u),s.series[0].data.push(f),r.series[0].data.length>6&&(r.xAxis.data.splice(0,1),r.series[0].data.splice(0,1),s.xAxis.data.splice(0,1),s.series[0].data.splice(0,1)),x(s,!1),g(r,!1)}).catch(m=>{})}return D(()=>{S(),T(),setTimeout(()=>{c()},1e3)}),(m,u)=>{const i=y("a-col"),d=y("a-row"),f=y("a-card");return G(),H("div",J,[a(f,null,{default:l(()=>[a(d,{gutter:8},{default:l(()=>[a(i,{sm:24,xl:12},{default:l(()=>[A("div",{ref_key:"chartRef",ref:e,style:{width:"100%",height:"300px"}},null,512)]),_:1}),a(i,{sm:24,xl:12},{default:l(()=>[A("div",{ref_key:"chartRef2",ref:t,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),a(h(V),{onRegister:h(b),api:h(X)},null,8,["onRegister","api"])])}}}));export{Oe as default};
