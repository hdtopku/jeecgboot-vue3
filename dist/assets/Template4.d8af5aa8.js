import{q as t,dz as e,a1 as a,t as l,v as i,V as n,z as o,y as s}from"./index.b2c24a42.js";var h=t({name:"Template4",data:()=>({table1:{loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["10","20","30","100","200"],total:0},lastRow:null,selectedRows:[],dataSource:[],columns:[{key:"num",title:"序号",width:"80px"},{key:"ship_name",title:"船名",width:"180px",type:e.input},{key:"call",title:"呼叫",width:"80px",type:e.input},{key:"len",title:"长",width:"80px",type:e.input},{key:"ton",title:"吨",width:"120px",type:e.input},{key:"payer",title:"付款方",width:"120px",type:e.input},{key:"count",title:"数",width:"40px"},{key:"company",title:"公司",minWidth:"180px",type:e.input},{key:"trend",title:"动向",width:"120px",type:e.input}]},table2:{loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["100","200"],total:0},selectedRows:[],dataSource:[],columns:[{key:"dd_num",title:"调度序号",width:"120px"},{key:"tug",title:"拖轮",width:"180px",type:e.input},{key:"work_start_time",title:"作业开始时间",width:"180px",type:e.input},{key:"work_stop_time",title:"作业结束时间",width:"180px",type:e.input},{key:"type",title:"船舶分类",width:"120px",type:e.input},{key:"port_area",title:"所属港区",width:"120px",type:e.input}]},table3:{lastRow:null,selectedRows:[]},table4:{loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["100","200"],total:0},selectedRows:[],dataSource:[],columns:[{key:"dd_num",title:"调度序号",width:"120px"},{key:"tug",title:"拖轮",width:"180px",type:e.input},{key:"work_start_time",title:"作业开始时间",width:"180px",type:e.input},{key:"work_stop_time",title:"作业结束时间",width:"180px",type:e.input},{key:"type",title:"船舶分类",width:"120px",type:e.input},{key:"port_area",title:"所属港区",width:"120px",type:e.input}]},url:{getData:"/mock/vxe/getData"}}),watch:{"table1.lastRow"(){this.loadTable2Data()},"table3.lastRow"(){this.loadTable4Data()}},created(){this.loadTable1Data()},methods:{loadTable1Data(){let t={pageNo:this.table1.pagination.current,pageSize:this.table1.pagination.pageSize};this.table1.loading=!0,a.get({url:this.url.getData,params:t}).then((t=>{this.table1.pagination.total=t.total,this.table1.dataSource=t.records,this.table1.selectedRows=[]})).finally((()=>{this.table1.loading=!1}))},handleTable1PageChange(t){this.table1.pagination.current=t.current,this.table1.pagination.pageSize=t.pageSize,this.loadTable1Data()},handleTable1SelectRowChange(t){this.handleTableSelectRowChange(this.table1,t)},loadTable2Data(){let t=this.table1.selectedRows;if(!t||0===t.length)return this.table2.pagination.total=0,this.table2.dataSource=[],void(this.table2.selectedRows=[]);null==this.table1.lastRow&&(this.table1.lastRow=t[t.length-1]);let e={parentId:this.table1.lastRow.id,pageNo:this.table2.pagination.current,pageSize:this.table2.pagination.pageSize};this.table2.loading=!0,a.get({url:this.url.getData,params:e}).then((t=>{this.table2.pagination.total=t.total,this.table2.dataSource=t.records,this.table2.selectedRows=[]})).finally((()=>{this.table2.loading=!1}))},handleTable2PageChange(t){this.table2.pagination.current=t.current,this.table2.pagination.pageSize=t.pageSize,this.loadTable2Data()},handleTable3SelectRowChange(t){this.handleTableSelectRowChange(this.table3,t)},loadTable4Data(){let t=this.table3.selectedRows;if(!t||0===t.length)return this.table4.pagination.total=0,this.table4.dataSource=[],void(this.table4.selectedRows=[]);null==this.table3.lastRow&&(this.table3.lastRow=t[t.length-1]);let e={parentId:this.table3.lastRow.id,pageNo:this.table4.pagination.current,pageSize:this.table4.pagination.pageSize};this.table4.loading=!0,a.get({url:this.url.getData,params:e}).then((t=>{this.table4.pagination.total=t.total,this.table4.dataSource=t.records,this.table4.selectedRows=[]})).finally((()=>{this.table4.loading=!1}))},handleTable4PageChange(t){this.table4.pagination.current=t.current,this.table4.pagination.pageSize=t.pageSize,this.loadTable4Data()},handleTableSelectRowChange(t,e){let{row:a,action:l,selectedRows:i,$table:n}=e,o=i[i.length-1];"selected"===l?t.lastRow=a:"selected-all"===l?0===i.length?t.lastRow=null:t.lastRow||(t.lastRow=o):"unselected"===l&&a===t.lastRow&&(t.lastRow=o),n.setCurrentRow(t.lastRow),t.selectedRows=i}}},[["render",function(t,e,a,h,g,p){const d=l("JVxeTable"),r=l("a-col"),c=l("a-row"),u=l("a-card");return i(),n(u,{bordered:!1},{default:o((()=>[s(c,{gutter:8},{default:o((()=>[s(r,{span:12},{default:o((()=>[s(d,{toolbar:"",rowNumber:"",rowSelection:"",clickSelectRow:"",highlightCurrentRow:"",radioConfig:{highlight:!1},checkboxConfig:{highlight:!1},height:340,loading:g.table1.loading,columns:g.table1.columns,dataSource:g.table1.dataSource,pagination:g.table1.pagination,style:{"margin-bottom":"8px"},onPageChange:p.handleTable1PageChange,onSelectRowChange:p.handleTable1SelectRowChange},null,8,["loading","columns","dataSource","pagination","onPageChange","onSelectRowChange"]),s(d,{toolbar:"",rowNumber:"",rowSelection:"",clickSelectRow:"",height:350,loading:g.table2.loading,columns:g.table2.columns,dataSource:g.table2.dataSource,pagination:g.table2.pagination,onPageChange:p.handleTable2PageChange},null,8,["loading","columns","dataSource","pagination","onPageChange"])])),_:1}),s(r,{span:12},{default:o((()=>[s(d,{rowNumber:"",rowSelection:"",clickSelectRow:"",highlightCurrentRow:"",radioConfig:{highlight:!1},checkboxConfig:{highlight:!1},height:340,columns:g.table1.columns,dataSource:g.table1.selectedRows,style:{margin:"52px 0 8px"},onSelectRowChange:p.handleTable3SelectRowChange},null,8,["columns","dataSource","onSelectRowChange"]),s(d,{toolbar:"",rowNumber:"",rowSelection:"",clickSelectRow:"",height:350,loading:g.table4.loading,columns:g.table4.columns,dataSource:g.table4.dataSource,pagination:g.table4.pagination,style:{margin:"48px 0 0"}},null,8,["loading","columns","dataSource","pagination"])])),_:1})])),_:1})])),_:1})}]]);export{h as default};
