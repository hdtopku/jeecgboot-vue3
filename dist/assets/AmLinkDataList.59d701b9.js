import{l,di as e,dj as t,F as n,t as i,v as a,V as u,z as d,x as o,y as s,W as r,R as v,S as k,aW as y,D as p,C as c,E as f,c3 as m,a6 as _}from"./index.b3c93d64.js";import{s as g,g as h}from"./AmLink.api.2e965b34.js";import C from"./CommonList.f38f9d4e.js";import{g as b}from"./Am.api.f6100db0.js";const x={key:0},L=c("新增"),z=c("online地址 "),A=c("按创建时间倒排"),j=c("按修改时间倒排 "),q=c("置顶"),w=c("编辑"),D=c("删除"),I=c("备用"),O=c("使用"),B=c("设为至尊"),E=c("设为普通"),N=c("取消至尊"),H=c("取消普通"),M={key:0},Q=c(" |"),R={size:"small",class:"text-red-500"},T=c("至尊版"),W=c("普通版"),F={key:2,style:{"margin-left":"-10px"}},S=c("复制短链"),V=c("激活链"),G=c("未生成"),J={key:0,class:"text-indigo-700"},K={key:0,class:"text-red-600"},P=c("备注"),U={key:1},X=c("预存"),Y=c("未填写"),Z={key:2},$=c("长链接"),ll=c("未填写"),el={key:3},tl=c("预存"),nl=c("未填写"),il={key:4},al={class:"text-indigo-700"},ul={key:0},dl=l({__name:"AmLinkDataList",emits:["handleEdit","handleAdd","queryList"],setup(l,{expose:dl,emit:ol}){const sl=e(t);let{username:rl,realname:vl}=null==sl?void 0:sl.userInfo;const kl=n(),yl=l=>{ol("handleAdd",l)},pl=l=>cl(null==l?void 0:l.link)+cl(null==l?void 0:l.thirdLink)+cl(null==l?void 0:l.shortLink),cl=l=>{if((null==l?void 0:l.indexOf("itunes.apple.com"))>0){let e=null==l?void 0:l.indexOf("&ud_t=");if(e>0){let t=1e3*Number.parseInt(null==l?void 0:l.substring(e+6));return m(t).format("MM-DD HH:mm")}}return""},fl=l=>{if((null==l?void 0:l.length)>0){let e=l.indexOf("clicked/");if(e>=0)return l.substring(e,e+13);if(e=l.indexOf("&ud_t="),e>=0)return l.substring(e+4)}return l},ml=(l,e)=>{l.status=e,g(l,!0).then((()=>{ol("queryList")}))},_l=(l,e)=>{l.type=e,g(l,!0).then((()=>{ol("queryList")}))},{proxy:gl}=_(),hl=(l={})=>b({count:1,type:6,linkId:null==l?void 0:l.id,link:null==l?void 0:l.link,username:rl},(l=>{gl.tool.copy(l,l+"已复制")})),Cl=n("0"),bl=n(!1);return dl({startQuery:(l={})=>{Cl.value=null==l?void 0:l.status,kl.value.execQuery(h,l)},changeAdvanced:()=>{bl.value=!bl.value},copyCode:hl}),(l,e)=>{const t=i("a-button"),n=i("a-typography-text"),m=i("a-menu-item"),_=i("a-menu"),h=i("a-tag");return a(),u(C,{ref_key:"CommonListRef",ref:kl},{header:d((()=>["1"===Cl.value?(a(),o("span",x,[s(t,{class:"mr-6",size:"small",type:"primary",preIcon:"ant-design:plus-outlined",onClick:yl},{default:d((()=>[L])),_:1}),s(n,{class:"mr-6",copyable:{text:"https://www.myunidays.hk/CN/zh-CN/partners/applemusic/micro-access/online"}},{default:d((()=>[z])),_:1},8,["copyable"])])):r("",!0),v(s(n,{mark:""},{default:d((()=>[A])),_:1},512),[[k,"0"===Cl.value]]),v(s(n,{mark:""},{default:d((()=>[j])),_:1},512),[[k,"100"===Cl.value||"-1"===Cl.value||"1"===Cl.value]])])),operate:d((({item:l})=>[s(_,null,{default:d((()=>[0!==(null==l?void 0:l.status)?(a(),u(m,{key:0,onClick:e=>{return t=l.id,void g({id:t},!0).then((()=>{ol("queryList")}));var t}},{default:d((()=>[s(t,{type:"warning",ghost:"",size:"small"},{default:d((()=>[q])),_:1})])),_:2},1032,["onClick"])):r("",!0),s(m,{onClick:e=>{ol("handleEdit",l)}},{default:d((()=>[s(t,{type:"link",size:"small"},{default:d((()=>[w])),_:1})])),_:2},1032,["onClick"]),0===(null==l?void 0:l.status)||1===(null==l?void 0:l.status)?(a(),u(m,{key:1,onClick:e=>ml(l,-1)},{default:d((()=>[s(t,{type:"link",size:"small",danger:""},{default:d((()=>[D])),_:1})])),_:2},1032,["onClick"])):r("",!0),0===(null==l?void 0:l.status)||-1===(null==l?void 0:l.status)?(a(),u(m,{key:2,onClick:e=>ml(l,1)},{default:d((()=>[s(t,{type:"link",size:"small"},{default:d((()=>[I])),_:1})])),_:2},1032,["onClick"])):r("",!0),-1===(null==l?void 0:l.status)||1===(null==l?void 0:l.status)?(a(),u(m,{key:3,onClick:e=>ml(l,0)},{default:d((()=>[s(t,{type:"link",size:"small"},{default:d((()=>[O])),_:1})])),_:2},1032,["onClick"])):r("",!0),1!==(null==l?void 0:l.type)&&6!==(null==l?void 0:l.type)?(a(),u(m,{key:4},{default:d((()=>[s(t,{onClick:e=>_l(l,6),type:"link",size:"small"},{default:d((()=>[B])),_:2},1032,["onClick"])])),_:2},1024)):r("",!0),1!==(null==l?void 0:l.type)&&6!==(null==l?void 0:l.type)?(a(),u(m,{key:5},{default:d((()=>[s(t,{onClick:e=>_l(l,1),type:"link",size:"small"},{default:d((()=>[E])),_:2},1032,["onClick"])])),_:2},1024)):r("",!0),6===(null==l?void 0:l.type)?(a(),u(m,{key:6,onClick:e=>_l(l,0)},{default:d((()=>[s(t,{type:"link",size:"small"},{default:d((()=>[N])),_:1})])),_:2},1032,["onClick"])):r("",!0),1===(null==l?void 0:l.type)?(a(),u(m,{key:7,onClick:e=>_l(l,0)},{default:d((()=>[s(t,{type:"link",size:"small"},{default:d((()=>[H])),_:1})])),_:2},1032,["onClick"])):r("",!0)])),_:2},1024)])),shelter:d((({item:l})=>[(null==l?void 0:l.bindCount)>0?(a(),o("span",M,[Q,y("span",R,p(null==l?void 0:l.bindCount)+"次",1)])):r("",!0)])),left:d((({item:l})=>{var e;return[6===(null==l?void 0:l.type)?(a(),u(h,{key:0,color:"red"},{default:d((()=>[T])),_:1})):r("",!0),1===(null==l?void 0:l.type)?(a(),u(h,{key:1},{default:d((()=>[W])),_:1})):r("",!0),(null==(e=null==l?void 0:l.link)?void 0:e.length)>0?(a(),o("div",F,[s(t,{size:"small",type:"link",onClick:e=>hl(l)},{default:d((()=>[S])),_:2},1032,["onClick"])])):r("",!0)]})),bottom:d((({item:l})=>{var e,t,i,v,k,m,_,g,C,b,x,L;return[y("div",{class:f(6===(null==l?void 0:l.type)||1===(null==l?void 0:l.type)?"bg-pink-100 p-2":"")},[y("div",null,[s(h,null,{default:d((()=>[V])),_:1}),(null==(e=null==l?void 0:l.link)?void 0:e.length)>0?(a(),u(n,{key:0,delete:-1===(null==l?void 0:l.status),copyable:{text:l.link}},{default:d((()=>[c(p(fl(l.link)),1)])),_:2},1032,["delete","copyable"])):(a(),u(h,{key:1,color:"error"},{default:d((()=>[G])),_:1}))]),y("div",null,[c(" [创建]"+p(null==(t=null==l?void 0:l.createTime)?void 0:t.substring(5,16))+" ",1),(null==(i=pl(l))?void 0:i.length)>0?(a(),o("span",J,"[激活]"+p(pl(l)),1)):r("",!0)]),(null==(v=null==l?void 0:l.remark)?void 0:v.length)>0?(a(),o("div",K,[s(h,{color:"red"},{default:d((()=>[P])),_:1}),c(" "+p(l.remark),1)])):r("",!0),(null==(k=null==l?void 0:l.email)?void 0:k.length)>0&&(bl.value||1===(null==l?void 0:l.status)||1===(null==l?void 0:l.type))?(a(),o("div",U,[s(h,null,{default:d((()=>[X])),_:1}),(null==(m=null==l?void 0:l.email)?void 0:m.length)>0?(a(),u(n,{key:0,copyable:{text:l.email}},{default:d((()=>[c(p(fl(l.email)),1)])),_:2},1032,["copyable"])):(a(),u(h,{key:1,color:"error"},{default:d((()=>[Y])),_:1}))])):r("",!0),bl.value&&(null==(_=null==l?void 0:l.longLink)?void 0:_.length)>0||1===(null==l?void 0:l.status)?(a(),o("div",Z,[s(h,null,{default:d((()=>[$])),_:1}),(null==(g=null==l?void 0:l.longLink)?void 0:g.length)>0?(a(),u(n,{key:0,copyable:{text:l.longLink}},{default:d((()=>[c(p(fl(l.longLink)),1)])),_:2},1032,["copyable"])):(a(),u(h,{key:1,color:"error"},{default:d((()=>[ll])),_:1}))])):r("",!0),(null==(C=null==l?void 0:l.thirdLink)?void 0:C.length)>0&&(bl.value||1===(null==l?void 0:l.status)||6===(null==l?void 0:l.status))?(a(),o("div",el,[s(h,null,{default:d((()=>[tl])),_:1}),(null==(b=null==l?void 0:l.thirdLink)?void 0:b.length)>0?(a(),u(n,{key:0,copyable:{text:l.thirdLink}},{default:d((()=>[c(p(fl(l.thirdLink)),1)])),_:2},1032,["copyable"])):(a(),u(h,{key:1,color:"error"},{default:d((()=>[nl])),_:1}))])):r("",!0),bl.value?(a(),o("div",il,[y("span",al,[c(" [创建]"+p(null==l?void 0:l.createBy)+" ",1),(null==(x=null==l?void 0:l.updateBy)?void 0:x.length)>0?(a(),o("div",ul,"[更新]"+p(null==l?void 0:l.updateBy)+"："+p(null==(L=null==l?void 0:l.updateTime)?void 0:L.substring(5,19)),1)):r("",!0)])])):r("",!0)],2)]})),_:1},512)}}});export{dl as default};
