import e from"./LeftRole.08e7d40a.js";import t from"./LeftDepart.0cc4350a.js";import a from"./LeftUser.7fee346c.js";import r from"./AuthFieldTree.93f371ad.js";import o from"./AuthButtonTree.4d078c65.js";import l from"./AuthDataTree.9f74d546.js";import{B as n}from"./index.934459b9.js";import{l as d,F as i,o as u,bH as s,f0 as c,Q as f,t as p,v as m,V as b,z as j,y as v,x as h,ax as y,W as g}from"./index.26a57b91.js";import"./BasicTable.8cbbb86a.js";import"./helper.7e5efd4b.js";import"./TableImg.f02873d7.js";import"./api.54a4ca84.js";import"./useListPage.fd3526da.js";import"./useTable.98dbd6c0.js";import"./BasicForm.5f094c03.js";import"./uniqBy.006870c7.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import"./useFormItem.efca0b58.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */import"./depart.api.c295d6d2.js";import"./index.1a78ea68.js";import"./useContentHeight.3e69d770.js";import"./useContentViewHeight.34b8e2f1.js";import"./usePageContext.dd16d566.js";import"./RedoOutlined.48666e00.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./index.9c299300.js";import"./auth.api.a6f2a5e6.js";import"./auth.data.f236296d.js";var R=Object.defineProperty,S=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t,a)=>new Promise(((r,o)=>{var l=e=>{try{d(a.next(e))}catch(t){o(t)}},n=e=>{try{d(a.throw(e))}catch(t){o(t)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);d((a=a.apply(e,t)).next())}));var _=c(d({name:"AuthSetterModal",components:{BasicModal:n,LeftRole:e,LeftDepart:t,LeftUser:a,AuthFieldTree:r,AuthButtonTree:o,AuthDataTree:l},props:{tableType:{type:Number,default:1}},setup(e){const t=i(""),a=i(!1),r=i("field"),o=i("role"),l={fieldRef:i(),buttonRef:i(),dataRef:i(),roleRef:i(),userRef:i(),departRef:i()},n=i(""),d=u((()=>1==e.tableType||2==e.tableType)),[c,{closeModal:p}]=s((e=>{r.value="field",t.value!=e.cgformId&&(t.value=e.cgformId,function(){M(this,null,(function*(){yield f(),j(),m().clear()}))}())}));function m(e=r.value){var t;return null==(t=l[e+"Ref"])?void 0:t.value}function b(){"role"==o.value?(l.departRef.value.clearSelected(),l.userRef.value.clearSelected()):"depart"==o.value?(l.roleRef.value.clearSelected(),l.userRef.value.clearSelected()):"user"==o.value&&(l.departRef.value.clearSelected(),l.roleRef.value.clearSelected())}function j(){"role"==o.value?l.roleRef.value.clearSelected():"depart"==o.value?l.departRef.value.clearSelected():"user"==o.value&&l.userRef.value.clearSelected(),m().clearChecked()}function v(e){return M(this,null,(function*(){yield f(),n.value&&m(e).loadChecked(n.value,o.value)}))}return h=((e,t)=>{for(var a in t||(t={}))A.call(t,a)&&I(e,a,t[a]);if(x)for(var a of x(t))T.call(t,a)&&I(e,a,t[a]);return e})({},l),S(h,C({cgformId:t,loading:a,activeKey:r,hasDataAuth:d,authMode:o,onAuthModeChange:function(){j()},onAuthTypeChange:v,closeModal:p,onSelectRole:function(e){n.value=e,v(r.value),b()},onSelectDepart:function(e){n.value=e,v(r.value),b()},onSelectUser:function(e){n.value=e,v(r.value),b()},registerModal:c}));var h}}),[["render",function(e,t,a,r,o,l){const n=p("LeftRole"),d=p("a-tab-pane"),i=p("LeftDepart"),u=p("LeftUser"),s=p("a-tabs"),c=p("a-col"),f=p("AuthFieldTree"),R=p("AuthButtonTree"),S=p("AuthDataTree"),C=p("a-row"),x=p("a-spin"),A=p("BasicModal");return m(),b(A,{title:"Online权限授权",width:900,maskClosable:!1,defaultFullscreen:"",okButtonProps:{style:{display:"none"}},cancelText:"关闭",onCancel:e.closeModal,onRegister:e.registerModal},{default:j((()=>[v(x,{spinning:e.loading},{default:j((()=>[v(C,null,{default:j((()=>[v(c,{span:12},{default:j((()=>[v(s,{activeKey:e.authMode,"onUpdate:activeKey":t[0]||(t[0]=t=>e.authMode=t),onChange:e.onAuthModeChange},{default:j((()=>[v(d,{tab:"角色授权",key:"role",forceRender:""},{default:j((()=>[v(n,{ref:"roleRef",onSelect:e.onSelectRole},null,8,["onSelect"])])),_:1}),v(d,{tab:"部门授权",key:"depart",forceRender:""},{default:j((()=>[v(i,{ref:"departRef",onSelect:e.onSelectDepart},null,8,["onSelect"])])),_:1}),v(d,{tab:"人员授权",key:"user",forceRender:""},{default:j((()=>[v(u,{ref:"userRef",onSelect:e.onSelectUser},null,8,["onSelect"])])),_:1})])),_:1},8,["activeKey","onChange"])])),_:1}),v(c,{span:1}),v(c,{span:11},{default:j((()=>[v(s,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t),onChange:e.onAuthTypeChange},{default:j((()=>[v(d,{tab:"字段权限",key:"field",forceRender:""},{default:j((()=>[v(f,{ref:"fieldRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),e.hasDataAuth?(m(),h(y,{key:0},[v(d,{tab:"按钮权限",key:"button",forceRender:""},{default:j((()=>[v(R,{ref:"buttonRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),v(d,{tab:"数据权限",key:"data",forceRender:""},{default:j((()=>[v(S,{ref:"dataRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1})],64)):g("",!0)])),_:1},8,["activeKey","onChange"])])),_:1})])),_:1})])),_:1},8,["spinning"])])),_:1},8,["onCancel","onRegister"])}]]);export{_ as default};
