var m=(r,i,o)=>new Promise((s,n)=>{var d=a=>{try{t(o.next(a))}catch(e){n(e)}},c=a=>{try{t(o.throw(a))}catch(e){n(e)}},t=a=>a.done?s(a.value):Promise.resolve(a.value).then(d,c);t((o=o.apply(r,i)).next())});import{B as y}from"./index.8ea66662.js";import{l as h,aM as p,F as T,a7 as _,o as v,bG as k,L as l,Q as B,v as M,V as w,z as E,y as F,B as g}from"./index.39dcafc9.js";import{U as u,_ as R}from"./JUpload.c0f3b66f.js";const U=h({__name:"JUploadModal",props:{value:p.oneOfType([p.string,p.array]),width:p.number.def(520)},emits:["change","update:value","register"],setup(r,{emit:i}){const o=T(),s=_({props:{}}),n=v(()=>{var e;return((e=s.props)==null?void 0:e.fileType)===u.image?"\u56FE\u7247\u4E0A\u4F20":"\u6587\u4EF6\u4E0A\u4F20"}),[d,{closeModal:c}]=k(e=>m(this,null,function*(){var f;s.props=l(e)||{},[u.image,"img","picture"].includes((f=s.props)==null?void 0:f.fileType)?s.props.fileType=u.image:s.props.fileType=u.file,B(()=>o.value.addActionsListener())}));function t(){c()}function a(e){i("change",e),i("update:value",e)}return(e,f)=>(M(),w(l(y),g({onRegister:l(d),title:l(n),width:r.width,onOk:t},e.$attrs),{default:E(()=>[F(R,g({ref_key:"uploadRef",ref:o,value:r.value},s.props,{onChange:a}),null,16,["value"])]),_:1},16,["onRegister","title","width"]))}});export{U as _};
