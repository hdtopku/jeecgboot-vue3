var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,s)=>{for(var i in s||(s={}))o.call(s,i)&&r(e,i,s[i]);if(t)for(var i of t(s))a.call(s,i)&&r(e,i,s[i]);return e},i=(e,t,o)=>new Promise(((a,r)=>{var s=e=>{try{n(o.next(e))}catch(t){r(t)}},i=e=>{try{n(o.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);n((o=o.apply(e,t)).next())}));import{B as n}from"./BasicForm.fb9b9310.js";import"./helper.c50e6850.js";import{u as d}from"./useForm.5a9ed278.js";import"./JAddInput.2ba637e0.js";import{l as p,bj as l,F as m,o as u,$ as c,H as f,L as b,t as j,v as y,V as v,z as h,y as x,aW as g,C as O}from"./index.b2c24a42.js";import{s as w}from"./depart.api.2d5bb309.js";import{u as C,o as F}from"./depart.data.ff6c9320.js";import"./uniqBy.be1d69f1.js";import"./index.12c6f6d1.js";import"./BasicModal.c95a44ff.js";import"./useWindowSizeFn.6c0c5931.js";import"./useFormItem.9110ec70.js";import"./functional.d6fe070d.js";import"./download.0dd0b191.js";import"./base64Conver.030fa32c.js";import"./index.de682914.js";import"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./JUpload.152dd3a7.js";import"./api.e26748d3.js";import"./index.be1c9e2b.js";import"./props.4a0f18d3.js";import"./index.27a29657.js";import"./bem.a0439036.js";import"./props.d4c4f199.js";import"./useContextMenu.0c34a59e.js";import"./index.9872fa51.js";import"./onMountedOrActivated.bfdd028b.js";import"./index.d802f44f.js";import"./htmlmixed.8e042aa6.js";import"./vue.bbfa1b85.js";/* empty css             */const P={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},I={class:"j-box-bottom-button-float"},B=O("重置"),D=O("保存"),_=p({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(e,{emit:t}){const o=e;l("prefixCls");const a=m(!1),r=m(!0),p=m({}),[O,{resetFields:_,setFieldsValue:A,validate:S,updateSchema:T}]=d({schemas:C().basicFormSchema,showActionButtonGroup:!1}),M=u((()=>{var e;return(null==(e=null==o?void 0:o.data)?void 0:e.parentId)?F.child:F.root}));function k(){return i(this,null,(function*(){yield _(),yield A(s({},p.value))}))}function z(){return i(this,null,(function*(){try{a.value=!0;let e=yield S();e=Object.assign({},p.value,e),yield w(e,r.value),t("success"),Object.assign(p.value,e)}finally{a.value=!1}}))}return c((()=>{T([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),f((()=>o.data),(()=>i(this,null,(function*(){let e=b(o.data);"object"!=typeof e&&(e={}),p.value=e,yield _(),yield A(s({},e))}))),{deep:!0,immediate:!0}),f((()=>o.rootTreeData),(()=>i(this,null,(function*(){T([{field:"parentId",componentProps:{treeData:o.rootTreeData}}])}))),{deep:!0,immediate:!0}),f(M,(()=>i(this,null,(function*(){T([{field:"orgCategory",componentProps:{options:M.value}}])}))),{immediate:!0})})),(e,t)=>{const o=j("a-button"),r=j("a-spin");return y(),v(r,{spinning:a.value},{default:h((()=>[x(b(n),{onRegister:b(O)},null,8,["onRegister"]),g("div",P,[g("div",I,[x(o,{preIcon:"ant-design:sync-outlined",onClick:k},{default:h((()=>[B])),_:1}),x(o,{type:"primary",preIcon:"ant-design:save-filled",onClick:z},{default:h((()=>[D])),_:1})])])])),_:1},8,["spinning"])}}});export{_ as default};
