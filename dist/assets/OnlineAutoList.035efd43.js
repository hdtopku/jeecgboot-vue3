import{B as e}from"./BasicTable.fa29c153.js";import{T as o}from"./helper.c50e6850.js";import"./TableImg.2942a3dc.js";import{f0 as t,H as n,t as i,v as a,x as l,y as r,V as s,z as d,C as c,W as p,ax as u,bc as m,D as g,R as f,S as b,aW as h,E as j,bl as y,bm as C,dE as S,B as I,ep as w,fh as M,ad as x,u as T}from"./index.b2c24a42.js";import k from"./OnlineAutoModal.5865e0b1.js";import B from"./OnlineCustomModal.8d181193.js";import F from"./OnlineDetailModal.3680f235.js";import{J as R}from"./JImportModal.a409b60a.js";import{u as D,a as O}from"./useListButton.697d3f90.js";import{a as v,c as L,j as A,g as _}from"./useAutoForm.e6212621.js";import E from"./OnlineQueryForm.65b6622d.js";import P from"./OnlineSuperQuery.2687062f.js";import"./index.12c6f6d1.js";import"./BasicForm.fb9b9310.js";import"./JAddInput.2ba637e0.js";import"./JUpload.152dd3a7.js";import"./JUploadModal.aa941b98.js";import"./pick.dbff1c58.js";import"./omit.d6518a29.js";import"./OnlineSelectCascade.3bb41065.js";import"./Area.f37a4b8c.js";import"./functional.d6fe070d.js";import"./LinkTableListPiece.3767b554.js";import"./_flatRest.ff1861ce.js";import"./isArray.40a4ed15.js";import"./toString.cf909882.js";import"./_arrayPush.8821345e.js";import"./_baseClone.a8082016.js";import"./CommentPanel.6db0f329.js";import"./DetailForm.01e5f1c6.js";import"./api.e26748d3.js";import"./OnlineSuperQueryValComponent.vue_vue_type_script_lang.aabfcab9.js";import"./useForm.5a9ed278.js";import"./index.7e26b7de.js";import"./useContentHeight.aae13605.js";import"./onMountedOrActivated.bfdd028b.js";import"./useWindowSizeFn.6c0c5931.js";import"./useContentViewHeight.879059d9.js";import"./usePageContext.174066c3.js";import"./BasicModal.c95a44ff.js";import"./RedoOutlined.4dd49301.js";import"./useFormItem.9110ec70.js";import"./download.0dd0b191.js";import"./base64Conver.030fa32c.js";import"./index.de682914.js";import"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./index.be1c9e2b.js";import"./OnlineForm.2ee26b50.js";import"./FormSchemaFactory.c7393278.js";import"./uniqBy.be1d69f1.js";import"./props.4a0f18d3.js";import"./index.27a29657.js";import"./bem.a0439036.js";import"./props.d4c4f199.js";import"./useContextMenu.0c34a59e.js";import"./index.9872fa51.js";import"./index.d802f44f.js";import"./htmlmixed.8e042aa6.js";import"./vue.bbfa1b85.js";/* empty css             */import"./depart.api.2d5bb309.js";import"./user.api.ceae0e75.js";import"./_commonjsHelpers.7ef9cff5.js";import"./customExpression.58041e91.js";import"./useListPage.ddd6479e.js";import"./useTable.fb0dd6ed.js";import"./JModalTip.ebca1866.js";import"./_baseSlice.23bb44df.js";import"./OnlineFormDetail.7fc329f7.js";import"./OnlineSubFormDetail.458d4834.js";var Q=(e,o,t)=>new Promise(((n,i)=>{var a=e=>{try{r(t.next(e))}catch(o){i(o)}},l=e=>{try{r(t.throw(e))}catch(o){i(o)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,l);r((t=t.apply(e,o)).next())}));const H=Symbol();function J(e){const o=M();o.on("openpopmodal",(function(o){e(o)})),x({onlineEmitter:o},H,{readonly:!1,native:!0})}const q={class:"p-2"},z={key:0,style:{"font-size":"12px","font-style":"italic"}},U={key:0,style:{"font-size":"12px","font-style":"italic"}},V=["src","onClick"],W=["innerHTML"],K=["title"];var N=t({name:"DefaultOnlineList",components:{BasicTable:e,TableAction:o,OnlineAutoModal:k,JImportModal:R,OnlineQueryForm:E,OnlineSuperQuery:P,OnlineCustomModal:B,OnlineDetailModal:F,OnlinePopModal:v},setup(){const{createMessage:e}=T(),{ID:o,onlineTableContext:t,onlineQueryFormOuter:i,loading:a,reload:l,dataSource:r,pagination:s,handleSpecialConfig:d,getColumnList:c,handleChangeInTable:p,loadData:u,superQueryButtonRef:m,superQueryStatus:g,handleSuperQuery:f,onlineExtConfigJson:b,handleFormConfig:h,registerCustomModal:j,tableReloading:y}=D();if(!o.value)return void e.warning("地址错误, 配置ID不存在!");let{initCgEnhanceJs:C}=L(t);const{buttonSwitch:S,cgLinkButtonList:I,cgTopButtonList:w,importUrl:M,registerModal:x,handleAdd:k,handleEdit:B,handleBatchDelete:F,registerImportModal:R,onImportExcel:v,onExportExcel:E,cgButtonJsHandler:P,cgButtonActionHandler:H,cgButtonLinkHandler:q,handleSubmitFlow:z,getDropDownActions:U,getActions:V,initButtonList:W,initButtonSwitch:K,registerDetailModal:N,registerBpmModal:G}=O(t,b),{columns:X,actionColumn:Y,selectedKeys:Z,rowSelection:$,enableScrollBar:ee,tableScroll:oe,downloadRowFile:te,getImgView:ne,getPcaText:ie,getFormatDate:ae,handleColumnResult:le,hrefComponent:re,viewOnlineCellImage:se,hrefMainTableId:de,registerOnlineHrefModal:ce,registerPopModal:pe,openPopModal:ue,onlinePopModalRef:me,popTableId:ge}=A(t,b);n(o,(()=>{!function(){Q(this,null,(function*(){a.value=!0,function(e){let o=C(e.enhanceJs);t.EnhanceJS=o,W(e.cgButtonList),K(e.hideColumns),le(e),d(e)}(yield c()),yield u(),a.value=!1,t.execButtonEnhance("setup")}))}()}),{immediate:!0}),J((function(e){ge.value=e.id;let o={title:e.describe};e.record&&e.record.id&&(o.record=e.record,o.isUpdate=!0),ue(!0,o)}));return{ID:o,onlineQueryFormOuter:i,queryWithCondition:function(e){t.queryParam=e,l()},onQueryFormLoaded:function(e){return Q(this,null,(function*(){yield _(m),m.value.init(e)}))},reload:l,superQueryButtonRef:m,superQueryStatus:g,handleSuperQuery:f,loading:a,columns:X,dataSource:r,pagination:s,actionColumn:Y,rowSelection:$,selectedKeys:Z,tableScroll:oe,enableScrollBar:ee,handleChangeInTable:p,buttonSwitch:S,handleAdd:k,handleEdit:B,onImportExcel:v,onExportExcel:E,cgTopButtonList:w,cgLinkButtonList:I,cgButtonJsHandler:P,cgButtonActionHandler:H,cgButtonLinkHandler:q,handleBatchDelete:F,downloadRowFile:te,getImgView:ne,getPcaText:ie,getFormatDate:ae,getActions:V,getDropDownActions:U,registerModal:x,registerCustomModal:j,registerImportModal:R,registerDetailModal:N,importUrl:M,handleFormConfig:h,onlinePopModalRef:me,tableReloading:y,handleSubmitFlow:z,hrefComponent:re,viewOnlineCellImage:se,hrefMainTableId:de,onlineExtConfigJson:b,registerOnlineHrefModal:ce,registerPopModal:pe,popTableId:ge,registerBpmModal:G}}},[["render",function(e,o,t,n,M,x){const T=i("online-query-form"),k=i("a-button"),B=i("online-super-query"),F=i("TableAction"),R=i("BasicTable"),D=i("OnlineAutoModal"),O=i("online-detail-modal"),v=i("JImportModal"),L=i("a-modal"),A=i("online-custom-modal"),_=i("online-pop-modal");return a(),l("div",q,[r(T,{ref:"onlineQueryFormOuter",id:e.ID,onSearch:e.queryWithCondition,onLoaded:e.onQueryFormLoaded},null,8,["id","onSearch","onLoaded"]),e.tableReloading?p("",!0):(a(),s(R,{key:0,ref:"onlineTable",rowKey:"jeecg_row_key",canResize:!0,bordered:!0,showIndexColumn:!1,loading:e.loading,columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,rowSelection:e.rowSelection,actionColumn:e.actionColumn,showTableSetting:!0,clickToRowSelect:!1,scroll:e.tableScroll,onTableRedo:e.reload,class:j({"j-table-force-nowrap":e.enableScrollBar}),onChange:e.handleChangeInTable},{tableTitle:d((()=>[e.buttonSwitch.add?(a(),s(k,{key:0,preIcon:"ant-design:plus-outlined",type:"primary",onClick:e.handleAdd},{default:d((()=>[c("新增")])),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.import?(a(),s(k,{key:1,preIcon:"ant-design:import-outlined",type:"primary",onClick:e.onImportExcel},{default:d((()=>[c("导入")])),_:1},8,["onClick"])):p("",!0),e.buttonSwitch.export?(a(),s(k,{key:2,preIcon:"ant-design:export-outlined",type:"primary",onClick:e.onExportExcel},{default:d((()=>[c(" 导出")])),_:1},8,["onClick"])):p("",!0),e.cgTopButtonList&&e.cgTopButtonList.length>0?(a(!0),l(u,{key:3},m(e.cgTopButtonList,((o,t)=>(a(),l(u,null,["js"==o.optType?(a(),s(k,{key:"cgbtn"+t,onClick:t=>e.cgButtonJsHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:d((()=>[c(g(o.buttonName),1)])),_:2},1032,["onClick","preIcon"])):"action"==o.optType?(a(),s(k,{key:"cgbtn"+t,onClick:t=>e.cgButtonActionHandler(o.buttonCode),type:"primary",preIcon:o.buttonIcon?"ant-design:"+o.buttonIcon:""},{default:d((()=>[c(g(o.buttonName),1)])),_:2},1032,["onClick","preIcon"])):p("",!0)],64)))),256)):p("",!0),e.buttonSwitch.batch_delete?f((a(),s(k,{key:4,preIcon:"ant-design:delete-outlined",onClick:e.handleBatchDelete},{default:d((()=>[c(" 批量删除")])),_:1},8,["onClick"])),[[b,e.selectedKeys.length>0]]):p("",!0),e.buttonSwitch.super_query?(a(),s(B,{key:5,ref:"superQueryButtonRef",status:e.superQueryStatus,onSearch:e.handleSuperQuery},null,8,["status","onSearch"])):p("",!0)])),fileSlot:d((({text:o})=>[o?(a(),s(k,{key:1,ghost:!0,type:"primary",preIcon:"ant-design:download",size:"small",onClick:t=>e.downloadRowFile(o)},{default:d((()=>[c(" 下载 ")])),_:2},1032,["onClick"])):(a(),l("span",z,"无文件"))])),imgSlot:d((({text:o})=>[o?(a(),l("img",{key:1,src:e.getImgView(o),alt:"图片不存在",class:"online-cell-image",onClick:t=>e.viewOnlineCellImage(o)},null,8,V)):(a(),l("span",U,"无图片"))])),htmlSlot:d((({text:e})=>[h("div",{innerHTML:e},null,8,W)])),pcaSlot:d((({text:o})=>[h("div",{title:e.getPcaText(o)},g(e.getPcaText(o)),9,K)])),dateSlot:d((({text:o})=>[h("span",null,g(e.getFormatDate(o)),1)])),action:d((({record:o})=>[r(F,{actions:e.getActions(o),dropDownActions:e.getDropDownActions(o)},null,8,["actions","dropDownActions"])])),_:1},8,["loading","columns","dataSource","pagination","rowSelection","actionColumn","scroll","onTableRedo","class","onChange"])),r(D,{id:e.ID,onRegister:e.registerModal,onSuccess:e.reload,onFormConfig:e.handleFormConfig},null,8,["id","onRegister","onSuccess","onFormConfig"]),r(O,{id:e.ID,onRegister:e.registerDetailModal},null,8,["id","onRegister"]),r(v,{onRegister:e.registerImportModal,url:e.importUrl(),onOk:e.reload,online:""},null,8,["onRegister","url","onOk"]),r(L,I(e.hrefComponent.model,w(e.hrefComponent.on)),{default:d((()=>[(a(),s(S(e.hrefComponent.is),y(C(e.hrefComponent.params)),null,16))])),_:1},16),r(A,{onRegister:e.registerCustomModal,onSuccess:e.reload},null,8,["onRegister","onSuccess"]),r(O,{id:e.hrefMainTableId,onRegister:e.registerOnlineHrefModal,defaultFullscreen:!1},null,8,["id","onRegister"]),r(_,{ref:"onlinePopModalRef",id:e.popTableId,onRegister:e.registerPopModal,onSuccess:e.reload,request:"",topTip:""},null,8,["id","onRegister","onSuccess"])])}]]);export{N as default};
