import e from"./LeftRole.6cacfae4.js";import t from"./LeftDepart.4171220e.js";import a from"./LeftUser.bb4480f1.js";import r from"./AuthFieldTree.b1258d9f.js";import o from"./AuthButtonTree.533da554.js";import l from"./AuthDataTree.f13d2192.js";import{B as n}from"./index.12c6f6d1.js";import{l as d,F as i,o as u,bH as s,f0 as f,Q as c,t as p,v as m,V as b,z as j,y as v,x as h,ax as y,W as g}from"./index.b2c24a42.js";import"./BasicTable.fa29c153.js";import"./helper.c50e6850.js";import"./TableImg.2942a3dc.js";import"./api.e26748d3.js";import"./useListPage.ddd6479e.js";import"./useTable.fb0dd6ed.js";import"./BasicForm.fb9b9310.js";import"./uniqBy.be1d69f1.js";import"./BasicModal.c95a44ff.js";import"./useWindowSizeFn.6c0c5931.js";import"./useForm.5a9ed278.js";import"./JAddInput.2ba637e0.js";import"./useFormItem.9110ec70.js";import"./props.4a0f18d3.js";import"./index.27a29657.js";import"./bem.a0439036.js";import"./props.d4c4f199.js";import"./useContextMenu.0c34a59e.js";import"./index.9872fa51.js";import"./onMountedOrActivated.bfdd028b.js";import"./index.d802f44f.js";import"./htmlmixed.8e042aa6.js";import"./vue.bbfa1b85.js";/* empty css             */import"./depart.api.2d5bb309.js";import"./index.7e26b7de.js";import"./useContentHeight.aae13605.js";import"./useContentViewHeight.879059d9.js";import"./usePageContext.174066c3.js";import"./RedoOutlined.4dd49301.js";import"./functional.d6fe070d.js";import"./download.0dd0b191.js";import"./base64Conver.030fa32c.js";import"./index.de682914.js";import"./index.fb0e3f73.js";import"./useCountdown.cfa41944.js";import"./JUpload.152dd3a7.js";import"./index.be1c9e2b.js";import"./auth.api.28864c02.js";import"./auth.data.55954be6.js";var R=Object.defineProperty,S=Object.defineProperties,C=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,M=(e,t,a)=>new Promise(((r,o)=>{var l=e=>{try{d(a.next(e))}catch(t){o(t)}},n=e=>{try{d(a.throw(e))}catch(t){o(t)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);d((a=a.apply(e,t)).next())}));var _=f(d({name:"AuthSetterModal",components:{BasicModal:n,LeftRole:e,LeftDepart:t,LeftUser:a,AuthFieldTree:r,AuthButtonTree:o,AuthDataTree:l},props:{tableType:{type:Number,default:1}},setup(e){const t=i(""),a=i(!1),r=i("field"),o=i("role"),l={fieldRef:i(),buttonRef:i(),dataRef:i(),roleRef:i(),userRef:i(),departRef:i()},n=i(""),d=u((()=>1==e.tableType||2==e.tableType)),[f,{closeModal:p}]=s((e=>{r.value="field",t.value!=e.cgformId&&(t.value=e.cgformId,function(){M(this,null,(function*(){yield c(),j(),m().clear()}))}())}));function m(e=r.value){var t;return null==(t=l[e+"Ref"])?void 0:t.value}function b(){"role"==o.value?(l.departRef.value.clearSelected(),l.userRef.value.clearSelected()):"depart"==o.value?(l.roleRef.value.clearSelected(),l.userRef.value.clearSelected()):"user"==o.value&&(l.departRef.value.clearSelected(),l.roleRef.value.clearSelected())}function j(){"role"==o.value?l.roleRef.value.clearSelected():"depart"==o.value?l.departRef.value.clearSelected():"user"==o.value&&l.userRef.value.clearSelected(),m().clearChecked()}function v(e){return M(this,null,(function*(){yield c(),n.value&&m(e).loadChecked(n.value,o.value)}))}return h=((e,t)=>{for(var a in t||(t={}))A.call(t,a)&&I(e,a,t[a]);if(x)for(var a of x(t))T.call(t,a)&&I(e,a,t[a]);return e})({},l),S(h,C({cgformId:t,loading:a,activeKey:r,hasDataAuth:d,authMode:o,onAuthModeChange:function(){j()},onAuthTypeChange:v,closeModal:p,onSelectRole:function(e){n.value=e,v(r.value),b()},onSelectDepart:function(e){n.value=e,v(r.value),b()},onSelectUser:function(e){n.value=e,v(r.value),b()},registerModal:f}));var h}}),[["render",function(e,t,a,r,o,l){const n=p("LeftRole"),d=p("a-tab-pane"),i=p("LeftDepart"),u=p("LeftUser"),s=p("a-tabs"),f=p("a-col"),c=p("AuthFieldTree"),R=p("AuthButtonTree"),S=p("AuthDataTree"),C=p("a-row"),x=p("a-spin"),A=p("BasicModal");return m(),b(A,{title:"Online权限授权",width:900,maskClosable:!1,defaultFullscreen:"",okButtonProps:{style:{display:"none"}},cancelText:"关闭",onCancel:e.closeModal,onRegister:e.registerModal},{default:j((()=>[v(x,{spinning:e.loading},{default:j((()=>[v(C,null,{default:j((()=>[v(f,{span:12},{default:j((()=>[v(s,{activeKey:e.authMode,"onUpdate:activeKey":t[0]||(t[0]=t=>e.authMode=t),onChange:e.onAuthModeChange},{default:j((()=>[v(d,{tab:"角色授权",key:"role",forceRender:""},{default:j((()=>[v(n,{ref:"roleRef",onSelect:e.onSelectRole},null,8,["onSelect"])])),_:1}),v(d,{tab:"部门授权",key:"depart",forceRender:""},{default:j((()=>[v(i,{ref:"departRef",onSelect:e.onSelectDepart},null,8,["onSelect"])])),_:1}),v(d,{tab:"人员授权",key:"user",forceRender:""},{default:j((()=>[v(u,{ref:"userRef",onSelect:e.onSelectUser},null,8,["onSelect"])])),_:1})])),_:1},8,["activeKey","onChange"])])),_:1}),v(f,{span:1}),v(f,{span:11},{default:j((()=>[v(s,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=t=>e.activeKey=t),onChange:e.onAuthTypeChange},{default:j((()=>[v(d,{tab:"字段权限",key:"field",forceRender:""},{default:j((()=>[v(c,{ref:"fieldRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),e.hasDataAuth?(m(),h(y,{key:0},[v(d,{tab:"按钮权限",key:"button",forceRender:""},{default:j((()=>[v(R,{ref:"buttonRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1}),v(d,{tab:"数据权限",key:"data",forceRender:""},{default:j((()=>[v(S,{ref:"dataRef",cgformId:e.cgformId},null,8,["cgformId"])])),_:1})],64)):g("",!0)])),_:1},8,["activeKey","onChange"])])),_:1})])),_:1})])),_:1},8,["spinning"])])),_:1},8,["onCancel","onRegister"])}]]);export{_ as default};
