var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,s)=>{for(var i in s||(s={}))o.call(s,i)&&r(e,i,s[i]);if(t)for(var i of t(s))a.call(s,i)&&r(e,i,s[i]);return e},i=(e,t,o)=>new Promise(((a,r)=>{var s=e=>{try{n(o.next(e))}catch(t){r(t)}},i=e=>{try{n(o.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);n((o=o.apply(e,t)).next())}));import{B as n}from"./BasicForm.5f094c03.js";import"./helper.7e5efd4b.js";import{u as p}from"./useForm.18cf269c.js";import"./JAddInput.a2bd8bfb.js";import{l as d,bj as l,F as c,o as m,$ as u,H as f,L as b,t as j,v as y,V as v,z as h,y as x,aW as g,C as O}from"./index.26a57b91.js";import{s as w}from"./depart.api.c295d6d2.js";import{u as C,o as F}from"./depart.data.ff6c9320.js";import"./uniqBy.006870c7.js";import"./index.934459b9.js";import"./BasicModal.e5e1fb3e.js";import"./useWindowSizeFn.9ed8a10e.js";import"./useFormItem.efca0b58.js";import"./functional.c7818516.js";import"./download.4b98da42.js";import"./base64Conver.030fa32c.js";import"./index.608c7cf2.js";import"./index.b94b363f.js";import"./useCountdown.e60db803.js";import"./JUpload.7c63ef7b.js";import"./api.54a4ca84.js";import"./index.9c299300.js";import"./props.eaaadc91.js";import"./index.3e7bd500.js";import"./bem.73404aba.js";import"./props.d9d42440.js";import"./useContextMenu.7af190c4.js";import"./index.0d2a049f.js";import"./onMountedOrActivated.d719a17d.js";import"./index.6fce0e9a.js";import"./htmlmixed.fbaa0b47.js";import"./vue.38e13cef.js";/* empty css             */const P={class:"j-box-bottom-button offset-20",style:{"margin-top":"30px"}},I={class:"j-box-bottom-button-float"},B=O("重置"),D=O("保存"),_=d({__name:"DepartFormTab",props:{data:{type:Object,default:()=>({})},rootTreeData:{type:Array,default:()=>[]}},emits:["success"],setup(e,{emit:t}){const o=e;l("prefixCls");const a=c(!1),r=c(!0),d=c({}),[O,{resetFields:_,setFieldsValue:A,validate:S,updateSchema:T}]=p({schemas:C().basicFormSchema,showActionButtonGroup:!1}),M=m((()=>{var e;return(null==(e=null==o?void 0:o.data)?void 0:e.parentId)?F.child:F.root}));function k(){return i(this,null,(function*(){yield _(),yield A(s({},d.value))}))}function z(){return i(this,null,(function*(){try{a.value=!0;let e=yield S();e=Object.assign({},d.value,e),yield w(e,r.value),t("success"),Object.assign(d.value,e)}finally{a.value=!1}}))}return u((()=>{T([{field:"parentId",componentProps:{disabled:!0}},{field:"orgCode",componentProps:{disabled:!0}}]),f((()=>o.data),(()=>i(this,null,(function*(){let e=b(o.data);"object"!=typeof e&&(e={}),d.value=e,yield _(),yield A(s({},e))}))),{deep:!0,immediate:!0}),f((()=>o.rootTreeData),(()=>i(this,null,(function*(){T([{field:"parentId",componentProps:{treeData:o.rootTreeData}}])}))),{deep:!0,immediate:!0}),f(M,(()=>i(this,null,(function*(){T([{field:"orgCategory",componentProps:{options:M.value}}])}))),{immediate:!0})})),(e,t)=>{const o=j("a-button"),r=j("a-spin");return y(),v(r,{spinning:a.value},{default:h((()=>[x(b(n),{onRegister:b(O)},null,8,["onRegister"]),g("div",P,[g("div",I,[x(o,{preIcon:"ant-design:sync-outlined",onClick:k},{default:h((()=>[B])),_:1}),x(o,{type:"primary",preIcon:"ant-design:save-filled",onClick:z},{default:h((()=>[D])),_:1})])])])),_:1},8,["spinning"])}}});export{_ as default};
